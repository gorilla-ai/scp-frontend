//
//     KeyLines v5.10.2-53142 sdk
//     Licensed to Gorilla Technology Inc. for CDR Link Analysis 
//
//     Copyright © 2011-2020 Cambridge Intelligence Limited.
//     All rights reserved.
//
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).KeyLines=t()}(this,(function(){"use strict";var e=null;function t(e,t,n){if(e){e.parentNode&&e.parentNode.removeChild(e);t&&t.appendChild(e);n()}}function n(e,t){if(e&&"object"==typeof e)if(Array.isArray(e))e.forEach(t);else for(var n=Object.keys(e),r=n.length,i=0;i<r;i++){var o=n[i];t(e[o],o)}}function r(e){return"rtl"===window.getComputedStyle(e).direction}function i(e){if(null===e)return null;switch(typeof e){case"object":if(Array.isArray(e))return e.slice();if(f(e))return u(e);if(e instanceof Date)return new Date(e.getTime());var t={};n(e,(function(e,n){t[n]=e}));return t;case"boolean":case"string":case"number":return e;default:return}}function o(e){return e*(Math.PI/180)}function a(e,t,r){var i,o=t,s=r;if(2===arguments.length&&"string"==typeof o){s=o;o=!0}if(null===e)return null;function l(e,t){o&&"_"===t.charAt(0)||(i[t]=a(e,o&&t!==s))}if("object"==typeof e){if(Array.isArray(e)){for(var c=[],d=0;d<e.length;d++)c.push(a(e[d],o,s));return c}if(f(e))return u(e,!0);if(e instanceof Date)return new Date(e.getTime());i={};n(e,l);return i}return"boolean"==typeof e||"string"==typeof e||"number"==typeof e?e:void 0}function u(e,t){void 0===t&&(t=!1);var n,r=Object.getPrototypeOf(e).constructor;if(t){n=new r;a(Array.from(e)).forEach((function(e){n.add?n.add(e):n.set(e[0],e[1])}))}else n=new r(e);return n}function s(){return Object.isPrototypeOf&&Array.from&&"undefined"!=typeof Set&&"undefined"!=typeof Map}function f(t){null==e&&s&&(e=s());return!!e&&(Object.prototype.isPrototypeOf.call(Map.prototype,t)||Object.prototype.isPrototypeOf.call(Set.prototype,t))}var l=1e3/60,c="undefined"!=typeof requestAnimationFrame;function d(e){return c?requestAnimationFrame(e):setTimeout(e,l)}function h(e){c?cancelAnimationFrame(e):clearTimeout(e)}function v(e,t){void 0===t&&(t=0);return A(e)?setTimeout(e,t):null}function g(e,t){if(A(e))return setInterval(e,t)}function p(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];KeyLines._loggerDisabled||console.log([].slice.call(e).join(" "))}var m=Number.isNaN||y;function y(e){return e!=e}var b=Number.isFinite||x;function x(e){return"number"==typeof e&&isFinite(e)}function w(e){return e>>>0===parseFloat(e)}function A(e){return"function"==typeof e}function M(e,t){var n=t||"";return n.slice(Math.max(n.length-5,0))==="."+e}function I(e){return!("object"!=typeof e||e instanceof Date||Array.isArray(e)||D(e))}function E(e){return"[object Date]"===Object.prototype.toString.call(e)&&!m(e.getTime())}function k(e,t){return void 0===e&&void 0===t||(!(!m(e)||!m(t)||"number"!=typeof e||"number"!=typeof t)||(Array.isArray(e)&&Array.isArray(t)?e.length===t.length&&e.every((function(e,n){return C(e,t[n])})):e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():e===t))}function C(e,t){return I(e)&&I(t)?Object.keys(t).every((function(n){return C(e[n],t[n])})):k(e,t)}function S(e,t){A(e)&&v((function(){e(t)}))}function T(e,t){A(e)&&e(t)}var R=Number.isInteger||B;function B(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}function G(e,t){try{t(null,e())}catch(e){t(e)}}function O(e){if("object"==typeof e&&e&&!Array.isArray(e)){var t=e;if(t.items)return t.items}return e}function Z(e){return Array.isArray(e)?e:[e]}function Y(e,t){for(var n=[],r=Z(e),i=0;i<r.length;i++)t[r[i]]&&n.push(r[i]);return n}function F(e,t){var r=a(e)||{};if("string"==typeof e)return e;n(t,(function(e,t){P(r,t)&&!D(r[t])||(r[t]=e)}));return r}function z(e){return void 0!==e}function P(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function D(e){return null==e}function V(e){return!("number"!=typeof e||!m(e))||null==e}function W(){return"✄"}function X(e){return e.lastIndexOf(W())}function U(e){if(D(e))return null;var t=""+e,n=X(t);-1!==n&&(t=t.substring(0,n));return t}function N(e){if(D(e))return null;var t=""+e,n=X(t);return-1!==n?t.substring(n+1):null}function j(e,t){return e.indexOf(t)>-1}var K=Object.values||H;function H(e){return Object.keys(e).map((function(t){return e[t]}))}function _(e){return Object.keys(e)}function J(e){return Object.keys(e).length>0}function Q(e){return Z(e).reduce((function(e,t){e[U(t)]=!0;return e}),{})}function q(e){return Z(e).reduce((function(e,t){e.add(U(t));return e}),new Set)}function $(e){var t={};e.forEach((function(e){t[e.id]=e}));return t}function ee(e){var t={};e.forEach((function(e){t[e]=e}));return t}function te(e){return e.map((function(e){return e.id}))}function ne(e,t){if(e){n(t,(function(t,n){e[n]=t}));return e}return t}var re=Number.assign||ie;function ie(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(e),i=function(e){var n=t[e];null!=n&&Object.keys(n).forEach((function(e){r[e]=n[e]}))},o=0;o<t.length;o++)i(o);return r}function oe(e,t){return Math.max(1e-4,Math.sqrt(e*e+t*t))}function ue(e,t){var n=e,r=t,i=oe(n,r);return[n/=i,r/=i]}function se(e,t,n,r){var i=ue(e,t),o=ue(n,r);return i[0]*o[0]+i[1]*o[1]}function fe(){}function le(e,t){var n,r,i;return function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];var u=Date.now();i=o;function s(){r=Date.now();e.apply(void 0,i)}if(!n)if(!r||u-r>=t)s();else{n=v((function(){n=null;s()}),t-(u-r))}}}function ce(e){void 0===e&&(e=null);var t=e,n=48271,r=2147483647,i=r/n,o=r%n,a=1/r;return{setSeed:function(e){t=e},next:function(){if(t){var e=n*(t%i)-o*(t/i);return(t=e>0?e:e+r)*a}return Math.random()}}}var de,he={};function ve(e){if(!he[e]){var t=e;e.match(/'/)&&(t=e.replace(/'/g,"\\'"));t.match(/\s/)&&(t="'"+t+"'");he[e]=t}return he[e]}function ge(e,t,n){void 0===n&&(n=function(e){return e});var r=new Map,i=[],o=[];e.forEach((function(e){var t=n(e);t&&r.set(t,{item:e,inDegree:0})}));e.forEach((function(e){var i=t(e),o=n(e);i&&i.forEach((function(e){r.has(e)&&e!==o&&r.get(e).inDegree++}))}));e.forEach((function(e){var t=n(e);t&&0===r.get(t).inDegree&&o.push(e)}));for(;o.length>0;){var a=o.shift();i.push(a);var u=t(a);if(u)for(var s=0;s<u.length;s++){var f=r.get(u[s]);f&&1==f.inDegree--&&o.push(f.item)}}if(i.length<r.size)throw new Error("Cycle detected");return i}function pe(e){return I(e.pos)&&!D(e.pos.lat)&&!D(e.pos.lng)}function me(e,t){for(var n=e.split("."),r=t.split("."),i=0;i<n.length&&i<r.length;i++){var o=parseInt(n[i],10),a=parseInt(r[i],10);if(o!==a)return o-a}return n.length!==r.length?n.length-r.length:0}function ye(e){return 0===e?0:e<0?-1:1}function be(e){for(var t=0,n=e.length;t<n;t++){var r=e.charCodeAt(t);if(r>=1536&&(r<=1791||r>=64336&&r<=65023||r>=65136&&r<=65279||r>=1872&&r<=1919||r>=2208&&r<=2303))return!0}return!1}function xe(e){return Math.floor(e*(11/14))}function we(e){var t=e.charCodeAt(0);return t<=55295||t>=57344?t:1024*(t-55296)+(e.charCodeAt(1)-56320)+65536}function Ae(e){return[[169,169],[174,174],[8252,8252],[8265,8265],[8419,8419],[8482,8482],[8505,8505],[8596,8601],[8617,8618],[8986,8987],[9e3,9e3],[9096,9096],[9167,9167],[9193,9203],[9208,9210],[9410,9410],[9642,9643],[9654,9654],[9664,9664],[9723,9726],[9728,9733],[9735,9746],[9748,9861],[9872,9989],[9992,10002],[10004,10004],[10006,10006],[10013,10013],[10017,10017],[10024,10024],[10035,10036],[10052,10052],[10055,10055],[10060,10060],[10062,10062],[10067,10069],[10071,10071],[10083,10087],[10133,10135],[10145,10145],[10160,10160],[10175,10175],[10548,10549],[11013,11015],[11035,11036],[11088,11088],[11093,11093],[12336,12336],[12349,12349],[12951,12951],[12953,12953],[65039,65039],[126976,127231],[127245,127247],[127279,127279],[127340,127345],[127358,127359],[127374,127374],[127377,127386],[127405,127487],[127489,127503],[127514,127514],[127535,127535],[127538,127546],[127548,127551],[127561,128317],[128326,128591],[128640,128767],[128884,128895],[128981,129023],[129036,129039],[129096,129103],[129114,129119],[129160,129167],[129198,129279],[129292,129338],[129340,129349],[129351,131069],[917536,917631]].some((function(t){return e>=t[0]&&e<=t[1]}))}function Me(e){return Ie(e).some((function(e){return Ae(we(e))}))}function Ie(e){for(var t,n=0,r=e.length,i=[];n<r;++n){t=!1;var o=e.charCodeAt(n);if(o>=55296&&o<=56319&&n+1<r&&(o=e.charCodeAt(n+1))>=56320&&o<=57343){i.push(e.slice(n,n+2));++n;t=!0}t||i.push(e.charAt(n))}return i}function Ee(e){var t,n,r,i=[],o=e.length;for(t=0;t<o;t++){r=we(n=e[t]);if(0===t)i.push(n);else if(s(r))i[i.length-1]+=n;else if(65038===r||65039===r)i[i.length-1]+=n;else if(a(r))i[i.length-1]+=n;else if(u(r)&&2===i[i.length-1].length&&u(we(i[i.length-1])))i[i.length-1]+=n;else if(8205===r&&Me(i[i.length-1])&&t<o-1&&Ae(we(e[t+1]))){i[i.length-1]+=n;i[i.length-1]+=e[++t]}else r>=917536&&r<=917631?i[i.length-1]+=n:i.push(n)}function a(e){return e>=127995&&e<=127999}function u(e){return e>=127462&&e<=127487}function s(e){return e>=768&&e<=879||e>=8400&&e<=8447}return i}!function(e){e[e.Neutral=0]="Neutral";e[e.Ltr=1]="Ltr";e[e.Rtl=2]="Rtl"}(de||(de={}));var ke,Ce={};!function(e){e[e.L=0]="L";e[e.R=1]="R";e[e.EN=2]="EN";e[e.AN=3]="AN";e[e.ON=4]="ON";e[e.B=5]="B";e[e.S=6]="S";e[e.AL=7]="AL";e[e.WS=8]="WS";e[e.CS=9]="CS";e[e.ES=10]="ES";e[e.ET=11]="ET";e[e.NSM=12]="NSM";e[e.LRE=13]="LRE";e[e.RLE=14]="RLE";e[e.PDF=15]="PDF";e[e.LRO=16]="LRO";e[e.RLO=17]="RLO";e[e.BN=18]="BN"}(ke||(ke={}));var Se,Te=ke.L,Re=ke.R,Le=ke.EN,Be=ke.AN,Ge=ke.ON,Oe=ke.B,Ze=ke.S,Ye=ke.AL,Fe=ke.WS,ze=ke.CS,Pe=ke.ES,De=ke.ET,Ve=ke.NSM,We=ke.LRE,Xe=ke.RLE,Ue=ke.PDF,Ne=ke.LRO,je=ke.RLO,Ke=ke.BN;!function(e){e[e.D=2]="D";e[e.C=3]="C";e[e.U=4]="U";e[e.T=5]="T"}(Se||(Se={}));var He=Se.D,_e=Se.T,Je=[9,Ke,10,Ze,11,Oe,12,Ze,13,Fe,14,Oe,28,Ke,31,Oe,32,Ze,33,Fe,35,Ge,38,De,43,Ge,44,Pe,45,ze,46,Pe,48,ze,58,Le,59,ze,65,Ge,91,Te,97,Ge,123,Te,127,Ge,133,Ke,134,Oe,160,Ke,161,ze,162,Ge,166,De,170,Ge,171,Te,173,Ge,174,Ke,176,Ge,178,De,180,Le,181,Ge,182,Te,185,Ge,186,Le,187,Te,192,Ge,215,Te,216,Ge,247,Te,248,Ge,697,Te,699,Ge,706,Te,720,Ge,722,Te,736,Ge,741,Te,750,Ge,751,Te,768,Ge,880,Ve,884,Te,886,Ge,894,Te,895,Ge,900,Te,902,Ge,903,Te,904,Ge,1014,Te,1015,Ge,1155,Te,1162,Ve,1418,Te,1423,Ge,1425,De,1470,Ve,1471,Re,1472,Ve,1473,Re,1475,Ve,1476,Re,1478,Ve,1479,Re,1488,Ve,1536,Re,1542,Be,1544,Ge,1545,Ye,1547,De,1548,Ye,1549,ze,1550,Ye,1552,Ge,1563,Ve,1611,Ye,1632,Ve,1642,Be,1643,De,1645,Be,1648,Ye,1649,Ve,1750,Ye,1757,Ve,1758,Be,1759,Ge,1765,Ve,1767,Ye,1769,Ve,1770,Ge,1774,Ve,1776,Ye,1786,Le,1809,Ye,1810,Ve,1840,Ye,1869,Ve,1958,Ye,1969,Ve,1984,Ye,2027,Re,2036,Ve,2038,Re,2042,Ge,2070,Re,2074,Ve,2075,Re,2084,Ve,2085,Re,2088,Ve,2089,Re,2096,Ve,2137,Re,2142,Ve,2208,Re,2260,Ye,2274,Ve,2275,Be,2307,Ve,2362,Te,2363,Ve,2364,Te,2365,Ve,2369,Te,2377,Ve,2381,Te,2382,Ve,2385,Te,2392,Ve,2402,Te,2404,Ve,2433,Te,2434,Ve,2492,Te,2493,Ve,2497,Te,2503,Ve,2509,Te,2510,Ve,2530,Te,2534,Ve,2546,Te,2548,De,2555,Te,2561,De,2563,Ve,2620,Te,2622,Ve,2625,Te,2649,Ve,2672,Te,2674,Ve,2677,Te,2691,Ve,2748,Te,2749,Ve,2753,Te,2761,Ve,2765,Te,2768,Ve,2786,Te,2790,Ve,2801,Te,2809,De,2817,Te,2818,Ve,2876,Te,2877,Ve,2879,Te,2880,Ve,2881,Te,2887,Ve,2893,Te,2903,Ve,2914,Te,2918,Ve,2946,Te,2947,Ve,3008,Te,3009,Ve,3021,Te,3024,Ve,3059,Te,3065,Ge,3066,De,3072,Ge,3073,Ve,3134,Te,3137,Ve,3142,Te,3160,Ve,3170,Te,3174,Ve,3192,Te,3199,Ge,3201,Te,3202,Ve,3260,Te,3261,Ve,3276,Te,3285,Ve,3298,Te,3302,Ve,3329,Te,3330,Ve,3393,Te,3398,Ve,3405,Te,3406,Ve,3426,Te,3430,Ve,3530,Te,3535,Ve,3538,Te,3544,Ve,3633,Te,3634,Ve,3636,Te,3647,Ve,3648,De,3655,Te,3663,Ve,3761,Te,3762,Ve,3764,Te,3773,Ve,3784,Te,3792,Ve,3864,Te,3866,Ve,3893,Te,3894,Ve,3895,Te,3896,Ve,3897,Te,3898,Ve,3902,Ge,3953,Te,3967,Ve,3968,Te,3973,Ve,3974,Te,3976,Ve,3981,Te,4030,Ve,4038,Te,4039,Ve,4141,Te,4145,Ve,4146,Te,4152,Ve,4153,Te,4155,Ve,4157,Te,4159,Ve,4184,Te,4186,Ve,4190,Te,4193,Ve,4209,Te,4213,Ve,4226,Te,4227,Ve,4229,Te,4231,Ve,4237,Te,4238,Ve,4253,Te,4254,Ve,4957,Te,4960,Ve,5008,Te,5024,Ge,5120,Te,5121,Ge,5760,Te,5761,Fe,5787,Te,5792,Ge,5906,Te,5920,Ve,5938,Te,5941,Ve,5970,Te,5984,Ve,6002,Te,6016,Ve,6068,Te,6070,Ve,6071,Te,6078,Ve,6086,Te,6087,Ve,6089,Te,6100,Ve,6107,Te,6108,De,6109,Te,6112,Ve,6128,Te,6155,Ge,6158,Ve,6160,Ke,6277,Te,6279,Ve,6313,Te,6314,Ve,6432,Te,6435,Ve,6439,Te,6441,Ve,6450,Te,6451,Ve,6457,Te,6464,Ve,6470,Ge,6622,Te,6656,Ge,6679,Te,6681,Ve,6683,Te,6686,Ve,6742,Te,6743,Ve,6744,Te,6753,Ve,6754,Te,6755,Ve,6757,Te,6765,Ve,6771,Te,6784,Ve,6832,Te,6916,Ve,6964,Te,6965,Ve,6966,Te,6971,Ve,6972,Te,6973,Ve,6978,Te,6979,Ve,7019,Te,7028,Ve,7040,Te,7042,Ve,7074,Te,7078,Ve,7080,Te,7082,Ve,7083,Te,7086,Ve,7142,Te,7143,Ve,7144,Te,7146,Ve,7149,Te,7150,Ve,7151,Te,7154,Ve,7212,Te,7220,Ve,7222,Te,7227,Ve,7376,Te,7379,Ve,7380,Te,7393,Ve,7394,Te,7401,Ve,7405,Te,7406,Ve,7412,Te,7413,Ve,7416,Te,7424,Ve,7616,Te,7680,Ve,8125,Te,8126,Ge,8127,Te,8130,Ge,8141,Te,8144,Ge,8157,Te,8160,Ge,8173,Te,8178,Ge,8189,Te,8192,Ge,8203,Fe,8206,Ke,8207,Te,8208,Re,8232,Ge,8233,Fe,8234,Oe,8235,We,8236,Xe,8237,Ue,8238,Ne,8239,je,8240,ze,8245,De,8260,Ge,8261,ze,8287,Ge,8288,Fe,8294,Ke,8298,Ge,8304,Ke,8305,Le,8308,Te,8314,Le,8316,Pe,8319,Ge,8320,Te,8330,Le,8332,Pe,8336,Ge,8352,Te,8400,De,8448,Ve,8450,Ge,8451,Te,8455,Ge,8456,Te,8458,Ge,8468,Te,8469,Ge,8470,Te,8473,Ge,8478,Te,8484,Ge,8485,Te,8486,Ge,8487,Te,8488,Ge,8489,Te,8490,Ge,8494,Te,8495,De,8506,Te,8508,Ge,8512,Te,8517,Ge,8522,Te,8526,Ge,8528,Te,8544,Ge,8585,Te,8722,Ge,8723,Pe,8724,De,9014,Ge,9083,Te,9109,Ge,9110,Te,9352,Ge,9372,Le,9450,Te,9900,Ge,9901,Te,10240,Ge,10496,Te,11264,Ge,11493,Te,11499,Ge,11503,Te,11506,Ve,11513,Te,11520,Ge,11647,Te,11648,Ve,11744,Te,11776,Ve,12288,Ge,12289,Fe,12293,Ge,12296,Te,12321,Ge,12330,Te,12334,Ve,12336,Te,12337,Ge,12342,Te,12344,Ge,12349,Te,12353,Ge,12441,Te,12443,Ve,12445,Ge,12448,Te,12449,Ge,12539,Te,12540,Ge,12736,Te,12784,Ge,12829,Te,12832,Ge,12880,Te,12896,Ge,12924,Te,12927,Ge,12977,Te,12992,Ge,13004,Te,13008,Ge,13175,Te,13179,Ge,13278,Te,13280,Ge,13311,Te,13312,Ge,19904,Te,19968,Ge,42128,Te,42192,Ge,42509,Te,42512,Ge,42607,Te,42611,Ve,42612,Ge,42622,Ve,42624,Ge,42654,Te,42656,Ve,42736,Te,42738,Ve,42752,Te,42786,Ge,42888,Te,42889,Ge,43010,Te,43011,Ve,43014,Te,43015,Ve,43019,Te,43020,Ve,43045,Te,43047,Ve,43048,Te,43056,Ge,43064,Te,43072,De,43124,Te,43136,Ge,43204,Te,43214,Ve,43232,Te,43250,Ve,43302,Te,43310,Ve,43335,Te,43346,Ve,43392,Te,43395,Ve,43443,Te,43444,Ve,43446,Te,43450,Ve,43452,Te,43453,Ve,43493,Te,43494,Ve,43561,Te,43567,Ve,43569,Te,43571,Ve,43573,Te,43584,Ve,43587,Te,43588,Ve,43596,Te,43597,Ve,43644,Te,43645,Ve,43696,Te,43697,Ve,43698,Te,43701,Ve,43703,Te,43705,Ve,43710,Te,43712,Ve,43713,Te,43714,Ve,43756,Te,43758,Ve,43766,Te,43777,Ve,44005,Te,44006,Ve,44008,Te,44009,Ve,44013,Te,44016,Ve,64285,Te,64286,Re,64287,Ve,64297,Re,64298,Pe,64336,Re,64830,Ye,64848,Ge,65021,Ye,65024,Ge,65040,Ve,65056,Ge,65072,Ve,65104,Ge,65105,ze,65106,Ge,65108,ze,65109,Ge,65110,ze,65119,Ge,65120,De,65122,Ge,65124,Pe,65129,Ge,65131,De,65136,Ge,65279,Ye,65281,Ke,65283,Ge,65286,De,65291,Ge,65292,Pe,65293,ze,65294,Pe,65296,ze,65306,Le,65307,ze,65313,Ge,65339,Te,65345,Ge,65371,Te,65382,Ge,65504,Te,65506,De,65509,Ge,65512,De,1114109,Ge],Qe={1536:{t:4},1537:{t:4},1538:{t:4},1539:{t:4},1540:{t:4},1541:{t:4},1544:{t:4},1547:{t:4},1568:{t:2},1569:{t:4,isolated:65152},1570:{t:1,isolated:65153,initial:65154},1571:{t:1,isolated:65155,initial:65156},1572:{t:1,isolated:65157,initial:65158},1573:{t:1,isolated:65159,initial:65160},1574:{t:2,isolated:65161,final:65163,median:65164,initial:65162},1575:{t:1,isolated:65165,initial:65166},1576:{t:2,isolated:65167,final:65169,median:65170,initial:65168},1577:{t:1,isolated:65171,initial:65172},1578:{t:2,isolated:65173,final:65175,median:65176,initial:65174},1579:{t:2,isolated:65177,final:65179,median:65180,initial:65178},1580:{t:2,isolated:65181,final:65183,median:65184,initial:65182},1581:{t:2,isolated:65185,final:65187,median:65188,initial:65186},1582:{t:2,isolated:65189,final:65191,median:65192,initial:65190},1583:{t:1,isolated:65193,initial:65194},1584:{t:1,isolated:65195,initial:65196},1585:{t:1,isolated:65197,initial:65198},1586:{t:1,isolated:65199,initial:65200},1587:{t:2,isolated:65201,final:65203,median:65204,initial:65202},1588:{t:2,isolated:65205,final:65207,median:65208,initial:65206},1589:{t:2,isolated:65209,final:65211,median:65212,initial:65210},1590:{t:2,isolated:65213,final:65215,median:65216,initial:65214},1591:{t:2,isolated:65217,final:65219,median:65220,initial:65218},1592:{t:2,isolated:65221,final:65223,median:65224,initial:65222},1593:{t:2,isolated:65225,final:65227,median:65228,initial:65226},1594:{t:2,isolated:65229,final:65231,median:65232,initial:65230},1595:{t:2},1596:{t:2},1597:{t:2},1598:{t:2},1599:{t:2},1600:{t:3,isolated:1600,final:1600,median:1600,initial:1600},1601:{t:2,isolated:65233,final:65235,median:65236,initial:65234},1602:{t:2,isolated:65237,final:65239,median:65240,initial:65238},1603:{t:2,isolated:65241,final:65243,median:65244,initial:65242},1604:{t:2,isolated:65245,final:65247,median:65248,initial:65246},1605:{t:2,isolated:65249,final:65251,median:65252,initial:65250},1606:{t:2,isolated:65253,final:65255,median:65256,initial:65254},1607:{t:2,isolated:65257,final:65259,median:65260,initial:65258},1608:{t:1,isolated:65261,initial:65262},1609:{t:2,isolated:65263,initial:65264},1610:{t:2,isolated:65265,final:65267,median:65268,initial:65266},1646:{t:2},1647:{t:2},1649:{t:1},1650:{t:1},1651:{t:1},1652:{t:4},1653:{t:1},1654:{t:1},1655:{t:1},1656:{t:2},1657:{t:2},1658:{t:2},1659:{t:2},1660:{t:2},1661:{t:2},1662:{t:2,isolated:64342,final:64344,median:64345,initial:64343},1663:{t:2},1664:{t:2},1665:{t:2},1666:{t:2},1667:{t:2},1668:{t:2},1669:{t:2},1670:{t:2,isolated:64378,final:64380,median:64381,initial:64379},1671:{t:2},1672:{t:1},1673:{t:1},1674:{t:1},1675:{t:1},1676:{t:1},1677:{t:1},1678:{t:1},1679:{t:1},1680:{t:1},1681:{t:1},1682:{t:1},1683:{t:1},1684:{t:1},1685:{t:1},1686:{t:1},1687:{t:1},1688:{t:1,isolated:64394,initial:64395},1689:{t:1},1690:{t:2},1691:{t:2},1692:{t:2},1693:{t:2},1694:{t:2},1695:{t:2},1696:{t:2},1697:{t:2},1698:{t:2},1699:{t:2},1700:{t:2},1701:{t:2},1702:{t:2},1703:{t:2},1704:{t:2},1705:{t:2,isolated:64398,final:64400,median:64401,initial:64399},1706:{t:2},1707:{t:2},1708:{t:2},1709:{t:2},1710:{t:2},1711:{t:2,isolated:64402,final:64404,median:64405,initial:64403},1712:{t:2},1713:{t:2},1714:{t:2},1715:{t:2},1716:{t:2},1717:{t:2},1718:{t:2},1719:{t:2},1720:{t:2},1721:{t:2},1722:{t:2},1723:{t:2},1724:{t:2},1725:{t:2},1726:{t:2},1727:{t:2},1728:{t:1},1729:{t:2},1730:{t:2},1731:{t:1},1732:{t:1},1733:{t:1},1734:{t:1},1735:{t:1},1736:{t:1},1737:{t:1},1738:{t:1},1739:{t:1},1740:{t:2,isolated:64508,final:64510,median:64511,initial:64509},1741:{t:1},1742:{t:2},1743:{t:1},1744:{t:2},1745:{t:2},1746:{t:1},1747:{t:1},1749:{t:1},1757:{t:4},1774:{t:1},1775:{t:1},1786:{t:2},1787:{t:2},1788:{t:2},1791:{t:2},1808:{t:1},1810:{t:2},1811:{t:2},1812:{t:2},1813:{t:1},1814:{t:1},1815:{t:1},1816:{t:1},1817:{t:1},1818:{t:2},1819:{t:2},1820:{t:2},1821:{t:2},1822:{t:1},1823:{t:2},1824:{t:2},1825:{t:2},1826:{t:2},1827:{t:2},1828:{t:2},1829:{t:2},1830:{t:2},1831:{t:2},1832:{t:1},1833:{t:2},1834:{t:1},1835:{t:2},1836:{t:1},1837:{t:2},1838:{t:2},1839:{t:1},1869:{t:1},1870:{t:2},1871:{t:2},1872:{t:2},1873:{t:2},1874:{t:2},1875:{t:2},1876:{t:2},1877:{t:2},1878:{t:2},1879:{t:2},1880:{t:2},1881:{t:1},1882:{t:1},1883:{t:1},1884:{t:2},1885:{t:2},1886:{t:2},1887:{t:2},1888:{t:2},1889:{t:2},1890:{t:2},1891:{t:2},1892:{t:2},1893:{t:2},1894:{t:2},1895:{t:2},1896:{t:2},1897:{t:2},1898:{t:2},1899:{t:1},1900:{t:1},1901:{t:2},1902:{t:2},1903:{t:2},1904:{t:2},1905:{t:1},1906:{t:2},1907:{t:1},1908:{t:1},1909:{t:2},1910:{t:2},1911:{t:2},1912:{t:1},1913:{t:1},1914:{t:2},1915:{t:2},1916:{t:2},1917:{t:2},1918:{t:2},1919:{t:2},2208:{t:2},2209:{t:2},2210:{t:2},2211:{t:2},2212:{t:2},2213:{t:2},2214:{t:2},2215:{t:2},2216:{t:2},2217:{t:2},2218:{t:1},2219:{t:1},2220:{t:1},2221:{t:4},2222:{t:1},2223:{t:2},2224:{t:2},2225:{t:1},2226:{t:1},2227:{t:2},2228:{t:2},2230:{t:2},2231:{t:2},2232:{t:2},2233:{t:1},2234:{t:2},2235:{t:2},2236:{t:2},2237:{t:2},2274:{t:4},8204:{t:4},8205:{t:3},8239:{t:4},8294:{t:4},8295:{t:4},8296:{t:4},8297:{t:4},65269:{t:1,isolated:65269,initial:65270},65271:{t:1,isolated:65271,initial:65272},65273:{t:1,isolated:65273,initial:65274},65275:{t:1,isolated:65275,initial:65276}},qe={1611:!0,1612:!0,1613:!0,1614:!0,1615:!0,1616:!0,1617:!0,1618:!0,1619:!0,1620:!0,1621:!0,1648:!0},$e={1456:!0,1457:!0,1458:!0,1459:!0,1460:!0,1461:!0,1462:!0,1463:!0,1464:!0,1465:!0,1466:!0,1467:!0,1473:!0,1474:!0},et={"ل":{"ا":"ﻻ","آ":"ﻵ","أ":"ﻷ","إ":"ﻹ"},"ا":{"ل":{"ل":{"ه":"ﷲ"}}}},tt={"(":")",")":"(","[":"]","]":"[","{":"}","}":"{",">":"<","<":">"},nt=63;function rt(e,t){if(Ce[t])return Ce[t];var n={characters:[],logicalOrder:e,result:[]},r=it(e),i=st(e,r),o=i.length;i.forEach((function(e,t){ft(e);ut(e);if(0!==e.characters.length){ot(e);at(e);bt(e);xt(e);It(e);Et(e);wt(e);Ct(e,$e,!1);kt(e);n.result=n.result.concat(e.reorderedCharacters);t<o-1&&n.result.push({text:"\n",level:0,type:Oe,index:0});n.characters=n.characters.concat(e.characters)}}));n.types=r;Ce[t]=n;return n}function it(e){return e.map((function(e){return Gt(e)||0}))}function ot(e){lt(e);ct(e);dt(e);ht(e);vt(e);gt(e);pt(e)}function at(e){mt(e);yt(e)}function ut(e){var t=e.level,n=[];n.push({level:e.level,override:de.Neutral});var r=0,i=n[0],o=i.level,a=[];function u(e,t){if(e<nt){n.push({level:e,override:t});return e}}e.characters.forEach((function(e){var s=e.type;if(s===Xe){o+=Zt(o)?2:1;t=u(o,de.Neutral)}else if(s===We){o+=Ot(o)?2:1;t=u(o,de.Neutral)}else if(s===je){o+=Zt(o)?2:1;t=u(o,de.Rtl)}else if(s===Ne){o+=Ot(o)?2:1;t=u(o,de.Ltr)}s===Ue?n.length>1&&(i=n.pop()):i=n[n.length-1];t=i.level;o=t;if(-1===[Ke,Xe,We,je,Ne,Ue].indexOf(s)){i.override>de.Neutral&&(e.type=i.override===de.Rtl?Re:Te);e.embeddingLevel=t;e.index=r++;a.push(e)}}));e.characters=a}function st(e,t){var n=0,r=[],i=[];t.forEach((function(e){if(e!==Oe)i.push(e);else if(i.length>0){o(i);n++;i.length=0}}));i.length>0&&o(i);function o(t){var i=n,o=t.map((function(t){return{text:e[n++],level:0,embeddingLevel:void 0,type:t,index:0}})),a=e.slice(i,i+t.length);r.push({symbols:a,level:0,characters:o})}return r}function ft(e){e.level=1}function lt(e){e.characters.filter(Yt(Ve)).forEach((function(t){t.isNSM=!0;if(t.index>0){var n=e.characters[t.index-1].type;n===Ye&&(t.type=Ye);Re===n&&(t.type=Re)}}))}function ct(e){e.characters.filter(Yt(Le)).forEach((function(t){for(var n=t.index-1;n>=0;n--){var r=e.characters[n].type;if(r===Ye){t.type=Be;break}if([Re,Te].indexOf(r)>-1)break}}))}function dt(e){e.characters.filter(Yt(Ye)).forEach((function(e){e.type=Re;e.isAL=!0}))}function ht(e){e.characters.filter(Yt([Pe,ze])).forEach((function(t){var n=t.index;if(n>0&&n<e.characters.length-1){var r=e.characters[n-1].type;r!==e.characters[n+1].type||r!==Le&&r!==Be||(t.type=r)}}))}function vt(e){e.characters.filter(Yt(De)).forEach((function(t){var n=t.index,r=n;if(n>0){for(var i=e.characters[n-1].type;r-- >0&&i===De;)i=e.characters[r].type;if(i===Le){t.type=Le;return}}if(n<e.characters.length-1){var o=e.characters[n+1].type;r=n;for(;r++<e.characters.length-1&&o===De;)o=e.characters[r].type;o===Le&&(t.type=Le)}}))}function gt(e){e.characters.filter(Yt([De,ze,Pe,Be])).forEach((function(e){e.type=Ge}))}function pt(e){e.characters.filter(Yt(Le)).forEach((function(t){for(var n=t.index-1;n>=0;n--){var r=e.characters[n].type;if(r===Re)return;if(r===Te){t.type=Te;return}}}))}function mt(e){e.characters.filter(Yt([Oe,Ze,Fe,Ge])).forEach((function(t){var n=t.index;if(e.level<t.embeddingLevel)t.type=Ot(t.embeddingLevel)?Te:Re;else if(0!==n&&n!==e.characters.length-1&&n>0&&n<e.characters.length-1){for(var r=e.characters[n-1].type,i=e.characters[n+1].type,o=n;o-- >0&&-1===[Re,Ye,Le,Be,Te].indexOf(r);)r=e.characters[o].type;o=n;for(;o++<e.characters.length-1&&-1===[Re,Ye,Le,Be,Te].indexOf(i);)i=e.characters[o].type;[Re,Ye,Le,Be].indexOf(r)>-1&&[Re,Ye,Le,Be].indexOf(i)>-1?t.type=Re:t.type=r===Te&&i===Te||Ot(t.embeddingLevel)?Te:Re}}))}function yt(e){e.characters.filter(Yt([Oe,Ze,Fe,Ge])).forEach((function(e){e.type=Ot(e.embeddingLevel)?Te:Re}))}function bt(e){var t;e.characters.forEach((function(e){var n=e.type;t=e.embeddingLevel;n===Te?Zt(t)&&t++:n===Re||n===Ye?Ot(t)&&t++:n!==Le&&n!==Be||(Ot(t)?t+=2:t++);e.level=t}))}function xt(e){e.characters.filter((function(e){return tt[e.text]&&Zt(e.level)})).forEach((function(e){e.text=tt[e.text]}))}function wt(e){var t=e.highestLevel;e.reorderedCharacters=a(e.characters);for(;t>0;){At(e,t);t--}}function At(e,t){var n,r=[];e.levelRuns.forEach((function(e){if(e.level>=t)if(n)n.endIndex+=e.length;else{n={startIndex:e.idx,endIndex:e.idx+e.length};r.push(n)}else n=null}));r.forEach((function(t){Mt(e,t)}))}function Mt(e,t){var n=t.startIndex,r=t.endIndex,i=e.reorderedCharacters.slice(n,r).reverse();e.reorderedCharacters=e.reorderedCharacters.slice(0,n).concat(i).concat(e.reorderedCharacters.slice(r))}function It(e){var t=0;e.characters.forEach((function(e){e.level>t&&(t=e.level)}));e.highestLevel=t}function Et(e){var t=[],n=0,r=0,i={idx:0,length:0,level:e.characters[0].level};e.characters.forEach((function(e){if(e.level!==n&&0!==r){t.push(i);i={idx:r,length:0,level:e.level}}i.length++;r++;n=e.level}));t.push(i);e.levelRuns=t}function kt(e){Ct(e,qe,!0);Tt(e);Lt(e);Bt(e)}function Ct(e,t,n){for(var r=e.reorderedCharacters.reverse(),i=[],o=0,a=r.length;o<a;o++){var u=r[o],s=St(o,r,t);o+=s.length;n||(u.text+=s.join(""));i.push(u)}var f=0;e.reorderedCharacters=i.reverse();e.reorderedCharacters.forEach((function(e){e.index=f++}))}function St(e,t,n){for(var r=[],i=e+1;i<t.length;i++){if(!n[t[i].text.charCodeAt(0)])return r;r.push(t[i].text)}return r}function Tt(e){for(var t=e.reorderedCharacters.reverse(),n=[],r=0,i=t.length;r<i;r++){var o=t[r],a=et[o.text[0]];if(a){var u=Rt(r,a,t);if(u){r+=u.length;o.text=u.text}}n.push(o)}var s=0;e.reorderedCharacters=n.reverse();e.reorderedCharacters.forEach((function(e){e.index=s++}))}function Rt(e,t,n){for(var r=0,i=t,o=e+1;o<n.length;o++){var a=i[n[o].text[0]];if(!a)return!1;r++;if("string"==typeof a)return{text:a,length:r};i=a}return!1}function Lt(e){var t,n=function(){e.arabicTextRuns.push(t);t=void 0},r=e.reorderedCharacters;e.arabicTextRuns=[];for(var i=0,o=r.length;i<o;i++){var a=r[i].text.charCodeAt(0),u=Qe[a];if(u&&[Re,He,Te].indexOf(u.t)>-1){t?t.endIndex=i+1:t={startIndex:i,endIndex:i+1};if(i+1<o){var s=r[i+1].text.charCodeAt(0),f=Qe[s];f&&f.t===Re&&n()}else n();u.t===Te&&n()}else u&&u.t===_e||t&&n()}t&&n()}function Bt(e){e.arabicTextRuns.forEach((function(t){for(var n,r=t.startIndex,i=t.endIndex,o=r;o<i;o++){var a=e.reorderedCharacters[o],u=Qe[a.text.charCodeAt(0)];n=null;i-r>1?o===r?n=u.initial:o===i-1?n=u.final:o>r&&o<i-1&&(n=u.median):n=u.isolated;n&&(a.text=String.fromCharCode(n)+a.text.substring(1))}}))}function Gt(e){for(var t=e.charCodeAt(0),n=0;n<Je.length;n+=2)if(t<Je[n])return Je[n+1];return Ge}function Ot(e){return e%2==0}function Zt(e){return e%2!=0}function Yt(e){var t=Z(e);return function(e){return t.indexOf(e.type)>-1}}var Ft={},zt={},Pt="rgb(128, 128, 128)",Dt={aqua:"rgb(0, 255, 255)",black:"rgb(0, 0, 0)",blue:"rgb(0, 0, 255)",fuchsia:"rgb(255, 0, 255)",green:"rgb(0, 128, 0)",grey:Pt,gray:Pt,lime:"rgb(0, 255, 0)",maroon:"rgb(128, 0, 0)",navy:"rgb(0, 0, 128)",olive:"rgb(128, 128, 0)",orange:"rgb(255,165,0)",purple:"rgb(128, 0, 128)",red:"rgb(255, 0, 0)",silver:"rgb(192, 192, 192)",teal:"rgb(0, 128, 128)",yellow:"rgb(255, 255, 0)",white:"rgb(255, 255, 255)",ci:"rgb(0, 174, 239)",cia:"rgba(0, 174, 239, 0.5)",keyline:"rgb(88, 89, 91)",midgrey:"rgb(145, 146, 149)",lightgrey:"rgb(208, 209, 211)",edit:"rgb(114, 179, 0)",attention:"rgb(220, 0, 0)",information:"rgb(0, 150, 255)",description:"rgb(255, 175, 0)",textback:"rgba(255,255,255,0.6)",transparent:"rgba(255,255,255,0.0)",touch:"rgba(255,0,0,0.6)"};function Vt(e,t,n){return"rgb("+e+","+t+","+n+")"}function Wt(e,t,n,r){return"rgba("+e+","+t+","+n+","+r+")"}var Xt=/^(?:rgb)?\(\s?([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\s?,\s?([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\s?,\s?([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\s?\)$/i,Ut=/^(?:rgba)?\(\s?([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\s?,\s?([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\s?,\s?([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5]),\s?(0|1|0\.\d{0,20}|1\.0)\)$/i,Nt=/^#([0-9a-f])([0-9a-f])([0-9a-f])$/i,jt=/^#([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])$/i;function Kt(e){return!!Ht(e).length}function Ht(e){var t=[];if("string"!=typeof e)return t;var n=Dt[e.toLowerCase()]||e,r=n.match(Xt);r||(r=n.match(Ut));if(r){for(var i=1;i<4;i++)t.push(parseInt(r[i],10));void 0!==r[4]&&t.push(+r[4])}else{if(!(r=n.match(jt))&&(r=n.match(Nt)))for(i=1;i<4;i++)r[i]+=r[i];if(r)for(i=1;i<4;i++)t.push(parseInt(r[i],16))}return t}function _t(e){if("transparent"===e)return 0;var t=e.match(Ut);return t?parseFloat(t[4]):1}function Jt(e){var t=Ht(e),n=tn(t[0],t[1],t[2]);n.push(_t(e));return n}function Qt(e){var t=rn(e[0],e[1],e[2]);return Wt(t[0],t[1],t[2],e[3])}function qt(e,t){return 1===t?e:an(e,t)}function $t(e){function t(){return Math.floor(239*Math.random())+1}var n=Vt(t(),t(),t());return e&&n in e?$t(e):n}function en(e,t,n){var r=null;e&&(e.bg&&e.gh?r=t*n:e.bg?r=t:e.gh&&(r=n));return 0===r?1e-6:r}function tn(e,t,n){var r,i=e/255,o=t/255,a=n/255,u=Math.max(i,o,a),s=Math.min(i,o,a),f=0,l=(u+s)/2;if(u===s){f=0;r=0}else{var c=u-s;r=l>.5?c/(2-u-s):c/(u+s);switch(u){case i:f=(o-a)/c+(o<a?6:0);break;case o:f=(a-i)/c+2;break;case a:f=(i-o)/c+4}f/=6}return[f,r,l]}function nn(e,t,n){var r=n;r<0&&(r+=1);r>1&&(r-=1);return r<1/6?e+6*(t-e)*r:r<.5?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function rn(e,t,n){var r,i,o;if(0===t){r=n;i=n;o=n}else{var a=n<.5?n*(1+t):n+t-n*t,u=2*n-a;r=nn(u,a,e+1/3);i=nn(u,a,e);o=nn(u,a,e-1/3)}return[Math.round(255*r),Math.round(255*i),Math.round(255*o)]}function on(e,t){for(var n=["c","fc","bc"],r=0;r<n.length;r++){var i=n[r];if(e[i]){var o=Ht(e[i]);e[i]=Wt(o[0],o[1],o[2],t);e["w"+i][3]=255*t}}}function an(e,t){var n=e+t;if(!Ft[n]){var r=Ht(e),i=_t(e);Ft[n]=Wt(r[0],r[1],r[2],i*t)}return Ft[n]}function un(e){
var t=Ht(e),n=_t(e);return[t[0],t[1],t[2],Math.floor(255*n)]}function sn(e,t){void 0===t&&(t=!1);if(e){if(t)return un(e);var n=zt[e];if(!n){n=un(e);zt[e]=n}return n}}function fn(){Ft={};zt={}}function ln(e,t){var n=Ht(e),r=n[0],i=n[1],o=n[2],a=n[3],u=tn(r,i,o),s=u[0],f=u[1],l=u[2],c=rn(s,f,Math.min(l*t,1)),d=c[0],h=c[1],v=c[2];return void 0===a?Vt(d,h,v):Wt(d,h,v,a)}function cn(e,t){var n=Ht(e),r=n[0],i=n[1],o=n[2],a=n[3];return Wt(r,i,o,Math.min((void 0!==a?a:1)*t,1))}var dn={arc:"A",circle:"C",image:"I",line:"L",rect:"R",roundrect:"RR",text:"T",triangle:"TR"},hn=14,vn=26,gn=Math.PI/2,pn={};var lr={a:"LTMxLC02NCwtNTgsLTEzLC02NiwtNjgsLTY5LC02MiwtNTcsLTY4LC00Miw0MywtMjIsLTE1LDU2LC0zNywtNDYsLTMw",b:"LTIyLC01NiwtNTgsLTUsLTEyLC02MywtNjUsLTExLDEsLTY0LC03Myw1MiwyNSw0LDczLC0yLC0xNCw2LDE2LC0yMiwtNDYsLTcxLDM0LDEwLC01NA=="};var mn={};function yn(){mn={}}var bn="sans-serif",xn={browserMinimumFontSize:1,minimumFontChecked:!1};function wn(e){xn.browserMinimumFontSize=e}function An(e){xn.minimumFontChecked=e}function Mn(e,t,n,r){var i=!!n,o=ve(r||bn);if(e!==mn.context||t!==mn.fontSize||i!==mn.bold||o!==mn.family){mn.context=e;mn.fontSize=t;mn.bold=i;mn.family=o;var a="normal"+" "+(i?"bold":"normal")+" "+t+"px"+" "+o;e.font=a;e.textBaseline="bottom"}}function In(e,t,n,r,i,o){var a,u,s=t,f=n,l=r,c=i,d=En(e);s-=d.x;f-=d.y;l-=d.x;c-=d.y;s=Math.round(s);f=Math.round(f);l=Math.round(l);c=Math.round(c);switch(e.p){case dn.circle:a=Math.abs((l-s)/2);u=Math.abs((c-f)/2);e.x=Math.floor(Math.min(s,l)+a);e.y=Math.floor(Math.min(f,c)+u);e.r=o;break;case dn.line:case dn.rect:case dn.roundrect:e.x1=Math.min(s,l);e.x2=Math.max(s,l);e.y1=Math.min(f,c);e.y2=Math.max(f,c);break;case dn.text:e.x=Math.min(s,l);e.y=Math.max(f,c);break;case dn.image:e.x1=Math.min(s,l);e.y1=Math.min(f,c);e.x2=Math.max(s,l);e.y2=Math.max(f,c);break;case dn.triangle:}}function En(e){var t={x:0,y:0},n=e.a;if(n.hiddenByGenerator)return t;if(e.anchorIndex>-1){var r=n.positionIndex[e.anchorIndex];if(r>-1){t.x=n.anchorBuffer.getData()[r];t.y=n.anchorBuffer.getData()[r+1]}}return t}function kn(e,t){var n=0,r=0,i=0,o=0,a=En(t);switch(t.p){case dn.circle:n=t.x-t.r;r=t.x+t.r;i=t.y-t.r;o=t.y+t.r;break;case dn.line:case dn.rect:case dn.roundrect:case dn.image:n=Math.min(t.x1,t.x2);r=Math.max(t.x1,t.x2);i=Math.min(t.y1,t.y2);o=Math.max(t.y1,t.y2);break;case dn.text:var u=Hn(e,t.t,t.fs,t.bo,t.ff);n=t.x-(t.xc?u.width/2:0);i=t.y-u.height;r=n+u.width;o=t.y;break;case dn.triangle:n=Math.min(t.x1,t.x2,t.x3);r=Math.max(t.x1,t.x2,t.x3);i=Math.min(t.y1,t.y2,t.y3);o=Math.max(t.y1,t.y2,t.y3);break;case dn.arc:var s=t.x+t.r*Math.cos(t.sa),f=t.y+t.r*Math.sin(t.sa),l=t.x+t.r*Math.cos(t.ea),c=t.y+t.r*Math.sin(t.ea);n=Math.min(s,l);r=Math.max(s,l);i=Math.min(f,c);o=Math.max(f,c);for(var d=(Math.floor(t.sa/gn)+1)*gn;d<t.ea;){var h=t.x+t.r*Math.cos(d),v=t.y+t.r*Math.sin(d);n=Math.min(n,h);r=Math.max(r,h);i=Math.min(i,v);o=Math.max(o,v);d+=gn}}return{x1:n+=a.x,y1:i+=a.y,x2:r+=a.x,y2:o+=a.y}}function Cn(e,t){return{x1:Math.min(e.x1,t.x1),y1:Math.min(e.y1,t.y1),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}}function Sn(e,t,n){return e.x1<=t&&t<=e.x2&&e.y1<=n&&n<=e.y2}function Tn(e,t,n,r,i,o){var a=o||0;return Math.sqrt((e-r)*(e-r)+(t-i)*(t-i))+a<n}function Rn(e,t,n,r,i){return e.x1<t&&r<e.x2&&e.y1<n&&i<e.y2}function Ln(e,t,n,r,i,o,a){var u=n*n;return(e-r)*(e-r)+(t-i)*(t-i)<u&&(e-r)*(e-r)+(t-a)*(t-a)<u&&(e-o)*(e-o)+(t-i)*(t-i)<u&&(e-o)*(e-o)+(t-a)*(t-a)<u}function Bn(e,t,n,r,i,o,a){var u=Math.floor((n.x2-n.x1)/2),s=Math.floor((n.y2-n.y1)/2),f=1,l="-resize",c=Math.floor(4*r);Zn(e,t,{x:n.x1,y:n.y1},c,f,i+a+"nw"+l,o);On(e,t,{x:n.x1+u,y:n.y1},c,f,i+a+"n"+l,o);Zn(e,t,{x:n.x2,y:n.y1},c,f,i+a+"ne"+l,o);On(e,t,{x:n.x2,y:n.y1+s},c,f,i+a+"e"+l,o);Zn(e,t,{x:n.x2,y:n.y2},c,f,i+a+"se"+l,o);On(e,t,{x:n.x2-u,y:n.y2},c,f,i+a+"s"+l,o);Zn(e,t,{x:n.x1,y:n.y2},c,f,i+a+"sw"+l,o);On(e,t,{x:n.x1,y:n.y2-s},c,f,i+a+"w"+l,o)}function Gn(e){return"transparent"===e||e===Dt.transparent}function On(e,t,n,r,i,o,a){var u=t.x(n.x),s=t.y(n.y),f=Gn(a)?Dt.transparent:Dt.white;e.rect(u-r,s-r,u+r,s+r,a,i,f,!0,o,-1)}function Zn(e,t,n,r,i,o,a){var u=Gn(a)?Dt.transparent:Dt.white;e.circle(t.x(n.x),t.y(n.y),r+1,a,i,u,!0,o,-1,void 0,!1)}function Yn(e,t,n,r,i,o,a,u){Bn(e,n,kn(t,r),i,o,a,u)}function Fn(e,t,n,r,i,o){var a=qt(t,n);if(o){e.fillStyle=a;e.fillRect(0,0,r,i)}else{var u=e;(u.webgl?u.webglCanvas:e.canvas).style.background=a}}function zn(e,t,n,r,i,o){if(t)if(o){for(var a=e.createLinearGradient(0,0,0,i),u=0;u<t.length;u++)a.addColorStop(t[u].r,qt(t[u].c,n));e.fillStyle=a;e.fillRect(0,0,r,i)}else{var s=e;Pn(s.webgl?s.webglCanvas:e.canvas,t,n)}}function Pn(e,t,n){for(var r="linear-gradient(",i=0,o=t.length;i<o;i++){var a=t[i];r+=qt(a.c,n);r+=" "+100*a.r+"%";i+1<o&&(r+=",")}r+=")";e.style.background=r}function Dn(e){var t;"string"==typeof e&&(t=e.split(",")[0]);return t}function Vn(e,t){if("number"==typeof e&&R(e))return e;var n=Xn();t?document.getElementById(t).appendChild(n):document.body.appendChild(n);var r=e.replace(/\./g,"");n.className!==r&&(n.className=r);var i=window.getComputedStyle(n,":before").getPropertyValue("content");n.parentNode&&n.parentNode.removeChild(n);n.className="";return i.charCodeAt(1)||i.charCodeAt(0)}var Wn=null;function Xn(){if(Wn)return Wn;var e=document.createElement("span");e.style.position="absolute";e.style.left="-10000px";e.style.top="-10000px";e.style.visibility="hidden";e.style.lineHeight="normal";e.style.fontSize="200px";e.style.fontVariant="normal";e.style.fontStyle="normal";e.style.letterSpacing="0";e.style.width="auto";e.style.height="auto";e.style.display="block";e.style.margin="0";e.style.padding="0";e.style.whiteSpace="nowrap";Wn=e;return e}function Un(e,t,n){e.style.fontFamily=n;e.innerText=t}function Nn(e,t,n){var r=Xn();document.body.appendChild(r);Un(r,e,n);var i=r.offsetHeight;Un(r,"","");return i/200*t||t}var jn={},Kn={};function Hn(e,t,n,r,i,o){var a=i||bn,u=t+!!r+a,s=0,f=0,l=jn[u],c=(b(n)?n:hn)/vn;Kn[a]||(Kn[a]=Nn("|M",vn,a));f=Kn[a];if(void 0===l){Mn(e,vn,r,i);o&&(f=Nn(t,vn,a));if(e.webgl){be(t)&&(f=xe(vn));s=Jn(e,t,f,vn,r,a)}else s=e.measureText(t).width;l={width:s,height:f};jn[u]=l}return{width:Math.round(l.width*c),height:Math.round(l.height*c)}}function _n(){jn={};Kn={}}function Jn(e,t,n,r,i,o){var a,u,s=0,f=Ee(Ie(t));if(be(t)){var l=rt(f,t).result;for(a=0,u=l.length;a<u;a++){var c=l[a];be(c.text)?Mn(e,n,i,o):Mn(e,r,i,o);s+=e.measureText(c.text).width}}else for(a=0,u=f.length;a<u;a++)s+=e.measureText(f[a]).width;return s}function Qn(e){var t=e.id||"canvas";void 0===pn[t]&&(pn[t]=r(e));return pn[t]}function qn(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e}function $n(){for(var e=arguments.length,t=[],n=0,r=0;r<e;r++)for(var i=arguments[r],o=i.length,a=0;a<o;a++,n++)t[n]=i[a];return t}function er(e){var t=/[\d.]+/g;return Math.round(e.match(t).map(Number)[0])}function tr(e,t,n,r){var i=window.devicePixelRatio,o=e.width,a=e.height;if(r){e.style.width="100%";e.style.height="100%";e.style.display="block";var u=window.getComputedStyle(e),s=Math.round(e.clientWidth-o),f=Math.round(e.clientHeight-a);o=er(u.width)-s;a=er(u.height)-f}e.style.width=o+"px";e.style.height=a+"px";e.width=Math.round(o*i);e.height=Math.round(a*i);n||t.scale(i,i);yn()}function nr(e,t,n){var r=Math.max(n-e,0),i=Math.max(1e-4,t-e);return Math.min(1,r/i)}function rr(e,t,n){return e*(1-n)+t*n}function ir(e){return e>.15?rr(.75,1,nr(.15,.2,e)):e>.08?rr(.4,.75,nr(.08,.15,e)):rr(.2,.4,nr(.01,.08,e))}function or(e){var t=null;if(e)if("string"==typeof e){if(!(t=document.getElementById(e)))throw new Error("container element not found with id: "+e)}else{if("object"!=typeof e||!e||void 0===e.parentNode)throw new Error("container must be valid DOM element or element id");t=e}return t}function ar(e,t,n){var r=Date.now(),i=Math.floor(r/1e3),o=0,a=!1,u=l(),s=!0,f=0;return{frameRate:function(){return f},update:function(){var l=Date.now(),c=Math.floor(l/1e3);if(c>i){f=Math.round(o/(c-i));o=0;i=c}else o++;var d=t(l-r);r=l;if(a=a||d){var h=n();if(h){var v=h.canvas;h.webgl&&(v=h.webglCanvas);if(v&&v.clientWidth>0&&v.clientHeight>0){a=!1;s&&e(!1,u)}}}},redraw:function(e){a=!0;var t=e||l();u.all||(u.all=t.all);u.positions||(u.positions=t.positions);u.shadow||(u.shadow=t.shadow);u.textures||(u.textures=t.textures);u.colours||(u.colours=t.colours)},allowDraw:function(e){e&&!s&&(a=!0);s=e}};function l(){return{all:!0,colours:!0,textures:!0,positions:!0,shadow:!0}}}function ur(e,t){var n=!0;return{rebuild:t,animate:function(t){var r=e(t,n);n=!1;return r}}}function sr(e){var t=[],n=[];return{push:function(e,r){if(e){e.queue=r;r?n.push(e):t.push(e)}},cancel:function(){t=[];n=[];e()},animate:function(r,i,o){var a=!1,u=!1;if(t.length>0){var s=t;t=[];for(var f=0;f<s.length;f++){var l=s[f].rebuild;if(s[f].animate(r)){u=u||s[f].queue;t.push(s[f])}e(l)}a=!0}if(!u&&n.length>0){t.push(n.shift());a=!0}if(i&&i.animate){i.animate(r);a=!0}o&&(a=a||o.animated());return a}}}function fr(e,t){var n,r,i,o=null;return function(a,u,s){var f=t();if(f===a||o&&r===a);else{n=f;r=a;i=0;if(!o){o=ur((function(e){i=Math.min(u,i+e);t(u<=0?r:n+(r-n)*i/u);var a=i<u;if(!a){o=null;T(s)}return a}));e.push(o,!1)}}}}function cr(){var e;function t(e,t){for(var n=e.replace(/^\s*|\s*$/g,"").split(/[(\s*,\s*)|(\s+)]/),r=0;r<n.length;r++)t(n[r])}function n(n,r,i,o){var a=(e=e||{public:{},private:{}})[o];t(n,(function(e){a[e]=a[e]||[];a[e].push({handler:r,context:i})}))}function r(e,t,r){n(e,t,r,"public")}function i(e,t,r){n(e,t,r,"private")}function o(n,r,i){if(e&&e[i])if(n){var o=e[i];t(n,(function(e){if(r){if(o[e]){for(var t=[],n=0;n<o[e].length;n++)r!==o[e][n].handler&&t.push(o[e][n]);o[e]=t}}else o[e]=[]}))}else e[i]={}}function a(e,t){o(e,t,"public")}function u(e,t){o(e,t,"private")}function s(e,t){var n=e[0],r=!1;if(t)for(var i=2,o=void 0;i--;){var a=i?n:"all",u=i?e.slice(1):e;if(t[a]){var s=t[a].slice(0);for(o=0;o<s.length;o++){var f=s[o];try{r=f.handler.apply(f.context||this,u)||r}catch(e){g(n,e)}}}}return r}function f(t,n){var r=!1,i=Array.prototype.slice.call(t);if(e){r=s(i,e.private);n&&(r=s(i,e.public)||r)}return r}function l(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return f(e,!0)}function c(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return f(e,!1)}function d(){return v}var h=10,v=[];function g(e,t){var n=(new Date).toString()+" Function bound to '"+e+"' threw error: "+t.toString();l("error",n,t);p(n);v.push(n);v.length>h&&v.shift()}function m(e,t,n,r,i,o){var a=3*t,u=3*(r-t)-a,s=1-a-u,f=3*n,l=3*(i-n)-f,c=1-f-l;function d(e){return((s*e+u)*e+a)*e}function h(e,t){var n=v(e,t);return((c*n+l)*n+f)*n}function v(e,t){var n,r,i,o,f,l;for(i=e,l=0;l<8;l++){o=d(i)-e;if(Math.abs(o)<t)return i;f=(3*s*i+2*u)*i+a;if(Math.abs(f)<1e-6)break;i-=o/f}if((i=e)<(n=0))return n;if(i>(r=1))return r;for(;n<r;){o=d(i);if(Math.abs(o-e)<t)return i;e>o?n=i:r=i;i=(r-n)/2+n}return i}return h(e,1/(200*o))}function y(e){return e<0?0:e>1?1:e}function b(e){return e<0?0:e>1?1:m(e,.25,.01,.25,1,1)}var x=1;function w(e){return Math.atan(x*(e-.5))/(2*Math.atan(.5*x))+.5}return{atanEasing:w,bind:r,cubicEasing:b,getErrors:d,linearEasing:y,privateBind:i,privateTrigger:c,privateUnbind:u,trigger:l,unbind:a}}var dr=[0,0],hr=[];function vr(e){if(dr[0]){dr[0]=0;e.setLineDash(hr);e.lineCap="butt"}}function gr(e){return!!e&&"solid"!==e&&"flow"!==e}function pr(e,t,n,r,i){void 0===i&&(i=!1);var o,a;if("dotted"===r){o=.5;a=2*n}else a=(o=Math.max(2,2*n))/2;var u=Math.round(i?t/(o+a):(t+a)/(o+a));if(u>1&&(a=i?(t-u*o)/u:(t-u*o)/(u-1))>0){e.lineCap=o>1?"butt":"round";dr[0]=o;dr[1]=a;e.setLineDash(dr)}return{dash:o,gap:a}}function mr(e){var t=0,n=0,r=[],i={bg:!1,gh:!1,anchorBuffer:e,dirty:0,positionIndex:[-1,-1,-1],hiddenByGenerator:!1,isHitTested:!0,goToBeginning:function(){n=0},reset:function(){t=0;n=0;i.hiddenByGenerator=!1},getNext:function(){return r[n++]},getPrevious:function(){return n>0?r[n-1]:null},add:function(e){r[t++]=e;i.dirty=t;n++},forEach:function(e){for(var n=0;n<t;n++)e(r[n])},setAnchorPosition:function(n,r,o,a){var u=i.positionIndex[a];if(-1===u){u=e.getUsedSize();i.positionIndex[a]=u;e.add()}var s=e.getData();s[u]=n;s[u+1]=r;s[u+2]=o;i.dirty=t},getAnchorPosition:function(e){var t=i.positionIndex[e],n=i.anchorBuffer.getData();return{x:n[t],y:n[t+1]}},getAnchorAngle:function(e){var t=i.positionIndex[e];return i.anchorBuffer.getData()[t+2]}};return i}function yr(e,t,n,r,i){e[0]=t;e[1]=n;e[2]=0;var o=r.anchorBuffer.getData();if(i>-1){var a=r.positionIndex[i];if(a>-1){var u=o[a+2];if(u){var s=Math.sin(-u),f=Math.cos(-u);e[0]=t*f+n*s;e[1]=n*f-t*s}e[0]+=o[a];e[1]+=o[a+1];e[2]=u}}}function br(e,t,n,r,i,o,a){e[0]=t;e[1]=n;e[2]=r;e[3]=n;e[4]=t;e[5]=i;e[6]=r;e[7]=i;var u=o.anchorBuffer.getData();if(a>-1){var s=o.positionIndex[a];if(s>-1){var f=u[s],l=u[s+1],c=u[s+2];if(c){var d=Math.sin(-c),h=Math.cos(-c),v=t*h+n*d,g=n*h-t*d;e[0]=v;e[1]=g;v=r*h+n*d;g=n*h-r*d;e[2]=v;e[3]=g;v=t*h+i*d;g=i*h-t*d;e[4]=v;e[5]=g;v=r*h+i*d;g=i*h-r*d;e[6]=v;e[7]=g}e[0]+=f;e[1]+=l;e[2]+=f;e[3]+=l;e[4]+=f;e[5]+=l;e[6]+=f;e[7]+=l}}}function xr(e,t,n,r,i,o,a){e[0]=t;e[1]=n;e[2]=r;e[3]=i;e[4]=0;var u=o.anchorBuffer.getData();if(a>-1){var s=o.positionIndex[a];if(s>-1){var f=u[s],l=u[s+1],c=u[s+2];e[0]+=f;e[1]+=l;e[2]+=f;e[3]+=l;e[4]=c}}}var wr=15,Ar=30;function Mr(e,t,n,r){var i=e*wr*t;return(i=ye(e)*Math.min(16*n,Math.abs(i)))*(r/1e3)%n}function Ir(e,t,n,r,i,o){var a=Math.max(Ar*i,3*n)/3,u=2*a,s=-(t/2-a+Mr(r,i,u+a,o));e.lineDashOffset=s;e.setLineDash([u,a]);return s}function Er(e,t,n,r){return e+n<0||e-n>r.scale(r.width())||(t+n<0||t-n>r.scale(r.height()))}function kr(e,t,n,r,i){return e>i.scale(i.width())||n<0||(t>i.scale(i.height())||r<0)}function Cr(e,t,n,r,i,o){var a=i/2;return e+a<0&&n+a<0||(t+a<0&&r+a<0||(e-a>o.scale(o.width())&&n-a>o.scale(o.width())||t-a>o.scale(o.height())&&r-a>o.scale(o.height())))}var Sr=new Float32Array(3);function Tr(e,t,n,r,i,o,a,u,s,f){yr(Sr,t.x,t.y,t.a,t.anchorIndex);var l,c,d,h,v,g=n.x(Sr[0]),p=n.y(Sr[1]),m=n.worldToViewDistance(t.r);if(r){l=t.bc&&t.sc;c=void 0;d=n.sw(t.bw);v=0}else{l=t.bc;c=t.bc2;var y=en(t.a,o,a);if(y){l=an(l,y);c&&(c=an(c,y))}d=n.w(t.bw);h=t.ls;v=t.flowVelocity}var b=u.zoom&&u.zoom.adaptiveStyling;d=Math.max(b?ir(n.getZoomScale()):1,d);u._rendering&&u._rendering.canvasSkipItemsOutOfView&&Er(g,p,m+d,n)||Rr(e,g,p,m,t.sa,t.ea,l,c,d,h,t.off,u,s,f,v)}function Rr(e,t,n,r,i,o,a,u,s,f,l,c,d,h,v){e.lineWidth=s;var g,p=o-i,m=0;if("flow"===f||gr(f)){var y=p*r;if("flow"===f){m=Ir(e,y,s,v*ye(l),d,h)}else g=pr(e,y,s,f)}if(u){var b=c.linkStyle.transition,x=void 0,w=void 0;if(l>0){x=a;w=u}else{x=u;w=a}if(0===b){Gr(e,t,n,r,i,o,Br(e,t,n,r,i,o,.5,x,.5,w))}else Lr(e,t,n,r,i,x,o,w,b,g,v,m)}else Gr(e,t,n,r,i,o,a);if("flow"===f){e.lineDashOffset=0;e.setLineDash([])}else f&&vr(e)}function Lr(e,t,n,r,i,o,a,u,s,f,l,c){var d=a-i,h=Ht(o);3===h.length&&h.push(1);var v=Ht(u);3===v.length&&v.push(1);var g=0;s<1&&(g=d*(1-s)/2);var p=d-2*g,m=g*r,y=0;void 0!==l&&(y+=c);s<1&&Gr(e,t,n,r,i,i+g,o,y);(void 0!==l||f)&&(y+=m);for(var b=Math.ceil(p/(Math.PI/2)),x=(v[0]-h[0])/b,w=(v[1]-h[1])/b,A=(v[2]-h[2])/b,M=(v[3]-h[3])/b,I=h[0],E=h[1],k=h[2],C=h[3],S=1/r,T=Wt(I,E,k,C),R=p/b,L=0;L<b;L++){var B=i+g+L*R-.25*S,G=i+g+(L+1)*R;L===b-1&&(G+=.25*S);I+=x;E+=w;k+=A;C+=M;Gr(e,t,n,r,B,G,Br(e,t,n,r,B,G,0,T,1,T=Wt(Math.floor(I),Math.floor(E),Math.floor(k),C)),y);if(void 0!==l||f){y+=R*r}}s<1&&Gr(e,t,n,r,a-g,a,u,y)}function Br(e,t,n,r,i,o,a,u,s,f){var l=t+r*Math.cos(i),c=t+r*Math.cos(o),d=n+r*Math.sin(i),h=n+r*Math.sin(o),v=e.createLinearGradient(l,d,c,h);v.addColorStop(a,u);v.addColorStop(s,f);return v}function Gr(e,t,n,r,i,o,a,u){e.beginPath();e.strokeStyle=a;u&&(e.lineDashOffset=u);e.arc(t,n,r,i,o,!1);e.stroke();e.closePath();u&&(e.lineDashOffset=0)}function Or(e,t,n){if(n)return t>=0?Math.max(1,t):-1;var r=4;return t>0?e-t<r?Math.max(.2,t*((e-t)/r)):Math.max(1,t):-1}var Zr=2*Math.PI,Yr=new Float32Array(3);function Fr(e,t,n,r,i,o,a,u){var s,f=n.worldToViewDistance(t.r);s=r?n.sw(t.bw):n.worldToViewDistance(t.bw);var l=en(t.a,o,a);yr(Yr,t.x,t.y,t.a,t.anchorIndex);var c=n.x(Yr[0]),d=n.y(Yr[1]);if(!(u._rendering&&u._rendering.canvasSkipItemsOutOfView)||!Er(c,d,f,n)){s=t.noMinBorderWidth?Math.max(1,s):Or(f,s,r);r?zr(e,c,d,f,t.bc&&t.sc,s,t.fc&&t.sc,t.fi):zr(e,c,d,f,l?an(t.bc,l):t.bc,s,l?an(t.fc,l):t.fc,t.fi,t.bs)}}function zr(e,t,n,r,i,o,a,u,s){void 0===s&&(s=void 0);e.fillStyle=u?a:Dt.transparent;if(o>=0){gr(s)&&pr(e,Zr*r,o,s,!0);e.lineWidth=o;e.strokeStyle=i}e.beginPath();e.arc(t,n,r,0,Zr,!1);e.closePath();u&&e.fill();if(o>=0){e.stroke();s&&vr(e)}}var Pr=new Float32Array(5);function Dr(e,t,n,r,i,o,a,u,s,f){xr(Pr,t.x1,t.y1,t.x2,t.y2,t.a,t.anchorIndex);var l=n.x(Pr[0]),c=n.y(Pr[1]),d=n.x(Pr[2]),h=n.y(Pr[3]),v=u.zoom&&u.zoom.adaptiveStyling?ir(n.getZoomScale()):1,g=Math.max(v,r?n.sw(t.w):n.w(t.w));if(!(u._rendering&&u._rendering.canvasSkipItemsOutOfView)||!Cr(l,c,d,h,g,n))if(r)Vr(e,l,c,d,h,t.c&&t.sc,null,g,void 0,u,s,0,0);else{var p=en(t.a,o,a),m=t.c,y=t.c2;if(p){m=an(m,p);y&&(y=an(t.c2,p))}Vr(e,l,c,d,h,m,y,g,t.ls,u,s,f,t.flowVelocity)}}function Vr(e,t,n,r,i,o,a,u,s,f,l,c,d){e.lineWidth=u;if(a){var h=e.createLinearGradient(t,n,r,i),v=f.linkStyle.transition;h.addColorStop((1-v)/2,o);h.addColorStop((1+v)/2,a);e.strokeStyle=h}else e.strokeStyle=o;if("flow"===s||gr(s)){var g=r-t,p=i-n,m=Math.sqrt(g*g+p*p);"flow"===s?Ir(e,m,u,d,l,c):pr(e,m,u,s)}e.beginPath();e.moveTo(t,n);e.lineTo(r,i);e.stroke();e.closePath();if("flow"===s){e.lineDashOffset=0;e.setLineDash([])}else s&&vr(e)}var Wr=new Float32Array(5);function Xr(e,t,n,r,i,o,a,u){var s=r?n.sw(t.bw):n.w(t.bw);yr(Wr,0,0,t.a,t.anchorIndex);var f,l,c,d,h,v,g=t.anchorIndex>-1&&Wr[2],p=u._rendering&&u._rendering.canvasSkipItemsOutOfView;if(g){f=n.worldToViewDistance(t.x1);l=n.worldToViewDistance(t.y1);c=n.worldToViewDistance(t.x2);d=n.worldToViewDistance(t.y2);h=n.x(Wr[0]);v=n.y(Wr[1]);if(p&&kr(f+h,l+v,c+h,d+v,n))return}else{xr(Wr,t.x1,t.y1,t.x2,t.y2,t.a,t.anchorIndex);f=n.x(Wr[0]);l=n.y(Wr[1]);c=n.x(Wr[2]);d=n.y(Wr[3]);if(p&&kr(f,l,c,d,n))return}if(s>=0){s=Or(Math.min(c-f,d-l)/2,s,r)}if(r)Ur(e,f,l,c,d,t.bc&&t.sc,s,t.fc&&t.sc,t.fi,void 0,g,h,v);else{var m=en(t.a,o,a);Ur(e,f,l,c,d,m?an(t.bc,m):t.bc,s,m?an(t.fc,m):t.fc,t.fi,t.bs,g,h,v)}}function Ur(e,t,n,r,i,o,a,u,s,f,l,c,d){void 0===f&&(f=void 0);var h=t,v=n,g=r,p=i;if(l){e.save();e.translate(c,d);e.rotate(l)}else if(c||d){h+=c;v+=d;g+=c;p+=d}if(s){e.fillStyle=u;e.fillRect(h,v,g-h,p-v)}if(a>=0)if(gr(f)){var m=a/2;Vr(e,h-m,v,g+m,v,o,null,a,f,void 0,0,0,0);Vr(e,g,v-m,g,p+m,o,null,a,f,void 0,0,0,0);Vr(e,g+m,p,h-m,p,o,null,a,f,void 0,0,0,0);Vr(e,h,p+m,h,v-m,o,null,a,f,void 0,0,0,0)}else{e.lineWidth=a;e.strokeStyle=o;e.strokeRect(h,v,g-h,p-v)}l&&e.restore()}var Nr=new Float32Array(5);function jr(e,t,n,r,i,o,a,u){yr(Nr,0,0,t.a,t.anchorIndex);var s,f,l,c,d,h,v=t.anchorIndex>-1&&Nr[2],g=u._rendering&&u._rendering.canvasSkipItemsOutOfView;if(v){s=n.worldToViewDistance(t.x1);f=n.worldToViewDistance(t.y1);l=n.worldToViewDistance(t.x2);c=n.worldToViewDistance(t.y2);d=n.x(Nr[0]);h=n.y(Nr[1]);if(g&&kr(s+d,f+h,l+d,c+h,n))return}else{xr(Nr,t.x1,t.y1,t.x2,t.y2,t.a,t.anchorIndex);s=n.x(Nr[0]);f=n.y(Nr[1]);l=n.x(Nr[2]);c=n.y(Nr[3]);if(g&&kr(s,f,l,c,n))return}if(t.vx){s-=t.vx;f-=t.vx;l+=t.vx;c+=t.vx}if(r)Ur(e,s,f,l,c,t.sc,-1,t.sc,!0,void 0,v,d,h);else{var p=en(t.a,o,a),m=e.globalAlpha;e.globalAlpha=null===p?1:p;Kr(e,"ci"===t.s?i.getCutoutImage(t.u):i.get(t.u),s,f,l,c,t.s,v,d,h);e.globalAlpha=m}}function Kr(e,t,n,r,i,o,a,u,s,f){if(t.isLoaded){var l=t.im;a&&t[a]&&(l=t[a]);if(u){e.save();e.translate(s,f);e.rotate(u)}e.imageSmoothingQuality="high";e.drawImage(l,n,r,i-n,o-r);u&&e.restore()}}var Hr=new Float32Array(5);function _r(e,t,n,r,i,o,a,u){yr(Hr,0,0,t.a,t.anchorIndex);var s,f,l,c,d,h,v=t.anchorIndex>-1&&Hr[2],g=u._rendering&&u._rendering.canvasSkipItemsOutOfView;if(v){s=n.worldToViewDistance(t.x1);f=n.worldToViewDistance(t.y1);l=n.worldToViewDistance(t.x2);c=n.worldToViewDistance(t.y2);d=n.x(Hr[0]);h=n.y(Hr[1]);if(g&&kr(s+d,f+h,l+d,c+h,n))return}else{xr(Hr,t.x1,t.y1,t.x2,t.y2,t.a,t.anchorIndex);s=n.x(Hr[0]);f=n.y(Hr[1]);l=n.x(Hr[2]);c=n.y(Hr[3]);if(g&&kr(s,f,l,c,n))return}if(r)Jr(e,s,f,l,c,n.worldToViewDistance(t.r),t.bc&&t.sc,n.sw(t.bw),t.fc&&t.sc,t.fi,v,d,h);else{var p=en(t.a,o,a);Jr(e,s,f,l,c,n.worldToViewDistance(t.r),p?an(t.bc,p):t.bc,n.w(t.bw),p?an(t.fc,p):t.fc,t.fi,v,d,h)}}function Jr(e,t,n,r,i,o,a,u,s,f,l,c,d){var h=t,v=n,g=r,p=i;if(l){e.save();e.translate(c,d);e.rotate(l)}else if(c||d){h+=c;v+=d;g+=c;p+=d}e.beginPath();e.moveTo(h+o,v);e.lineTo(g-o,v);e.arcTo(g,v,g,v+o,o);e.lineTo(g,p-o);e.arcTo(g,p,g-o,p,o);e.lineTo(h+o,p);e.arcTo(h,p,h,p-o,o);e.lineTo(h,v+o);e.arcTo(h,v,h+o,v,o);e.closePath();if(f){e.fillStyle=s;e.fill()}if(u>=0){e.lineWidth=Math.max(1,u);e.strokeStyle=a;e.stroke()}l&&e.restore()}var Qr=new Float32Array(3);function qr(e,t,n,r,i,o,a,u){var s;yr(Qr,0,0,t.a,t.anchorIndex);var f=n.x(Qr[0]),l=n.y(Qr[1]),c=n.worldToViewDistance(t.x1),d=n.worldToViewDistance(t.y1),h=n.worldToViewDistance(t.x2),v=n.worldToViewDistance(t.y2),g=u.linkStyle&&u.linkStyle.inline,p=g&&Qr[2],m=Math.max(Math.abs(c),Math.abs(d),Math.abs(h),Math.abs(v));if(!(u._rendering&&u._rendering.canvasSkipItemsOutOfView)||!kr(f-m,l-m,f+m,l+m,n))if(r){s=n.worldToViewDistance(t.fs)*t.pf;t.back&&Ur(e,c,d,h,v+s,t.sc,-1,t.sc,!0,void 0,p,f,l)}else{var y=void 0,b=n.worldToViewDistance(t.x),x=n.worldToViewDistance(t.y),w=t.xc,A=n.worldToViewDistance(t.fs);s=A*t.pf;g||(x+=n.worldToViewDistance(t.yOffset));var M=en(t.a,o,a),I=M?an(t.c,M):t.c,E=1;if(u.zoom&&u.zoom.adaptiveStyling){if(!t.isfi&&A<=5){if(0===(E=Math.max(0,A-3)/2))return;I=an(I,E)}}else if(t.w&&(A<=3||A<xn.browserMinimumFontSize)){var k=n.worldToViewDistance(t.w),C=t.isSel?t.bc:an(t.c,.4);C=M?an(C,M):C;w&&(b-=Math.floor(k/2));t.back&&t.bc!==Dt.textback&&Ur(e,b,x-A,b+k,x+s,y=M?an(t.bc,M):t.bc,-1,y,!0,void 0,p,f,l);Ur(e,b,x-A,b+k,x+s,C,-1,C,!0,void 0,p,f,l);return}t.back&&Ur(e,c,d,h,v+s,y=an(t.bc,M?M*E:E),-1,y,!0,void 0,p,f,l);$r(e,b,x+s/2,t.t,I,A,t.bo,t.ff,w,p,f,l)}}function $r(e,t,n,r,i,o,a,u,s,f,l,c){Mn(e,o,a,u);e.fillStyle=i;e.textAlign=s?"center":"left";var d=t,h=n;if(f){e.save();e.translate(l,c);e.rotate(f)}else if(l||c){d+=l;h+=c}e.fillText(r,d,h);f&&e.restore()}var ei=1,ti=new Float32Array(3);function ni(e,t,n,r,i,o,a,u){yr(ti,0,0,t.a,t.anchorIndex);var s=n.worldToViewDistance(t.x1),f=n.worldToViewDistance(t.y1),l=n.worldToViewDistance(t.x2),c=n.worldToViewDistance(t.y2),d=n.worldToViewDistance(t.x3),h=n.worldToViewDistance(t.y3),v=n.x(ti[0]),g=n.y(ti[1]),p=t.anchorIndex>-1&&ti[2],m=Math.min(s,Math.min(l,d)),y=Math.min(f,Math.min(c,h)),b=Math.max(s,Math.max(l,d)),x=Math.max(f,Math.max(c,h));if(!(u._rendering&&u._rendering.canvasSkipItemsOutOfView)||!kr(m+v,y+g,b+v,x+g,n))if(r)ri(e,s,f,l,c,d,h,t.bc&&t.sc,n.sw(t.bw),t.fc&&t.sc,t.fi,p,v,g);else{var w=en(t.a,o,a);ri(e,s,f,l,c,d,h,w?an(t.bc,w):t.bc,n.w(t.bw),w?an(t.fc,w):t.fc,t.fi,p,v,g)}}function ri(e,t,n,r,i,o,a,u,s,f,l,c,d,h){var v=t,g=n,p=r,m=i,y=o,b=a;if(c){e.save();e.translate(d,h);e.rotate(c)}else if(d||h){v+=d;g+=h;p+=d;m+=h;y+=d;b+=h}if(Math.abs(p-v)>ei||Math.abs(m-g)>ei){e.beginPath();e.moveTo(v,g);e.lineTo(p,m);e.lineTo(y,b);e.lineTo(v,g);e.closePath();if(l){e.fillStyle=f;e.fill()}if(s>=0){e.lineWidth=Math.max(1,s);e.strokeStyle=u;e.stroke()}}c&&e.restore()}function ii(e){return e}var oi={getZoomScale:function(){return 1},height:function(){return 1/0},scale:ii,sw:ii,viewToWorldDistance:ii,w:ii,width:function(){return 1/0},worldToViewDistance:ii,x:ii,y:ii};function ai(e){var t={};Object.keys(e).forEach((function(n){t[dn[n]]=e[n]}));return t}var ui,si,fi=ai({arc:Tr,circle:Fr,image:jr,line:Dr,rect:Xr,roundrect:_r,text:qr,triangle:ni});function li(e,t,n,r,i,o,a,u,s,f,l,c){if(!n.a.hiddenByGenerator){var d=void 0;if(a){var h=a.shadowType;d=i?n.sc&&(!h||h>-1):!h||h<1}else d=!i||n.sc;if(d){var v=t&&t[n.p]||fi[n.p];if(v){var g=n.a;v(e,n,r,i,o,g.bg?u:1,g.gh?s:1,f,l,c)}}}}function ci(e){e.save();e.setTransform(1,0,0,1,0,0);e.clearRect(0,0,e.canvas.width,e.canvas.height);e.restore()}function di(e,t,n){e.globalAlpha=n;e.drawImage(t,0,0,t.width,t.height);e.globalAlpha=1}function hi(e,t,n,r,i,o,a,u,s,f,l,c,d,h){var v,g,p,m=n,y=t,b=!1,x="boolean"==typeof d;a&&ci(g=a.getContext("2d"));var w=n?n.settings().zoom:1,A=performance.now();function M(e,r){v=e;s&&e.blatOverview&&!f&&s(t,n);b=e.overview||!1;if(a&&r.bg){var i=!e.bg;if(i&&p){di(t,a,l);ci(g)}p=!1;y=i?t:g}m=e.useView&&n?n:oi}function I(e){if(!u||b){p=!0;var t=!0;x&&!o&&(t=d?m!==oi:m===oi);t&&li(y,h,e,m,o,r,v,l,c,i,w,A)}}e.forEach(I,M,!1,!1)}function vi(e,t,n,r){var i,o,a=$t(),u=!0,s=5,f=null,l={webgl:[0,0,0,0],rgb:void 0},c=(i={},o={},{getColour:function(e){if(!e)return l;var t=i[e];if(!t){var n=$t(o);t={rgb:n,webgl:sn(n,!0)};i[e]=t;o[n]=e}return t},getId:function(e){return o[e]||null}});function d(i,o,l,h){var v;if(t.webgl)v=r.drawShadowCanvas(Math.floor(i),Math.floor(o));else{if(u){f&&l.drawShadowCanvas(t,n);l.drawShadowCanvas(e,n);u=!1}v=e.getImageData(Math.floor(i),Math.floor(o),1,1).data}var g=Vt(v[0],v[1],v[2]);if(g===a)return null;var p=c.getId(g);if(p)return p;if(r)return null;var m=h||1;return m>s?null:i+m>s&&o+m>s?d(i-1,o-1,l,++m):d(i+1,o+1,l,++m)}function h(){u=!0}function v(e){f=e}function g(){return c}return{dirty:h,debugCanvas:v,getShadowColourMap:g,test:d}}function gi(e,t,n){var r=new Map,i=re({},e,{isStart:!0,isGroup:!0}),o=re({},e,{isStart:!1,isGroup:!0});i.endMarker=o;o.startMarker=i;return{insert:function(e){n.insertBefore(o,e)},getStartMarker:function(){return i},getEndMarker:function(){return o},getValue:function(){return e},getParent:function(){return t},getChildren:function(){return r}}}function pi(e){var t=new Map;function n(n,r){var i=gi(n,r,e);if(r){r.getChildren().set(n.id,i);e.insertBefore(r.getEndMarker(),i.getStartMarker());e.insertAfter(i.getStartMarker(),i.getEndMarker())}else{t.set(n.id,i);e.append(i.getStartMarker());e.append(i.getEndMarker())}return i}function r(e){var n;return e.every((function(e){return!!(n=n?n.getChildren().get(e):t.get(e))}))}function i(e){var n,r;if(!e.every((function(e){(n=n?n.getChildren().get(e):t.get(e))&&(r=e);return!!n})))throw new Error("Path not found: "+e+". Last entry: "+r);return n}return{append:n,hasPath:r,get:i}}function mi(){var e=null,t=null;function n(e){f(t,e)}function r(){e=null;t=null}function i(n){var r=n;r._prev?r._prev._next=r._next:e=r._next;r._next?r._next._prev=r._prev:t=r._prev}function o(){return e}function a(){return t}function u(e){return e._next}function s(e){return e._prev}function f(n,r){if(!r||"object"!=typeof r)throw new Error("Object Required");var i=r;i._prev=n||null;if(n){i._next=n._next;n._next=i}else{i._next=e;e=i}i._next?i._next._prev=i:t=i}function l(e,t){e?f(e._prev||null,t):n(t)}function c(t){for(var n=e;n;n=n._next){var r=t(n);r&&(n=r)}}function d(){for(var t=[],n=e;n;n=n._next)t.push(n);return t}return{append:n,clear:r,forEach:c,getFirst:o,getLast:a,getNext:u,getPrevious:s,insertAfter:f,insertBefore:l,remove:i,toArray:d}}!function(e){e[e.None=0]="None";e[e.Line=1]="Line";e[e.Arc=2]="Arc"}(ui||(ui={}));!function(e){e[e.MoveTo=0]="MoveTo";e[e.LineTo=1]="LineTo"}(si||(si={}));function yi(e){return{a:null,arrowhead:ui.None,back:!1,bc:void 0,bc2:void 0,bo:!1,bs:void 0,bw:0,c:void 0,c2:void 0,custom:void 0,id:e,isDonut:!1,ea:0,fc:void 0,ff:void 0,fi:!1,flowVelocity:0,fs:0,hi:!1,isfi:!1,isSel:!1,ls:void 0,noMinBorderWidth:!1,off:0,p:"",pf:0,r:0,anchorIndex:0,s:null,sa:0,sc:"",t:"",u:"",vx:0,w:0,wbc:void 0,wbc2:void 0,wc:void 0,wc2:void 0,wfc:void 0,wsc:void 0,wmargin:0,x:0,x1:0,x2:0,x3:0,xc:!1,y:0,y1:0,y2:0,y3:0,yOffset:0}}function bi(e,t){function n(n,r,i,o,a,u,s,f,l,c,d,h,v){var g=t(l,dn.arc);g.x=n;g.y=r;g.r=i;g.sa=o;g.ea=a;g.bw=f;g.ls=c;g.anchorIndex=-1;if(u!==g.bc){g.bc=u;g.wbc=sn(u)}if(s){if(s!==g.bc2){g.bc2=s;g.wbc2=sn(s)}}else{g.bc2=void 0;g.wbc2=void 0}g.isDonut=!!d;g.anchorIndex=d?0:-1;g.off=h;if(v){g.ls="flow";g.flowVelocity=v.velocity||0}else{g.ls=c;g.flowVelocity=0}e(g)}return n}function xi(e,t){function n(n,r,i,o,a,u,s,f,l,c,d){var h=t(f,dn.circle);h.x=n;h.y=r;h.anchorIndex=l;h.r=i;h.bw=a;h.fi=s;h.bs=c;h.noMinBorderWidth=!!d;if(o!==h.bc){h.bc=o;h.wbc=sn(o)}if(u!==h.fc){h.fc=u;h.wfc=sn(u)}e(h)}return n}function wi(e,t){function n(n,r,i,o,a,u,s,f,l,c){var d=t(u,dn.image);d.x1=n;d.y1=r;d.x2=i;d.y2=o;d.anchorIndex=s;d.u=a;d.s=f;d.vx=l;d.hi=c;e(d)}return n}function Ai(e,t){function n(n,r,i,o,a,u,s,f,l,c){var d=t(f,dn.line);d.x1=n;d.y1=r;d.x2=i;d.y2=o;d.anchorIndex=-1;if(a!==d.c){d.c=a;d.wc=sn(a)}if(u){if(u!==d.c2){d.c2=u;d.wc2=sn(u)}}else{d.c2=void 0;d.wc2=void 0}d.w=s;if(c){d.ls="flow";d.flowVelocity=c.velocity||0}else{d.ls=l;d.flowVelocity=0}e(d)}return n}function Mi(e,t){function n(n,r,i,o,a,u,s,f,l,c,d){var h=t(l,dn.rect);h.x1=n;h.y1=r;h.x2=i;h.y2=o;h.bw=u;h.fi=f;h.bs=d;h.anchorIndex=c;if(a!==h.bc){h.bc=a;h.wbc=sn(a)}if(s!==h.fc){h.fc=s;h.wfc=sn(s)}e(h)}return n}function Ii(e,t){function n(n,r,i,o,a,u,s,f,l,c,d){var h=t(c,dn.roundrect);h.x1=n;h.y1=r;h.x2=i;h.y2=o;h.r=a;h.bw=s;h.fi=l;h.anchorIndex=d;if(u!==h.bc){h.bc=u;h.wbc=sn(u)}if(f!==h.fc){h.fc=f;h.wfc=sn(f)}e(h)}return n}function Ei(e,t){function n(n,r,i,o,a,u,s,f,l,c,d,h,v,g,p,m,y,b,x,w,A){void 0===x&&(x=!1);var M=t(s,dn.text);M.x=n;M.y=r;M.yOffset=0|(A||0);M.t=i;M.anchorIndex=f;M.fs=a;M.bo=u;M.ff=l;M.wmargin=w||0;M.xc=c;M.w=d;M.isfi=h;M.isSel=x;if(o!==M.c){M.c=o;M.wc=sn(o)}M.x1=g;M.y1=p;M.x2=m;M.y2=y;M.back=v;if(v&&b!==M.bc){M.wbc=sn(b);M.bc=b}M.pf=.08;e(M)}return n}function ki(e,t){function n(n,r,i,o,a,u,s,f,l,c,d,h,v){var g=t(d,dn.triangle);g.x1=n;g.y1=r;g.x2=i;g.y2=o;g.x3=a;g.y3=u;g.anchorIndex=h;g.bw=f;g.fi=c;g.arrowhead=v;if(s!==g.bc){g.bc=s;g.wbc=sn(s)}if(l!==g.fc){g.fc=l;g.wfc=sn(l)}e(g)}return n}var Ci=[8,16,32,64,128,256,512,1024,2048,4096],Si=3;function Ti(){var e=8,t=new Float32Array(e*e),n=0;return{getData:function(){return t},add:function(){if(n+Si>t.length){var r=t;e=Ri(n+Si);(t=new Float32Array(e*e)).set(r)}n+=Si},getUsedSize:function(){return n},getTextureSize:function(){return e}}}function Ri(e){for(var t=Math.ceil(Math.sqrt(e)),n=8,r=1,i=Ci.length;r<i&&!(t<=n);r++)n=Ci[r];return n}function Li(e,t,r){var o,a,u,s,f,l,c,d,h,v,g=e||{},p={isContentLayer:!1,alwaysUpdate:!1},m=F(t,p),y=Object.keys(m),b=!1;try{
}catch(e){}function x(e,t){var n;if(b)n=d.getNext();else{n=yi(e);if(d.isHitTested){var r=w(e);n.wsc=r.webgl;n.sc=r.rgb}n.a=d}n.p=t;return n}function w(e){return u.getColour(e)}function A(e,t,n,r){var i=yi(e);i.p="R";var o=w(e);i.wsc=o.webgl;i.sc=o.rgb;if("circle"===r){var a=Math.min(t,n);i.x1=-a;i.y1=-a;i.x2=a;i.y2=a}else{i.x1=-t;i.y1=-n;i.x2=t;i.y2=n}i.a=d;return i}function M(e){return a.hasPath(e)}function I(e){return a.get(e)}function E(e,t){var n="";t&&(n=t.getValue().data.path+".");var r={id:e,data:re({path:n+=e},g[e])};t&&(r.data=F(r.data,t.getValue().data));r.data=F(r.data,m);r.data.bg=r.data.bg&&!r.data.perItemAlpha;return a.append(r,t)}function k(){c=new Map;v=Ti();c.set("_extras",mr(v));o=mi();a=pi(o)}function C(e){if(!b){d.add(e);f.insert(e)}}function S(e){var t=c.get(e);if(t){t.forEach(o.remove);t.reset()}}function T(e,t,n){var r=t[n];if(e[n]!==r){e[n]=r;return!0}return!1}function R(e,t,n,r){var i,a,u,s,f=re({},m),l={};function c(o){if(o.isGroup){if(o.isStart){var c=o;if(r)return t(c.data);if(n&&!c.data.alwaysUpdate)return o.endMarker._prev;for(a=0,u=y.length;a<u;a++){s=y[a];var d=T(f,c.data,s);d&&(l[s]=!0);i=i||d}if(i&&c.data.isContentLayer){t(c.data,l);i=!1;for(a=0,u=y.length;a<u;a++){s=y[a];l[s]=!1}}}}else e(o);return!1}o.forEach(c)}function L(){d=c.get("_extras");b=!1}function B(e,t){return z(e).getAnchorPosition(t)}function G(e,t,n,r,i){z(e).setAnchorPosition(t,n,r,i)}function O(){d.hiddenByGenerator=!0}function Z(){L();S("_extras")}function Y(e){S(e);c.delete(e)}function z(e){return c.get(e)}function P(){return v}function D(e,t){d=z(e);b=t;if(d)t?d.goToBeginning():S(e);else{d=mr(v);c.set(e,d)}return d}function V(e){s=e}function W(e){u=e}function X(){return h}function U(e){h=e;l=e?a.get(e):null}function N(e){if(e){if(!(f=l?l.getChildren().get(e)||null:a.get([e])))throw new Error("Layer: "+e+" at "+h+" not found")}else f=null}function j(){return f?f.getValue().id:null}function K(e){var t=x(e.id,e.p);n(e,(function(e,n){t[n]=e}));C(t)}function H(e){e.sc=void 0;e.wsc=void 0}function _(e,t){var n=c.get(e);if(n){n.isHitTested=t;t||n.forEach(H)}}function J(){return d?i(d.getPrevious()):null}function Q(e,t,n){t.forEach((function(t){if(!t.a.hiddenByGenerator){var r=kn(e,t);r&&(n=n?Cn(n,r):r)}}));return n}function q(e,t){var n=null,r=[];e&&e.size?e.forEach((function(e){var t=c.get(e);t&&r.push(t)})):c.forEach((function(e,t){"_extras"!==t&&r.push(e)}));r.forEach((function(e){n=Q(t,e,n)}));return n}function $(){c&&c.clear();g={};p={};m={};y=[];o.clear();a=pi(o);u=null;f=null;l=null;c=new Map;d=null;h=null;var e=te;Object.keys(e).forEach((function(t){e[t]=void 0;delete e[t]}));te=void 0}function ee(e,t){ci(e);hi(te,e,t,{},{},!0,null,!1,null,!1,0,0,!1,s||void 0)}k();var te={arc:bi(C,x),circle:xi(C,x),image:wi(C,x),line:Ai(C,x),rect:Mi(C,x),roundRect:Ii(C,x),text:Ei(C,x),triangle:ki(C,x),clonePreviousPrimitive:J,copyPrimitive:K,createDummyShapePrimitive:A,createLayer:E,destroy:$,drawShadowCanvas:ee,forEach:R,getAnchorBuffer:P,getAnchorPosition:B,getItem:z,getLayer:j,getLayerAt:I,getLayerPath:X,hasLayerPathAt:M,itemExtents:q,removeItem:Y,resetExtras:Z,setAnchorPosition:G,setHiddenByGenerator:O,setHitTesting:_,setLayer:N,setLayerPath:U,setShadowColourMap:W,setShadowCustomCanvasPrimitives:V,setup:k,startGeneratingForExtras:L,useItem:D};r&&r(C,x);return te}var Bi=-1,Gi=1,Oi={MAIN:"MAIN",BG:"BG",FG:"FG",COMBOS:"COMBOS",REVEALED:"REVEALED",TRANSIENT:"TRANSIENT",OVERVIEW_IMAGE:"OVERVIEW_IMAGE",COMBO_CONTAINER:"COMBO_CONTAINER",TIMEBAR:"TIMEBAR",BANDS:"BANDS",UNDERLAYS:"UNDERLAYS",SHAPES_SEL_BORDER:"SHAPES_SEL_BORDER",SHAPES:"SHAPES",HALOS:"HALOS",HANDLES:"HANDLES",NODES_SEL_BORDER:"NODES_SEL_BORDER",LINKS:"LINKS",NODES:"NODES",DRAGGERS:"DRAGGERS",BUBBLES:"BUBBLES",NODESSEL:"NODESSEL",BUBBLESSEL:"BUBBLESSEL",BANDLABELS:"BANDLABELS",OVERLAYS:"OVERLAYS",OVERLAYSSHADOW:"OVERLAYSSHADOW",OVERVIEW:"OVERVIEW",OVERVIEWSHADOW:"OVERVIEWSHADOW",WAIT:"WAIT"},Zi={};Zi[Oi.COMBO_CONTAINER]=Oi.NODES_SEL_BORDER;Zi[Oi.NODES]=Oi.NODES_SEL_BORDER;Zi[Oi.SHAPES]=Oi.SHAPES_SEL_BORDER;var Yi={UNDERLAYS:{alwaysUpdate:!0,isContentLayer:!0,useView:!1},BANDLABELS:{alwaysUpdate:!0,isContentLayer:!0,useView:!1},BANDS:{alwaysUpdate:!0,isContentLayer:!0,useView:!1},MAIN:{overview:!0},COMBOS:{perItemAlpha:!0,overview:!0},COMBO_CONTAINER:{isContentLayer:!0,overview:!0},REVEALED:{},OVERLAYS:{shadowType:Bi,useView:!1,alwaysUpdate:!0,isContentLayer:!0},HANDLES:{useView:!1,alwaysUpdate:!0,isContentLayer:!0},OVERLAYSSHADOW:{shadowType:Gi,useView:!1,alwaysUpdate:!0,isContentLayer:!0},OVERVIEWSHADOW:{shadowType:Gi,useView:!1,alwaysUpdate:!0,isContentLayer:!0},WAIT:{useView:!1,alwaysUpdate:!0,isContentLayer:!0},OVERVIEW:{shadowType:Bi,useView:!1,alwaysUpdate:!0,isContentLayer:!0},OVERVIEW_IMAGE:{shadowType:Bi,blatOverview:!0,useView:!1,alwaysUpdate:!0,isContentLayer:!0},DRAGGERS:{alwaysUpdate:!0,isContentLayer:!0},BG:{bg:!0,overview:!1},FG:{bg:!1,overview:!0},SHAPES_SEL_BORDER:{isContentLayer:!0},NODES_SEL_BORDER:{isContentLayer:!0},LINKS:{isContentLayer:!0,newDrawCall:!0},SHAPES:{isContentLayer:!0},NODES:{isContentLayer:!0},HALOS:{isContentLayer:!0},BUBBLES:{isContentLayer:!0}},Fi=[Oi.SHAPES_SEL_BORDER,Oi.SHAPES,Oi.HALOS,Oi.NODES_SEL_BORDER,Oi.LINKS,Oi.NODES,Oi.BUBBLES],zi={shadowType:0,bg:!1,blatOverview:!1,useView:!0,alwaysUpdate:!1,isContentLayer:!1,overview:!1,newDrawCall:!1,perItemAlpha:!1};function Pi(e){var t=Yi;e&&(t=re({},t,e));var n=Li(t,zi),r="COMBO_";function i(e){return r+e}function o(e){return 0===e.indexOf(r)}function a(e){var t,r=[],i=null;e.forEach((function(e){r.push(e);var a=r;o(e)&&(a=a.concat([Oi.FG]));if(n.hasLayerPathAt(a))t=n.getLayerAt(r);else{t=n.createLayer(e,i);n.createLayer(Oi.COMBO_CONTAINER,t);u(t)}i=t}))}function u(e){var t=n.createLayer(Oi.BG,e);Fi.forEach((function(e){return n.createLayer(e,t)}));var r=n.createLayer(Oi.FG,e);Fi.forEach((function(e){return n.createLayer(e,r)}))}function s(){n.setup();n.createLayer(Oi.BANDS,null);n.createLayer(Oi.UNDERLAYS,null);u(n.createLayer(Oi.MAIN,null));n.createLayer(Oi.COMBOS,null);var e=n.createLayer(Oi.TRANSIENT,null);u(n.createLayer(Oi.MAIN,e));n.createLayer(Oi.COMBOS,e);var t=n.createLayer(Oi.REVEALED,null);u(n.createLayer(Oi.MAIN,t));n.createLayer(Oi.COMBOS,t);[Oi.DRAGGERS,Oi.HANDLES,Oi.BANDLABELS,Oi.OVERLAYS,Oi.OVERVIEW_IMAGE,Oi.OVERVIEW,Oi.OVERLAYSSHADOW,Oi.OVERVIEWSHADOW,Oi.WAIT].forEach((function(e){n.createLayer(e,null)}))}function f(e,t,r){var i=n.useItem(e.id,t);i.hiddenByGenerator=!1;i.gh=!!e.gh;i.bg=r&&!!e.bg}function l(e){n.setShadowColourMap(e);s()}function c(){n.destroy();n=null}function d(e,t,r){n.setAnchorPosition(e.id,t,r,0,0);e._sx=t;e._sy=r}s();return qn(qn({},n),{createComboSegment:i,createItemLayersAt:a,destroy:c,hasPath:n.hasLayerPathAt,removeAllItems:s,setNodeAnchorPosition:d,setShadowColourMap:l,startGeneratingFor:f})}var Di=8,Vi="_combo_",Wi="_combolink_",Xi={small:6,normal:10,large:20,xlarge:30};function Ui(e,t,n,r){return t*(1.7*e+n*(b(Xi[r])?Xi[r]:Xi.normal))}var Ni=Math.PI/7,ji=Math.cos(Ni);function Ki(e,t,n,r){return ji*Ui(e,t,n,r)}function Hi(e,t,n,r,i,o,a,u,s,f,l){var c=Ui(r,i,f,l.arrows),d=o+Math.PI;e.triangle(t+c*Math.cos(d+Ni),n+c*Math.sin(d+Ni),t+c*Math.cos(d-Ni),n+c*Math.sin(d-Ni),t,n,a,-1,a,!0,u,-1,s)}function _i(e){return Math.abs(e)<1e-5}function Ji(e){return e&&e.length>0&&Array.isArray(e)}function Qi(e){return Ji(e.g)}function qi(e){return!D(e.w)&&!D(e.h)&&e.w>=0&&e.h>=0||e._combo&&e._combo.open}function $i(e){return e._combo&&e._combo.open}function eo(){return new Float32Array(6)}function to(e,t,n,r){if(t){e[4]=t.dx/100*n;e[5]=t.dy/100*r;var i=t.e*n,o=t.e*r;e[0]=-i+e[4];e[1]=-o+e[5];e[2]=i+e[4];e[3]=o+e[5]}else{e[0]=-n;e[1]=-r;e[2]=n;e[3]=r;e[4]=0;e[5]=0}}function no(e,t){return e.oc&&(void 0===e.oc.bw?t.defaultOpenComboStyle.bw:e.oc.bw)||0}function ro(e,t,n,r){return Math.sqrt((n-e)*(n-e)+(r-t)*(r-t))}function io(e){return!!Ji(e.g)||(!(!e.t1||!Ji(e.t1.g))||!(!e.t2||!Ji(e.t2.g)))}var oo=34;function ao(e,t,n,r){var i,o=e.getLayerPath(),a=e.getLayer();if(t){if(n.isRevealed){n.isParentRevealed||(i=o.slice(1));if(n.isParentTransient){i||(i=o.slice(0));i.unshift(Oi.TRANSIENT)}}!n.isTransient||n.isInCombo&&n.isParentTransient||(i=o.slice(1));if(n.isOpenCombo){(i=(i=i||o).slice(0,i.length-1))[i.length-1]===Oi.COMBOS&&(i[i.length-1]=Oi.MAIN);i.push(n.isInBackground?Oi.BG:Oi.FG)}if(i){e.hasPath(i)||e.createItemLayersAt(i);e.setLayerPath(i)}e.setLayer(t)}r();if(t){e.setLayerPath(o);e.setLayer(a)}}var uo=9,so=2;function fo(e){return"b"in e?e.b:Dt.keyline}function lo(e){var t=uo;fo(e)&&(t+=so/2);e.e&&(t*=e.e);return t}var co=3,ho=1;function vo(e){return lo(e)+co}function go(e,t){return lo(e)+ho+lo(t)}function po(e,t){return ro(e,t,0,0)}var mo=eo();function yo(e,t,n,r,i,o,a,u,s,f,l){e.rect(o-u,a-u,o+u,a+u,Dt.transparent,-1,Dt.transparent,!0,r,i,void 0);var c=2*u,d=Hn(n,s,c,!1,l||t.fontFamily,!0),h=po(d.width,d.height),v=c-(h-c)/2;h=po((d=Hn(n,s,v,!1,l||t.fontFamily,!0)).width,d.height);var g=t.imageAlignment[s];to(mo,g,u,u);var p=g?g.e:1,m=u*(5/6)*p,y=o-m+mo[4],b=a-m+mo[5],x=o+m+mo[4],w=a+m+mo[5],A=o+mo[4],M=a+v*p/2+mo[5];e.text(A,M,s,f,v*p,!1,r,i,l,!0,h,!0,!1,y,b,x,w)}var bo=W(),xo=.01,wo=Math.PI/2;function Ao(e){var t=e;(t>wo+xo||t<-wo+xo)&&(t+=Math.PI);return t}function Mo(e,t,n,r,i,o,a,u,s,f,l,c,d,h,v,g,p,m,y,b,x,w,A){var M=!0,I=v,E=p;0===n.length&&(M=!1);for(var k=o+bo+(y||"t");c&&I>h;)I=Hn(e,n,E*=.85,f,m).width;var C,S=4*x*b,T=r-I/2,R={x1:T-S,y1:(C=d?i+(b||1)+E/2:i+(1+E)/2)-E,x2:T+I+S,y2:C};if(M){var L=d?w.labelOffset:0;t.text(r,C,n,u,E,f,k,A,m,!0,I,!1,a,R.x1,R.y1,R.x2,R.y2,s,g,S,L)}l&&Io(l,R,E,M,w);return M}function Io(e,t,n,r,i){if(e._edit){e._edit.hib=!1;var o=e._edit;o.x1=Math.min(o.x1,t.x1);o.x2=Math.max(o.x2,t.x2);o.y1=Math.min(o.y1,t.y1);o.y2=Math.max(o.y2,t.y2)}else e._edit={fs:n,x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,hib:!1};var a=e;i.avoidLabels&&r&&a._cl&&a._cl.push(t)}var Eo=[12,9,7,7],ko=eo();function Co(e,t,n,r){e._cl.push({cx:t,cy:n,r:r})}function So(e,t,n,r,i){e._cl.push({x1:t,x2:r,y1:n,y2:i})}function To(e,t,n,r,i,o,a,u,s,f,l,c,d){var h=r,v=i,g=o,p=0;if(a&&!(u&&u._combo&&u._combo.open)){a.e&&(g*=a.e);var m=a.a?l.easingValue:1,y=uo*g*m,x=fo(a),w=x?so*g:-1,A=!!(a.u||a.fi&&a.fi.t),M=void 0,I=0,E=0,k=1;p=y+(x?w/2:0);var C=u&&!b(a.r);if(a.c)if(a.t){var S=!P(a,"fb")||a.fb,T=a.fc||Dt.white,R=a.ff||c.fontFamily,L=void 0,B=void 0,G=void 0,O=void 0;if(a.w&&f){L=g*Eo[1]*m;B=Hn(t,G=(""+a.t).substring(0,25),L,S,R).width;var Z=(O=Math.max(B,y))+y,Y=void 0,F=void 0;switch(s){case"left":Y=(F=h+y)-Z;h=F-Z/2;break;case"centre":Y=h-Z/2;F=h+Z/2;break;default:F=(Y=h-y)+Z;h=Y+Z/2}var z=v-y,D=v+y;e.roundRect(Y,z,F,D,y,x,w,a.c,!0,n,d);if(C){Co(u,Y+y,v,p);Co(u,F-y,v,p);So(u,Y+y,z-w/2,F-y,D+w/2)}}else{e.circle(h,v,y,x,w,a.c,!0,n,d,void 0,!1);B=Hn(t,G=(""+a.t).substring(0,4),L=g*Eo[G.length-1]*m,S,R).width;O=1.7*y;C&&Co(u,h,v,p)}Mo(t,e,G,h,v,n,!1,T,Dt.white,S||!1,null,!0,!1,O,B,!1,L,R,null,1,l.unzoom,c,d)}else{e.circle(h,v,y,x,w,a.c,!0,n,d,void 0,!1);C&&Co(u,h,v,p);if(A){var V=y/1.41421;if(a.u){M=c.imageAlignment[a.u];to(ko,M,V,V);e.image(h+ko[0],v+ko[1],h+ko[2],v+ko[3],a.u,n,d,null,0,!1)}else yo(e,c,t,n,d,h,v,V,a.fi.t,a.fi.c||Dt.black,a.fi.ff||c.iconFontFamily)}}else if(A){C&&Co(u,h,v,y);if(a.u){if(M=c.imageAlignment[a.u]){I=M.dx/100*y;E=M.dy/100*y;k=M.e}e.image(h-y*k+I,v-y*k+E,h+y*k+I,v+y*k+E,a.u,n,d,null,0,!1)}else yo(e,c,t,n,d,h,v,y,a.fi.t,a.fi.c||Dt.black,a.fi.ff||c.iconFontFamily)}a.a&&l.stillDirty.set(U(n),2)}return p}function Ro(e,t){return!(!t||t!==e)}function Lo(e){return"node"!==e.type&&"link"!==e.type}function Bo(e,t,n,r,i){return!!n&&!Lo(e)&&i.unicodeAwareLength(t)>n&&!Ro(e.id,r)}function Go(e,t,n,r,i){var o=t;""===o||o||(o=e.t||"");if(o){Bo(e,o,n,r,i)&&(o=i.unicodeAwareTruncate(o,n-3)+"...");return o.split(/\r\n|\r|\n/)}return[""]}function Oo(e,t,n,r,i,o){for(var a=[],u=0;u<e.length;u++)a[u]=Hn(t,e[u],n,r,i||o).width;return a}var Zo=W();function Yo(e){for(var t=0,n=0;n<e.length;n++)t=Math.max(t,e[n]);return t}function Fo(e,t,n,r,i,o,a,u,s,f,l,c,d){var h=i*u.unzoom;if(o.t){var v=0,g=0,p=e.getLayer();a||e.setLayer(Oi.BUBBLES);var m=o.p?""+o.p:"ne",y="w"===m.substring(1,2),b="s"===m.substring(0,1),x=n+Zo+"bu",w=+(o.fs?o.fs:c)*h,A=o.b?o.b:Dt.keyline,M=o.c?o.c:Dt.white,I=o.fc?o.fc:Dt.black,E=Go(o,null,s.truncateLabel,f.showFullLabel||null,l),k=w+3*h,C=k*E.length,S=Oo(E,t,w,!!o.fb,o.ff,s.fontFamily),T=Yo(S),R=13*h,L=6*h,B=2*i,G=9*h,O=13*h,Z=10*h,Y=r+O,F=C+2*L,z=2*h,P=Math.max(z/2,1),D=3*h;o.g&&delete o.g.e;var V=o.g?17*h:0;y&&(v-=T+2*B+2*R+V);b&&(g+=(w+3)*E.length+2*Y+2*L);var W=v+B+.5,X=v+B+2*R+T+V+.5,U=g-Y-F+.5,N=g-Y+.5;e.roundRect(W,U,X,N,8*h,A,z,M,!0,x,d);To(e,t,x,v+V,(U+N)/2,h,o.g,null,null,!1,u,s,d);var j=U-.5+L+k,K=W+R+V-.5,H=void 0;for(H=0;H<E.length;H++){var _=S[H];e.text(K,j,E[H],I,w,!!o.fb,x,d,o.ff||s.fontFamily,!1,_,!1,!1,K-1.5,j-w,X,N);j+=k}if(y){W=X;G=-G;Z=-Z;P=-P}if(b){N=U;O=-O;D=-D}e.triangle(W+G,N,W+G+Z,N,W+G,N+O,A,z,M,!0,x,d,ui.None);e.triangle(W+G+P,N-D,W+G+Z+P,N-D,W+G+P,N+O-D,A,-1,M,!0,x,d,ui.None);e.setLayer(p)}}var zo=W(),Po=9007199254740;function Do(e,t,n,r,i,o,a,u,s,f,l,c,d,h){e.setHiddenByGenerator();f?e.arc(0,0,0,0,0,a,u,s,t,l,!1,c,d):e.line(0,0,0,0,a,u,s,t,l,d);var v=f?ui.Arc:ui.Line;n&&e.triangle(0,0,0,0,0,0,a,-1,a,!0,t+zo+"a1",-1,v);r&&e.triangle(0,0,0,0,0,0,u||a,-1,u||a,!0,t+zo+"a2",-1,v);if(h){h.pos.t.lx=(i._sx+o._sx)/2;h.pos.t.ly=(i._sy+o._sy)/2}e.setAnchorPosition(t,Po,Po,0,0);e.setAnchorPosition(t,Po,Po,0,1);e.setAnchorPosition(t,Po,Po,0,2)}function Vo(e){return!!e.r}function Wo(e,t,n,r,i,o,a){var u=o-r,s=a-i;return{x:(u*n-s*t)/e,y:(u*t+s*n)/e}}function Xo(e,t,n,r,i,o,a,u,s,f){var l=Wo(t,n,r,i,o,a,u),c=Wo(t,n,r,i,o,s,f);if(l.y>e&&c.y>e||l.y<-e&&c.y<-e)return-1/0;if(_i(c.y-l.y))return Math.max(l.x,c.x);var d,h,v=l.y>c.y?l:c,g=l.y>c.y?c:l;return(d=e<v.y?v.x-(v.y-e)*(v.x-g.x)/(v.y-g.y):v.x)>(h=g.y<-e?g.x-(g.y- -e)*(g.x-v.x)/(g.y-v.y):g.x)?d:h}function Uo(e,t,n,r,i,o,a){var u=i.x1+o,s=i.y1+a,f=i.x2+o,l=i.y2+a,c=e/t/2;return Math.max(Xo(c,t,n,r,o,a,u,s,f,s),Xo(c,t,n,r,o,a,f,s,f,l),Xo(c,t,n,r,o,a,f,l,u,l),Xo(c,t,n,r,o,a,u,l,u,s))}function No(e,t,n,r){var i=-1/0,o=r.cx,a=r.cy,u=e*e,s=-2*e*(o*n-a*t),f=s*s-4*u*(o*o+a*a-r.r*r.r);f>=0&&(i=(-s+Math.sqrt(f))/(2*u));return i}function jo(e,t,n,r,i,o){for(var a,u=-1/0,s=Math.sin(-n),f=Math.cos(-n),l=0;l<r.length;l++){var c=r[l];a=Vo(c)?No(t,s,f,c):Uo(e,t,s,f,c,i,o);u=Math.max(u,a)}return u}function Ko(e,t,n,r,i,o,a){var u=0;r&&(u=r/t);i&&(u=Math.max(u,jo(e,t,n,i,o,a)));return u}function Ho(e,t,n){var r,i,o=qi(e);if(t&&n.selectedNode){r=n.selectedNode.b||e.b;i=n.selectedNode.c||e.c}else{r=e.b;i=e.c}return!(!r&&!i||o)}var _o={t:.5,t1:.15,t2:.85},Jo=W();function Qo(e,t,n,r,i,o,a,u,s,f,l,c,d,h){var v={},g=n-e,p=r-t,m=Math.sqrt(g*g+p*p);if(_i(m))v.skip=!0;else{var y=Math.atan2(p,g),b=Ko(h.tight&&s?0:i,m,y,a._c,a._cl,e,t),x=Ko(h.tight&&f?0:i,m,y+Math.PI,u._c,u._cl,n,r),w=l||0,A=c||0,M=1-((b=Math.max(w,b))+(x=Math.max(A,x))),I=0;if(s||f){I=Ki(i,o,d.unzoom,h.arrows)/m;s&&f&&(I*=1.5)}v.skip=M<Math.max(Math.min(6/m,.1),I);if(!v.skip){v.cx1=e+b*g;v.cy1=t+b*p;v.cx2=n+x*-g;v.cy2=r+x*-p}}return v}function qo(e,t,n,r,i,o){var a=e,u=t,s=Math.ceil(o/8),f=ro(a,u,n,r);return{x:a+=(a-n)/f*(s-i),y:u+=(u-r)/f*(s-i)}}function $o(e,t,r,i,o,a,u,s,f,l,c,d,h,v,g,p,m,y){var b=Qo(u._sx,u._sy,s._sx,s._sy,c,d,u,s,t,r,i,o,m,y);if(b.skip){Do(e,a,t,r,u,s,f,l,c,!1,h,0,g,p);return!1}var x,w=b.cx1,A=b.cy1,M=b.cx2,I=b.cy2,E=M-w,k=I-A,C=0,S=0,T=0,R=0,L=0,B=0,G=.25,O=0;(t||r)&&(O=Ki(c,d,m.unzoom,y.arrows));var Z,Y=0,F=0,z=0,P=!1,D=!1,V=!1,W=!1,X=!1;if(y.tight){if(!t){D=Ho(u,v,y);W=$i(u);P=D||W}if(!r){V=Ho(s,v,y);X=$i(s);P=P||V||X}if(P){var U=Math.max(.001,k*k+E*E),N=Math.sqrt(U);Y=E/N;F=k/N;z=G*c}}if(t){C=Math.atan2(k,E);T=w;R=A;x=qo(w,A,M,I,O,c);w=x.x;A=x.y}else if(y.tight&&D){w-=z*Y;A-=z*F}else if(y.tight&&W){Z=no(u,y);w-=Y*Z;A-=F*Z}if(r){S=Math.atan2(k,E);L=M;B=I;x=qo(M,I,w,A,O,c);M=x.x;I=x.y}else if(y.tight&&V){M+=z*Y;I+=z*F}else if(y.tight&&X){Z=no(s,y);M+=Y*Z;I+=F*Z}e.line(w,A,M,I,f,l,c,a,h,g);t&&Hi(e,T,R,c,d,C+Math.PI,f,a+Jo+"a1",ui.Line,m.unzoom,y);r&&Hi(e,L,B,c,d,S,l||f,a+Jo+"a2",ui.Line,m.unzoom,y);if(p){var j=0,K=0;y.labelAlongLink&&(K=Ao(K=+Math.atan2(s.y-u.y,s.x-u.x).toFixed(14)));n(p.pos,(function(t,n){if("t"===n||p.present[n]){var r=_o[n];t.lx=w+r*(M-w);t.ly=A+r*(I-A);if(y.glyphsAlongLink){var i=s._sx-u._sx,o=s._sy-u._sy;if(0===i&&0===o){i=1;o=-1}var f=oe(i,o);t.tdx=i/f;t.tdy=o/f;t.tangent=Math.atan2(o,i);t.R=0}e.setAnchorPosition(a,t.lx,t.ly,K,j)}j++}))}return!0}function ea(e,t,n,r,i,o){var a=r-t;if(Math.abs(a)>n)return[];var u=Math.max(i,o),s=Math.min(i,o);if(u<e-n||e+n<s)return[];var f=Math.asin(a/n),l=n*Math.cos(f),c=[];s<=e-l&&e-l<=u&&c.push(a>0?Math.PI-f:-Math.PI-f);s<=e+l&&e+l<=u&&c.push(f);return c}function ta(e,t,n,r,i,o){var a=r-e;if(Math.abs(a)>n)return[];var u=Math.max(i,o),s=Math.min(i,o);if(u<t-n||t+n<s)return[];var f=Math.acos(a/n),l=n*Math.sin(f),c=[];s<=t-l&&t-l<=u&&c.push(-f);s<=t+l&&t+l<=u&&c.push(f);return c}function na(e,t,n,r,i,o){var a=ea(e,t,n,r.y2+o,r.x1+i,r.x2+i),u=ea(e,t,n,r.y1+o,r.x1+i,r.x2+i),s=ta(e,t,n,r.x1+i,r.y1+o,r.y2+o),f=ta(e,t,n,r.x2+i,r.y1+o,r.y2+o);return a.concat(u,f,s)}function ra(e,t,n,r,i,o){var a=r-e,u=i-t,s=Math.sqrt(a*a+u*u);if(s>n+o||s<Math.abs(n-o)||0===s)return[];var f=n*n,l=(f-o*o+s*s)/(2*s),c=Math.sqrt(f-l*l),d=e+l*a/s,h=t+l*u/s,v=c*(a/s),g=c*(u/s),p=d+g,m=d-g,y=h-v,b=h+v;return[Math.atan2(y-t,p-e),Math.atan2(b-t,m-e)]}function ia(e,t,n,r,i){for(var o=Math.PI,a=e,u=0;u<t.length;u++){t[u]+2*Math.PI<r&&(t[u]+=2*Math.PI);n<t[u]&&t[u]<r&&(i?t[u]-a<o&&(a=Math.max(a,t[u])):a-t[u]<o&&(a=Math.min(a,t[u])))}return a}function oa(e,t,n,r,i,o,a){var u=a?r:i,s=o._sx,f=o._sy;o._c&&(u=ia(u,ra(e,t,n,s,f,o._c),r,i,a));if(o._cl)for(var l=0;l<o._cl.length;l++){var c=o._cl[l];u=ia(u,Vo(c)?ra(e,t,n,s+c.cx,f+c.cy,c.r):na(e,t,n,c,s,f),r,i,a)}return u}function aa(e,t,n,r,i,o,a,u){var s=4,f=e+n*Math.cos(r),l=t+n*Math.sin(r),c=e+n*Math.cos(i),d=t+n*Math.sin(i);if(Vo(u)){var h=o+u.cx,v=a+u.cy,g=ro(f,l,h,v),p=ro(c,d,h,v);if(g<=u.r+s&&p<=u.r+s)return!0}else{var m=o+u.x1-s,y=o+u.x2+s,b=a+u.y1-s,x=a+u.y2+s;if(m<=f&&f<=y&&b<=l&&l<=x&&(m<=c&&c<=y&&b<=d&&d<=x))return!0}return!1}function ua(e,t,n,r,i,o){var a=o.x,u=o.y;if(o._c){if(aa(e,t,n,r,i,a,u,{cx:0,cy:0,r:o._c}))return!1}if(o._cl)for(var s=0;s<o._cl.length;s++){if(aa(e,t,n,r,i,a,u,o._cl[s]))return!1}return!0}var sa=W(),fa=2*Math.PI;function la(e,t,n,r,i,o,a,u,s,f,l,c,d){var h=ra(i,o,Ki(u,s,c,d.arrows),t,n,r);if(2===h.length){Hi(e,i,o,u,s,(a?h[0]:h[1])-Math.PI,f,l,ui.Arc,c,d)}else e.triangle(0,0,0,0,0,0,f,-1,f,!0,l,-1,ui.Arc)}function ca(e,t,n,r,i){return.9*Ki(e,t,r,i)/n}function da(e,t,r,i,o,a,u,s,f,l,c,d,h,v,g,p,m,y,b){var x=s===f,w=s._sx,A=s._sy,M=f._sx,I=f._sy,E=i||0,k=o||0,C=+(a||0)*h;x&&(C+=oo*s._sl.e);var S=C>0;if(x){var T=(s._sl.w?180:225)*(Math.PI/180),R=Math.cos(T),L=Math.sin(T),B=.5;M=w+=s._sl.x;I=A+=s._sl.y;var G=-s._sl.e*oo/2;w+=R*G+L*B;A+=L*G-R*B;M+=R*G-L*B;I+=L*G+R*B}var O=(w+M)/2,Z=(A+I)/2,Y=M-w,F=I-A,z=Math.max(.001,F*F+Y*Y),P=Math.sqrt(z),D=+(z/4+C*C)/(2*Math.abs(C)),V=D-Math.abs(C);if(D>1e5){y.useSlowPathRendering=!0;y.useSlowPathRenderingLastTime=!0;return $o(e,t,r,E,k,u,s,f,l,c,d,h,v,g,p,m,y,b)}var W=S?1:-1,X=O-F*W*V/P,U=Z+Y*W*V/P,N=Math.atan2(A-U,w-X),j=Math.atan2(I-U,M-X),K=S?N:j,H=S?j:N;K>H&&(H+=2*Math.PI);var _,J,Q,q,$,ee,te=K+(S?E:k)*(H-K),ne=K+(S?1-k:1-E)*(H-K),re=oa(X,U,D,K,H,C>0?s:f,!0),ie=oa(X,U,D,re,H,C>0?f:s,!1),oe={startangle:0,endangle:0};if(s===f||ua(X,U,D,re,ie,s)&&ua(X,U,D,re,ie,f)){oe.startangle=re;oe.endangle=ie}else{oe.startangle=fa;oe.endangle=fa}oe.startangle=Math.max(te,oe.startangle);oe.endangle=Math.min(ne,oe.endangle);if(oe.startangle>=oe.endangle){Do(e,u,t,r,s,f,l,c,d,!0,v,C,p,m);return!1}var ue=0;(t||r)&&(ue=ca(d,h,D,y.unzoom,b.arrows));var se,fe,le,ce=-.25;if(b.tight&&(!t||!r)){if($i(s)||$i(f)){var de=oe.endangle-oe.startangle;se=de/(de*D)}(Ho(s,g,b)||Ho(f,g,b))&&(ue=ca(d,h,D,y.unzoom,b.arrows))}if(t){_=S?oe.startangle:oe.endangle;J=X+D*Math.cos(_);Q=U+D*Math.sin(_);S?oe.startangle+=ue:oe.endangle-=ue}else if(b.tight)if(Ho(s,g,b))S?oe.startangle+=ce*ue:oe.endangle-=ce*ue;else if($i(s)&&(fe=no(s,b))){le=fe*se;S?oe.startangle-=le:oe.endangle+=le}if(r){q=S?oe.endangle:oe.startangle;$=X+D*Math.cos(q);ee=U+D*Math.sin(q);S?oe.endangle-=ue:oe.startangle+=ue}else if(b.tight)if(Ho(f,g,b))S?oe.endangle-=ce*ue:oe.startangle+=ce*ue;else if($i(f)&&(fe=no(f,b))){le=fe*se;S?oe.endangle+=le:oe.startangle-=le}if(oe.startangle>=oe.endangle){Do(e,u,t,r,s,f,l,c,d,!0,v,C,p,m);return!1}e.arc(X,U,D,oe.startangle,oe.endangle,l,c,d,u,v,!1,C,p);t&&la(e,X,U,D,J,Q,S,d,h,l,u+sa+"a1",y.unzoom,b);r&&la(e,X,U,D,$,ee,!S,d,h,c||l,u+sa+"a2",y.unzoom,b);if(m){var he=0,ve=0;n(m.pos,(function(t,n){if("t"===n||m.present[n]){var r=W>0?oe.startangle:oe.endangle,i=r+((W>0?oe.endangle:oe.startangle)-r)*_o[n];t.lx=X+D*Math.cos(i);t.ly=U+D*Math.sin(i);if(b.glyphsAlongLink){t.tdx=-W*Math.sin(i);t.tdy=W*Math.cos(i);t.tangent=i;t.R=D;t.signf=W}if(b.labelAlongLink){i>fa&&(i%=fa);ve=Ao(ve=+((i-Math.PI/2)*W).toFixed(14))}e.setAnchorPosition(u,t.lx,t.ly,ve*W,he)}he++}))}return!0}var ha=Math.PI/256;function va(e,t,n,r,i){var o=n.bw*r,a=n.w*r;if(a>0){var u=n.v.filter((function(e){return e>0})).length;if(1===u){var s=0;n.v.forEach((function(e,t){e>0&&(s=t)}));e.circle(0,0,t,n.c[s],a,Dt.white,!1,i+"do0",0,void 0,!1)}else{var f=n.v.reduce((function(e,t){return e+t}),0),l=o/t,c=l*u,d=2*Math.PI-c,h=-Math.PI/2+l/2;d>0&&n.v.reduce((function(r,s,c){var h=r;if(0===s)return h;var v=h+d*s/f,g=v+l,p=n.c[c%n.c.length];0===o&&(0===c?h-=ha:c!==u-1&&(v+=ha));e.arc(0,0,t,h,v,p,void 0,a,i+"do"+c,void 0,!0,0,void 0);return g}),h)}}}var ga=W();function pa(e,t,n,r,i,o,a,u,s,f,l,c,d,h,v){var g,p,m,y=n||[],b=r,x=i,w=0,A=function(e,t){return go(e,t)*o},M=function(e,t){return 0};if(a)if(l.R&&h.glyphsAlongLink){var I=0,E=l.signf,k=l.R;w=l.tangent;for(m=0;m<y.length-1;m++){p=go(y[m],y[m+1]);I+=E*Math.asin(p/(2*k))}var C=w+I/2,S=2*E*k*Math.sin(I/2);b+=E*S*-Math.sin(C);x+=E*S*Math.cos(C);w+=I;A=function(e,t){g-=E*Math.asin(go(e,t)/(2*k));var n=-E*Math.sin(g);return go(e,t)*o*n};M=function(e,t){var n=E*Math.cos(g);g-=E*Math.asin(go(e,t)/(2*k));return go(e,t)*o*n}}else{var T=0;for(m=0;m<y.length-1;m++)T+=go(y[m],y[m+1])*o;if(h.glyphsAlongLink){A=function(e,t){return go(e,t)*o*l.tdx};M=function(e,t){return go(e,t)*o*l.tdy};b+=T*l.tdx/2;x+=T*l.tdy/2}else b+=T/2}else y.length>0?b-=vo(y[y.length-1])*o:b-=vo({});function R(e){g=w;for(var t=y.length-1,n=b,r=x;t>=0;t--){e(y[t],n,r);if(t>0){n-=A(y[t-1],y[t]);r-=M(y[t-1],y[t])}}}a&&u&&R((function(t,n,r){e.circle(n,r,lo(t)*o*1.25,Dt.white,-1,c(),!0,s,v,void 0,!1)}));var L=0;R((function(n,r,i){var a=s+ga+L;f&&(a+="-"+f);To(e,t,a,r,i,o,n,null,null,!1,d,h,v);L++}))}var ma={b:"grey",bw:1,c:"rgba(240,240,240,0.8)",bs:"solid",re:!1,w:0},ya=["_ha0","_ha1","_ha2","_ha3","_ha4"],ba=ya.concat(["ha0","ha1","ha2","ha3","ha4","ha5","ha6","ha7","ha8","ha9"]),xa=ba.reduce((function(e,t){e[t]=!0;return e}),{});function wa(e,t){return e+(b(t)?"-"+t:"")}function Aa(e){if(e&&e.maxLength&&b(e.maxLength)&&e.maxLength>0)return e.maxLength}function Ma(e,t,r,i){var o=t||fe,u=r||fe,s=i||fe,f={b:"rgb(255, 255, 255)",bw:2,c:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],w:10},l=F(e,{numbers:{},numOrString:{},negatives:{},strings:{},stringValues:{},colours:{},booleans:{},reserved:{},mapPos:{},halos:[]});function c(e,t){y(e.items,!1,t)}function d(e,t,n,r){var i=r||{},o=W(e,t,n,!!i.carefulWithXandY);r.filterComboNodes&&(o.nodes=U(o.nodes));o.links=N(o.links,o.nodes,t,i.selfLinks);return o}function h(e){if(I(e)){var t=e;n(t,(function(e,n){C(t,n);t.g&&(t.g=O(t.g,!0));V(t,n,l.reserved)}))}}function v(e){var t=e.flow;if(!0===t)e.flow={velocity:2};else if(I(t)){var n=t;b(n.velocity)?n.velocity=Math.max(-10,Math.min(10,+n.velocity)):delete e.flow}else delete e.flow}function g(e){"w"in e&&(e.w=!!e.w)}function p(e,t,n){var r=e,i=n||{};x(r,t);S(r);if(r.g)if(Array.isArray(r.g)){y(r.g);r.g.forEach(g);r.g=O(r.g,"link"===r.type||!!i[r.id])}else delete r.g;Z(r,t);r.donut&&Y(r,t);r.oc&&z(r);r.bu&&P(r);r.t1&&h(r.t1);r.t2&&h(r.t2);r.flow&&v(r)}function y(e,t,n){if(e)for(var r=0;r<e.length;r++)p(e[r],t,n)}function x(e,t){n(e,(function(n,r){C(e,r);V(e,r,l.reserved);t&&V(e,r,l.booleans)}))}function w(e,t){var r=e[t],i=!0;I(r)&&n(r,(function(e,t){A(r,t);i=i&&b(+e)}));i||delete e[t]}function A(e,t){var n=+e[t];(n<0&&!l.negatives[t]||m(n))&&(n=null);e[t]=n}function M(e,t){if(!D(e[t])){var n=""+e[t];m(+n)||""===n?E(e,t):A(e,t)}}function E(e,t){if(!D(e[t])){e[t]+="";l.stringValues[t]&&!l.stringValues[t][e[t]]&&delete e[t]}}function k(e,t){e[t]&&(e[t]=Kt(e[t])?e[t]:void 0)}function C(e,t){l.strings[t]?E(e,t):l.numbers[t]?A(e,t):l.numOrString[t]?M(e,t):l.colours[t]?k(e,t):l.mapPos[t]&&w(e,t)}function S(e){if(I(e.fi)){var t=e.fi;D(t.t)||(t.t="string"==typeof t.t?t.t.charAt(0):String.fromCharCode(t.t));t.c&&(t.c=Kt(t.c)?t.c:void 0);"ff"in t&&"string"!=typeof t.ff&&(t.ff=void 0)}else null!==e.fi&&delete e.fi}function T(e){return/^(ne|nw|se|sw|n|s|e|w)$/.test(e)}function L(e){return R(e)&&e>=0&&e<360}function B(e){for(var t=0;t<e.length;t++){var n=e[t].p;if(L(n))return!0;if(T(n))return!1}return!1}function G(e){var t=B(e),n=t?L:T,r={};return function(e){var i=e,o=i.p;if(!n(o))return!1;(!t||i.r<0)&&delete i.r;var a=t?wa(o,i.r):o;if(r[a])return!1;r[a]=!0;return!0}}function O(e,t){var n=e;if(!Array.isArray(n))return!1;if(!t){var r=G(n);n=n.filter(r)}n.forEach(S);return n}function Z(e,t){l.halos.forEach((function(n){var r=e[n];if(r)if(t)"c"in r||"r"in r||"w"in r||delete e[n];else if("c"in r&&"r"in r&&"w"in r){k(r,"c");if(D(r.c)||D(r.r)||D(r.w)||!b(+r.r)||!b(+r.w))delete e[n];else{r.r=+r.r;r.w=+r.w}}else delete e[n]}))}function Y(e,t){if(t||Array.isArray(e.donut.v)){if(e.donut.v){var n=e.donut.v;n.forEach((function(e,t){(!b(e)||e<0)&&(n[t]=0)}))}e.donut.c&&(Array.isArray(e.donut.c)&&!e.donut.c.some((function(e){return!Kt(e)}))||delete e.donut.c);["bw","w"].forEach((function(t){t in e.donut&&A(e.donut,t)}));"b"in e.donut&&k(e.donut,"b");t||(e.donut=F(e.donut,f))}else delete e.donut}function z(e){I(e.oc)?p(e.oc):delete e.oc}function P(e){if(Array.isArray(e.bu))delete e.bu;else{var t=e.bu;t.p||(t.p="ne");var n=t.p;/^(ne|nw|se|sw)$/.test(n)?t.g&&S(t.g):delete e.bu}}function V(e,t,n){n[t]&&delete e[t]}function W(e,t,n,r){var i=t||{},o=n||{},a={nodes:{},links:{}};function u(e,t){return e.id in t.nodes||e.id in t.links}function s(e){return!!("node"===e.type&&e.id in o||"link"===e.type&&e.id in i)}e&&(a=e.reduce((function(e,t){if(t.id&&!u(t,e)&&!s(t)){if("node"===t.type){var n=!0;r&&i[t.id]&&(n=!1);n&&X(t)}var o="node"===t.type?"nodes":"links";o in e&&(e[o][t.id]=t)}return e}),a));return a}function X(e){if("node"===e.type){e.x=e.x||0;e.y=e.y||0}}function U(e){var t=a(e);n(e,(function(e){e.parentId&&delete t[e.parentId]}));return t}function N(e,t,r,i){var o={};n(e,(function(e,n){if(j(e,t,r,i))o[n]=e;else{var a=e.parentId;if(a){var u=t[a]||r[a];u&&u._combo&&(u._combo.linkIds=u._combo.linkIds.filter((function(t){return t!==e.id})))}}}));return o}function j(e,t,n,r){if(!r&&e.id1===e.id2)return!1;var i=t||{},o=n||{};return!(!o[e.id1]&&!i[e.id1]||!o[e.id2]&&!i[e.id2])}function K(e,t){H("hi",e,t)}function H(e,t,n){var r={};J(e,t,n,r);_(r,e,n);s(e);"hi"===e&&u()}function _(e,t,n){Object.keys(e).forEach((function(e){var r=n[e];if(r._combo.linkIds.every((function(e){return n[e][t]}))){r[t]=!0;o(e)}else if(void 0!==r[t]){delete r[t];o(e)}}))}function J(e,t,r,i){n(r,(function(n,a){var u=n.parentId;if((!0===t[n.id1][e]||!0===t[n.id2][e])&&!0!==n[e]){n[e]=!0;u&&r[u]&&(i[u]=!0);o(a)}}))}return{donutDefaults:f,typeCheck:c,filterNodesAndLinks:d,ensureObject:p,ensureTypesInArray:y,setZeroXY:X,hasValidEnds:j,ensureHiddenItemConsistency:K,ensureConsistency:H,applyPropertyRuleToComboLinks:_}}function Ia(e,t,n,r,i,o,a,u,s){var f,l=e.getLayer(),c="solid",d=ya;e.setLayer(Oi.HALOS);for(var h=!0,v=0;v<d.length;v++)if(f=i[d[v]]){h=!1;i.off||n===r?da(e,!1,!1,i.b1||0,i.b2||0,i.off||0,t,n,r,f.c,void 0,f.w,o,c,a,void 0,void 0,u,s):$o(e,!1,!1,i.b1||0,i.b2||0,t,n,r,f.c,void 0,f.w,o,c,a,void 0,void 0,u,s)}i._noHalos=h;e.setLayer(l)}var Ea=W();function ka(e,t,n,r,i,o){var a=0,u=0,s="centre";if(-1!==e.indexOf("n")||-1!==e.indexOf("s")){u=-n;2===e.length&&(u-=r.dy);-1!==e.indexOf("s")&&(u*=-1)}if(-1!==e.indexOf("e")||-1!==e.indexOf("w")){a=t;s="right";2===e.length&&(a+=r.dx);if(-1!==e.indexOf("w")){a*=-1;s="left"}}!i&&o&&(-1!==["n","s"].indexOf(e)?u*=Math.sqrt(2):-1!==["e","w"].indexOf(e)&&(a*=Math.sqrt(2)));return{gdx:a,gdy:u,growDirection:s}}function Ca(e){var t="centre";e>0&&e<180?t="right":e>180&&(t="left");return t}function Sa(e,t,n,r,i){var a,u,s=o(e);if("circle"===i){a=Math.sin(s)*r;u=-Math.cos(s)*r}else{var f=[Math.atan2(t,n),Math.atan2(t,-n),Math.atan2(-t,-n),Math.atan2(-t,n)],l=void 0;for(l=0;l<f.length;l++)f[l]<0&&(f[l]+=2*Math.PI);if(s<f[0]||s>f[3])a=-(u=-n)*Math.tan(s);else if(s<f[1]){a=t;u=s===Math.PI/2?0:-a/Math.tan(s)}else if(s<f[2])a=-(u=n)*Math.tan(s);else{a=-t;u=s===Math.PI/2*3?0:-a/Math.tan(s)}}return{gdx:a,gdy:u}}function Ta(e,t){return{gdx:Math.sin(o(e))*t,gdy:-Math.cos(o(e))*t}}function Ra(e,t,n,r,i,o,a,u,s,f,l,c,d,h){var v,g=0,p=b(f.r);if(-1!==["n","ne","e","se","s","sw","w","nw"].indexOf(f.p))v=ka(f.p,n,r,l,s,u);else{var m="box",y=0;if(u){m="circle";y=s?Math.min(n,r):Math.sqrt(2)*n}var x=f.p;(v=p?Ta(x,f.r*o):Sa(x,n,r,y,m)).growDirection=Ca(x)}if(null!==v.gdx){v.gdx<0&&v.gdy<0&&f.e&&(i._sl.e=Math.max(i._sl.e,f.e));g=To(e,t,a+Ea+wa(f.p,f.r),v.gdx,v.gdy,o,f,i,v.growDirection,!0,c,d,h)}return v.gdy+g}var La=W();function Ba(e,t,n,r,i,o){for(var a,u=!0,s=0;s<ba.length;s++){var f=ba[s];if(a=i&&o.selectedNode[f]||r[f]){u=!1;var l=t+La+f,c=a.r*n,d=a.w*n;d/2>=c?e.circle(0,0,c+d/2,Dt.white,-1,a.c,!0,l,0,void 0,!1):e.circle(0,0,c,a.c,d,Dt.white,!1,l,0,void 0,!1)}}r._noHalos=u&&!i}var Ga=W();function Oa(e,t,n,r,i,o,a,u,s,f,l,c,d,h,v){var g=n||[],p=r;if(a){for(var m=0,y=0;y<g.length-1;y++)m+=go(g[y],g[y+1])*o;p+=m/2}else g.length>0?p-=vo(g[g.length-1])*o:p-=vo({});if(f){var b=p;if(g.length>0){w((function(e,t){b=t
}));var x=g[0].e||1;b-=x*o*oo/2;f._sl.e*=x}f._sl.x=b;f._sl.y=i;f._sl.w=!0}function w(e){for(var t=g.length-1,n=p;t>=0;t--){e(g[t],n);t>0&&(n-=go(g[t-1],g[t])*o)}}if(a&&u){var A=Zi[e.getLayer()];ao(e,A,v,(function(){w((function(t,n){e.circle(n,i,lo(t)*o*1.25,Dt.white,-1,l(),!0,s,h,void 0,!1)}))}))}var M=0;w((function(n,r){To(e,t,s+Ga+M,r,i,o,n,f,null,!1,c,d,h);M++}))}function Za(e,t){return e._combo&&e._combo.open?"circle":t?"circle"===e.sh?e.sh:"box":"box"===e.sh||"circle"===e.sh?e.sh:e.sq?"box":"circle"}function Ya(e,t,n,r,i,o){var a=t+r,u=n+r;if("circle"===e){i(Math.min(a,u))}else o(-a,-u,a,u)}function Fa(e,t,n,r,i,o,a,u,s,f,l,c){Ya(c,t,n,r,(function(t){e.circle(0,0,t,i,o,u,s,f,l,a,!1)}),(function(t,n,r,c){e.rect(t,n,r,c,i,o,u,s,f,l,a)}))}function za(e,t,n,r,i){Ya(i,t,n,r,(function(t){e._c=t}),(function(t,n,r,i){e._cl.push({x1:t,y1:n,x2:r,y2:i})}))}var Pa=4,Da=27;function Va(e,t,r){var i=hn,o=W(),a={b1:0,b2:0,c:"",c2:"",fb:!1,fbc:"",fc:"",ff:"",flow:void 0,fs:0,t1:void 0,t2:void 0,w:0},u=eo(),s={arrows:"normal",fontFamily:void 0,glyphsAlongLink:!1,iconFontFamily:void 0,imageAlignment:{},editcolour:void 0,tight:!1,avoidLabels:!1,selectionFontColour:void 0,selectedNode:null,isNodeSelStyle:!1,selectedLink:null,isLinkSelStyle:!1,labelOffset:0,truncateLabel:!1,defaultOpenComboStyle:ma,labelAlongLink:!1},f={dx:0,dy:0},l={},c={present:{t:!0,t1:!1,t2:!1},pos:{t:{lx:0,ly:0,tdx:1,tdy:0,tangent:0,R:0,signf:1},t1:{lx:0,ly:0,tdx:1,tdy:0,tangent:0,R:0,signf:1},t2:{lx:0,ly:0,tdx:1,tdy:0,tangent:0,R:0,signf:1}}},d={unzoom:1,easingValue:0,resizeRect:null,resizePrimitive:null,stillDirty:new Map,useSlowPathRendering:!1,useSlowPathRenderingLastTime:!1,alwaysRedraw:!1};function h(e,t){l[e]=t}function v(){var e;return null!=(e=s.editcolour)?e:Dt.edit}function g(){return s.selectionFontColour||Dt.white}function p(e){s.arrows=e.arrows;b(e.labelOffset)&&(s.labelOffset=e.labelOffset);var t=Aa(e.truncateLabels);s.truncateLabel=void 0!==t&&t;s.editcolour=e.selectionColour;s.fontFamily=e.fontFamily;s.glyphsAlongLink=!e.linkStyle.inline&&"along"===e.linkStyle.glyphs;s.iconFontFamily=e.iconFontFamily;s.imageAlignment=e.imageAlignment||{};s.avoidLabels=e.linkEnds.avoidLabels||!1;s.tight="loose"!==e.linkEnds.spacing;s.selectionFontColour=e.selectionFontColour;s.selectedNode=e.selectedNode||null;s.isNodeSelStyle=I(e.selectedNode);s.selectedLink=e.selectedLink||null;s.isLinkSelStyle=I(e.selectedLink);s.labelAlongLink=!!e.linkStyle.inline}function m(e,t){return Ki(e,t,d.unzoom,s.arrows)}function y(e,n,r,i,o,u,f){var l,h=f.isSelected,v=f.isRevealed,g=1;n._edit=null;var p=n.id;h&&s.isLinkSelStyle?x(l=a,s.selectedLink,n):l=n;var m=!1;v&&(m=t.privateTopParentId(n.id1)!==t.privateTopParentId(n.id2));i.parentId&&(g=M(1,i.parentId,r));o.parentId&&(g=Math.min(g,M(1,o.parentId,r)));var y=(l.w||1)*g*d.unzoom,b=l.c||Dt.midgrey;c.present.t=!!(n.t||n.g&&n.g.length||u);c.present.t1=!!n.t1;c.present.t2=!!n.t2;if(n.off||i===o){var w=n.off||0;m&&(w/=g);da(e,n.a1||!1,n.a2||!1,l.b1||0,l.b2||0,w,p,i,o,b,l.c2,y,g,l.ls,h,l.flow,c,d,s)}else $o(e,n.a1||!1,n.a2||!1,l.b1||0,l.b2||0,p,i,o,b,l.c2,y,g,l.ls,h,l.flow,c,d,s);n._x=c.pos.t.lx;n._y=c.pos.t.ly}function x(e,t,n){e.b1=(t.b1||0)>=0?t.b1:n.b1;e.b2=(t.b2||0)>=0?t.b2:n.b2;e.c=t.c||n.c;e.c2=t.c2||n.c2;e.fb=t.fb||n.fb;e.fbc=t.fbc||n.fbc;e.fc=t.fc||n.fc;e.flow=t.flow||n.flow;e.ff=t.ff||n.ff;e.fs=t.fs||n.fs;e.t1=t.t1||n.t1;e.t2=t.t2||n.t2;e.ls=t.ls||n.ls;e.w=t.w||n.w}function w(e,o,u,f,h,p,m,y){var b,w=y.isSelected,E=y.isRevealed,k=1;u._edit=null;var C=u.id,S=w&&!s.isLinkSelStyle,T=S;w&&s.isLinkSelStyle?x(b=a,s.selectedLink,u):b=u;I(b.flow)&&(d.alwaysRedraw=!0);var R=!1;E&&(R=t.privateTopParentId(u.id1)!==t.privateTopParentId(u.id2));h.parentId&&(k=M(1,h.parentId,f));p.parentId&&(k=Math.min(k,M(1,p.parentId,f)));var L=(b.w||1)*k*d.unzoom,B=b.c||Dt.midgrey,G=0;c.present.t=!!(u.t||u.g&&u.g.length||m);c.present.t1=!!u.t1;c.present.t2=!!u.t2;var O,Z=c.present.t||c.present.t1||c.present.t2;if(u.off||h===p){var Y=u.off||0;R&&(Y/=k);O=da(o,u.a1||!1,u.a2||!1,b.b1||0,b.b2||0,Y,C,h,p,B,b.c2,L,k,b.ls,w,b.flow,c,d,s)}else O=$o(o,u.a1||!1,u.a2||!1,b.b1||0,b.b2||0,C,h,p,B,b.c2,L,k,b.ls,w,b.flow,c,d,s);u._x=c.pos.t.lx;u._y=c.pos.t.ly;if(Z){var F=0;n(c.pos,(function(t,n){if(c.present[n]){var a=void 0,f=void 0,h=void 0,p=void 0,m=void 0,y=void 0,x=null;if("t"===n||"string"==typeof u[n])y=u[n];else{x="t1"===n?b.t1:"t2"===n?b.t2:u[n];var w=u[n];y=x.t?x.t:w.t;a=x.fb?x.fb:w.fb;f=x.fbc?x.fbc:w.fbc;h=x.fc?x.fc:w.fc;p=x.ff?x.ff:w.ff;m=x.fs?x.fs:w.fs}var A=!1;m=+(m||b.fs||i)*k*d.unzoom;y=y||"";p=p||b.ff||s.fontFamily;var M=h||b.fc||Dt.black,I=f||b.fbc||Dt.textback,E=!!(void 0!==a?a:b.fb);if(S){M=g();I=v()}var R=Go(u,y,s.truncateLabel,l.showFullLabel||null,r),L=Oo(R,e,m,E,p,s.fontFamily),B=m+3*d.unzoom;G=B*R.length;var Z=0,Y=0;R.length>0&&(Z-=L[0]/2);for(var z=-((R.length-1)*B)/2,P=0;P<R.length;P++){0===P&&(Y=z);var D=R[P],V=Mo(e,o,D,0,z,C,!0,M,I,E,u,!1,!0,99,L[P],S,m,p,n,1,d.unzoom,s,F);D.length>0&&!O&&(u._edit={hib:!0});A=A||V;z+=B}A&&(T=!1);var W="t"===n?u.g:x&&x.g;if(Ji(W)){pa(o,e,W,Z,Y,k,!A,S,C,"t"===n?null:n,t,v,d,s,F);T=!1}}F++}))}if(T){var z=Math.max(.66*(b.w||0),+(b.fs||i)*d.unzoom/2);o.circle(0,0,z,Dt.white,-1,v(),!0,C,0,void 0,!1)}u.bu&&Fo(o,e,C,G/2+4,k,u.bu,!1,d,s,l,r,i,0);if(h.du){u._du=!0;A(h,"id1",C,o,L,B,O)}if(p.du){u._du=!0;A(p,"id2",C,o,L,B,O)}u._noHalos||Ia(o,C,h,p,u,k,w,d,s);O||(u._edit={hib:!0})}function A(e,t,n,r,i,a,u){var s=u?i:0,f=r.getAnchorPosition(e.id,0);r.circle(f.x,f.y,1.5*s,a,s,Dt.white,!0,n+o+t,-1,void 0,!1)}function M(e,t,n){var r=e,i=n[t];if(i){r*=i._combo.e;i.parentId&&(r=M(r,i.parentId,n))}return r}function E(e,t){for(var n=e,r=n.x,i=n.y;n.parentId;){r=(n=t[n.parentId]).x+(r-n.x)*n._combo.e;i=n.y+(i-n.y)*n._combo.e}return{x:r,y:i}}function k(e,t,n,r,i){if(!n.hi){var a,f,l,c,h,g,p,m,y,x,w=i.isOpenCombo,A=1,I=n.id,k=qi(n),S=Za(n,k),T=i.isSelected,R=T&&s.isNodeSelStyle,L=T&&!s.isNodeSelStyle,B=s.selectedNode,G=R&&B.b||n.b,O=R&&B.bs||n.bs,Z=R&&B.c||n.c,Y=(k?1:R&&B.e||n.e||1)*d.unzoom;f=k&&(R&&B.re||n.re)||!1;l=R&&B.u||n.u;c=R&&B.fi||n.fi;h=R&&b(B.bw)?B.bw:n.bw;g=R&&B.w||n.w;p=R&&B.h||n.h;m=n.x;y=n.y;var F,z=n.donut&&"circle"===S&&!w?n.donut:void 0;if(w){var P=n.oc;if(P){h=0;if(null===P.b)G=void 0;else{void 0===P.bw?h=s.defaultOpenComboStyle.bw:P.bw>0&&(h=P.bw);G=P.b||s.defaultOpenComboStyle.b}O=P.bs||s.defaultOpenComboStyle.bs;Z=P.c||s.defaultOpenComboStyle.c;f=P.re||s.defaultOpenComboStyle.re;g=P.w||s.defaultOpenComboStyle.w}else{G=s.defaultOpenComboStyle.b;h=s.defaultOpenComboStyle.bw;O=s.defaultOpenComboStyle.bs;Z=s.defaultOpenComboStyle.c;f=s.defaultOpenComboStyle.re;g=s.defaultOpenComboStyle.w}if(R){var D=s.selectedNode.oc;if(D){G=D.b||G;h=D.bw||h;O=D.bs||O;Z=D.c||Z}}c=void 0;l=void 0;S="circle";A=R&&s.selectedNode.e||n.e||1;p=g*=Y=n._combo.e}var V=1;if(n.parentId){V=M(1,n.parentId,r);var W=E(n,r);g*=V;p*=V;Y*=V;m=W.x;y=W.y}t.setNodeAnchorPosition(n,m,y);if(!n.du){if(z){F=!0;a=z.b;h=Y*(z.w+2*z.bw);O=void 0}else if(G&&(void 0===h||h>0)){F=!0;a=G;h=Y*(h||Pa)}else{F=!1;a=Dt.white;h=0;O=void 0}var X,U,N=!!Z,j=!!l||!(!c||!c.t),K=N?Z:Dt.white;n._c=0;n._cl=[];n._edit=null;n._sl?n._sl.e=Y:n._sl={x:0,y:0,e:Y,w:!1};if(k){X=g/2;U=p/2}else U=X=Y*Da;var H,_,J,Q=X+h/2,q=U+h/2;if(z){H=Y*z.w;_=h/2}else _=.75*(H=F?h:Y*Pa);J=s.tight?F||N?h/2:_-H/2:_+H/2;if(j||F||N){za(n,Q,q,J,S);if(T&&(!L&&f||L)){var $=Zi[t.getLayer()];ao(t,$,i,(function(){if(L){var e=v();Fa(t,Q,q,_,e,H,void 0,e,!1,I,0,S)}f&&(d.resizeRect=t.createDummyShapePrimitive(I,Q+_,q+_,S))}))}}if(N){Fa(t,Q,q,0,a,-1,O,K,N,I,0,S);T&&f&&!j&&(d.resizePrimitive=t.clonePreviousPrimitive())}if(j){if(l){x=s.imageAlignment[l];to(u,x,X,U);var ee=n.ci?"ci":null,te=1,ne=!1,re=0;t.image(u[0],u[1],u[2],u[3],l,I,re,ee,te,ne)}else{var ie=k?Math.min(X,U):X;yo(t,s,e,I,0,0,0,ie,c.t,c.c||Dt.black,c.ff||s.iconFontFamily)}T&&f&&(d.resizePrimitive=t.clonePreviousPrimitive())}if(F){var oe=z&&0===z.bw?-1:h||-1;oe>=0&&Fa(t,Q,q,0,a,oe,O,K,!1,I,0,S);T&&f&&!j&&!N&&(d.resizePrimitive=t.clonePreviousPrimitive())}z&&va(t,Math.min(Q,q),z,Y,I+o);C(t,e,h,X,U,n,k,S,F,N,j,L,Y,A,I,R,i)}}}function C(e,t,n,o,a,u,c,h,p,m,y,x,w,A,M,I,E){var k,C,S,T,R,L,B,G=0,O=0,Z=0,Y=Qi(u),F=!1,P=E.isOpenCombo,D=u._combo&&u._combo.open?A:w;if(I){var V=s.selectedNode;C=V.fb||u.fb;S=V.fbc||u.fbc;T=V.fc||u.fc;R=V.ff||u.ff;L=(V.fs||u.fs||i)*D;B=V.tc||u.tc}else{C=u.fb;S=u.fbc;T=u.fc;R=u.ff;L=(u.fs||i)*D;B=u.tc}P&&(B=!1);var W=3*D+L/2,X=T||Dt.black,U=S||Dt.textback;if(x){X=g();U=v()}var N=a+W,j=Go(u,null,s.truncateLabel,l.showFullLabel||null,r),K=Oo(j,t,L,C||!1,R,s.fontFamily),H=L+3,_=H,J=H*j.length;j.length>0&&(G-=K[0]/2);var Q=y||p||m,q=z(B)?!!B:!y&&!c,$=(j.length-1)*(_/2);if(Q)q&&(N=-$);else{if(Y){var ee=vo((le=u.g)[le.length-1])*D;G=ee;Z+=K[0]/2+ee}N=0}j.length>0&&(O=N);p&&!q&&(N+=n-3*D);if(Q){var te=3,ne=3;f.dx=0;f.dy=y?-8:0;var re=2;if(!c&&"circle"===h){te+=re;ne+=re;if(y){f.dx+=re;f.dy+=re}}if(c&&!P){te++;ne++}var ie=te*D,oe=ne*D;f.dx*=D;f.dy*=D;if(P){var ue=((u.oc.w||s.defaultOpenComboStyle.w||0)+(u.oc.bw||s.defaultOpenComboStyle.bw||0))/2/Math.sqrt(2),se=o/Da;u._sl.e=se;u._sl.x=-ue*w-ie/A;u._sl.y=-ue*w-oe/A}else{u._sl.x=-o+(ie-f.dx);u._sl.y=-a+(oe-f.dy)}if(Y){var fe="circle"===h,le=u.g;for(k=0;k<le.length;k++){var ce=Ra(e,t,o-ie,a-oe,u,w,M,fe,c,le[k],f,d,s,0),de=b(le[k].r);q||de||(N=Math.max(N,ce+W))}}}for(var he=0;he<j.length;he++){var ve=Mo(t,e,j[he],Z,N,M,!0,X,U,C||!1,u,!1,!0,99,K[he],x,L,R||s.fontFamily,null,D,d.unzoom,s,0);F=F||ve;N+=_}if(!Q){var ge=!u.t||!F;Oa(e,t,u.g||null,ge?0:G,O,D,ge,x,M,u,v,d,s,0,E)}var pe=!u._noHalos||I;!c&&pe&&ao(e,Oi.HALOS,E,(function(){Ba(e,M,D,u,I,s)}));if(u.bu){var me=0;Q?me=a:J>0?me=J/2+4:Qi(u)&&(me=13*D);Fo(e,t,M,me,D,u.bu,P,d,s,l,r,i,0)}}function S(e,t){var r=[],i=F(e,{sh:"box",x:0,y:0});function o(e,t){e&&r.push(t)}if(qi(i))if("circle"===i.sh){var a=Math.min(i.w,i.h)/2;n(t,(function(e){if(qi(e)){var t=e.w,n=e.h;"circle"===e.sh?o(Tn(i.x,i.y,a,e.x,e.y,Math.min(t,n)/2),e.id):o(Ln(i.x,i.y,a,e.x-t/2,e.y-n/2,e.x+t/2,e.y+n/2),e.id)}else o(Tn(i.x,i.y,a,e.x,e.y),e.id)}))}else{var u={x1:i.x-i.w/2,y1:i.y-i.h/2,x2:i.x+i.w/2,y2:i.y+i.h/2};n(t,(function(e){if(qi(e)){var t=e.w,n=e.h;if("circle"===e.sh){var r=Math.min(t,n)/2;o(Rn(u,e.x-r,e.y-r,e.x+r,e.y+r),e.id)}else o(Rn(u,e.x-t/2,e.y-n/2,e.x+t/2,e.y+n/2),e.id)}else o(Sn(u,e.x,e.y),e.id)}))}return r}function T(){return d.resizePrimitive}function R(){return d.stillDirty.size>0}function L(){return d.alwaysRedraw}function B(n,r,i,o,a,u,f,l,c,h,v,g){var p,m,b,x,A={isSelected:!1,isOpenCombo:!1,isInCombo:!1,isInBackground:!1,isTransient:!1,isParentTransient:!1,isRevealed:!1,isParentRevealed:!1};d.useSlowPathRendering=d.useSlowPathRenderingLastTime;d.useSlowPathRenderingLastTime=!1;var M=g&&!d.useSlowPathRendering&&!i.allDirty,I=new Set;function C(e){var n=r[e];if(n){var i=t.privateFirstVisibleItemInAncestry(n.id1),o=t.privateFirstVisibleItemInAncestry(n.id2);!i||i._combo&&i._combo.open||I.add(i.id);!o||o._combo&&o._combo.open||I.add(o.id)}}l.forEach(C);if(d.resizePrimitive){var S=i.dirty.get(d.resizePrimitive.id);if(i.allDirty||2===S){d.resizeRect=null;d.resizePrimitive=null}}function T(e,t){var i=e.parentId,o=!1;if(i){if(!t&&f(i)||c(i))return!0;var a=n[i]||r[i];a&&a.parentId&&(o=T(a,!1))}i=e.id;var u=t&&l.has(i)||I.has(i)||h(i),s=!t&&f(i),d=!t&&c(i);return o||!u&&(s||d)}function R(e){M=!1;var r,i,u,s=[],l=!1,c=!!e._combo&&e._combo.open,d=!(!e.parentId&&!c);A.isOpenCombo=c;A.isInBackground=!!e.bg;A.isSelected=f(e.id);A.isInCombo=!!e.parentId;if(I.has(e.id)||h(e.id)){A.isRevealed=!0;I.add(e.id);s.push(Oi.REVEALED)}else A.isRevealed=!1;if(d){var v=t.privateGetAncestryIds(e.id);s.push(Oi.COMBOS);r=!1;for(var g=0;g<v.length-1;g++){var p=v[g];s.push(o.createComboSegment(p));var m=n[p];r||(r=m&&m._combo&&T(m,!1));if(!A.isRevealed&&!i&&(i=I.has(p)||h(p))){A.isRevealed=!0;I.add(e.id);s.unshift(Oi.REVEALED)}}A.isParentTransient=!!r;A.isParentRevealed=!!i;c&&s.push(o.createComboSegment(e.id))}else{s.push(Oi.MAIN);A.isParentTransient=!1;A.isParentRevealed=!1}A.isRevealed||(l=T(e,!1)&&(!qi(e)||d))&&s.unshift(Oi.TRANSIENT);A.isTransient=l;o.startGeneratingFor(e,M,A.isInCombo||A.isOpenCombo);if(c)u=Oi.COMBO_CONTAINER;else{u=qi(e)?Oi.SHAPES:Oi.NODES;s.push(e.bg?Oi.BG:Oi.FG)}d&&!o.hasPath(s)&&o.createItemLayersAt(s);o.setLayerPath(s);o.setLayer(u);k(a,o,e,n,A)}function L(e){M=!1;var i,u,s,c=[],d=!1,g=e.parentId&&(e._combo||n[e.parentId]),p=e.parentId&&r[e.parentId];A.isInBackground=e.bg||!1;A.isSelected=f(e.id);A.isInCombo=!!e.parentId;A.isRevealed=l.has(e.id)||h(e.id)||I.has(e.parentId);if(!A.isRevealed)if(s=T(e,!0)){c.push(Oi.TRANSIENT);A.isTransient=!0}else A.isTransient=!1;o.startGeneratingFor(e,M,A.isInCombo);i=n[e.id1];u=n[e.id2];if(A.isRevealed){i=t.privateFirstVisibleItemInAncestry(e.id1);u=t.privateFirstVisibleItemInAncestry(e.id2);if(!i||!u||i===u&&i!==n[e.id1])return;c.push(Oi.REVEALED)}if(g){for(var m=t.privateGetAncestryIds(e.id),y=[],b=p?2:1,x=0;x<m.length-b;x++){var E=m[x];y.push(o.createComboSegment(E));if(!s){var k=n[E];d||A.isRevealed||(d=k&&k._combo&&T(k,!1));d&&c.unshift(Oi.TRANSIENT)}}A.isParentTransient=d;if(y.length>0){c.push(Oi.COMBOS);c=c.concat(y);o.hasPath(c)||o.createItemLayersAt(c)}else c.push(Oi.MAIN)}else c.push(Oi.MAIN);c.push(e.bg?Oi.BG:Oi.FG);o.setLayerPath(c);o.setLayer(Oi.LINKS);w(a,o,e,n,i,u,v,A)}function B(e){return e.parentId||s.glyphsAlongLink&&io(e)||e._du}function G(e){var r;A.isInBackground=!!e.bg;A.isSelected=f(e.id);A.isInCombo=!!e.parentId;A.isRevealed=l.has(e.id)||h(e.id)||I.has(e.parentId);if(!A.isRevealed){r=T(e,!0);A.isTransient=r}o.startGeneratingFor(e,!0,A.isInCombo);var i=n[e.id1],a=n[e.id2];if(A.isRevealed){i=t.privateFirstVisibleItemInAncestry(e.id1);a=t.privateFirstVisibleItemInAncestry(e.id2);if(!i||!a||i===a&&i!==n[e.id1])return}y(o,e,n,i,a,v,A)}d.stillDirty.clear();d.easingValue=e.atanEasing(Date.now()%1e3/1e3);d.unzoom=u.getUnzoom();function O(e){var t=r[e];B(t)?L(t):G(t)}if(i.allDirty){o.removeAllItems();d.alwaysRedraw=!1;x=Object.keys(n);b=Object.keys(r);for(p=0,m=x.length;p<m;p++)R(n[x[p]]);for(p=0,m=b.length;p<m;p++)L(r[b[p]])}else{var Z=[],Y=[],F=function(e,t){var i=n[t];if(i)if(i.parentId||i._combo)R(i);else if(1===e)if(i.parentId){var a=E(i,n);o.setNodeAnchorPosition(i,a.x,a.y)}else o.setNodeAnchorPosition(i,i.x,i.y);else R(i);else if(r[t])2===e?Z.push(t):Y.push(t);else{M=!1;o.removeItem(t)}};i.dirty.forEach(F);if(i.allLinksMoved)for(p=0,m=(b=Object.keys(r)).length;p<m;p++)O(b[p]);else if(i.allLinksDirty){d.alwaysRedraw=!1;for(p=0,m=(b=Object.keys(r)).length;p<m;p++)L(r[b[p]])}else{Z.forEach((function(e){L(r[e])}));Y.forEach(O)}}return{stillDirty:d.stillDirty,rebuildAll:d.useSlowPathRendering||!M}}function G(e,t,n,r){var i=e.getLayerPath();e.setLayerPath(null);e.startGeneratingForExtras();e.setLayer(Oi.HANDLES);if(d.resizeRect&&1===r.size){Yn(e,t,n,d.resizeRect,1,d.resizeRect.id,v(),o);Yn(e,t,n,d.resizeRect,4,d.resizeRect.id,Dt.transparent,o)}e.setLayerPath(i)}return{animated:R,contains:S,currentArrowLength:m,editColour:v,fontSize:i,generate:B,generateHandles:G,getAlwaysRedraw:L,getResizePrimitive:T,setOptions:p,setSpecialOptions:h}}function Wa(e){}var Xa,Ua=1e-6,Na=22e-17;function ja(e){return"number"==typeof e&&isFinite(e)}function Ka(e){return ja(e)&&(0|e)===e}function Ha(e,t){return Math.sqrt(e*e+t*t)}function _a(e,t,n,r){return Ha(e-n,t-r)}function Ja(e,t){return Math.round(e/t)*t}function Qa(e,t){return Math.ceil(e/t)*t}function qa(e,t,n){return e<t?t:e>n?n:e}function $a(e,t,n){return n*e+(1-n)*t}function eu(e,t,n){var r=t-e;return r>Na?(n-e)/r:0}function tu(e,t,n,r,i,o){return e+(t-e)/(1+Math.pow(i*Math.E,-r*(o-n)))}!function(e){e.randMax=2147483647;function t(t){void 0===t&&(t=1);var n=Math.round(t)%e.randMax,r=48271,i=e.randMax/r,o=e.randMax%r;return function(){var t=r*(n%i|0)-o*(n/i|0);return(n=t>0?t:t+e.randMax)-1}}e.createPRNGi32=t;function n(n,r,i){void 0===n&&(n=1);void 0===r&&(r=0);void 0===i&&(i=1);var o=i-r,a=t(n);return function(){return r+o*(a()/e.randMax)}}e.createPRNG=n;function r(e,t,r){void 0===e&&(e=0);void 0===t&&(t=1);return r?n(r,e,t):function(){return e+(t-e)*Math.random()}}e.createRNG=r;function i(e,t,n){void 0===e&&(e=0);void 0===t&&(t=1);void 0===n&&(n=Math.random);var r=-1,i=!1;return function(){if(i){i=!1;return e+t*r}var o,a,u;do{u=(o=2*n()-1)*o+(a=2*n()-1)*a}while(u>=1||0===u);var s=Math.sqrt(-2*Math.log(u)/u);r=a*s;i=!0;return e+t*o*s}}e.createGaussianRNG=i}(Xa||(Xa={}));var nu;function ru(e,t){Object.setPrototypeOf(e,t);function n(){this.constructor=e}if(null!==t){n.prototype=t.prototype;e.prototype=new n}else e.prototype=Object.create(e)}!function(e){function t(e){return 0===e.size||(0|e.begin)===e.begin&&(0|e.end)===e.end&&e.end>=e.begin&&e.end-e.begin+1===e.size}e.isContiguous=t;function n(e,t){return e.size>0&&e.begin<=t&&e.end>=t}e.isWithin=n;function r(e){if(!t(e))throw new Error("non-contiguous Keyspace")}e.ensureContiguous=r;function i(e){return e>0?{size:e,begin:0,end:e-1}:{size:e,begin:-1,end:-1}}e.fromSize=i}(nu||(nu={}));function iu(e,t,n){for(var r=Object.keys(t||{}),i=0;i<r.length;i++){var o=r[i],a=e[o],u=t[o];void 0===a?e[o]=u:n&&ou(a)&&iu(a,u,n)}return e}function ou(e){return e&&"object"==typeof e&&!Array.isArray(e)}function au(e,t,n){return e.indexOf(t)>=0?t:n}function uu(e){return e}function su(e){var t,n=!1;return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(!n){n=!0;t=e.apply(this,r)}return t}}function fu(){return{next:function(){return ku},size:0}}function lu(e){var t={value:e,done:!1};return{next:function(){var e=t;t=ku;return e},size:1}}function cu(e,t){var n=0,r={value:null,done:!1},i={next:function(){var i=e.next();i.done?r.done=!0:r.value=t(i.value,n++);return r},size:0};"size"in e&&(i.size=e.size);return i}function du(e,t){for(var n=0,r=e.next();!r.done;n++,e.next())t(r.value,n)}function hu(e,t){var n=fu(),r=0;return{next:function(){for(var i=n.next();i.done;){var o=e.next();if(o.done)break;i=(n=t(o.value,r++)).next()}return i}}}function vu(e,t,n){for(var r=e.next(),i=0;!r.done;r=e.next(),i++)n=t(n,r.value,i);return n}function gu(e){nu.ensureContiguous(e);if(e.size<=0)return fu();var t={value:e.begin-1,done:!1};return{size:e.size,next:function(){++t.value>e.end&&(t.done=!0);return t}}}function pu(e,t){return void 0!==t?mu(e,t):yu(e)}function mu(e,t){var n={value:null,done:!1,i:-1};return{next:function(){n.i++;n.i<e.length?n.value=t(e[n.i],n.i):n.done=!0;return n},size:e.length}}function yu(e){var t={value:null,done:!1,i:-1};return{next:function(){t.i++;t.i<e.length?t.value=e[t.i]:t.done=!0;return t},size:e.length}}function bu(e,t,n){return"function"==typeof t?xu(e,t,n):wu(e,t)}function xu(e,t,n){void 0===n&&(n=[]);for(var r=e.next(),i=0;!r.done;r=e.next(),i++)n.push(t(r.value,i));return n}function wu(e,t){void 0===t&&(t=[]);for(var n=e.next();!n.done;n=e.next())t.push(n.value);return t}function Au(e,t){void 0===t&&(t=[null,null]);var n={value:t,done:!1},r={next:function(){var r=e.next();if(r.done){n.done=!0;return n}t[0]=r.value;if((r=e.next()).done){n.done=!0;return n}t[1]=r.value;return n},size:0};"size"in e&&(r.size=Math.floor(e.size/2));return r}function Mu(e,t){for(var n=e.next();!n.done;n=e.next())t=n.value;return t}function Iu(e,t){var n=e.next();return n.done?t:n.value}function Eu(e,t){return{next:function(){return e.next()},size:t}}var ku={value:null,done:!0},Cu={empty:fu,single:lu,map:cu,forEach:du,flatMap:hu,reduce:vu,fromKeySpace:gu,fromArray:pu,toArray:bu,pairs:Au,last:Mu,first:Iu,withSize:Eu};function Su(e){return e.buffer&&e.buffer instanceof ArrayBuffer}function Tu(e,t){for(var n=0;n<e.length;n++)e[n]=t}function Ru(e,t){return e<t}function Lu(e,t,n){var r=e[t];e[t]=e[n];e[n]=r}function Bu(e,t,n,r,i){void 0===n&&(n=Ru);void 0===r&&(r=0);void 0===i&&(i=e.length-r);for(var o,a=0;i>0;){o=0|r;if(n(e[o+=a=i/2|0],t)){r=++o;i-=a+1}else i=a}return r}function Gu(e,t){void 0===t&&(t=0);for(var n=t,r=0,i=e.length;r<i;r++)e[r]=n++}function Ou(e,t){for(var n=0;n<t.length;n++)if(t[n]<0)t[n]=~t[n];else for(var r=n,i=t[n];i!==n;){Lu(e,r,i);i=t[r=i];t[r]=~i}}var Zu,Yu=function(){function e(e,t,n,r,i,o){void 0===r&&(r=Zu.sizeFromShape(e));void 0===i&&(i=0);void 0===o&&(o=Zu.computeStrides(e));this.shape=e;this.dtype=t;this.values=n;this.size=r;this.offset=i;this.strides=o;this.rank=this.shape.length;this.lastIndex=Zu.lastIndex(this);this.lastStride=this.strides[this.rank-1];this.contiguous=this.lastIndex-i==r-1}e.prototype.getNextIndex=function(e){return e<0?this.offset:(e+=this.lastStride)>this.lastIndex?-1:e};return e}(),Fu=function(e){ru(t,e);function t(){var t=null!==e&&e.apply(this,arguments)||this;t.rankType=0;return t}t.prototype.get=function(){return this.values[this.index()]};t.prototype.set=function(e){this.values[this.index()]=e};t.prototype.index=function(){return 0|this.offset};return t}(Yu),zu=function(e){ru(t,e);function t(t,n,r,i,o,a){var u=e.call(this,t,n,r,i,o,a)||this;u.rankType=1;u.stride0=u.strides[0];return u}t.prototype.get=function(e){return this.values[this.index(e)]};t.prototype.set=function(e,t){this.values[this.index(e)]=t};t.prototype.index=function(e){return this.offset+e*this.stride0|0};return t}(Yu),Pu=function(e){ru(t,e);function t(t,n,r,i,o,a){var u=e.call(this,t,n,r,i,o,a)||this;u.rankType=2;u.stride0=u.strides[0];u.stride1=u.strides[1];return u}t.prototype.get=function(e,t){return this.values[this.index(e,t)]};t.prototype.set=function(e,t,n){this.values[this.index(e,t)]=n};t.prototype.index=function(e,t){return this.offset+e*this.stride0+t*this.stride1|0};return t}(Yu),Du=function(e){ru(t,e);function t(t,n,r,i,o,a){var u=e.call(this,t,n,r,i,o,a)||this;u.rankType=3;u.stride0=u.strides[0];u.stride1=u.strides[1];u.stride2=u.strides[2];return u}t.prototype.get=function(e,t,n){return this.values[this.index(e,t,n)]};t.prototype.set=function(e,t,n,r){this.values[this.index(e,t,n)]=r};t.prototype.index=function(e,t,n){return this.offset+e*this.stride0+t*this.stride1+n*this.stride2|0};return t}(Yu);function Vu(e,t,n){null==t&&(t=Zu.inferShape(e));null==n&&(n=Zu.inferDType(e,"f32"));var r=Su(e)||Array.isArray(e)?e:[e],i=Zu.asTypedArray(r,n);return new(Zu.getViewCtor(t.length))(t,n,i)}function Wu(e,t,n){void 0===t&&(t="f32");var r=Zu.sizeFromShape(e),i=Xu(t,r,n);return new(Zu.getViewCtor(e.length))(e,t,i,r)}function Xu(e,t,n){var r;switch(e){case"f64":r=new Float64Array(t);break;case"f32":r=new Float32Array(t);break;case"i32":r=new Int32Array(t);break;default:Zu.throwUnknownDType(e)}void 0!==n&&Tu(r,n);return r}function Uu(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=[],i=[],o=e.offset,a=0,u=t.length;a<u;a++){var s=e.strides[a];if(Ka(t[a]))o+=s*t[a];else{i.push(e.shape[a]);r.push(s)}}return new(Zu.getViewCtor(i.length))(i,e.dtype,e.values,Zu.sizeFromShape(i),o,r)}function Nu(e,t){void 0===t&&(t=0);for(var n=e.rank,r=e.shape,i=[],o=0;o<n;o++)i.push("all");var a=[];for(o=0;o<r[t];o++){i[t]=o;var u=[e].concat(i);a.push(Uu.apply(null,u))}return a}function ju(e,t,n,r){var i=Zu.getViewCtor(e.rank),o=t.length;void 0!==r?o=Math.min(r.length,o):r=Xu(e.dtype,o);switch(e.rank){case 0:r[0]=e.get();return new i([1],e.dtype,r);case 1:for(var a=0;a<o;a++){var u=e.get(t[a]);r[a]=u}return new i([o],e.dtype,r)}throw new Error("Rank not impl")}function Ku(e){for(var t=Wu(e.shape,e.dtype),n=-1,r=e.values,i=-1,o=t.values;(n=e.getNextIndex(n))>=0&&(i=t.getNextIndex(i))>=0;)o[i]=r[n];return t}function Hu(e,t){for(var n=-1,r=e.values;(n=e.getNextIndex(n))>=0;)r[n]=t}function _u(e,t){void 0===t&&(t=[0,0]);for(var n=Number.MAX_VALUE,r=Number.MIN_VALUE,i=-1,o=e.values;(i=e.getNextIndex(i))>=0;){o[i]>r&&(r=o[i]);o[i]<n&&(n=o[i])}t[0]=n;t[1]=r;return t}function Ju(e,t){for(var n=-1,r=e.values;(n=e.getNextIndex(n))>=0;)r[n]/=t}function Qu(e){return qu(e)[1]}function qu(e,t){void 0===t&&(t=0);var n=e.size;if(0===n)return[NaN,NaN];for(var r=0,i=0,o=1,a=e.values,u=-1;(u=e.getNextIndex(u))>=0;){var s=a[u],f=r;i+=(s-(r+=(s-r)/o))*(s-f);o++}return n>1?[Math.sqrt(i/(e.size-t)),r]:[0,r]}!function(e){function t(e){switch(e){case 0:return Fu;case 1:return zu;case 2:return Pu;case 3:return Du}throw new Error(e+" views not implemented")}e.getViewCtor=t;function n(e){if(0===e.length)return 1;for(var t=e[0],n=1;n<e.length;n++)t*=e[n];return t}e.sizeFromShape=n;function r(e){for(var t=e.rank,n=e.offset,r=0;r<t;r++)n+=e.strides[r]*(e.shape[r]-1);return n}e.lastIndex=r;function i(e){throw new Error("Unknown data type "+e)}e.throwUnknownDType=i;function o(e,t){void 0===t&&(t=[]);if(Array.isArray(e))for(var n=0,r=e;n<r.length;n++){o(r[n],t)}else t.push(e);return t}function a(e){var t=e.length,n=new Array(t);n[t-1]=1;for(var r=t-2;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}e.computeStrides=a;function u(e){if(Su(e))return[e.length];if(!Array.isArray(e))return[];for(var t=[];e instanceof Array;){t.push(e.length);e=e[0]}return t}e.inferShape=u;function s(e,t){return e instanceof Float32Array?"f32":e instanceof Int32Array?"i32":e instanceof Float64Array?"f64":t}e.inferDType=s;function f(e,t){return s(e)===t?e:l(Array.isArray(e)?o(e):e,t)}e.asTypedArray=f;function l(e,t){switch(t){case"f32":return new Float32Array(e);case"i32":return new Int32Array(e);case"f64":return new Float64Array(e)}i(t);return null}e.copyToTypedArray=l}(Zu||(Zu={}));var $u;!function(e){function t(e){return o(e.tl.x,e.br.x,e.tl.y,e.br.y)}e.copy=t;function n(e,t){t.tl.x=e.tl.x;t.tl.y=e.tl.y;t.br.x=e.br.x;t.br.y=e.br.y}e.copyTo=n;function r(e){return e.br.x-e.tl.x}e.width=r;function i(e){return e.br.y-e.tl.y}e.height=i;function o(e,t,n,r){if(e>t){var i=t;t=e;e=i}if(n>r){i=r;r=n;n=i}return{tl:{x:e,y:n},br:{x:t,y:r}}}e.create=o;function a(e,t,n){var o=r(e),a=i(e);e.tl.x=t;e.tl.y=n;e.br.x=t+o;e.br.y=n+a}e.moveTo=a;function u(e,t){void 0===t&&(t={x:0,y:0});t.x=e.tl.x+.5*(e.br.x-e.tl.x);t.y=e.tl.y+.5*(e.br.y-e.tl.y);return t}e.center=u;function s(e,t){return e.tl.x===t.tl.x&&e.tl.y===t.tl.y&&e.br.x===t.br.x&&e.br.y===t.br.y}e.equals=s;function f(e,t,n,r){return!(t+r>e.br.x||t-r<e.tl.x||n+r>e.br.y||n-r<e.tl.y)}e.contains=f;function l(e,t){return f(e,t.x,t.y,0)}e.containsPoint=l;function c(e,t,n){var o=.5*(t-r(e)),a=.5*(n-i(e));e.tl.x-=o;e.tl.y-=a;e.br.x+=o;e.br.y+=a}e.resize=c;function d(e,t,n){c(e,r(e)*t,i(e)*n)}e.scale=d;function h(e,t){return e.tl.x<t.br.x&&e.br.x>t.tl.x&&e.tl.y<t.br.y&&e.br.y>t.tl.y}e.intersects=h;function v(e,t){return o(Math.min(e.tl.x,t.tl.x),Math.max(e.br.x,t.br.x),Math.min(e.tl.y,t.tl.y),Math.max(e.br.y,t.br.y))}e.union=v}($u||($u={}));var es=function(){function e(e,t,n,r){this.parentIdx=e;this.quad=t;this.beginIdx=n;this.endIdx=r;this.firstChild=-1}return e}();function ts(e,t,n,r,i){var o=r-n+1;return o<=0?-1:1===o?t[e[n]]<=i?n:-1:Bu(e,i,(function(e,n){return t[e]<=n}),n,o)-1}var ns=new Uint32Array([1431655765,858993459,252645135,16711935]);function rs(e,t){e=((e=((e=((e=(e|e<<8)&ns[3])|e<<4)&ns[2])|e<<2)&ns[1])|e<<1)&ns[0];t=((t=((t=((t=(t|t<<8)&ns[3])|t<<4)&ns[2])|t<<2)&ns[1])|t<<1)&ns[0];return(e|(t<<=1))>>>0}var is=function(){function e(e,t){void 0===t&&(t=2);this.maxDepth=e;this.splitThreshold=t;this.N=0;this.aabb=$u.create(0,1,0,1);this.zorder=null;this.tree=[];this.path=new os(this.tree,this.aabb)}e.prototype.build=function(t,n,r){var i=t.size,o=this.zorder;if(void 0!==r)this.aabb=$u.copy(r);else{var a=_u(t),u=a[0],s=a[1],f=_u(n),l=f[0],c=f[1];this.aabb=r=$u.create(u,s,l,c)}null!==o&&o.length===i||Gu(o=this.zorder=new Int32Array(i));for(var d=$u.width(r),h=$u.height(r),v=new Uint32Array(i),g=d>0?65535/d:0,p=h>0?65535/h:0,m=r.tl.x,y=r.tl.y,b=function(e,t){return rs((e-m)*g>>>0,(t-y)*p>>>0)},x=0;x<i;){var w=o[x],A=t.get(w),M=n.get(w);if($u.contains(r,A,M,0)){v[w]=b(A,M);x++}else Lu(o,x,--i)}this.N=i;void 0===this.maxDepth&&(this.maxDepth=qa(Math.ceil(Math.log(i+1)),1,e.MAX_DEPTH));var I=o.subarray(0,this.N);Array.prototype.sort.call(I,(function(e,t){return v[e]-v[t]}));this.buildTree(r,I,v,this.maxDepth,this.splitThreshold,b)};e.prototype.buildTree=function(t,n,r,i,o,a){var u=n.length,s={x:0,y:0},f=$u.copy(t),l=this.tree,c=this.path;l.length=0;l.push(new es(-1,-1,0,u-1));c.resize(f);for(var d=0;d>=0;){var h=l[d];if(h.firstChild<0&&h.endIdx-h.beginIdx>=o-1&&c.depth<i){c.copyTo(f);$u.center(f,s);var v=a(s.x,s.y),g=a(f.br.x,s.y),p=a(s.x,f.br.y),m=h.beginIdx,y=h.endIdx,b=ts(n,r,m,y,v),x=1/0;if(b>=m){x=l.push(new es(d,0,m,b))-1;m=b+1}var w=ts(n,r,m,y,g);if(w>=m){x=Math.min(x,l.push(new es(d,1,m,w))-1);m=w+1}var A=ts(n,r,m,y,p);if(A>=m){x=Math.min(x,l.push(new es(d,2,m,A))-1);m=A+1}y>=m&&(x=Math.min(x,l.push(new es(d,3,m,y))-1));h.firstChild=x}d=e.nextDFS(l,c,!0)}};e.prototype.traverse=function(){if(null===this.tree||0===this.tree.length)return fu();var t=this.tree,n=$u.copy(this.aabb),r=new os(this.tree,n),i=0,o={value:null,done:!1};function a(){if(i>=0){var a=t[i];r.copyTo(n);o.value={id:i,aabb:n,count:a.endIdx-a.beginIdx+1};i=e.nextDFS(t,r,!0)}else o.done=!0;return o}return{next:a,size:t.length}};e.nextDFS=function(e,t,n){var r=t.currentIdx,i=n?e[r].firstChild:-1;if(i>=0){t.descend(i);return i}var o=e.length;r=e[r].parentIdx;for(;r>=0;){if((i=t.pop()+1)<o&&e[i].parentIdx===r){t.descend(i);return i}r=e[r].parentIdx}return-1};e.MAX_DEPTH=15;return e}(),os=function(){function e(e,t){this.tree=e;this.path=new Int32Array(is.MAX_DEPTH);this.resize(t)}e.prototype.resize=function(e){this.cxcy0=$u.center(e);this.w0=$u.width(e);this.h0=$u.height(e);this.hypot0=Ha(this.w0,this.h0);this.reset()};e.prototype.reset=function(){this.hypot=this.hypot0;this.currentIdx=0;this.depth=0};e.prototype.descend=function(e){this.hypot*=.5;this.path[++this.depth]=e;this.currentIdx=e};e.prototype.pop=function(){this.hypot*=2;var e=this.depth--,t=this.path[e];this.currentIdx=this.path[e-1];return t};e.prototype.copyTo=function(e){for(var t=e.tl,n=e.br,r=this.w0,i=this.h0,o=this.cxcy0,a=o.x,u=o.y,s=0,f=this.depth,l=this.tree,c=this.path;s<=f;s++){r*=.5;i*=.5;switch(l[c[s]].quad){case 0:a-=r;u-=i;break;case 1:a+=r;u-=i;break;case 2:a-=r;u+=i;break;case 3:a+=r;u+=i}}t.x=a-r;t.y=u-i;n.x=a+r;n.y=u+i};return e}();function as(e,t,n){return e>=t&&e<=n}var us=function(e){ru(t,e);function t(t,n,r){void 0===t&&(t="f32");var i=e.call(this,n,r)||this;i.dtype=t;i.outboundExpansions=null
;return i}t.prototype.buildXYM=function(e,t,n,r){var i=r.length;if(void 0===this.zxs||this.zxs.length<i){this.zxs=Xu(this.dtype,i);this.zys=Xu(this.dtype,i);this.zms=Xu(this.dtype,i)}for(var o=this,a=o.zxs,u=o.zys,s=o.zms,f=0;f<i;f++){var l=r[f];a[f]=e.get(l);u[f]=t.get(l);s[f]=n.get(l)}this.index=r};t.prototype.build=function(t,n,r,i){e.prototype.build.call(this,t,n,r);this.buildXYM(t,n,i,this.zorder);this.computeExpansions()};t.prototype.buildSubset=function(t,n,r,i,o){this.buildXYM(n,r,o,t);e.prototype.build.call(this,Vu(this.zxs),Vu(this.zys),i);var a=this.zorder;Ou(this.zxs,a);Ou(this.zys,a);Ou(this.zms,a);Ou(t,a);this.computeExpansions()};t.prototype.computeExpansions=function(){for(var e=this,t=e.tree,n=e.N,r=e.zxs,i=e.zys,o=e.zms,a=this.outboundExpansions=Wu([t.length,3],this.dtype),u=a.values,s=t.length-1,f=n;f>0&&s>=0;s--){var l=t[s];if(!(l.firstChild>=0)){for(var c=0,d=0,h=0,v=l.endIdx;v>=l.beginIdx;v--){var g=o[v];d+=r[v]*g;h+=i[v]*g;c+=g;f--}for(var p=s;p>=0;){u[m=a.index(p,0)]+=d;u[m+1]+=h;u[m+2]+=c;l=t[p=l.parentIdx]}}}for(s=t.length-1;s>=0;s--){var m;g=1/u[(m=a.index(s,0))+2];u[m]*=g;u[m+1]*=g}};t.prototype.runOnPoint=function(e,t,n,r,i,o){void 0===o&&(o=.5);null!==this.outboundExpansions&&0!==this.outboundExpansions.size&&this.runOnPointInternal(e,t,n,r,this.path,i,o,-1)};t.prototype.runOnPoints=function(e,t,n,r){void 0===r&&(r=.5);if(null!==this.outboundExpansions&&0!==this.outboundExpansions.size)for(var i=this,o=i.zxs,a=i.zys,u=i.zms,s=i.N,f=i.index,l=i.path,c=t.values,d=n.values,h=0;h<s;h++){var v={x:0,y:0};this.runOnPointInternal(e,o[h],a[h],u[h],l,v,r,h);var g=f[h];c[t.index(g)]+=v.x;d[n.index(g)]+=v.y}};t.prototype.runOnPointInternal=function(e,t,n,r,i,o,a,u){var s=this,f=s.tree,l=s.zxs,c=s.zys,d=s.zms,h=s.outboundExpansions;i.reset();for(var v=0;v>=0;){var g=f[v],p=g.beginIdx,m=g.endIdx,y=h.get(v,0),b=h.get(v,1);if(!as(u,p,m)&&i.hypot/_a(t,n,y,b)<a)e(t,n,r,y,b,h.get(v,2),o);else{if(g.firstChild>=0){i.descend(v=g.firstChild);continue}for(;p<=m;){p!==u&&e(t,n,r,l[p],c[p],d[p],o);p++}}v=is.nextDFS(f,i,!1)}};t.prototype.traverse=function(){var t=this.outboundExpansions;return cu(e.prototype.traverse.call(this),(function(e){e.x=t.get(e.id,0);e.y=t.get(e.id,1);e.mass=t.get(e.id,2);return e}))};return t}(is),ss={BarnesHut:us},fs={x:0,y:0};function ls(e,t){var n=Ha(e,t);return n>Na?{x:e/n,y:t/n}:{x:e,y:t}}function cs(e,t){return e.x*t.x+e.y*t.y}function ds(e,t,n){var r=t.x-e.x,i=t.y-e.y,o=n.x-e.x,a=n.y-e.y,u=r*(e.x+t.x)+i*(e.y+t.y),s=o*(e.x+n.x)+a*(e.y+n.y),f=r*(n.y-t.y)-i*(n.x-t.x);if(Math.abs(f)<Na)return null;var l=(a*u-i*s)*(f=.5/f),c=(r*s-o*u)*f;return{x:l,y:c,rSq:(e.x-l)*(e.x-l)+(e.y-c)*(e.y-c)}}function hs(e){for(var t={tl:{x:1/0,y:1/0},br:{x:-1/0,y:-1/0}},n=e.next();!n.done;){var r=n.value,i=r.x,o=r.y;t.tl.x=Math.min(t.tl.x,i);t.tl.y=Math.min(t.tl.y,o);t.br.x=Math.max(t.br.x,i);t.br.y=Math.max(t.br.y,o);n=e.next()}return t}function vs(e){for(var t={tl:{x:1/0,y:1/0},br:{x:-1/0,y:-1/0}},n=e.next();!n.done;){var r=n.value,i=r.x,o=r.y,a=r.r;t.tl.x=Math.min(t.tl.x,i-a);t.tl.y=Math.min(t.tl.y,o-a);t.br.x=Math.max(t.br.x,i+a);t.br.y=Math.max(t.br.y,o+a);n=e.next()}return t}function gs(e,t,n){var r=_u(e),i=r[0],o=r[1],a=_u(t),u=a[0],s=o-i,f=a[1]-u;if(s<Ua&&f<Ua)return null;var l=Math.max(s,f),c=i+.5*s,d=u+.5*f;return[{x:c-n*l,y:d-l},{x:c,y:d+n*l},{x:c+n*l,y:d-l}]}function ps(e,t,n,r,i,o){var a=ds(r<0?e[~r]:{x:t.get(r),y:n.get(r)},i<0?e[~i]:{x:t.get(i),y:n.get(i)},o<0?e[~o]:{x:t.get(o),y:n.get(o)});if(null!==a){a.adx=r;a.bdx=i;a.cdx=o}return a}function ms(e,t,n){for(var r=e.length-1,i=e.length-1;i>0;i-=2){var o=e[i],a=e[i-1];if(t===o&&n===a||t===a&&n===o){Lu(e,i,r);Lu(e,i-1,r-1);e.length-=2;return}}e.push(t,n)}function ys(e,t){void 0===t&&(t=[-1,-1]);var n={value:t,done:!1},r=0,i=0,o=-1,a=-1,u=-1;return{next:function(){if(r<e.length||i>0)switch(i){case 0:o=e[r++];a=e[r++];u=e[r++];t[0]=o;t[1]=a;i++;break;case 1:t[1]=u;i++;break;case 2:t[0]=a;i=0}else n.done=!0;return n},size:e.length}}function bs(e,t,n,r,i){var o=new Int32Array(e.size);Gu(o);return xs(o,e,t,n,r,i)}function xs(e,t,n,r,i,o){void 0===i&&(i=0);for(var a=r.length,u=null;;){if(null===(u=ws(e,t,n,r))||i--<=0)break;r.length=a;for(var s=u[0],f=u[1];s<f;s++){t.set(s,t.get(s)+o());n.set(s,n.get(s)+o())}}return u}function ws(e,t,n,r){var i=t.size;if(i<3)return null;var o=gs(t,n,1e3);if(null===o)return[0,i];var a=[ps(o,t,n,-1,-2,-3)],u=-1;Array.prototype.sort.call(e,(function(e,n){return t.get(n)-t.get(e)}));for(var s=e.length-1;s>=0;s--){for(var f=e[s],l=[],c=t.get(f),d=n.get(f),h=a.length-1;h>u;){var v=a[h],g=v.x,p=v.y,m=v.rSq,y=v.adx,b=v.bdx,x=v.cdx,w=c-g;if(w>0&&w*w>m)Lu(a,++u,h);else{h--;var A=d-p;if(!(w*w+A*A-m>Na)){ms(l,y,b);ms(l,b,x);ms(l,x,y);Lu(a,h+1,a.length-1);a.pop()}}}for(var M=0,I=l.length-1;M<I;){var E=ps(o,t,n,l[M++],l[M++],f);if(null===E)return[f,f+1];a.push(E)}}var k=r.length;for(s=a.length-1;s>=0;s--){var C=a[s];C.adx>=0&&C.bdx>=0&&C.cdx>=0&&r.push(C.adx,C.bdx,C.cdx)}return r.length===k?[0,i]:null}var As={edgesOf:ys,triangulate:bs,triangulateSubset:xs},Ms=function(){function e(e,t){this.xs=[];this.ys=[];this.bins=[];this.xs.push({index:0,size:e});this.ys.push({index:0,size:t});this.bins.push({filled:0,data:[!1]})}e.prototype.rows=function(){return this.ys.length};e.prototype.cols=function(){return this.xs.length};e.prototype.splitRow=function(e,t){for(var n=this,r=n.xs,i=n.ys,o=n.bins,a=i.length,u=i[e].index,s=0;s<r.length;s++)o[s].data.push(o[s].data[u]);var f={index:a,size:t};i.splice(e+1,0,f);return i[e].size-=t};e.prototype.splitColumn=function(e,t){var n=this,r=n.xs,i=n.bins,o=r.length,a=r[e].index;i.push({data:i[a].data.slice(0),filled:i[a].filled});var u={index:o,size:t};r.splice(e+1,0,u);return r[e].size-=t};e.prototype.isEmpty=function(e,t){return!this.bins[this.xs[t].index].data[this.ys[e].index]};e.prototype.totalFilled=function(e){return this.bins[this.xs[e].index].filled};e.prototype.fillRange=function(e,t,n,r){for(var i=this,o=i.xs,a=i.ys,u=i.bins,s=n;s<=r;s++)for(var f=u[o[s].index],l=e;l<=t;l++){f.data[a[l].index]=!0;f.filled+=a[l].size}};e.prototype.width=function(e){return this.xs[e].size};e.prototype.height=function(e){return this.ys[e].size};return e}();function Is(e,t){for(var n=1.2,r=0,i=0,o=0,a=0;a<e.length;a++){var u=$u.width(e[a]),s=$u.height(e[a]);r+=u*s*n;i=Math.max(i,u);o=Math.max(o,s)}var f=Math.sqrt(r/t),l=f*t;return $u.create(0,Math.max(i,l),0,Math.max(o,f))}var Es=function(){function e(e){void 0===e&&(e=Ua);this.tolerance=e}e.prototype.addRectangle=function(e,t,n){for(var r=$u.height(n),i=$u.width(n),o=0,a=0,u=0,s=0,f=t.rows(),l=$u.width(e)-i,c=$u.height(e);o<=l;)if(ks(e,u,r)>0||c-t.totalFilled(a)<r){o+=t.width(a++);u=0;s=0}else{for(;s<f&&!t.isEmpty(s,a);)u+=t.height(s++);if(s<f&&ks(e,u,r)<=0){if(this.tryToFit(t,s,a,i,r,this.tolerance)){$u.moveTo(n,e.tl.x+o,e.tl.y+u);return!0}u+=t.height(s++)}}return!1};e.prototype.tryToFit=function(e,t,n,r,i,o){for(var a=e.width(n),u=e.height(t),s=e.cols(),f=e.rows(),l=n,c=t;u<i-o;){if(++c>=f)return!1;u+=e.height(c)}for(;a<r-o;){if(++l>=s)return!1;a+=e.width(l)}for(var d=n;d<=l;d++)for(var h=t;h<=c;h++)if(!e.isEmpty(h,d))return!1;var v=a-r;v>o&&e.splitColumn(l,v);var g=u-i;g>o&&e.splitRow(c,g);e.fillRange(t,c,n,l);return!0};e.prototype.solve=function(e,t){void 0===t&&(t=Is(e,1));for(var n=new Ms($u.width(t),$u.height(t)),r=0;r<e.length;r++)if(!this.addRectangle(t,n,e[r])){var i=new Int32Array(e.length-r);Gu(i,r);return{bounds:t,bins:n,unpacked:i}}return{bounds:t,bins:n,unpacked:[]}};return e}();function ks(e,t,n){return n-($u.height(e)-t)}var Cs={DynamicBins:Ms,estimateDimensions:Is,Solver:Es};function Ss(e,t){var n={value:null,done:!1},r={value:null,done:!0,group:null};function i(){for(;r.done;){var i=e.next();if(i.done){n.done=!0;return n}t.reset(i.value);r=t.next()}n.value=[r.group,r.value];r=t.next();return n}return{next:i}}function Ts(e,t,n){void 0===n&&(n=new Int32Array(t.countVertices()));var r=[],i=t.adjacency();i.reset(e);Tu(n,-1);n[e]=e;function o(){for(;;){var e=i.next();if(e.done){if(!Rs(r,i))return e}else if(n[e.value]<0){n[e.value]=e.group;r.push(e.value);return e}}}return{next:o}}function Rs(e,t){for(;e.length>0;){var n=e.shift();if(t.reset(n)>0)return!0}return!1}var Ls=function(){function e(e){this.buffer=e}e.wrapArray=function(t){return new e(t)};e.prototype.keySpace=function(){return{begin:0,end:this.buffer.length-1,size:this.buffer.length}};e.prototype.get=function(e){return this.buffer[e]};e.prototype.set=function(e,t){this.buffer[e]=t};return e}(),Bs=function(){function e(e,t){this.ks=e;this.value=t}e.fromSize=function(t,n){return new e(nu.fromSize(t),n)};e.prototype.keySpace=function(){return{size:this.ks.size,begin:this.ks.begin,end:this.ks.end}};e.prototype.get=function(){return this.value};e.prototype.set=function(){};return e}(),Gs=function(){function e(e,t){this.buffer=e;this.inverse=t}e.fromValues=function(t){for(var n=[],r={},i=t.next(),o=0;!i.done;){var a=i.value;if(void 0===r[a]){r[a]=o;n.push(a);o++}i=t.next()}return new e(n,r)};e.fromKeyValuePairs=function(t){nu.ensureContiguous(t);for(var n=[],r={},i=t.next();!i.done;){var o=i.value,a=o[0],u=o[1];if(void 0===r[u]){r[u]=a;n.push(u)}i=t.next()}return new e(n,r)};e.prototype.get=function(e){return this.buffer[e]};e.prototype.set=function(e,t){this.buffer[e]=t};e.prototype.getUniqueInverse=function(e){return this.inverse[e]};e.prototype.getInverse=function(e){return lu(this.inverse[e])};e.prototype.keySpace=function(){return nu.fromSize(this.buffer.length)};return e}();function Os(e){nu.ensureContiguous(e.vertexRange());for(var t=e.iterateAdjacentPairs(),n=new Int32Array(e.countVertices()),r=t.next();!r.done;){var i=r.value,o=i[0],a=i[1];n[o]++;n[a]++;r=t.next()}return Ls.wrapArray(n)}function Zs(e,t){void 0===t&&(t=Os(e));nu.ensureContiguous(e.vertexRange());for(var n=e.countVertices(),r=e.iterateAdjacentPairs(),i=new Float32Array(e.countVertices()),o=r.next();!o.done;){var a=o.value,u=a[0],s=a[1];i[u]+=t.get(s);i[s]+=t.get(u);o=r.next()}for(var f=0;f<n;f++)i[f]/=Math.max(1,t.get(f));return Ls.wrapArray(i)}function Ys(e,t){void 0===t&&(t=0);for(var n=new Int32Array(e.countVertices()),r=Mu(Ts(t,e,n),t),i=r!==t?Mu(Ts(r,e,n),r):r,o=0,a=i;a!==r;o++)a=n[a];return{diameter:o,extremes:[r,i]}}function Fs(e,t,n){var r=Gs.fromValues(e),i=function(e){return[r.getUniqueInverse(e[0]),r.getUniqueInverse(e[1]),e[2]]},o=n.buildKeyed(cu(t,i),e.size),a=Gs.fromKeyValuePairs(o);return{vertexMap:r,edgeMap:a}}function zs(e){var t=null,n=null;if("function"!=typeof e){t=e.defaultValue;void 0!==e.map&&(n=e.map)}else n=e;return{map:n,defaultValue:t}}function Ps(e,t,n){n=void 0!==n?n:e.size;var r={},i=[];Object.keys(t).forEach((function(e){var o=zs(t[e]),a=o.map,u=o.defaultValue;if(null!==a){for(var s=[],f=0;f<n;f++)s.push(u);i.push({buffer:s,map:a});r[e]=Ls.wrapArray(s)}else r[e]=Bs.fromSize(n,u)}));for(var o=e.next(),a=i.length;!o.done;o=e.next()){var u=o.value,s=u[0],f=u[1];if(s>=0&&s<n)for(var l=0;l<a;l++){var c=i[l];c.buffer[0|s]=c.map(f)}}return r}function Ds(e,t){return Object.keys(t).reduce((function(n,r){n[r]=Vs(e,t[r]);return n}),{})}function Vs(e,t){var n=zs(t),r=n.map,i=n.defaultValue;if(null===r)return Bs.fromSize(e,i);for(var o=[],a=0;a<e;a++)o.push(r(a));return Ls.wrapArray(o)}var Ws=function(){function e(e,t,n){this.tourStart=e;this.tours=t;this.nTours=n;this.defaultValue=-1}e.prototype.keySpace=function(){return nu.fromSize(this.tourStart.length)};e.prototype.iterateGroups=function(){for(var e=this.tourStart,t=[],n=0,r=this.nTours;r>0;){if(e[n]===n){t.push(n);r--}n++}return pu(t)};e.prototype.iterateGroup=function(e){e=this.tourStart[e];var t=this.tours,n={done:!1,value:e},r=!1;return{next:function(){n.value=e;n.done=r;r||(t[e]>e?e=t[e]:r=!0);return n}}};e.prototype.groupSize=function(e){e=this.tourStart[e];for(var t=1;e<(e=this.tours[e]);)t++;return t};e.prototype.countGroups=function(){return this.nTours};e.prototype.get=function(e){return this.tourStart[e]};e.prototype.set=function(){throw new Error("Readonly")};e.build=function(t){for(var n=t.length,r=new Int32Array(n),i=new Int32Array(n),o=0,a=0;a<n;a++){var u=Xs(t,a,!1),s=void 0;if(u===a){o++;s=a}else s=i[u];t[a]=u;r[s]=a;i[u]=a}return new e(t,r,o)};return e}();function Xs(e,t,n){for(var r=t,i=0;r>=0&&e[r]!==r;){r=e[r];i++}if(n)for(var o=void 0;i>1;){o=t;t=e[t];e[o]=r;i--}return r}function Us(e){nu.ensureContiguous(e.vertexRange());return Ns(e.iterateAdjacentPairs(!1),e.countVertices())}function Ns(e,t){var n=new Int32Array(t);Gu(n,0);for(var r=e.next();!r.done;r=e.next()){var i=r.value,o=i[0],a=i[1],u=Xs(n,o,!0),s=Xs(n,a,!0);u>s?n[u]=s:u<s&&(n[s]=u)}return Ws.build(n)}function js(e){var t=e.countVertices(),n=new Int32Array(t);return Ws.build(n)}var Ks=-1;function Hs(e,t,n){var r=t.begin,i=t.size,o=t.end,a={done:!1,value:n},u=0;return{next:function(){if(r<=o){n[0]=e[u++];n[1]=e[u++];n[2]=r++}else a.done=!0;return a},size:i}}function _s(e,t,n,r){var i=t.begin,o=t.size,a=t.end,u={done:!1,value:r},s=0;return{next:function(){for(;i<=a;){var t=e[s++],n=e[s++];if(t!==Ks&&n!==Ks){r[0]=t;r[1]=n;r[2]=i++;return u}i++}u.done=!0;return u},size:o-n}}var Js=function(){function e(e,t,n){void 0===e&&(e="d");void 0===t&&(t=!1);void 0===n&&(n=!1);this.directedCategory=e;this.selfLoops=t;this.rewriteEdges=n;this.badIncidence=0;this.initialize(0,0)}e.prototype.rawPairs=function(){return this.pairs};e.prototype.iterateEdges=function(){return gu(this.edges)};e.prototype.iterateVertices=function(){return gu(this.vertices)};e.prototype.countVertices=function(){return this.vertices.size};e.prototype.countEdges=function(){return this.edges.size};e.prototype.countInvalidIncidence=function(){null===this.buffers&&this.buildAdjacency();return this.badIncidence};e.prototype.vertexRange=function(){return this.vertices};e.prototype.edgeRange=function(){return this.edges};e.prototype.source=function(e){Wa(nu.isWithin(this.edges,e));return this.pairs[2*e]};e.prototype.target=function(e){Wa(nu.isWithin(this.edges,e));return this.pairs[2*e+1]};e.prototype.containsEdge=function(e){return nu.isWithin(this.edges,e)};e.prototype.containsVertex=function(e){return nu.isWithin(this.vertices,e)};e.prototype.incidence=function(){null===this.buffers&&this.buildAdjacency();return Qs(this.bufferIndex,this.buffers.incidence)};e.prototype.adjacency=function(){null===this.buffers&&this.buildAdjacency();return Qs(this.bufferIndex,this.buffers.adjacency)};e.prototype.iterateAdjacentPairs=function(e,t){void 0===t&&(t=[-1,-1,-1]);return 0===this.countEdges()?fu():!e&&this.badIncidence>0?_s(this.pairs,this.edgeRange(),this.badIncidence,t):Hs(this.pairs,this.edgeRange(),t)};e.prototype.isAdjacent=function(e,t){throw new Error("not impl")};e.prototype.isIncident=function(e,t){throw new Error("not impl")};e.prototype.insertEdge=function(e,t){var n=t[0],r=t[1],i=2*e;if(nu.isWithin(this.vertices,n)&&nu.isWithin(this.vertices,r)&&(this.selfLoops||n!==r)){this.pairs[i]=n;this.pairs[i+1]=r;this.bufferIndex[n]++;this.bufferIndex[r]++}else{this.badIncidence++;this.pairs[i]=Ks;this.pairs[i+1]=Ks}};e.prototype.buildAdjacency=function(){for(var e=this.pairs,t=this.bufferIndex,n=this.rewriteEdges,r="d"===this.directedCategory,i=this.countVertices(),o=0;o<e.length;o+=2)if(e[o]!==Ks){n&&t[e[o]]<t[e[o+1]]&&Lu(e,o,o+1);r&&t[e[o+1]]--}var a=0;for(o=0;o<i;o++){var u=t[o];t[o]=a;a+=u}t[i]=a;this.buffers=qs(a);var s=$s(e,t,this.buffers,r);if(s>0){var f=this.buffers,l=f.adjacency,c=f.incidence,d=0;for(o=0;o<i;o++){var h=t[o],v=t[o+1];t[o]-=d;for(;h<v;){if(l[h]>=0){l[h-d]=l[h];c[h-d]=c[h]}else d++;h++}}t[i]-=d;this.badIncidence+=s}};e.prototype.buildKeyed=function(e,t){var n=this;this.initialize(t,e.size);var r=0,i={value:[-1,void 0],done:!1},o=function(){var t=e.next();if(t.done)i.done||(i.done=!0);else{n.insertEdge(r,t.value);i.value[0]=r++;i.value[1]=t.value[2]}return i},a=nu.fromSize(e.size);a.next=o;return a};e.prototype.build=function(e,t){this.initialize(t,e.size);for(var n=0,r=e.next();!r.done;r=e.next(),n++)this.insertEdge(n,r.value)};e.prototype.initialize=function(e,t){this.vertices=nu.fromSize(e);this.edges=nu.fromSize(t);this.bufferIndex=Xu("i32",e+1);this.pairs=Xu("i32",2*t,Ks);this.badIncidence=0;this.buffers=null};return e}();function Qs(e,t){var n={done:!1,group:0,value:0},r=e[0],i=e[1];return{reset:function(t){r=e[t];var o=(i=e[t+1])-r;n.group=t;n.done=0===o;return o},next:function(){r>=i?n.done=!0:n.value=t[r++];return n}}}function qs(e){return{incidence:Xu("i32",e,Ks),adjacency:Xu("i32",e,Ks)}}function $s(e,t,n,r){for(var i=0,o=0,a=0;a<e.length;a+=2,o++){var u=e[a],s=e[a+1];if(u!==Ks&&s!==Ks){if(ef(n,t[u],s,o)<0||!r&&ef(n,t[s],u,o)<0){e[a]=Ks;e[a+1]=Ks;i++}}}return i}function ef(e,t,n,r){for(var i=e.adjacency,o=e.incidence;t<i.length;){var a=i[t];if(a===Ks){i[t]=n;o[t]=r;return t}if(a===n)return-1;t++}return-1}var tf=function(){function e(e){this.parent=e;this.vInv=new Int32Array(e.countVertices());Tu(this.vInv,Ks)}e.prototype.induceAll=function(e){return this.induceFrom(cu(e.iterateGroups(),(function(t){return e.iterateGroup(t)})))};e.prototype.induceFrom=function(e){var t=this,n=t.vInv,r=t.parent,i=r.incidence(),o=new Int32Array(r.countEdges()),a=new Int32Array(r.countVertices()),u=0,s=0,f=0,l=0;return cu(e,(function(e){l=f;for(;s<u;)n[a[s++]]=Ks;for(var t=e.next();!t.done;t=e.next(),u++){a[u]=t.value;n[t.value]=u-s}for(var c=s;c<u;c++){var d=a[c];i.reset(d);for(var h=i.next();!h.done;h=i.next()){var v=r.target(h.value);d!==v&&n[v]>=0&&(o[f++]=h.value)}}var g={vs:a.subarray(s,u),es:o.subarray(l,f)};return[pu(g.es,(function(e){return[n[r.source(e)],n[r.target(e)],e]})),g]}))};return e}(),nf={degrees:Os,avgNeighborDegree:Zs,diameter:Ys,buildFromLabeledIterators:Fs,buildPropertyBagFrom:Ps,buildPropertyBag:Ds,buildProperty:Vs,connectedComponents:Us,connectedComponentsFrom:Ns,all:js,StaticPropertyMap:Ls,ConstantPropertyMap:Bs,StaticStringLabelMap:Gs,StaticAdjacencyGraph:Js,SubgraphBuilder:tf,byGroup:Ss,bfs:Ts};function rf(e,t,n){var r=e.source(t);return r===n?e.target(t):r}var of=function(){function e(e,t){void 0===e&&(e=0);void 0===t&&(t=Math.PI/2);this.padding=e;this.rotation=t}e.prototype.applySubset=function(e,t,n,r,i){var o=Math.PI,a=e.length;Array.prototype.sort.call(e,(function(e,t){return i.get(t)-i.get(e)}));var u=0,s=0,f=e[u];n.set(f,t.x);r.set(f,t.y);s+=i.get(f)+this.padding;u++;for(;u<a;){var l=this.sizeRing(e,u,i,s,o),c=this.positionRing(t,n,r,i,e,u,2,0,o,s);c+=u+l.n>=a?this.positionRing(t,n,r,i,e,u,1,2*o,2*o,s,-1):this.positionRing(t,n,r,i,e,u,1,o,2*o,s);s+=2*l.meanRadius+this.padding;u+=c}return s};e.prototype.apply=function(e,t,n,r){if(t.size<1)return 0;var i=new Int32Array(t.size);Gu(i);return this.applySubset(i,e,t,n,r)};e.prototype.sizeRing=function(e,t,n,r,i){void 0===i&&(i=2*Math.PI);for(var o=0,a=0;t<e.length;){var u=e[t++];if((i-=2*(n.get(u)+.5*this.padding)/r)<0)break;a+=n.get(u);o++}return{n:o,meanRadius:a/o}};e.prototype.positionRing=function(e,t,n,r,i,o,a,u,s,f,l){void 0===l&&(l=1);for(var c=this.rotation,d=0;o<i.length;){var h=i[o];if(h>=0){var v=r.get(h)+.5*this.padding,g=l*(v/(v+f));if(u+2*g>s)break;t.set(h,e.x+Math.sin(u+g+c)*(v+f));n.set(h,e.y+Math.cos(u+g+c)*(v+f));i[o]=-1;u+=2*g;d++}o+=a}return d};return e}(),af=function(){function e(e,t,n,r){void 0===e&&(e=0);void 0===n&&(n=!0);this.padding=e;this.focalPoint=t;this.robust=n;this.rng=r;this.state=null}e.prototype.build=function(e,t,n){var r=e.size,i=new Js("u",!1),o=[];if(r>2){var a=bs(e,t,o,this.robust?r:0,this.rng);if(null!==a)return a;i.build(ys(o),r);var u=ff(i,e,t,n,5*this.padding);u.length>0&&i.build(Au(pu(u)),r)}else if(2===r){i.build(pu([[0,1]]),r);_a(e.get(0),t.get(0),e.get(1),t.get(1))<Ua&&e.set(1,e.get(1)+2*Ua)}else i.build(fu(),r);var s=function(r,i){return _a(e.get(r),t.get(r),e.get(i),t.get(i))<2.5*(n.get(r)+n.get(i))},f=uf(this.focalPoint,e,t),l=sf(f.min,f.distances,i,s);this.state={xs:e,ys:t,rs:n,es:l.es,triangles:o,predecessors:l.predecessors,vs:l.vs};return null};e.prototype.pack=function(e){void 0===e&&(e=.5);for(var t=this.state,n=t.xs,r=t.ys,i=t.rs,o=t.predecessors,a=t.vs,u=this.focalPoint,s=this.padding,f=n.size,l=0;l<f;l++){var c=a[l],d=o[c],h=n.get(c),v=r.get(c);if(d!==c){var g=Ha(n.get(d)-h,r.get(d)-v),p=i.get(c)+i.get(d)+s;if(g>p){var m=u.x-h,y=u.y-v,b=Ha(m,y),x=e/(Ua+b)*(g-p);n.set(c,h+m*x);r.set(c,v+y*x)}}else{n.set(c,h+(u.x-h)*e);r.set(c,v+(u.y-v)*e)}}};e.prototype.packTowards=function(e,t,n){void 0===n&&(n=.5);for(var r=this.state,i=r.xs,o=r.ys,a=i.size,u=0;u<a;u++){i.set(u,$a(e.get(u),i.get(u),n));o.set(u,$a(t.get(u),o.get(u),n))}};e.prototype.solve=function(e,t){void 0===t&&(t=.5);var n=this,r=n.padding,i=n.focalPoint,o=this.state,a=o.xs,u=o.ys,s=o.rs,f=o.es,l=Math.max(.1*r,Ua),c=0;do{c=0;for(var d=0;d<f.length;){var h=f[d++],v=f[d++],g=a.get(h),p=u.get(h),m=s.get(h),y=a.get(v),b=u.get(v),x=s.get(v),w=y-g,A=b-p,M=Ha(w,A),I=m+x+r;if(M+l<I&&M>0){c++;var E=lf(g,p,y,b,i,m,x),k=t*((M-I)/M);w*=k;A*=k;a.set(h,g+E*w);u.set(h,p+E*A);a.set(v,y-(1-E)*w);u.set(v,b-(1-E)*A)}}}while(--e>0&&c>0);return c};return e}();function uf(e,t,n){for(var r=t.size,i=new Float32Array(r),o=-1,a=0,u=1/0;a<r;a++){var s=i[a]=_a(t.get(a),n.get(a),e.x,e.y);if(s<u){o=a;u=s}}return{min:o,distances:i}}function sf(e,t,n,r){var i=n.countEdges()-n.countInvalidIncidence(),o=n.countVertices(),a=new Int32Array(o),u=new Int32Array(2*i),s=new Int32Array(o);if(o>0&&i>0){for(var f=n.incidence(),l=Ts(e,n,a),c=0,d=0,h={value:e,done:!1};!1===h.done;h=l.next()){var v=h.value,g=t[a[v]];s[d++]=v;f.reset(v);for(var p=f.next();!1===p.done;p=f.next()){var m=rf(n,p.value,v);if(a[m]>=0&&r(v,m)){u[c++]=v;u[c++]=m}if(t[m]<g){a[v]=m;g=t[m]}}}u=u.subarray(0,c)}return{predecessors:a,es:u,vs:s}}function ff(e,t,n,r,i){for(var o=e.countVertices(),a=e.adjacency(),u=e.adjacency(),s=[],f=0;f<o;f++){a.reset(f);for(var l=r.get(f),c=a.next();!c.done;c=a.next()){if(r.get(c.value)<l){u.reset(c.value);for(var d=u.next();!d.done;d=u.next())if(!(d.value<=f)){var h=r.get(d.value);_a(t.get(d.value),n.get(d.value),t.get(f),n.get(f))-(l+h)<i&&s.push(f,d.value)}}f<c.value&&s.push(f,c.value)}}return s}function lf(e,t,n,r,i,o,a){var u=_a(e,t,i.x,i.y),s=_a(n,r,i.x,i.y),f=Math.min(u-o,s-a);return.5*(1+(u-o-(s-a))/(Math.max(u+o,s+a)-f))}var cf={InterleavingCircles:of,Solver:af};function df(e,t){var n=e.x-t.x,r=e.y-t.y;return Math.sqrt(n*n+r*r)<e.r-t.r+Ua}function hf(e,t){var n=e.x,r=e.y,i=e.r,o=t.x,a=t.y,u=t.r,s=o-n,f=a-r,l=u-i,c=Math.sqrt(s*s+f*f);return{x:(n+o+s/c*l)/2,y:(r+a+f/c*l)/2,r:(c+i+u)/2}}function vf(e,t,n){var r=e.x,i=e.y,o=e.r,a=t.x,u=t.y,s=t.r,f=n.x,l=n.y,c=n.r,d=2*(r-a),h=2*(i-u),v=2*(s-o),g=r*r+(i*i-o*o-a*a-u*u)+s*s,p=2*(r-f),m=2*(i-l),y=2*(c-o),b=r*r+(i*i-o*o-f*f-l*l)+c*c,x=p*h-d*m,w=(h*b-m*g)/x-r,A=(m*v-h*y)/x,M=(p*g-d*b)/x-i,I=(d*y-p*v)/x,E=A*A+I*I-1,k=2*(w*A+M*I+o),C=w*w+M*M-o*o,S=(-k-Math.sqrt(k*k-4*E*C))/(2*E);return{x:w+A*S+r,y:M+I*S+i,r:S}}function gf(e,t){switch(t.length){case 0:return{x:0,y:0,r:0};case 1:return e[t[0]];case 2:return hf(e[t[0]],e[t[1]]);default:var n=vf(e[t[0]],e[t[1]],e[t[2]]);if(n.r<0){var r=hf(e[t[0]],e[t[1]]),i=hf(e[t[0]],e[t[2]]),o=hf(e[t[1]],e[t[2]]);n=(n=r.r>i.r?r:i).r>o.r?n:o}return n}}function pf(e){if(0===e.length)return null;for(var t=e.length,n={i:0,prev:null,R:[],c:null};;){var r=n.i,i=n.R,o=n.prev,a=n.c;if(r===t||3===i.length){o.c=gf(e,i);n=o}else if(null===a)n={i:r+1,prev:n,R:i,c:null};else if(df(a,e[r])){if(null===o)return a;o.c=a;n=o}else n={i:r+1,prev:n,R:i.concat([r]),c:null}}}var mf=function(){function e(e,t){void 0===e&&(e=0);void 0===t&&(t=Xa.createRNG());this.maxPerturbations=e;this.rng=t;this.mesh=new Js("u",!1);this.clusterState=null}Object.defineProperty(e.prototype,"clusters",{get:function(){return null===this.clusterState?null:this.clusterState.cc},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"rejectedEdges",{get:function(){return null===this.clusterState?-1:this.clusterState.rejectedEdges},enumerable:!0,configurable:!0});e.prototype.triangulate=function(e,t,n,r){var i=e.length;if(i<=3){switch(i){case 3:r.push(e[0],e[1],e[2]);case 2:r.push(e[0],e[1],e[0]);case 1:r.push(e[0],e[0],e[0])}return null}return xs(e,t,n,r,this.maxPerturbations,this.rng)};e.prototype.buildSubsets=function(e,t,n){for(var r=[],i=e.next();!i.done;i=e.next()){var o=this.triangulate(i.value,t,n,r);if(null!==o)return o}this.mesh.build(ys(r),t.size);this.xs=t;this.ys=n;return null};e.prototype.build=function(e,t){var n=new Int32Array(e.size);Gu(n);return this.buildSubsets(lu(n),e,t)};e.prototype.evaluateEdges=function(e,t){for(var n=this,r=n.mesh,i=n.xs,o=n.ys,a=r.countEdges(),u=r.iterateAdjacentPairs(!1),s=new Int32Array(a),f=new Float32Array(a),l=0,c=u.next();!c.done;c=u.next()){var d=c.value,h=d[0],v=d[1],g=d[2],p=t.get(h),m=t.get(v),y=_a(i.get(h),o.get(h),i.get(v),o.get(v))-(p+m);if(y<=Math.min(p,m)*e){f[g]=Math.max(0,y);s[g]=1;l++}}return{filter:s,separations:f,valid:l}};e.prototype.evaluate=function(e,t,n,r){void 0===r&&(r=2);var i=this.evaluateEdges(e,t),o=i.valid,a=i.filter,u=i.separations,s=t.size,f=this.mesh,l=0,c=bf(a,f,s);if(n){for(var d=f.incidence(),h=c.iterateGroups(),v=new Float32Array(o),g=new Int32Array(o),p=h.next();!p.done;p=h.next()){for(var m=Ss(c.iterateGroup(p.value),d),y=0,b=m.next();!b.done;b=m.next()){var x=b.value[1];if(a[x]>0){v[y]=u[x];g[y]=x;a[x]=0;y++}}for(var w=qu(Vu(v,[y])),A=w[0],M=w[1]+r*A,I=0;I<y;I++)v[I]<=M?a[g[I]]=1:l++}l>0&&(c=bf(a,f,s))}this.clusterState={rejectedEdges:l,cc:c};return f};e.prototype.describeAll=function(e,t,n){if(null===this.clusterState)return null;for(var r=this.clusterState.cc,i=new Map,o=r.iterateGroups(),a=o.next();!a.done;a=o.next()){var u=bu(r.iterateGroup(a.value)),s=ju(e,u),f=ju(t,u),l=ju(n,u),c=u.length,d={size:c,radius:0,center:{x:Qu(s),y:Qu(f)}};if(1===c)d.radius=l.get(0);else{for(var h=new Float32Array(c),v=d.center,g=v.x,p=v.y,m=0;m<c;m++)h[m]=_a(s.get(m),f.get(m),g,p);var y=Qu(Vu(h));d.radius=1.5*y+Qu(l)}i.set(a.value,d)}return i};return e}(),yf=[-1,-1];function bf(e,t,n){return Ns(pu(e,(function(e,n){return e>0?[t.source(n),t.target(n)]:yf})),n)}function xf(e,t){return new mf(e,t)}var wf={nbody:ss,delaunay:As,circlePacking:cf,binPacking:Cs,radialExtents:pf,dbscan:xf,LinearQuadTree:is,get Rect(){return $u},origin:fs,unit:ls,dot:cs,circleIntersecting:ds,pointExtents:hs,circleExtents:vs},Af=function(){function e(e,t,n){this.g=e;this.rng=t;this.scale=n}e.prototype.run=function(e){var t=this,n=e["@@pos2d"],r=e["@@speed"]||Bs.fromSize(this.g.countVertices(),1),i=e["@@group"]||js(this.g),o=e["@@radius"],a=e["@@groupCenter"]||Bs.fromSize(this.g.countVertices(),fs),u=this,s=u.scale,f=u.rng;du(i.iterateGroups(),(function(e){var u=a.get(e)||fs,l="number"==typeof s?s:t.scaleOf(i.iterateGroup(e),o);du(i.iterateGroup(e),(function(e){if(0!==r.get(e)){var t=n.get(e),i=f()*Math.PI*2,o=f()*l;t.x=u.x+Math.cos(i)*o;t.y=u.y+Math.sin(i)*o}}))}))};e.prototype.scaleOf=function(e,t){var n=.5,r=0,i=0;du(e,(function(e){r+=t.get(e);i++}));r/=i;return Math.sqrt(i/n)*r};return e}();function Mf(e,t){void 0===t&&(t={});var n=Xa.createRNG(0,1,t.seed);return new Af(e,n,t.scale)}var If={initialSpeed:void 0,speedDecay:.5,maxIterations:30,focalPoint:void 0,padding:{proportion:0,min:0,max:0},cpIterations:8,initialize:!0,reduceOverlapsOnly:!1,adaptive:!1},Ef=function(){function e(e){void 0===e&&(e={});this.numIterations=0;this.groupState=[];this.opts=iu(e,If);this.speed=this.opts.initialSpeed}e.prototype.isComplete=function(){return this.speed<=Ua||this.numIterations>=this.opts.maxIterations};e.prototype.initialize=function(e){var t=e["@@group"],n=e["@@pos2d"],r=e["@@radius"],i=t.countGroups(),o=this.xyr=Wu([3,i],"f32");this.opts.adaptive&&du(t.iterateGroups(),(function(e,i){var a=kf(t.iterateGroup(e),n,r);o.set(0,i,a.x);o.set(1,i,a.y);o.set(2,i,a.r)}))};e.prototype.run=function(e){var t=e["@@pos2d"],n=e["@@sparseRadius"]||e["@@radius"],r=e["@@group"],i=e["@@groupSpeed"];if(r&&0!==t.keySpace().size){0===this.numIterations&&(this.speed=this.initInternal(t,n,r,i));this.runSolver();this.offsetGroups(t,r);this.numIterations++;this.numIterations>=.75*this.opts.maxIterations&&(this.speed*=1-this.opts.speedDecay)}else this.speed=0};e.prototype.runSolver=function(){var e=this,t=e.speed,n=e.opts,r=e.solver,i=Nu(e.xyr),o=i[0],a=i[1],u=i[2];if(null!==r.build(o,a,u))throw new Error("packing fail");if(n.reduceOverlapsOnly){var s=Nu(this.xyrOrigin),f=s[0],l=s[1];r.packTowards(f,l,t)}else r.pack(t);r.solve(n.cpIterations)};e.prototype.initInternal=function(e,t,n,r){var i=this.opts,o=i.padding,a=i.initialize,u=i.initialSpeed,s=i.reduceOverlapsOnly,f=o.min,l=bu(n.iterateGroups(),(function(i){var a=kf(n.iterateGroup(i),e,t);a.r+=qa(a.r*o.proportion-f,0,o.max-f);a.speed=r?r.get(i):1;a.id=i;return a}),this.groupState);this.opts.adaptive&&this.offsetGroups(e,n);for(var c=0,d=0,h=Nu(this.xyr),v=h[0],g=h[1],p=h[2],m=0;m<l.length;m++){var y=l[m];if(y.r>c){c=y.r;d=m}v.set(m,y.x);g.set(m,y.y);p.set(m,y.r)}var b=Xa.createPRNG(37,-.01*c,.01*c),x=this.opts.focalPoint||{x:v.get(d),y:g.get(d)};this.solver=new af(2*f,x,!0,b);a&&new of(2*f).apply(x,v,g,p);s&&(this.xyrOrigin=Ku(this.xyr));return void 0===u?s?.25:.5:u};e.prototype.offsetGroups=function(e,t){for(var n=this,r=n.groupState,i=n.xyr,o=0;o<r.length;o++){for(var a=r[o],u=(i.get(0,o)-a.x)*a.speed,s=(i.get(1,o)-a.y)*a.speed,f=t.iterateGroup(a.id),l=f.next();!l.done;){var c=e.get(l.value);c.x+=u;c.y+=s;l=f.next()}a.x+=u;a.y+=s}};return e}();function kf(e,t,n){return pf(bu(e,(function(e){var r=t.get(e);return{x:r.x,y:r.y,r:n.get(e)}})))}function Cf(e){return new Ef(e)}var Sf={create:Cf},Tf={aspectRatio:1.33,padding:{proportion:0,min:0,max:0},groupOrder:void 0};function Rf(e,t){return t+2*qa(t*e.proportion,e.min,e.max)}function Lf(e,t){return e.reduce((function(e,n){var r=.5*($u.width(n)+$u.height(n));return Math.min(e,Rf(t,r))}),2*t.max)}function Bf(e,t,n){return Math.max(Qa(t,n),Ja(e,n))}function Gf(e,t,n,r){var i=e;if(n&&t>Ua){var o=e/t;i=qa(Math.pow(2,Math.ceil(Math.log(o)/Math.LN2))*t,e,1.33*e)}var a=Math.max(e+2*r.min,i);return Bf(Math.max(Rf(r,e),i),a,t)}var Of=function(){function e(e){void 0===e&&(e={});this.opts=e;this.groupState=[]
;this.packingResult=null;this.bounds=null;iu(e,Tf)}e.prototype.isComplete=function(){return null!==this.packingResult&&0===this.packingResult.unpacked.length};e.prototype.run=function(e){if(e["@@group"]){var t=e["@@pos2d"],n=e["@@sparseRadius"]||e["@@radius"],r=e["@@group"],i=e["@@groupSpeed"];null===this.bounds?this.bounds=this.initInternal(t,n,r,i):null!==this.packingResult&&this.packingResult.unpacked.length>0&&$u.scale(this.bounds,1.05,1.05);this.packingResult=this.solver.solve(this.groupState,this.bounds);this.offsetGroups(t,r)}};e.prototype.initInternal=function(e,t,n,r){var i=this.opts,o=i.padding,a=i.aspectRatio,u=i.groupOrder,s=bu(void 0!==u?pu(u):n.iterateGroups(),(function(i){var o=vs(cu(n.iterateGroup(i),(function(n){var r=e.get(n);return{x:r.x,y:r.y,r:t.get(n)}})));o.filter=r&&r.get(i)<Ua;o.cxcy=$u.center(o);o.id=i;return o}),this.groupState),f=Lf(s,o),l=s.length>3;s.forEach((function(e){return $u.resize(e,Gf($u.width(e),f,l,o),Gf($u.height(e),f,l,o))}));this.solver=new Es(.01*o.min);return Is(s,a)};e.prototype.offsetGroups=function(e,t){for(var n=this.groupState,r=0;r<n.length;r++){var i=n[r];if(!i.filter){for(var o=$u.center(i),a=o.x-i.cxcy.x,u=o.y-i.cxcy.y,s=t.iterateGroup(i.id),f=s.next();!f.done;f=s.next()){var l=e.get(f.value);l.x+=a;l.y+=u}i.cxcy=o}}};return e}();function Zf(e){return new Of(e)}var Yf={create:Zf},Ff=function(){function e(e){this.opts=e;this.pinPoint=null}e.prototype.initialize=function(e){if(this.opts.pinTo){var t=this.opts.pinTo.vertex,n=e["@@pos2d"];if(nu.isWithin(n.keySpace(),t)){var r=n.get(t),i=r.x,o=r.y;this.pinPoint={x:i,y:o}}}};e.prototype.run=function(e){if(null!==this.pinPoint)for(var t=e["@@pos2d"],n=t.get(this.opts.pinTo.vertex),r=this.pinPoint.x-n.x,i=this.pinPoint.y-n.y,o=0,a=t.keySpace().size;o<a;o++){var u=t.get(o);u.x+=r;u.y+=i}};return e}();function zf(e){void 0===e&&(e={});return new Ff(e)}var Pf={isComplete:function(){return!0},initialize:function(){},run:function(){}},Df=function(){function e(e){this.layout=e;this.iterations=0}e.prototype.isComplete=function(){return this.iterations>0};e.prototype.initialize=function(e){void 0!==this.layout.initialize&&this.layout.initialize(e)};e.prototype.run=function(e){this.iterations++;return this.layout.run(e)};return e}(),Vf=function(){function e(e){this.layouts=e;this.outputs=[];this.index=0}e.prototype.isComplete=function(){return this.index>=this.layouts.length};e.prototype.initialize=function(e){var t=this;this.layouts.forEach((function(n){var r=n[0];t.outputs.push(null);void 0!==r.initialize&&r.initialize(e)}))};e.prototype.run=function(e){for(;!this.isComplete();){var t=this.layouts[this.index][0];if(!t.isComplete()){this.outputs[this.index]=t.run(e);break}this.index++}return this.outputs};e.prototype.getPhase=function(e){return this.layouts.reduce((function(t,n){var r=n[0];n[1]===e&&t.push(r);return t}),[])};return e}(),Wf=["rectangle","circle","adaptive","none"],Xf={packing:"rectangle",packingOptions:{}},Uf={adaptive:!0,initialize:!1,initialSpeed:.25};function Nf(e){switch(au(Wf,e.packing,Xf.packing)){case"circle":return Cf(e.packingOptions);case"adaptive":return Cf(iu(e.packingOptions,Uf));case"rectangle":return Zf(e.packingOptions);case"none":return Pf}}function jf(e){void 0===e&&(e={});iu(e,Xf,!0);return new Vf([[Nf(e),0],[new Df(zf(e)),1]])}var Kf,Hf={create:jf};!function(e){e.position2d="@@pos2d";e.group="@@group";e.radius="@@radius";e.sparseRadius="@@sparseRadius";e.degree="@@degree";e.avgNeighbourDegree="@@avgDegree";e.speed="@@speed";e.groupSpeed="@@groupSpeed";e.groupCenter="@@groupCenter"}(Kf||(Kf={}));!function(e){function t(t){switch(t){case e.position2d:case e.radius:case e.sparseRadius:case e.degree:case e.avgNeighbourDegree:case e.group:case e.speed:return{itemType:"v"}}return null}e.describe=t}(Kf||(Kf={}));var _f={iterations:{min:void 0,max:150},speed:void 0,liveUpdate:!0,scale:{base:.045,attenuation:0},maxRepulsionBias:25e-5,momentum:{beta1:.9,beta2:.94},clustering:{maxLength:300,epsilon:void 0,reweightSpeed:.05,maxSeparation:void 0},seed:void 0},Jf=function(){function e(e,t){void 0===t&&(t={});this.graph=e;this.numIterations=0;this.activeGroups=-1;this.groups=[];this.opts=iu(t,_f,!0)}e.prototype.isComplete=function(){return 0===this.activeGroups};e.prototype.run=function(e){var t;if(0===this.numIterations){var n=this.graph.countVertices(),r=e[Kf.degree]||Os(this.graph);this.initInternal(e[Kf.group]||js(this.graph),((t={})[Kf.position2d]=e[Kf.position2d],t[Kf.radius]=e[Kf.radius],t[Kf.sparseRadius]=e[Kf.sparseRadius]||e[Kf.radius],t[Kf.degree]=r,t[Kf.avgNeighbourDegree]=Zs(this.graph,r),t[Kf.speed]=e[Kf.speed]||Bs.fromSize(n,1),t))}this.numIterations++;for(var i=this.groups,o=0;o<this.activeGroups;o++){var a=i[o],u=a.run()>=1;u&&Lu(i,o--,--this.activeGroups);if(!u&&!this.opts.liveUpdate)break;a.extractPositions(e[Kf.position2d])}};e.prototype.initInternal=function(e,t){var n=this,r=new tf(this.graph);this.groups=vu(r.induceAll(e),(function(e,r){var i=r[0],o=r[1],a=o.vs.length;if(a<=1)return e;var u=new Js("u",!1,!0);u.build(i,a);e.push(new Qf(n.opts,u,o,t));return e}),[]);this.activeGroups=this.groups.length};e.prototype.iterateEdgeState=function(){return hu(pu(this.groups),(function(e){return e.iterateEdgeState()}))};e.prototype.iterateVertexState=function(){return hu(pu(this.groups),(function(e){return e.iterateVertexState()}))};return e}(),Qf=function(){function e(e,t,n,r){this.opts=e;this.subg=t;this.map=n;this.overlappingPairs=null;this.nbodyModel=new us("f32",14,16);this.vState=gl(t.countVertices());this.eState=pl(t.countEdges());this.clustering=xf(0);this.initialize(n,t,r)}e.prototype.initialize=function(e,t,n){for(var r=e.vs,i=e.es,o=n[Kf.radius],a=n[Kf.sparseRadius],u=n[Kf.degree],s=n[Kf.avgNeighbourDegree],f=n[Kf.speed],l=n[Kf.position2d],c=r.length,d=i.length,h=this,v=h.eState,g=h.vState,p=h.opts,m=2*d/c,y=0,b=0,x=0,w=0;w<c;w++){var A=r[w],M=u.get(A),I=s.get(A),E=o.get(A),k=ul(E,a.get(A),M,I),C=al(E,M,I,m);x+=Math.pow(M-m,2);b+=Math.log(k);y+=C;var S=l.get(A);g.position.xs.set(w,S.x);g.position.ys.set(w,S.y);g.radius.set(w,E);g.mass.set(w,C);g.speed.set(w,f.get(A))}b=Math.exp(b/c);y/=c;x/=c;var T=d>0?sl(p.scale)*nl(c,x,m,b):1;Ju(g.mass,y*Math.sqrt(1/T));this.avgRadius=b;for(var R=p.clustering,L=R.maxLength,B=R.reweightSpeed,G=0;G<d;G++){var O=t.source(G),Z=t.target(G),Y=rl(g.radius.get(O),g.radius.get(Z),L),F=Y[0],z=Y[1];v.targetLength.set(G,F);v.maxTargetLength.set(G,z);var P=u.get(r[O]),D=u.get(r[Z]),V=1===Math.min(P,D)&&Math.max(P,D)>2;v.reweightSpeed.set(G,V?0:B)}var W=Ys(t).diameter,X=void 0===p.speed?il(d,W,p.scale.attenuation):p.speed,U=void 0===p.iterations.min?Math.min(p.iterations.max,ol(c,W)):p.iterations.max;this.schedule=new qf(p.momentum,U,p.maxRepulsionBias,X)};e.prototype.run=function(){if(this.schedule.progress>=1)return 1;var e=this.schedule.update();this.setupIteration();this.applyRepulsion();this.applyAttraction();this.applyOverlapRemoval();this.applyDisplacement();return e};e.prototype.setupIteration=function(){for(var e=this.vState,t=e.position,n=e.displacement,r=e.nesterov,i=e.radius,o=t.xs,a=t.ys,u=r.nxs,s=r.nys,f=0,l=o.size;f<l;f++){o.set(f,o.get(f)+u.get(f));a.set(f,a.get(f)+s.get(f))}Hu(n.dxs,0);Hu(n.dys,0);var c=this.schedule.periodicals(),d=c.edgeLengths,h=c.overlapGraph;if((d||h)&&null===this.clustering.build(o,a)){d&&this.calculateEdgeLengths();h&&(this.overlappingPairs=this.clustering.evaluate(.5,i,!1))}};e.prototype.applyAttraction=function(){for(var e=this.vState,t=e.displacement,n=e.position,r=e.nesterov,i=this.eState,o=i.mass,a=i.targetLength,u=i.maxTargetLength,s=i.massIntegral,f=i.reweightSpeed,l=this.subg.rawPairs(),c=t.dxs,d=t.dys,h=r.nxs,v=r.nys,g=n.xs,p=n.ys,m=o.size,y=0,b=0;y<m;y++){var x=l[b++],w=l[b++],A=g.get(w)-g.get(x),M=p.get(w)-p.get(x),I=o.get(y),E=Ha(A,M);if(E>u.get(y)||I>1){var k=vl(Ha(g.get(w)+h.get(w)-(g.get(x)+h.get(x)),p.get(w)+v.get(w)-(p.get(x)+v.get(x))),E,u.get(y),s.get(y),I,f.get(y));o.set(y,k.m);s.set(y,k.int);I=k.m}var C=cl(E,I,a.get(y));A*=C;M*=C;c.values[c.index(w)]-=A;d.values[d.index(w)]-=M;c.values[c.index(x)]+=A;d.values[d.index(x)]+=M}};e.prototype.applyRepulsion=function(){var e=this,t=e.schedule,n=e.vState,r=n.position,i=n.displacement,o=n.mass;this.nbodyModel.build(r.xs,r.ys,void 0,o);var a=fl(t.repulsion());this.nbodyModel.runOnPoints(a,i.dxs,i.dys,t.theta())};e.prototype.applyOverlapRemoval=function(){if(null!==this.overlappingPairs)for(var e=this.vState,t=e.displacement,n=e.position,r=e.radius,i=[0,0,0],o=t.dxs,a=t.dys,u=n.xs,s=n.ys,f=this.overlappingPairs.iterateAdjacentPairs(!1,i);!f.next().done;){var l=i[0],c=i[1],d=u.get(c)-u.get(l),h=s.get(c)-s.get(l),v=Ha(d,h),g=r.get(l),p=r.get(c),m=g+p+.1*Math.min(g,p);if(v<m){var y=dl(v,.25,m);d*=y;h*=y;o.values[o.index(c)]-=d;a.values[a.index(c)]-=h;o.values[o.index(l)]+=d;a.values[a.index(l)]+=h}}};e.prototype.applyDisplacement=function(){for(var e=this,t=e.schedule,n=e.vState,r=n.moment,i=r.mxs,o=r.mys,a=n.moment2,u=a.m2xs,s=a.m2ys,f=n.displacement,l=f.dxs,c=f.dys,d=n.position,h=d.xs,v=d.ys,g=n.nesterov,p=g.nxs,m=g.nys,y=t.speed()*this.avgRadius,b=t.momentum(),x=b.beta1,w=b.beta2,A=0,M=h.size;A<M;A++){var I=l.get(A),E=c.get(A),k=$a(i.get(A),I,x),C=$a(o.get(A),E,x);i.set(A,k);o.set(A,C);var S=$a(u.get(A),I*I,w),T=$a(s.get(A),E*E,w);u.set(A,S);s.set(A,T);var R=y*n.speed.get(A);I=R*(k/(Math.sqrt(S)+1e-4));E=R*(C/(Math.sqrt(T)+1e-4));h.set(A,h.get(A)-p.get(A)+I);v.set(A,v.get(A)-m.get(A)+E);p.set(A,I*x);m.set(A,E*x)}};e.prototype.calculateEdgeLengths=function(){var e=this,t=e.vState,n=t.position,r=t.radius,i=e.eState,o=i.targetLength,a=i.maxTargetLength,u=e.subg,s=e.clustering,f=e.opts.clustering,l=n.xs,c=n.ys,d=f.epsilon||Math.max(5,Math.sqrt(l.size)),h=1;s.evaluate(d,r,!0,2);var v=s.describeAll(l,c,r),g=this.clusters=s.clusters;if(!(g.countGroups()<=1)){for(var p=l.size,m=Wu(r.shape,"f32"),y=s.clusters,b=y.iterateGroups(),x=b.next();!x.done;x=b.next()){var w=hl(p,v.get(x.value));du(y.iterateGroup(x.value),(function(e){m.set(e,w+r.get(e))}))}s.evaluate(h,m,!1);v=s.describeAll(l,c,r);var A=s.clusters;if(!(A.countGroups()<=1))for(var M=u.rawPairs(),I=0,E=0;E<M.length;I++){var k=M[E++],C=M[E++],S=A.get(k),T=A.get(C);if(g.get(k)!==g.get(C)&&S!==T){var R=$a(tl(l,c,r,k,v.get(S),C,v.get(T)),_a(l.get(k),c.get(k),l.get(C),c.get(C)),.75);a.set(I,Math.max(o.get(I),R))}}}};e.prototype.iterateEdgeState=function(){var e=this,t=e.map.es,n=e.eState.mass,r=_u(n),i=r[0],o=r[1];return cu(this.subg.iterateEdges(),(function(e){return uu([t[e],{mass:eu(i,o,n.get(e))}])}))};e.prototype.iterateVertexState=function(){var e=this.map.vs,t=this.clusters||{get:function(){return e[0]}};return cu(this.subg.iterateVertices(),(function(n){return uu([e[n],{cluster:e[t.get(n)]}])}))};e.prototype.extractPositions=function(e){for(var t=this.map.vs,n=this.subg.countVertices(),r=this.vState.position,i=r.xs,o=r.ys,a=0;a<n;a++){var u=e.get(t[a]);u.x=i.get(a);u.y=o.get(a)}};return e}(),qf=function(){function e(e,t,n,r){this.moments=e;this.maxIterations=t;this.maxRepulsionBias=n;this.targetSpeed=r;this.progress=0;this.iteration=-1}e.prototype.theta=function(){return el(5,1.1,0,.9,this.progress,8)};e.prototype.speed=function(){var e=this,t=e.progress,n=e.targetSpeed;return el(n,.4*n,.75,1,t)};e.prototype.repulsion=function(){return el(0,this.maxRepulsionBias,.5,.9,this.progress,10)};e.prototype.momentum=function(){var e=this,t=e.moments,n=e.iteration;return{beta1:$f(t.beta1,n),beta2:$f(t.beta2,n)}};e.prototype.periodicals=function(){var e=this,t=e.iteration;return{edgeLengths:t>0&&t%25==0,overlapGraph:e.progress>=.9&&t%10==0}};e.prototype.update=function(){this.iteration++;return this.progress=qa((this.iteration+1)/this.maxIterations,0,1)};return e}();function $f(e,t){return e-Math.pow(e,1+t)}function el(e,t,n,r,i,o){void 0===o&&(o=12);return tu(e,t,.5*(r-n),o/(r-n),1,i-n)}function tl(e,t,n,r,i,o,a){var u=i.radius-_a(i.center.x,i.center.y,e.get(r),t.get(r)),s=a.radius-_a(a.center.x,a.center.y,e.get(o),t.get(o));return n.get(r)+Math.max(0,u)+n.get(o)+Math.max(0,s)}function nl(e,t,n,r){return Math.sqrt(Math.max(1,t))*Math.pow(n,1+n/e)*Math.pow(r,2)}function rl(e,t,n){var r=Math.min(e,t),i=e+t+1.5*r;return[i,i+r*n]}function il(e,t,n){var r=1,i=.02*(e=Math.sqrt(e))+.8*(t=Math.sqrt(t))+.024*e*t;return Math.max(r,i)*(2/(n+2))}function ol(e,t){var n=5,r=Math.log(e),i=Math.log(t/e),o=44.34*r+26.05*i+1.16*r*i;return Math.max(n,o)}function al(e,t,n,r){var i=Math.min(t,n)>r||Math.max(t,n)<r?Math.sqrt(t/Math.max(1,r)):1;return e*Math.max(.5,i)}function ul(e,t,n,r){var i=.9/Math.max(1,Math.pow(Math.min(n,r),.25));return Math.min(2.5*e,$a(e,t,i))}function sl(e){var t=e.base,n=e.attenuation;return t*Math.pow(20,-1*n)}function fl(e){return function(t,n,r,i,o,a,u){return ll(e,t,n,r,i,o,a,u)}}function ll(e,t,n,r,i,o,a,u){var s=i-t,f=o-n,l=s*s+f*f,c=l*e,d=r*a/(Na+l+c*c);u.x-=s*d;u.y-=f*d}function cl(e,t,n){var r=(e-n)/(Na+e);r>0&&(r*=r*r*t);return r}function dl(e,t,n){return t*((e-n)/(Na+e))}function hl(e,t){var n=(t.size-1)/e;return(.25+(1-n)/(.06+Math.sqrt(2.5*n))*.15)*t.radius}function vl(e,t,n,r,i,o){var a=o*(e-n);r+=2*((a-(t-e))/t);i+=Math.max(0,.005*a)+r;return{m:Math.max(1,i),int:.5*r}}function gl(e){var t=Nu(Wu([2,e],"f64")),n=t[0],r=t[1],i=Nu(Wu([11,e],"f32")),o=i[0],a=i[1],u=i[2],s=i[3],f=i[4],l=i[5],c=i[6],d=i[7],h=i[8],v=i[9],g=i[10];Hu(f,1);Hu(l,1);Hu(c,1);return{position:{xs:n,ys:r},displacement:{dxs:o,dys:a},nesterov:{nxs:u,nys:s},moment:{mxs:d,mys:h},moment2:{m2xs:v,m2ys:g},mass:f,radius:c,speed:l}}function pl(e){var t=Nu(Wu([4,e],"f32",1));return{targetLength:t[0],maxTargetLength:t[1],mass:t[2],reweightSpeed:t[3],massIntegral:Wu([e],"f64")}}function ml(e,t){return new Jf(e,t)}var yl={defaultOpts:_f,biasedRepulsionKernel:ll,attractionKernel:cl,overlapKernel:dl,clusterSeparationKernel:hl,edgeReweightingKernel:vl,create:ml},bl=["random","none"],xl={initialization:"random",initializationOptions:{}},wl=function(e){ru(t,e);function t(){return null!==e&&e.apply(this,arguments)||this}t.prototype.fd=function(){return this.getPhase(1)[0]};return t}(Vf);function Al(e,t){void 0===t&&(t={});iu(t,xl,!0);var n=[],r=t.initializationOptions;if("random"===au(bl,t.initialization,xl.initialization)){r.seed=t.seed;n.push([new Df(Mf(e,r)),0])}n.push([ml(e,t),1]);n.push([jf(t),2]);return new wl(n)}var Ml,Il={Impl:wl,create:Al},El=function(){function e(e,t,n){void 0===t&&(t=0);void 0===n&&(n=0);this.layout=e;this.interval=t;this.batchBudget=n;this.timePerIteration=-1}e.prototype.initialize=function(e){this.input=e;void 0!==this.layout.initialize&&this.layout.initialize(e)};e.prototype.start=function(e){this.onComplete=su(e);this.nextStep()};e.prototype.nextStep=function(){var e=this;try{var t=this.work(this.batchBudget);this.layout.isComplete()?this.onComplete(void 0,t):setTimeout((function(){return e.nextStep()}),this.interval)}catch(e){this.onComplete(e)}};e.prototype.work=function(e){var t,n=this,r=n.layout,i=n.input,o=Date.now(),a=e+o;do{for(var u=this.timePerIteration>0?Math.max(1,Math.ceil(e/this.timePerIteration)):1,s=0;s<u&&!r.isComplete();s++)t=r.run(i);var f=Date.now()-o;o+=f;this.timePerIteration=Math.max(f,.01)/u}while(o<a&&!r.isComplete());return t};return e}();!function(e){e.forceDirected="forcedirected";e.random="random";e.organic="organic";e.diskpacking="diskpacking";e.rectpacking="rectpacking";e.pack="pack"}(Ml||(Ml={}));function kl(e,t,n){switch(e){case Ml.organic:return Al(t,n);case Ml.forceDirected:return ml(t,n);case Ml.random:return new Df(Mf(t,n));case Ml.diskpacking:return Cf(n);case Ml.rectpacking:return Zf(n);case Ml.pack:return jf(n);default:throw new Error("unknown layout")}}var Cl={diskpacking:Sf,rectpacking:Yf,pack:Hf,get Names(){return Ml},createLayout:kl,get KnownProperties(){return Kf},forceDirected:yl,organic:Il,SetTimeoutRunner:El,noopLayout:Pf,SyncToAsyncLayout:Df,PhasedLayout:Vf};function Sl(e,t){for(var n=[],r=t.parts.iterateGroups(),i=r.next();!1===i.done;i=r.next())for(var o=-1,a=t.parts.iterateGroup(i.value),u=a.next();!1===u.done;u=a.next()){var s=t.labels.get(u.value),f=e.labels.getUniqueInverse(s);if(void 0!==f){var l=e.parts.get(f);if(o<0)o=l;else if(o!==l){bu(t.parts.iterateGroup(i.value),(function(e){return t.labels.get(e)}),n);break}}}return n}var Tl={adaptiveExpand:{findAdaptiveGroups:Sl}},Rl=function(){function e(e,t,n,r,i){this.nodeList=e;this.edgeList=t;this.staticGraph=n;this.vertexMap=r;this.edgeMap=i}return e}();function Ll(e){return Cu.fromArray(e,(function(e){return"string"==typeof e?e:e.id}))}function Bl(e){return Cu.fromArray(e,(function(e,t){return[e.id1,e.id2,void 0!==e.id?e.id:t.toString()]}))}function Gl(e,t){var n=new nf.StaticAdjacencyGraph("u",!1,!0),r=nf.buildFromLabeledIterators(Ll(e),Bl(t),n);return new Rl(e,t,n,r.vertexMap,r.edgeMap)}function Ol(e,t){var n=e.edges;if(t){var r=[];Object.keys(e.selfAdjacency).forEach((function(t){var n=e.selfAdjacency[t];r.push({id:n[0],id1:t,id2:t,ids:n})}));r.length>0&&(n=n.concat(r))}return Gl(Object.keys(e.vertices),n)}function Zl(e,t,n){var r=e.vertexMap,i=e.staticGraph.countVertices(),o=Cu.flatMap(Cu.fromArray(t),(function(e,t){var i=n(e,t);if(i.length<1)return Cu.empty();var o=r.getUniqueInverse(i[0]);return Cu.fromArray(i,(function(e){return[o,r.getUniqueInverse(e)]}))}));return nf.connectedComponentsFrom(o,i)}var Yl=oe,Fl=Pa,zl=Da,Dl=3,Vl="_dummy",Wl=RegExp("^"+Vl);function Xl(e){return Wl.test(e.id)}function Ul(e){var t=b(e)?e:5;t=Math.max(0,t);return t=Math.min(10,t)}function Nl(e){return 10*(5-Ul(e))}function jl(e,t){var r=D(t)?{}:t,i=20,o=1/0,a=1/0,u=-1/0,s=-1/0;n(e,(function(e,t){if(!(t in r)){a=Math.min(a,e.x-e.size);o=Math.min(o,e.y-e.size);u=Math.max(u,e.x+e.size);s=Math.max(s,e.y+e.size)}}));return{x:a-=i,y:o-=i,width:(u+=i)-a,height:(s+=i)-o}}function Kl(e,t,r){var i=r||30;n(e,(function(e){if(!e.fixed){e.x+=i*(t.next()-.5);e.y+=i*(t.next()-.5)}}))}function Hl(e){var t=0,r=0,i=0,o=1/0,a=1/0,u=-1/0,s=-1/0;n(e,(function(e){t+=1;r+=e.x;i+=e.y;a=Math.min(a,e.x);o=Math.min(o,e.y);u=Math.max(u,e.x);s=Math.max(s,e.y)}));r/=t;i/=t;var f=0,l=!1;n(e,(function(e){var t=e.x-r,n=e.y-i,o=Math.sqrt(t*t+n*n);f=Math.max(o+1.5*e.size,f);l=l||e.fixed}));return{x:r,y:i,sum:t,size:f,fixed:l,miny:o,minx:a,maxy:s,maxx:u}}function _l(e){return"number"==typeof e.w&&!m(e.w)&&"number"==typeof e.h&&!m(e.h)}function Jl(e){return!(e.u||e.fi||e.c||e.b||e.w&&e.h)}function Ql(e){var t=1/0,r=1/0,i=-1/0,o=-1/0,a=0;n(e,(function(e){var n=e.size||0;t=Math.min(t,e.x-n);r=Math.min(r,e.y-n);i=Math.max(i,e.x+n);o=Math.max(o,e.y+n);a++}));return{x1:t,y1:r,x2:i,y2:o,c:a}}function ql(e,t){var n=Cu,r=Gl(K(e),t),i=nf.connectedComponents(r.staticGraph),o={},a=r.vertexMap;n.forEach(i.iterateGroups(),(function(t,r){var u={};n.forEach(i.iterateGroup(t),(function(t){var n=a.get(t),i=e[n];u[n]=i;i.c=r}));o[t]={verts:u,edges:[],extents:Ql(u),c:r}}));for(var u=0;u<t.length;u++){var s=t[u],f=o[i.get(a.getUniqueInverse(s.id1))];f.edges.push(s);s.c=f.c}return K(o)}function $l(e){var t=0;e.b&&(t=b(e.bw)?e.bw:Fl);!e.donut||e._combo&&e._combo.open||(t=e.donut.w+2*e.donut.bw);return t}function ec(e,t){if(e.t){var n=""+e.t;if(void 0!==t&&n.length>t){n=n.substring(0,Math.max(0,t-3));n+="..."}return n.split(/\r\n|\r|\n/)}return[""]}function tc(e,t,n,r,i){for(var o=[],a=0;a<e.length;a++)o[a]=Hn(t,e[a],n,r,i||"sans-serif").width;return o}function nc(e){for(var t=0,n=0;n<e.length;n++)t=Math.max(t,e[n]);return t}function rc(e,t,n,r){var i=0,o=0;if(e.t){var a=(e.fs||hn)*n,u=Dl*n,s=ec(e,r);i=nc(tc(s,t,a,!!e.fb,e.ff));o=(a+u)*s.length}return{width:i,height:o}}function ic(e,t){return!t&&("boolean"==typeof e.tc?e.tc:!e.w&&(!e.u&&!e.fi))}function oc(e,t,n,r){var i=0,o=(Dl+(e.fs||hn))*n.e,a=rc(e,t,n.e,r.maxLength),u=a.width,s=u+(r.padExtents?o:0),f=Jl(e),l=f?Math.max(u/10,zl):u,c=a.height,d=ic(e,n.isOpenCombo),h=f?2*zl:n.height,v=Yl(l/2,h/2+c/2);if(r.partial){var g=Math.max(1,u/(4*n.radius))*o,p=Math.min(n.radius+g,u/2);if(d){u/2<=n.radius+o&&(p=u/2);i=Yl(p,c/2)}else i=Math.max(p,(n.height+c)/2)}else i=Yl(u/2,d?c/2:n.height/2+c);return{width:s,height:c,centred:d,distanceToCorner:i,legacyDistToCorner:v}}function ac(e,t,n,r){var i,o,a=0,u=0,s=0,f=0,l=e.e||1,c=_l(e),d=c&&"circle"===e.sh,h=Jl(e),v=!1;if(e.du)return{radius:10,baseRadius:10,borderSize:10,width:10,height:10};o=$l(e);e._combo&&(v="boolean"==typeof r?r:e._combo.open);if(v){u=e.oc.w/2;f=s=e.oc.w;a=u+(o=e.oc&&"bw"in e.oc?e.oc.bw:ma.bw)}else if(c){l=1;if(d){var g=Math.min(e.w,e.h);f=s=g+2*o;a=(u=g/2)+o}else{u=Yl(e.w,e.h)/2;s=e.w+2*o;f=e.h+2*o;a=Yl(s,f)/2}}else if(!h){f=s=2*(u=zl*l)+2*(o*=l);a="box"===e.sh?Yl(s,f)/2:u+o}if(n.include&&e.t&&e.t.length>0){var p=oc(e,t,{radius:a,height:f,width:s,e:l},n);i=Math.max(p.legacyDistToCorner,a);a=Math.max(p.distanceToCorner,a);s=Math.max(p.width,s);p.centred?f=Math.max(p.height,f):f+=p.height}else{var m=0;if(e.t){m=(ec(e,n.maxLength).length+1)*((e.fs||hn)*l)}i=a+m/2;!v&&h&&(i+=zl*l)}if(h&&e.g&&e.g.length>0){for(var y=0,b=0;b<e.g.length;b++){var x=2*lo(e.g[b]);y+=x;f=Math.max(f,x)}a=e.t?Math.max(s,y):y/2;s+=y}return{legacyRadius:Math.round(i),radius:Math.round(a),baseRadius:Math.round(u),borderSize:Math.round(o),width:Math.round(s),height:Math.round(f)}}function uc(e){return ic(e,e._combo&&e._combo.open)}function sc(e,t){var n=0;if(e.t){var r=e.fs||hn,i=_l(e)?1:e.e||1;if(!uc(e)){n=(r+Dl)*i*ec(e,t).length/2}}return Math.round(n)}function fc(e,t,r,i,o,a){if(!t||!b(t.x)||!b(t.y))return 1/0;var u=Math.max(0,0|i),s=0;function f(e){if(void 0!==e.x){var n=e.x-t.x,i=e.y-t.y;if(_l(e)){i+=void 0!==e.labelOffset?e.labelOffset:sc(e,a);var u=Math.abs(n)+e.w/2,f=Math.abs(i)+e.h/2,l=Yl(u,f);s=Math.max(s,l)}else{var c=void 0,d=0;if(void 0!==e.size)c=e.size;else if(void 0!==e.r){c=e.r;d=e.labelOffset}else{c=ac(e,r,{include:o,maxLength:a}).radius;d=sc(e,a)}var h=Yl(n,i+d);s=Math.max(s,h+c)}}}Array.isArray(e)?e.forEach(f):n(e,f);return Math.round(s+u)}function lc(e,t,n,r,i){void 0===n&&(n=0);var o=[],a={include:r,maxLength:i};e.forEach((function(e){var r=void 0!==e.r?e.r:ac(e,t,a).radius;r+=n;if(!b(e.x)||!b(e.y)||!b(r))throw new Error("Inputs must be finite");o.push({x:e.x,y:e.y,r:r})}));return wf.radialExtents(o)}function cc(e,t,n){var r={include:void 0,maxLength:n};return function(n,i){r.include=i;return void 0!==e[n]?ac(e[n],t,r):null}}function dc(e,t){var r=e.getCache({all:!0,combos:"all"}),i=r.adjacency,o=r.selfAdjacency,a={},u=[];t.forEach((function(e){n(i[e],(function(e){e.forEach((function(e){if(!a[e]){u.push(e);a[e]=!0}}))}));var t=o[e];if(t)for(var r=0;r<t.length;r++)u.push(t[r])}));return u}function hc(e,t,n){var r=e.getCache({all:!0,combos:"all"}),i=r.adjacency,o=r.selfAdjacency,a=[];i[t]&&(a=i[t][n]||[]);t===n&&o[t]&&(a=a.concat(o[t]));return a}function vc(e,t){var r=e.getCache({combos:"all",all:!1}),i=r.adjacency,o=r.selfAdjacency,a={};t.forEach((function(e,t){var r=i[t];r&&n(r,(function(e){for(var t=0;t<e.length;t++){var n=e[t];a[n]=!0}}));var u=o[t];if(u)for(var s=0;s<u.length;s++)a[u[s]]=!0}));n(a,(function(e,n){var r=t.get(n);r&&2===r||t.set(n,1)}))}function gc(e){return!!e.weights}function pc(e){e.all=!!e.all}function mc(e){return/^(component|chart)$/.test(e.normalization)?e.normalization:"unnormalized"}function yc(e){if(!/^(chart|component|unnormalized)$/.test(e.normalization))throw new TypeError("opts normalization property should be either 'component', 'chart' or 'unnormalized'")}function bc(e){e.direction=e.direction||"any";if(!/^(any|from|to)$/.test(e.direction))throw new TypeError("opts direction property should be either 'from', 'to' or 'any'")}function xc(e,t){var n=Cu,r=F(t,{all:!1});pc(r);var i=Ol(e.getCache(r),!0),o=nf.connectedComponents(i.staticGraph),a={},u=i.vertexMap;n.forEach(o.iterateGroups(),(function(e){a[e]={nodes:n.toArray(n.map(o.iterateGroup(e),(function(e){return u.get(e)}))),links:[]}}));for(var s=i.edgeList,f=0;f<s.length;f++)for(var l=s[f],c=a[o.get(u.getUniqueInverse(l.id1))],d=0;d<l.ids.length;d++)c.links.push(l.ids[d]);return K(a)}function wc(e,t,n){return!!(e[t].a2&&e[t].id2===n||e[t].a1&&e[t].id1===n)}function Ac(e,t,n,r,i){return"any"===i.direction||("from"===i.direction&&wc(e,r,n)||"to"===i.direction&&wc(e,r,t))}function Mc(e){return gc(e)?Ic:Ec}function Ic(e,t,n,r,i){var o=Ec(e,t,n,r,i);return m(o)?o:1/o}function Ec(e,t,n,r,i){var o=i.getLinks(),a=NaN;Ac(o,e,t,n,r)&&(r.value?o[n].d&&(a=+o[n].d[r.value]):a=1);return a}function kc(e,t){t.eachLink(e,(function(n){if(Ec(n.id1,n.id2,n.id,e,t)<=0)throw new Error("Link Weight must be Positive")}));return{direction:e.direction,value:e.value,weights:gc(e)}}function Cc(e,t){bc(e);return kc(e,t)}function Sc(e,t,n,r){var i,o=e.getCache(r).adjacency[t][n],a=1/0,u=Mc(r);if(o)for(var s=0;s<o.length;s++){var f=u(t,n,o[s],r,e);if(b(f)){if(f<a){a=f;(i=[]).push(o[s])}f===a&&a!==1/0&&i.push(o[s])}}return{value:a,links:i}}function Tc(e,t,r){function i(e,t){return O[e]-O[t]}function o(e){e.sort(i);return e.shift()}function u(e,t){e.sort(i);j(e,t)||e.push(t)}function s(t,n){var r=Sc(e,t,n,A).value;return b(r)?r:g()||b(r)?1/0:1}function f(e){return e.length>0}function l(){S.length=0;R.length=0;e.eachNode(m,(function(e){for(var t=0;t<Y.length;t++)d(Y[t].dict,e.id,Y[t].value)}))}function c(t,n,r){e.eachNode(t,(function(e){d(n,e.id,r)}))}function d(e,t,n){Array.isArray(n)&&f(n)&&e[t]?e[t].length=0:e[t]=a(n)}function h(){for(var t=xc(e,m),n={},r=0;r<t.length;r++)for(var i=t[r],o=0;o<i.nodes.length;o++)n[i.nodes[o]]=i.nodes.length;return n}function v(){return!D(m.value)}function g(){return!!m.directed}function p(){return!!m.endpoints}var m=F(t,{all:!1,combos:"toplevel",directed:!1,endpoints:!1,normalization:"component",value:void 0,weights:!1});m.combos="toplevel";yc(m);pc(m);var y=v()||g()?"dijkstra":"regular",x=p()?"endpoints":"regular",w=mc(m),A={direction:g()?"from":"any",value:m.value,weights:gc(m),all:m.all};Cc(m,e);var M,I,E,k,C={},S=[],R=[],L={},B={},G={},O={},Z=0,Y=[{dict:B,value:0},{dict:O,value:1/0},{dict:L,value:[]},{dict:G,value:0}];function z(e,t){if(!b(O[t])){O[t]=O[M]+1;S.push(t)}if(O[t]===O[M]+1){B[t]+=B[M];L[t].push(M)}}function P(e,t){if(O[t]>O[M]+s(M,t)){O[t]=O[M]+s(M,t);u(S,t);B[t]=0;L[t]=[]}if(O[t]===O[M]+s(M,t)){B[t]+=B[M];L[t].push(M)}}var V=e.getCache(m).adjacency,W={regular:function(e){B[e]=1;O[e]=0;S.push(e);for(;f(S);){M=S.shift();R.push(M);n(V[M],z)}},dijkstra:function(e){B[e]=1;O[e]=0;S.push(e);for(;f(S);){M=o(S);R.push(M);n(V[M],P)}}},X={regular:function(e){for(;f(R);){I=R.pop();for(var t=(1+G[I])/B[I],n=0;n<L[I].length;n++){M=L[I][n];G[M]+=B[M]*t}I!==e&&(C[I]+=G[I])}},endpoints:function(e){C[e]+=R.length-1;for(;f(R);){I=R.pop();for(var t=(1+G[I])/B[I],n=0;n<L[I].length;n++){M=L[I][n];G[M]+=B[M]*t}I!==e&&(C[I]+=G[I]+1)}}},U={chart:function(){if(Z>2){E=1/((Z-1)*(Z-2));n(C,(function(e,t){C[t]*=E}))}},component:function(){k=h();n(C,(function(e,t){if(k[t]>2){E=1/((k[t]-1)*(k[t]-2));C[t]*=E}}))},unnormalized:function(){if(!g()){E=.5;n(C,(function(e,t){C[t]*=E}))}}};function N(){_();T(r,C)}var K=W[y]||W.regular,H=X[x]||X.regular,_=U[w]||U.chart;e.eachNode(m,(function(){Z++}));c(m,C,0);function J(e,t){l();K(e.id);H(e.id);t()}e.asyncEachNode(m,"betweenness",J,N)}function Rc(e,t,r){var i,o={},a={},u=[],s=e.getCache(r).adjacency;function f(){for(var e=0,t=1/0,n=0;n<u.length;n++){var r=o[u[n]];if(r<=t){e=n;t=r}}return e}function l(e,t,n){a[e]||(a[e]=[]);a[e].push({id:t,links:n})}e.eachNode(r,(function(e){var t=e.id;o[t]=1/0;a[t]=void 0;u.push(t)}));o[t]=0;function c(t,n){var u=Sc(e,i,n,r),s=o[i]+u.value;if(s<o[n]){o[n]=s;a[n]=[{id:i,links:u.links}]}else s===o[n]&&l(n,i,u.links)}for(;u.length>0;){var d=f();i=u[d];if(o[i]===1/0)break;u.splice(d,1);n(s[i],c)}return{distance:o,previous:a}}function Lc(e,t,r){if(!e.getNodes()[t])throw new Error("distances error: id(s) must be present in the graph");var i=F(r||{},{combos:"toplevel",all:!1});Cc(i,e);pc(i);var o=Rc(e,t,i),a={};n(o.distance,(function(e,t){b(e)&&(a[t]=e)}));return a}function Bc(e,t,r){var i=F(t,{all:!1,combos:"toplevel",direction:"any",mode:"auto",normalization:"component",value:void 0,weights:!1});i.combos="toplevel";var o=e.getCache(i).adjacency;function a(e){var t=0;n(e,(function(e){t+=b(e)?1:0}));return t}function u(e){return 0===Object.keys(e).length}function s(e){return!D(e)}function f(t){var n=e.getLinks();return!n[t].a1&&!n[t].a2}function l(e){var t={},r=0,i={},a={};a[e]=!0;function f(e,i){if(!s(t[i])){t[i]=r;n(o[i],(function(e,t){a[t]=!0}))}}for(;!u(a);){i=a;a={};n(i,f);r+=1}return t}function c(){return"any"!==i.direction}function d(){i.mode=i.mode||"auto";if(!i.mode.match(/^(connected|disconnected|auto)$/))throw new TypeError("Option mode property should be either 'connected', 'disconnected' or 'auto'")}function h(){d();return"auto"===i.mode?m():i.mode}function v(){return!D(i.value)}function g(){return!!mc(i).match(/chart/)}function p(){return!!mc(i).match(/component/)}function m(){var t="disconnected",n=xc(e,i);if(1===n.length){t="connected";if(c())for(var r=0;r<n[0].links.length;r++)if(f(n[0].links[r]))return"disconnected"}return t}var y=Cc(i,e);yc(i);pc(i);y.all=i.all;var x=v()||c()?"dijkstra":"regular",w=0,A={},M=h(),I={regular:function(e){return l(e)},dijkstra:function(t,n){return Lc(e,t,n)}},E={connected:function(e,t){var r=0;n(t,(function(e){r+=b(e)?e:0}));return r?1/r:0},disconnected:function(e,t){var r=0;n(t,(function(t,n){r+=e!==n?1/t:0}));return r}};function k(){T(r,A)}var C=I[x]||I.regular,S=E[M];w=0;e.eachNode(i,(function(){w++}));A={};function R(e,t){var n,r=C(e.id,y),i=a(r);A[e.id]=S(e.id,r);if(w>1){n=g()?Math.pow(i-1,2)/(w-1):p()?i-1:1;A[e.id]*=n}t()}e.asyncEachNode(i,"closeness",R,k)}function Gc(e,t){var n=F(t,{all:!1,combos:"toplevel",consistent:!0,factor:5});n.combos="toplevel";pc(n);var r,i=[],o=[],a=[],u=[],s={},f=0,l=[],c=[],d=[],h=[],v=[];e.eachNode(n,(function(e){u.push(e.id);o.push([]);a.push([]);s[e.id]=u.length-1;l.push([u.length-1]);c.push(u.length-1);v.push(u.length-1);i.push(0);d.push(0)}));e.eachLink(n,(function(e){var t=m(e,n);f+=t;var r=s[e.id1],u=s[e.id2];if(!a[r][u]){a[r][u]=0;a[u][r]=0}a[r][u]+=t;a[u][r]+=t;i[r]+=t;i[u]+=t;d[r]+=t;d[u]+=t;o[r].push(u);o[u].push(r)}));var g=Math.max(1e4,50*u.length)
;if(0===u.length)return[];0===f&&(g=0);var p=ce();p.setSeed(n.consistent?900736044081:null);function m(e,t){var n=1;t.value&&e.d&&(n=+e.d[t.value]);return n}function y(e){r=b(r=+e)?r:5;r=Math.max(0,r);r=(r=Math.min(10,r))*r*r/125}y(n.factor);for(var x=0;x<g;x++){if(p.next()>.95){C(v[Math.floor(p.next()*v.length)],v[Math.floor(p.next()*v.length)])}if(x<.5*g&&p.next()>.98){T(v[Math.floor(p.next()*v.length)])}var w=Math.floor(u.length*p.next()),A=o[w][Math.floor(p.next()*o[w].length)],M=c[A],I=c[w];if(M!==I){k(M,I,w)>=0&&S(w,M)}}function E(){for(var e=[],t=0;t<v.length;t++){for(var n=[],r=0;r<l[v[t]].length;r++)n.push(u[l[v[t]][r]]);e.push(n)}return e}function k(e,t,n){var u=d[t],s=d[e],l=i[n],h=(u-s-l)*l*r;h/=2*f;for(var v=0;v<o[n].length;v++){var g=o[n][v];c[g]===t?h-=a[n][g]:c[g]===e&&(h+=a[n][g])}return h/f}function C(e,t){if(t!==e&&0!==l[e].length&&0!==l[t].length){var n=d[e],i=d[t],u=0;u-=r*n*i/f;for(var s=0;s<l[e].length;s++)for(var h=l[e][s],v=0;v<o[h].length;v++)c[o[h][v]]===t&&(u+=a[h][o[h][v]]);if((u/=f)>0){var g=l[e].length;for(s=0;s<g;s++)S(l[e][0],t)}}}function S(e,t){var n=c[e];c[e]=t;for(var r=[],o=0;o<l[n].length;o++)l[n][o]!==e&&r.push(l[n][o]);if(0===l[t].length){v.push(t);h.splice(h.indexOf(t),1)}l[n]=r;l[t].push(e);d[t]+=i[e];d[n]-=i[e];if(0===l[n].length){h.push(n);v.splice(v.indexOf(n),1)}}function T(e){var t=l[e].length;if(1!==t&&h.length){for(var n=[],r=0;r<t;r++)n.push(l[e][r]);for(r=0;r<t&&h.length;r++)S(n[r],h[0])}}return E()}function Oc(e,t){var r=F(t,{all:!1,combos:"toplevel",multi:!0});r.combos="toplevel";Cc(r,e);pc(r);var i=e.getCache(r).adjacency,o={};e.eachNode(r,(function(t){var a=t.id;o[a]=0;n(i[a],(function(t,n){for(var i=0;i<t.length;i++){var u=Ec(a,n,t[i],r,e);if(b(u)){o[a]+=u;if(!r.multi)break}}}))}));return o}function Zc(e,t){var r,i,o=F(t,{all:!1,combos:"toplevel",direction:"any"});o.combos="toplevel";o.direction="any";pc(o);kc(o,e);var a={},u=xc(e,o);function s(e,t){a[t]=e*u[r].nodes.length}for(r=0;r<u.length;r++){var f={};for(i=0;i<u[r].nodes.length;i++)f[u[r].nodes[i]]=!0;n(l(f),s)}return a;function l(t){var n={},r=[],i=[],a=[],u=0,s=[],f=0;e.eachNode(o,(function(e){var o=e.id;if(t[o]){r.push(o);n[o]=r.length-1;i.push([]);a.push({})}}));var l=Math.max(100,5*Math.sqrt(r.length));e.eachLink(o,(function(e){if(t[e.id1]&&t[e.id2]){var r=n[e.id1],s=n[e.id2];if(!a[r][s]){i[r].push(s);i[s].push(r);a[s][r]=0;a[r][s]=0}var l=h(e,o);a[r][s]+=l;a[s][r]+=l;u+=l;f++}}));var c={};if(0===r.length)return c;if(1===r.length){c[r[0]]=1;return c}if(2===r.length){c[r[0]]=.5;c[r[1]]=.5;return c}u/=f;l=Math.max(100,5*Math.sqrt(r.length));for(var d=0;d<r.length;d++)s.push(Math.random());for(d=0;d<l;d++){s=v(s);d%10==0&&g()}g();for(d=0;d<r.length;d++)c[r[d]]=s[d];return c;function h(e,t){return t.value&&e.d?+e.d[t.value]:1}function v(e){for(var t=[],n=0;n<r.length;n++){for(var o=0,s=0;s<i[n].length;s++)o+=a[n][i[n][s]]*e[i[n][s]];o+=u*e[n];t.push(o)}return t}function g(){for(var e=1/p(s),t=0;t<r.length;t++)s[t]*=e}function p(e){for(var t=0,n=0;n<e.length;n++)t+=Math.abs(e[n]);return t}}}function Yc(e,t,r){var i=null;function o(){i=null}function a(e,t,n,r,i){e[n]||(e[n]={});e[r]||(e[r]={});if(!e[n][r]){e[r][n]=[];e[n][r]=e[r][n];t.push(i)}e[n][r].push(i)}function u(e,t,n){var r={id:t.id,id1:t.id1,id2:t.id2,ids:n};e.edges.push(r);e.connections.push(n)}function s(i){var o={connections:[],adjacency:{},vertices:{},edges:[],selfAdjacency:{},selfConnections:[]};t(i,(function(e){o.vertices[e.id]={x:e.x,y:e.y};o.adjacency[e.id]={}}));var s=[],f={};e(i,(function(e){if(e.id1===e.id2){f[e.id1]=f[e.id1]||[];f[e.id1].push(e.id)}else a(o.adjacency,s,e.id1,e.id2,e.id)}));for(var l=s.length,c=r(),d=0;d<l;d++){var h=c[s[d]];u(o,h,o.adjacency[h.id1][h.id2])}if(J(f)){var v=o.connections.slice();n(f,(function(e){v.push(e)}));o.selfConnections=v}else o.selfConnections=o.connections;o.selfAdjacency=f;return o}function f(e){var t=F(e,{all:!1,combos:"toplevel"}),n=(t.all?"all":"visible")+"-"+t.combos;i||(i={});i[n]||(i[n]=s(t));return i[n]}return{getCache:f,clearCache:o}}function Fc(e){var t={},r={},i=e,o=Yc(f,l,c),a=o.clearCache,u=o.getCache;function s(e,t,r){var i=t.all,o="toplevel"!==t.combos,a="underlying"!==t.combos;n(e,(function(e){!i&&e.hi||!o&&e.parentId||!a&&e._combo||r(e)}))}function f(e,t){s(r,e,t)}function l(e,n){s(t,e,n)}function c(){return r}function d(){return t}function h(e,n){t=e;r=n;a()}function g(e,t,n,r){function o(){var t=[];l(e,(function(e){t.push(e)}));return t}var a=o(),u=a.length,s=-1,f=0,c=500,d=Date.now(),h=d,g=700;function p(){if(++s>=u){m(1);r()}else n(a[s],b)}function m(e){i&&i.trigger("progress",t,e)}function y(){d=Date.now();if(f++>c||d-h>g){f=0;h=Date.now();return!0}return!1}function b(){if(y()){m(s/u);v(p,0)}else p()}m(0);b()}function p(e,t,n){var r=u(e);if(t===n)return r.selfAdjacency[t];var i=r.adjacency;return i[t]&&i[t][n]}function m(e){var t=u(e);return e.self?t.selfConnections:t.connections}return{asyncEachNode:g,clearCache:a,connections:m,eachLink:f,eachNode:l,findAdjacency:p,getCache:u,getLinks:c,getNodes:d,privateSetProperties:h}}function zc(e,t,r){var i=e.getNodes(),o=e.getLinks(),a=Z(t),u={},s={},f=Q(a),l=F(r,{all:!1,direction:"any",hops:1});if(l.hops<1)throw new Error("neighbours error: hops must be a positive number");pc(l);var c=0,d={},h={},v=f,g=e.getCache(l),p=g.adjacency,m=g.selfAdjacency;n(f,(function(e,t){var n=U(t);if(!i[n]&&!o[n])throw new Error("neighbours error: ids must be present in the graph");c++}));function y(e,t,n){if(!h[t]&&Ac(o,n,e,t,l)){u[t]=!0;h[t]=!0;if(n!==e){s[e]=!0;e in v&&(s[n]=!0);if(!(e in f)){c++;d[e]=!0}}}}function b(){n(f,(function(e,t){if(i[t]){p[t]&&n(p[t],(function(e,n){for(var r=0;r<e.length;r++){y(n,U(e[r]),t)}}));var r=m[t];if(r)for(var a=0;a<r.length;a++)y(t,r[a],t)}else if(o[t]){var u=o[t];if(!h[u.id2]&&Ac(o,u.id2,u.id1,t,l)){s[u.id2]=!0;h[u.id2]=!0;h[t]=!0;if(!(u.id2 in f)){c++;d[u.id2]=!0}}if(!h[u.id1]&&Ac(o,u.id1,u.id2,t,l)){s[u.id1]=!0;h[u.id1]=!0;h[t]=!0;if(!(u.id1 in f)){c++;d[u.id1]=!0}}}}))}for(;l.hops--&&c;){c=0;b();f=d;d={}}return{nodes:Object.keys(s),links:Object.keys(u)}}function Pc(e,t){var n=F(t,{all:!1,combos:"toplevel",directed:!0});n.combos="toplevel";pc(n);Cc(n,e);var r={},i=[],o=[],a=[],u=[],s=[],f=.85;e.eachNode(n,(function(e){i.push(e.id);r[e.id]=i.length-1;o.push([]);a.push({});u.push(0)}));var l=Math.max(100,5*Math.sqrt(i.length));e.eachLink(n,(function(e){var t=r[e.id1],i=r[e.id2],s=v(e,n);if(!n.directed||e.a2||!e.a1&&!e.a2){if(!a[i][t]){a[i][t]=0;o[i].push(t)}a[i][t]+=s;u[t]+=s}if(!n.directed||e.a1||!e.a1&&!e.a2){if(!a[t][i]){a[t][i]=0;o[t].push(i)}a[t][i]+=s;u[i]+=s}}));for(var c=0;c<i.length;c++)s.push(Math.random());var d=1/p(s);for(c=0;c<i.length;c++)s[c]*=d;for(c=0;c<l;c++)s=g(s);d=1/p(s);for(c=0;c<i.length;c++)s[c]*=d;var h={};for(c=0;c<i.length;c++)h[i[c]]=s[c];return h;function v(e,t){var n=1;t.value&&e.d&&(n=+e.d[t.value]);return n}function g(e){for(var t=[],n=0,r=0,l=0;l<i.length;l++)n+=e[l];for(l=0;l<i.length;l++){for(var c=0,d=0;d<o[l].length;d++){var h=o[l][d];c+=a[l][h]*e[h]/u[h]}0===u[l]&&(r+=f*e[l]);c*=f;c+=(1-f)*n/i.length;t.push(c)}r/=i.length;for(l=0;l<s.length;l++)t[l]+=r;return t}function p(e){for(var t=0,n=0;n<e.length;n++)t+=e[n];return t}}function Dc(e,t,n,r){var i=e.getNodes();if("string"!=typeof t||"string"!=typeof n)throw new Error("shortestPaths error: ids must be strings");if(!i[t]||!i[n])throw new Error("shortestPaths error: ids must be present in the graph");var o=F(r,{combos:"toplevel",all:!1});Cc(o,e);pc(o);var a=Rc(e,t,o),u=a.previous;if(a.distance[n]===1/0)return{onePath:[],one:[],items:[],distance:1/0};for(var s=[],f=[],l=n;u[l];){s.unshift(l);f.unshift(l);f.unshift(u[l][0].links[0]);l=u[l][0].id}s.unshift(l);f.unshift(l);function c(e){for(var t=[],n=0;n<e.length;n++)u[e[n].id]&&(t=t.concat(u[e[n].id]));return t}var d={};d[n]=!0;var h=[];h.push({id:n});for(var v=c(h);v.length>0;){for(var g=0;g<v.length;g++){d[v[g].id]=!0;for(var p=0;p<v[g].links.length;p++)d[v[g].links[p]]=!0}v=c(v)}return{onePath:f,one:s,items:Object.keys(d),distance:a.distance[n]}}function Vc(e,t){var r=F(t,{all:!1,combos:"toplevel"});r.combos="toplevel";pc(r);var i=e.getCache(r).adjacency;function o(){var t={},o={},a=[],u=[],s=0;n(t=Oc(e,{multi:!1,all:r.all,combos:"toplevel"}),(function(e){s=Math.max(s,e)}));for(var f=Object.keys(t).length,l=0;l<s+1;l++)u[l]=0;e.eachNode(r,(function(e){u[t[e.id]]++}));var c=1;for(l=0;l<s+1;l++){var d=u[l];u[l]=c;c+=d}e.eachNode(r,(function(e){var n=e.id;o[n]=u[t[n]];a[o[n]]=n;u[t[n]]++}));for(l=s;l>1;l--)u[l]=u[l-1];u[0]=1;for(var h=function(e){var r=a[e];n(i[r],(function(e,n){if(t[n]>t[r]){var i=t[n],s=o[n],f=u[i],l=a[f];if(n!==l){o[n]=f;a[s]=l;o[l]=s;a[f]=n}u[i]++;t[n]--}}))},v=0;v<f;v++)h(v);return t}function a(e){var t=0;n(e,(function(e){t=Math.max(t,e)}));return t}var u=o();return{maximumK:a(u),values:u}}function Wc(e){var t=Fc(e);return{internalMarkLinks:function(e){return vc(t,e)},privateGetLinkIdsBetween:function(e,n){return hc(t,e,n)},privateNeighbourLinks:function(e){return dc(t,e)},clearCache:t.clearCache,connections:t.connections,findAdjacency:t.findAdjacency,privateSetProperties:t.privateSetProperties,betweenness:function(e,n){return Tc(t,e,n)},closeness:function(e,n){return Bc(t,e,n)},clusters:function(e){return Gc(t,e)},components:function(e){return xc(t,e)},degrees:function(e){return Oc(t,e)},distances:function(e,n){return Lc(t,e,n)},eigenCentrality:function(e){return Zc(t,e)},kCores:function(e){return Vc(t,e)},neighbours:function(e,n){return zc(t,e,n)},pageRank:function(e){return Pc(t,e)},shortestPaths:function(e,n,r){return Dc(t,e,n,r)}}}var Xc=2*Math.PI,Uc=Math.PI/2;function Nc(){var e=-Math.PI/12,t=Math.sin(e),n=Math.cos(e);function r(e,t){if(e.r===t.r){if(e.t){if(!t.t)return-1;if(e.t<t.t)return-1;if(e.t>t.t)return 1}else if(t.t)return 1;return e.id===t.id?0:e.id<t.id?-1:1}return e.r<t.r?1:-1}function i(i,o){var a,u=i;if(!u||0===u.length)return u;var s=F(o,{padding:8,radialPadding:0}),f=s.padding,l=0;u.sort(r);u=u.map((function(e){return{id:e.id,r:e.r+f,x:e.x,y:e.y,labelOffset:e.labelOffset,w:e.w,h:e.h}}));var c=[],d=0,h=u[l++];if(1===u.length)g();else if(2===u.length)m();else if(3===u.length)b();else if(4===u.length)y();else if(u.length>4){var v=u[0].r;u[2].r/v>.5&&u.length>10?b():u[1].r/v>.5&&u.length>10?m():g();a=Math.abs(u[0].y-u[0].r)+s.radialPadding;h=u[l++];for(;h;)w();A();p()}function g(){u[0].x=0;u[0].y=-u[0].labelOffset}function p(){var e=u[0],t=u[0];u.forEach((function(n){n.y<e.y?e=n:n.y>e.y&&(t=n)}));var n=(Math.abs(e.y-e.r)-(Math.sqrt(t.x*t.x+t.y*t.y)+t.r))/4;u.forEach((function(e){e.y+=n}))}function m(){var e=h,t=u[l++];e.x=0;e.y=-t.r-e.labelOffset;t.x=0;t.y=e.r-t.labelOffset}function y(){var e=h,n=u[l++],r=u[l++],i=u[l++];if(n.r===r.r&&r.r===i.r){n=u[2];r=u[1]}var o=e.r+r.r,a=e.r,s=Math.sqrt(o*o-a*a),f=e.r-n.r,c=t*s;e.x=-n.r;e.y=-e.labelOffset-c;n.x=e.r;n.y=-n.labelOffset+c;r.x=f+c;r.y=-s-r.labelOffset;i.x=f-c;i.y=s-i.labelOffset}function b(){var e=h,r=u[l++],i=u[l++],o=(2*e.r+f)/Math.sqrt(3),a=(e.r-r.r)/2,s=1.25*Math.PI;e.x=o*t;e.y=-o*n+a;r.x=o*n;r.y=-o*t-r.labelOffset+a;i.x=o*Math.sin(s);i.y=-o*Math.cos(s)-i.labelOffset+a}function x(e){return 2*e.r+f}function w(){d+=h.r+a+s.radialPadding;a=h.r;var e=Xc*d,t=e-x(h),n={items:[],radius:d,spaceLeft:0,circumference:e};c.push(n);for(;h&&t>0;){n.items.push(h);(h=u[l++])&&(t-=x(h))}h&&(t+=x(h));n.spaceLeft=t;if(h&&u.length-l<5){for(var r=0;h;){r+=x(h);n.items.push(h);h=u[l++]}n.radius=(e-t+r)/Xc;n.circumference=Xc*n.radius;n.spaceLeft=0}}function A(){c.forEach((function(t){var n=Xc/(t.circumference-t.spaceLeft),r=0,i=n*t.items[0].r;4===t.items.length&&(i-=e);t.items.forEach((function(e){var o=n*e.r,a=r+o;e.x=t.radius*Math.cos(a-Uc-i);e.y=t.radius*Math.sin(a-Uc-i)-e.labelOffset;r+=n*x(e)}))}))}return u}return{compareCircles:r,concentricLayout:i}}var jc=function(){};function Kc(e,t,r,i){n(e,(function(e){e.x-=r;e.y-=i}));return{x1:t.x1-r,y1:t.y1-i,x2:t.x2-r,y2:t.y2-i}}function Hc(e,t,n){return Kc(e,n,(n.x1+n.x2)/2-(t.x1+t.x2)/2,(n.y1+n.y2)/2-(t.y1+t.y2)/2)}function _c(e,t,n,r,i,o,a,u){var s=Ql(t);i&&(s=Hc(t,r,s));b(s.x1)||(s=null);var f={vertices:t,updatedEdges:n,extents:s},l=function(){e.trigger("progress","layout",1);a(f,o)};u?l():v(l);return f}function Jc(e,t,n,r){void 0===r&&(r=jc);return function(i,o,a){return _c(e,i,o,n,a,t,r,!0)}}function Qc(e,t,n,r){void 0===r&&(r=jc);return function(i,o,a){return _c(e,i,o,n,a,t,r)}}var qc=Cl.KnownProperties,$c=Cl.Names,ed=Cu.fromArray,td={proportion:.12,min:20,max:200},nd=.5;function rd(e,t,n,r){var i,o=ee(r?r.nodeIds:[]),a=e.vertexMap,u=nf.buildPropertyBagFrom(ed(e.nodeList,(function(e){return[a.getUniqueInverse(e.id),e]})),((i={})[qc.position2d]=function(e){return e},i[qc.sparseRadius]=function(e){return Math.max(n(e.id,!0).radius,nd)},i[qc.radius]=function(e){var t=n(e.id,!1).radius;return Math.max(t<nd?n(e.id,!0).radius:t,nd)},i[qc.speed]=function(e){return void 0!==o[e.id]?0:1},i));u[qc.group]=t;if(r&&r.absolute){var s=id(e,u[qc.position2d],t,r.nodeIds);re(u,s)}return u}function id(e,t,n,r){for(var i,o=e.vertexMap,a=o.keySpace().size,u=new Map,s=[],f=0;f<r.length;f++){var l=o.getUniqueInverse(r[f]),c=n.get(l),d=t.get(l);if(!u.has(c)){s.push(c);u.set(c,[])}u.get(c).push({x:d.x,y:d.y})}var h=function(e){return wf.Rect.center(wf.pointExtents(ed(e)))};return nf.buildPropertyBagFrom(ed(s,(function(e){return[e,u.get(e)]})),((i={})[qc.groupCenter]={map:h,defaultValue:null},i[qc.groupSpeed]={map:function(){return 0},defaultValue:1},i),a)}function od(e,t,n,r){var i=Cl.createLayout(e,t.staticGraph,n.libgOpts),o=new Cl.SetTimeoutRunner(i,0,100);o.initialize(r);return o.start.bind(o)}function ad(e,t,n,r){var i=Cl.createLayout(e,t.staticGraph,n.libgOpts);i.initialize&&i.initialize(r);return function(e){try{for(;!i.isComplete();)i.run(r)}catch(t){e(t);return}e()}}function ud(e,t){var n=Gl(K(e.v),e.e),r=su((function(){return nf.connectedComponents(n.staticGraph)}));function i(t){var r=t.fixed&&Array.isArray(t.fixed)?t.fixed.filter((function(t){return void 0!==e.v[t]})):[],i=!1!==t.pinToFirstFixed&&r.length>0?{vertex:n.vertexMap.getUniqueInverse(r[0])}:void 0;return{nodeIds:r,absolute:!!t.absoluteFixed,pinTo:i}}function o(e,t,r,i,o){var a=(o?ad:od)(e,n,r,t),u=function(e){return a((function(t){return e(t)}))};u.state=n;u.fixConfig=i;return u}function a(e,a){var u=i(e),s=rd(n,r(),t,u),f={attenuation:Ul(e.tightness)/5-1};e.libgOpts=re({seed:e.consistent?7:void 0,packing:e.packing,pinTo:u.pinTo,liveUpdate:!1,packingOptions:{padding:td,aspectRatio:e.ratio},scale:f},e.libgOpts||{});return o(Cl.Names.organic,s,e,u,a)}function u(e,a,u){void 0===a&&(a=r());var s=i(e),f=rd(n,a,t,s);e.libgOpts=re({seed:e.consistent?7:void 0,packing:e.packing,pinTo:s.pinTo,packingOptions:{padding:td,aspectRatio:e.ratio}},e.libgOpts||{});return o(Cl.Names.pack,f,e,s,u)}function s(e,i){var a={absolute:!1,nodeIds:[]},u=rd(n,r(),t);e.libgOpts={reduceOverlapsOnly:!0,initialize:!1,maxIterations:3,padding:{proportion:(10-Ul(e.tightness))/100,min:.5,max:1/0}};return o(Cl.Names.diskpacking,u,e,a,i)}return{state:n,organic:a,reduceOverlaps:s,pack:u}}function sd(e,t,n,r){for(var i,o,a=2*t+24+n,u=Math.floor(Math.sqrt(e.length)),s=Math.ceil(e.length/u),f=0,l=0,c={},d={x:0,y:0},h=0;h<u;h++){for(var v=0;v<s;v++){var g=s*h+v;if(e[g]){c[e[g]]={x:f,y:l};d.x+=f;d.y+=l}f+=a}f=0;l+=a}if("absolute"===r){i=a*(s-1)/2;o=a*(u-1)/2}else{i=d.x/e.length;o=d.y/e.length}for(h=0;h<e.length;h++){c[e[h]].x-=i;c[e[h]].y-=o}return c}function fd(e,t,n){for(var r=0,i={},o=0;o<t.length;o++)r+=e[t[o]].size;if(1===t.length)i[t[0]]={x:0,y:0};else{var a=Math.PI/4;2===t.length&&(a=Math.PI/2);4===t.length&&(a=0);t.length<4&&(r*=1.5);var u=2*Math.PI/t.length,s=n*r/4;for(o=0;o<t.length;o++){i[t[o]]={x:s*Math.cos(a),y:s*Math.sin(a)};a+=u}}return{positions:i,radius:r}}function ld(e,t,n,r,i){if(0===n){r[e[0]]={x:0,y:0};return{radius:t,index:-1}}var o=2*t,a=(n+1)*o,u=o,s=Math.sqrt(a/(Math.PI*u))*u,f=Math.floor(2*Math.PI*s/o);f=Math.min(f,n+1);var l,c=2*Math.PI/f;switch(f){case 2:l=Math.PI/2;s*=.75;break;case 3:l=Math.PI/3;s*=.85;break;case 4:l=0;s*=.85;break;case 5:l=0;s*=.9;break;default:l=0}s*=i/2;for(var d=0;d<f;){r[e[n-d]]={x:s*Math.cos(l),y:s*Math.sin(l)};l+=c;d++}return{radius:s,index:n-f}}function cd(e,t,n){var r,i={},o=0,a=e.length-1;do{var u=ld(e,t,a,i,n);o=Math.max(u.radius,o);a=u.index}while(a>=0);switch(e.length){case 4:r=2;break;case 3:r=2.5;break;case 2:r=3;break;case 1:r=1;break;default:r=2}return{positions:i,radius:o*r}}function dd(e,t){for(var n=[],r=0;r<t.length;r++)e[t[r]]&&n.push(t[r]);return n}function hd(e,t,r,i){n(e,(function(e){if(e.arranged){e.x+=t;e.y+=r}}));i(e,{},!1)}function vd(e,t,n,r,i,o){var a=t.map((function(e){return Object.keys(e.verts).filter((function(e){return void 0===n[e]}))})).filter((function(e){return e.length>0}));a.push(Object.keys(n));var u=ud({v:e,e:[]},r),s=u.state.vertexMap,f=Zl(u.state,a,(function(e){return e})),l={packingOptions:{groupOrder:a.map((function(e){return f.get(s.getUniqueInverse(e[0]))})),padding:{proportion:.12,min:20,max:200}}};u.pack({tightness:5,ratio:i,libgOpts:l},f,!0)((function(){return o(e,{},!1)}))}function gd(e,t,r,i,o,a,u){var s={tidy:function(e,t,n){var r=ql(c,i.e);return vd(c,r,e,a,t.ratio,n)},average:function(e,t,n){return hd(c,t.centre.x,t.centre.y,n)},absolute:function(e,t,n){return hd(c,t.absolute.x,t.absolute.y,n)}},f={grid:function(e,t,n,r,i){return sd(e,n,r,i)},circle:function(e,t,n,r){return fd(t,e,1.25-(5-r)/50).positions},radial:function(e,t,n,r){return cd(e,n,1.25-(5-r)/50).positions}},l=F(o,{tightness:5,position:"average",x:0,y:0});t.trigger("prechange","arrange");var c=i.v,d=Nl(l.tightness),h=s[l.position]||s.average,v=f[e]||f.grid,g={x:+l.x||0,y:+l.y||0},p=Z(r);if((p=dd(c,p)).length){for(var m=0,y={x:0,y:0},b=0;b<p.length;b++){m+=c[p[b]].size;y.x+=c[p[b]].x;y.y+=c[p[b]].y}m/=p.length;y.x/=p.length;y.y/=p.length;var x=v(p,c,m,d,l.position),w={};n(x,(function(e,t){c[t].x=e.x;c[t].y=e.y;w[t]=c[t];w[t].arranged=!0}));var A={centre:y,absolute:g,ratio:l.ratio};h(w,A,Qc(t,l,i.extents,u))}else u()}function pd(e){var t={include:!1};function r(e,t,n){return{id:t,x:e.x,y:e.y,fixed:n,d:e.d,labeloff:sc(e),lc:0,size:1,w:1,h:1}}function i(e,t,n,i){if(!(n in e)){if(!(n in t))throw new Error("link has end which is not in nodes list");var o=t[n];if(o.hi)throw new Error("link has end which is hidden");e[n]=r(o,n,n in i)}}function o(e,t,o,a,u,s){for(var f={},l=[],c=0;c<a.length;c++){var d=a[c],h=d[0],v=o[h],g=v.id1,p=v.id2;i(f,t,g,u);i(f,t,p,u);for(var m=[],y=1,b=0;b<d.length;b++){v=o[h=d[b]];m.push({id:h,sign:v.id1===g?1:-1,off:v.off,a1:v.a1||!1,a2:v.a2||!1});y=Math.max(y,v.w||1)}l.push({id:h,id1:g,id2:p,arrowSize:e.currentArrowLength(y,1),links:m,numLinks:m.length});f[g].lc+=1;f[p].lc+=1}n(t,(function(e,t){f[t]||e.hi||!s&&e.parentId||(f[t]=r(e,t,e.id in u))}));return{v:f,e:l}}function a(e,t,n,r){var i=ac(t,e,n);r.size=i.legacyRadius;r.w=i.width;r.h=i.height}function u(e,t,n,r){var i=ac(t,e,n);r.size=i.radius;r.w=i.width;r.h=i.height}function s(n,r,i,o,s){for(var f=Object.keys($c).indexOf(n)>=0,l=e.privateGetMaxLabelLength(),c="radial"!==n?{include:!0,maxLength:l}:t,d="lens"===n||f?u:a,h=0;h<i.length;h++)d(r,o[i[h]],c,s[i[h]])}return function(e,t,n,r,i,a,u,f){var l={};if(a)for(var c=0;c<a.length;c++)l[a[c]]=!0;var d=o(e,n,r,i().connections({all:!1,combos:f}),l,void 0!==f&&"toplevel"!==f),h=d.v,v=d.e,g=Object.keys(h);s(u,t,g,n,h);return{e:v,extents:Ql(h),v:h,vcount:g.length}}}function md(e){return K(e).some((function(e){return e.fixed}))}function yd(e,t){return e.fixed&&!t.fixed?-1:t.fixed&&!e.fixed?1:0}function bd(e,t){if(t.length<1)return!1;function n(t){var n=e.y<t.y+t.height,r=e.y+e.height>t.y;return n&&r}function r(t){var n=e.x<t.x+t.width,r=e.x+e.width>t.x;return n&&r}for(var i=0;i<t.length;i++){var o=t[i];if(r(o)&&n(o))return!0}return!1}function xd(e,t){function n(e,t,n){return(t-e)*n+e}function r(e,t,r){return n(e,t,Math.pow(r/100,.6))}function i(e){var t=r(1,u,e),i=n(.5,.3,e/600)*e;return{x:Math.cos(i)*t,y:Math.sin(i)*t}}for(var o=0,a=[],u=0,s=0;s<e.length;s++){var f=e[s];u+=f.width}u/=2*e.length;e.sort(yd);for(s=0;s<e.length;s++){(f=e[s]).x=f.fixed?f.x:0;f.y=f.fixed?f.y:0;for(;bd(f,a)&&!f.fixed;){var l=i(o);f.x=l.x;f.y=l.y;o++}a.push(f)}return t(a)}function wd(e,t,r,i){for(var o={},a=[],u={},s=0;s<t.length;s++){var f=jl(t[s].verts);o[s]=f;var l=r.length>0&&md(t[s].verts);a.push({x:f.x,y:f.y,width:f.width,height:f.height,id:s,fixed:l});u[s]={x:f.x,y:f.y}}xd(a,(function(o){for(var a={},s=0;s<o.length;s++)a[o[s].id]=o[s];for(var f=function(e){var r=a[e].x-u[e].x,i=a[e].y-u[e].y;n(t[e].verts,(function(e){e.x+=r;e.y+=i}))},l=0;l<t.length;l++)f(l);i(e,{},0===r.length)}))}function Ad(e,t,r){void 0===r&&(r="size");var i,o,a,u,s=[],f=kd(e);function l(e){if(e[u]){for(var n=e[u].vertices,s=0;s<n.length;s++){var f=n[s],l=t[f][r];o+=l;i=Math.max(i,l)}a+=n.length}}for(u=0;u<f;u++){i=0;o=0;a=0;var c=0;n(e,l);var d=o/a,h=s[u-1];h&&i<h.max+h.yOffset&&(c=(h.max+h.yOffset)/2);s[u]={max:i,average:d,sum:o,yOffset:c}}return s}function Md(e,t,n){var r=[];if(n>0){var i=e[n];i&&i.edges&&i.edges.forEach((function(e){e.id1===t?r.push(e.id2):e.id2===t&&r.push(e.id1)}))}return r}function Id(e,t,n){return Md(e,t,n+1)}function Ed(e){var t={up:function(e){e.y=-e.y;e.x=e.x},down:function(e){},right:function(e){var t=e.y;e.y=e.x;e.x=t},left:function(e){var t=e.y;e.y=e.x;e.x=-t}};return t[e]||t.down}function kd(e){var t=0;n(e,(function(e){t=Math.max(t,e.length)}));return t}function Cd(e){return Xl(e)&&"intra"===e.duType}function Sd(e,t){return Xl({id:e.id})&&(Cd(t[e.id1])||Cd(t[e.id2]))}function Td(e,t,r){var i={};function o(t,n){"level"in e[n]||(e[n].level=1/0);e[n].level=Math.min(e[n].level,t)}for(var a=0;a<r.length;a++){n(t.distances(r[a]),o);(i[e[r[a]].c]=i[e[r[a]].c]||[]).push(r[a])}var u=0;n(e,(function(e){u=Math.max(u,e.level)}));return{topByComponent:i,maxLevelNum:u}}function Rd(e,t,n){var r={},i=0;if(n){for(var o=[],a={},u=0;u<e.length;u++)for(var s=0;s<t[u].length;s++)if(!a[t[u][s]]){o.push(t[u][s]);a[t[u][s]]=!0}o.sort((function(e,t){return e-t}));i=o.length;for(u=0;u<e.length;u++){r[u]={};for(s=0;s<o.length;s++)r[u][o[s]]=s}}else for(u=0;u<e.length;u++){r[u]={};for(s=0;s<t[u].length;s++)r[u][t[u][s]]=s;i=Math.max(i,t[u].length)}return{customLevelMap:r,maxLevelNum:i}}function Ld(e){for(var t={},n=Yd(e),r=Bd(n);r;){var i=Fd(Gd(r),t);zd(e,i);Object.keys(i).forEach((function(e){t[e]=!0}));r=Bd(n=Yd(e))}return Zd(e)}function Bd(e){var t={},r={},i={},o=[],a=1;function u(s){o.push(s);i[s]=!0;t[s]=a;r[s]=a;a++;for(var f=Object.keys(e[s]),l=0;l<f.length;l++){var c=f[l];if(void 0===t[c]){var d=u(c);if(d)return d;r[s]=Math.min(r[s],r[c])}else i[c]&&(r[s]=Math.min(r[s],t[c]))}if(t[s]===r[s]){var h={},v=void 0;do{v=o.pop();i[v]=!1;h[v]=!0}while(o.length>0&&s!==v);if(Object.keys(h).length>1){var g={};Object.keys(h).forEach((function(t){g[t]=g[t]||{};n(e[t],(function(e,n){h[n]&&(g[t][n]=e)}))}));return g}}}for(var s=Object.keys(e),f=0;f<s.length;f++){var l=s[f];if(!t[l]){var c=u(l);if(c)return c}}}function Gd(e){var t,n=[],r=[],i=new Map,o={},a=!1;function u(e){o[e]=!1;i.has(e)&&i.get(e).forEach((function(t){i.get(e).delete(t);o[t]&&u(t)}))}function s(f){var l=!1;o[f]=!0;for(var c=e[f],d=Object.keys(c),h=0;h<d.length;h++){if(a)return!0;var v=d[h];if(v===t){n.push($n(r,[c[v]]));l=!0}else if(!o[v]){r.push(c[v]);l=s(v)}}r.pop();if(l){n.length<100?u(f):a=!0;return!0}d.forEach((function(e){var t=i.get(e);if(!t){t=new Set;i.set(e,t)}t.add(f)}));return!1}for(var f=Object.keys(e),l=0;l<f.length;l++){i.clear();o={};s(t=f[l]);Od(e,t);if(Object.keys(e).length<3)break;if(!Bd(e))break}return n}function Od(e,t){n(e,(function(n,r){r===t&&delete e[r];Object.keys(n).forEach((function(n){n===t&&delete e[r][n]}))}))}function Zd(e){var t={},n={};e.forEach((function(e){(t[e.tail]=t[e.tail]||{})[e.head]=qn({isIncomingEdge:!0,tight:!1},e);(t[e.head]=t[e.head]||{})[e.tail]=qn({isIncomingEdge:!1,tight:!1},e);(n[e.tail]=n[e.tail]||[]).push(e.head);n[e.head]=n[e.head]||[]}));return{directedAdjacencyList:n,incidenceList:t}}function Yd(e){var t={};e.forEach((function(e){(t[e.tail]=t[e.tail]||{})[e.head]=e;t[e.head]=t[e.head]||{}}));return t}function Fd(e,t){var n,r,i,o={},a={};if(1===e.length){return(n={})[(s=Pd(e[0])).id]=!0,n}for(var u=0;u<e.length;u++){var s;if(0===(s=Pd(e[u])).netDirection&&!t[s.id])return(r={})[s.id]=!0,r;a[s.id]=!0}e.forEach((function(e){e.forEach((function(e){o[e.id]=o[e.id]?++o[e.id]:1}))}));var f=Object.keys(o).reduce((function(e,t){return o[e]>o[t]?e:t}));return 1===o[f]?a:((i={})[f]=!0,i)}function zd(e,t){for(var n=Object.keys(t).length,r=0;r<e.length&&n>0;r++){var i=e[r];if(t[i.id]){i.head=i.head===i.id1?i.id2:i.id1;i.tail=i.head===i.id2?i.id1:i.id2;n--}}}function Pd(e){var t=e.filter((function(e){return e.directionInferred}));return(t.length>0?t:e).reduce((function(e,t){return Math.abs(t.netDirection)<Math.abs(e.netDirection)?t:e}))}function Dd(e,t){for(var r={},i={},o=0,a=0;a<e.length;a++){i[a]=Vd(e[a],r);o=Math.max(o,i[a].length)}var u={};n(t,(function(e){e.level=r[e.id]||0;0===e.level&&(u[e.c]=u[e.c]||[]).push(e.id)}));return{topByComponent:u,maxLevelNum:o}}function Vd(e,t){if(0===e.edges.length)return[];var n=eh(e.edges),r=Ld(n),i=r.directedAdjacencyList,o=r.incidenceList;Wd(i,t);Xd(n,o,t);return jd(n,o,t)}function Wd(e,t){var r=i(e),o=0,a=Object.keys(e).length,u={};function s(e){if(0!==a){var r={};n(e,(function(e,t){u[t]||e.forEach((function(e){e&&(r[e]=!0)}))}));_(e).forEach((function(e){if(!r[e]&&!u[e]){t[e]=o;u[e]=!0;a--}}));o++;s(e)}}s(r)}function Xd(e,t,n){var r=Object.keys(t).length,i=Ud(e,t,n),o=i.vertsInTightTree,a=i.nonTreeEdges;function u(){var e=Object.keys(o);if(e.length!==r){var i,s=1/0,f={};a.forEach((function(e){var t,r=Jd(e,n);if(o[e.tail]||o[e.head])if(r<s){s=r;i=!!o[e.head];f=((t={})[e.id]=!0,t)}else r===s&&(f[e.id]=!0)}));if(s>0){var l=i?-s:s;e.forEach((function(e){n[e]+=l}))}a=a.filter((function(e){if(f[e.id]&&(o[e.head]||o[e.tail])){if((i||0===s)&&o[e.head]&&!o[e.tail]){$d(o,e);qd(t,e,!0);return!1}if((!i||0===s)&&!o[e.head]&&o[e.tail]){$d(o,e);qd(t,e,!0);return!1}}if(o[e.tail]&&o[e.head]){Qd(e,n)&&qd(t,e,!0);return!1}return!0}));u()}}u()}function Ud(e,t,n){var r=[],i=Object.keys(t);function o(e){return Qd(e,n)}for(var a=0,u=i[a];0===K(t[u]).filter(o).length;)u=i[++a];var s=Nd(t,u,n);e.forEach((function(e){s[e.id1]&&s[e.id2]||r.push(e)}));return{nonTreeEdges:r,vertsInTightTree:s}}function Nd(e,t,r){var i={},o={};function a(t){i[t]=!0;n(e[t],(function(t,n){if(Qd(t,r))if(i[n]){if(i[n]&&o[n]){qd(e,t,!0);$d(o,t)}}else{qd(e,t,!0);$d(o,t);a(n)}}))}a(t);return o}function jd(e,t,n){var r,i=Hd(t);function o(e){n[e]-=r}for(;i;){r=1/0;for(var a=[],u=0;u<e.length;u++){var s=Jd(e[u],n);if(i.tailSegmentVerts[e[u].head]&&!i.tailSegmentVerts[e[u].tail]&&s>0){a.push(e[u]);r=Math.min(s,r)}}Object.keys(i.tailSegmentVerts).forEach(o);a.forEach((function(e){Qd(e,n)&&qd(t,e,!0)}));qd(t,qn({id1:i.tail,id2:i.head},i),!1);i=Hd(t)}return _d(n,t)}function Kd(e,t,r){var i=!1,o={},a={};function u(s){a[s]=!0;o[s]=!0;n(e[s],(function(e,n){if(e.tight&&!o[n]){if(s!==t&&n===r){i=!0;return}if(n!==r){a[n]=!0;u(n)}}}))}u(t);var s=0;i||n(e,(function(e,t){n(e,(function(e,n){if(e.isIncomingEdge){a[t]&&!a[n]&&s++;!a[t]&&a[n]&&s--}}))}));return{cutValue:s,tailSegmentVerts:a}}function Hd(e){for(var t=Object.keys(e),n=0;n<t.length;n++)for(var r=e[t[n]],i=t[n],o=K(r),a=_(r),u=0;u<o.length;u++)if(o[u].isIncomingEdge&&o[u].tight){var s=a[u],f=Kd(e,i,s),l=f.cutValue,c=f.tailSegmentVerts;if(l<0)return{head:s,tail:i,tailSegmentVerts:c}}}function _d(e,t){var n=[],r=_(t),i=1/0,o=-1/0;r.forEach((function(t){var n=e[t];i=n<i?n:i;o=n>o?n:o}));r.forEach((function(t){e[t]+=-i}));o+=-i;for(var a=0;a<=o;a++)n.push(a);return n}function Jd(e,t){return Math.abs(t[e.id1]-t[e.id2])-1}function Qd(e,t){return 1===Math.abs(t[e.id1]-t[e.id2])}function qd(e,t,n){e[t.id1][t.id2].tight=n;e[t.id2][t.id1].tight=n}function $d(e,t){e[t.id1]=!0;e[t.id2]=!0}function eh(e){return e.map((function(e){var t,n=0,r=0;e.links.forEach((function(e){e.a1&&(n+=e.sign);e.a2&&(n-=e.sign);e.a1||e.a2||(r-=e.sign)}));t=0!==n?n>0?e.id1:e.id2:0!==r?r>0?e.id1:e.id2:e.id1<e.id2?e.id2:e.id1;var i=0===n,o=i?r:n,a=t===e.id2?e.id1:e.id2;return qn(qn({},e),{directionInferred:i,netDirection:o,head:t,tail:a})}))}function th(e,t,r,i,o){for(var a={},u={},s=0;s<i.length;s++)u[s]=nh(t,r,i[s],a);var f=Rd(i,u,o),l={};n(e,(function(e){e.level=f.customLevelMap[e.c][a[e.id]]||0;0===e.level&&(l[e.c]=l[e.c]||[]).push(e.id)}));return{topByComponent:l,maxLevelNum:f.maxLevelNum}}function nh(e,t,r,i){var o={},a=[],u=1/0;function s(t){if(t.d&&b(t.d[e])){var n=t.d[e];if(!o[n]){o[n]=[];a.push(n)}o[n].push(t.id);i[t.id]=n;n<u&&(u=n)}}function f(){for(var e=0;e<a.length;e++){for(var n=a[e],r=[],u=t.neighbours(o[n]),s=((a[e+1]||n+1)+n)/2,f=0;f<u.nodes.length;f++){var l=u.nodes[f];if(D(i[l])){r.push(l);i[l]=s}}if(r.length){a.splice(e+1,0,s);o[s]=r}}}n(r.verts,s);if(u===1/0)return Vd(r,i);a.sort((function(e,t){return e-t}));f();return a}function rh(e,t,n,r,i,o,a,u){var s=n(),f=i,l=i?"sequential":"hierarchy";function c(){return a?th(e,a,s,r,f):o&&o.length>0||!i?Td(e,s,o):Dd(r,e)}var d=c(),h={},v=ah(e,t,r,h,d.maxLevelNum);ih(e,t,l,v,h,u);"hierarchy"===l&&a&&oh(e,s,v,h,d.topByComponent)}function ih(e,t,n,r,i,o){void 0===o&&(o=[]);for(var a=0,u=t.length;a<u;a++){var s=void 0,f=void 0,l=t[a],c=e[U(l.id1)],d=e[U(l.id2)],h=c.level,v=d.level;if(b(h)&&b(v)){l.level=Math.max(h,v);if(h<v){i[d.id]=!0;f=c;s=d}else if(v<h){i[c.id]=!0;f=d;s=c}}var g=Math.abs(h-v);if(g>1)r.insertChain(s,f,l);else if("sequential"===n&&0===g){r.insertInternalLink(c,d,l);o.push(l)}}}function oh(e,t,r,i,o){n(e,(function(n,a){if(!i[a]&&0!==n.level){for(var u=o[n.c],s=void 0,f=1/0,l=0;l<u.length;l++){var c=t.shortestPaths(a,u[l]);if(c.distance<f){s=c;f=c.distance}}for(var d=0;d<s.one.length;d++){var h=s.one[d],v=e[h];if(v&&"level"in v&&v.level<n.level){var g=r.insertEdge(n,v,n.c);n.level-v.level>1&&r.insertChain(n,v,g);break}}}}))}function ah(e,t,n,r,i){var o=0;function a(t,i){var a=t.origId||t.id,u={id:Vl+a+"-"+o++,level:t.level-1,origId:a,x:0,y:0,
c:t.c,size:10,fixed:!1,lc:t.lc,duType:i,w:20,h:20,labeloff:0};e[u.id]=u;n[t.c].verts[u.id]=u;r[u.id]=!0;return u}function u(e,r,i,o){void 0===o&&(o=0);var a={id:Vl+e.id+"-"+r.id,id1:e.id,id2:r.id,c:i,numLinks:o};"level"in e&&"level"in r&&(a.level=Math.max(e.level,r.level));t.push(a);n[i].edges.push(a);return a}function s(e,t,n){var r=n.c,i=n.numLinks,o=a(e,"chain"),f=n.id1===t.id;u(f?o:e,f?e:o,r,i);o.level===t.level+1?u(f?t:o,f?o:t,r,i):s(o,t,n)}return{insertEdge:u,insertChain:s,insertInternalLink:function(e,t,n){var r=n.c,o=n.numLinks;if(e.level>0){var s=a(e,"intra");u(e,s,r,o);u(s,t,r,o)}if(e.level<i-1){var f=a(e,"intra");f.level+=2;u(e,f,r,o);u(f,t,r,o)}}}}function uh(e,t,n,r,i,o,a,u,s,f,l){sh(r,i,u,s,f,l);fh(e,t,i,n,o,a,f)}function sh(e,t,n,r,i,o){var a=2*i+24+o;r||(e.x=n);var u=n-e.subChildrenCount*(a/2),s=e.children;if(s)for(var f=0;f<s.length;f++){var l=t[s[f]],c=l.subChildrenCount;0===c&&(c=1);var d=u+c*a;sh(l,t,(d+u)/2,!1,i,o);u=d}}function fh(e,t,n,r,i,o,a){for(var u=i.miny,s=Math.PI*(2/3),f=0,l=0;l<t[e].length;l++){var c=t[e][l].vertices,d=r[l].yOffset,h=r[l].average,v=2*((a<h?h:a)+12)+d;u+=f;for(var g=0;g<c.length;g++){var p=c[g],m=n[p];m.y=u;if(!o){var y=m.children;if(y&&y.length>1){var b=lh(ch(y.map((function(e){return n[e]}))),s);v=Math.max(v,b)}}}f=v}}function lh(e,t){return e/(2*Math.tan(t/2))}function ch(e){for(var t=1/0,n=-1/0,r=0;r<e.length;r++){var i=e[r].x;t=Math.min(t,i);n=Math.max(n,i)}return n-t}function dh(e,t,r,i,o,a){function u(e,t){return(e.r+t.r)/(e.a-t.a)}function s(e,t,n){var r=t>0?e+n:e+n/2;return r>0?r:e}function f(e,t,n,r){if(r&&1===e.length)return 0;for(var i=t,o=i,a=1;a<e.length;a++)o=Math.max(u(l[e[a]],l[e[a-1]]),o);return s(o,o-i,n)}var l,c=Nl(a);n(t,(function(t,n){for(var a=Hl(r[+n].verts),u=0,s=u,d=4*o,h=d,v=2*o+24,g=0;g<t.length;g++){var p=t[g].vertices,m=void 0;l={};for(var y=0;y<p.length;y++){var b=p[y],x=(m=e[b]).x-a.minx,w=a.maxx-a.minx+v;if((x*=2*Math.PI/w)<0||x>2*Math.PI)throw new Error("[Radial] Theta angle should be in the range [0; 2*PI]");l[b]={a:x,r:m.size}}s=u;0===g?p.length>1&&(u+=d/2):u+=d;if((u=f(p,u,c,g<1))-s>h){h=u-s+1;d=Math.max(d,h/2);0===g&&p.length<3&&(u/=2)}for(y=0;y<p.length;y++){(m=e[p[y]]).x=i[+n].x+u*Math.cos(l[m.id].a);m.y=i[+n].y+u*Math.sin(l[m.id].a)}}}))}function hh(e,t){var r={};function i(e,t,n,i){r[e]=r[e]||[];r[e][t]=r[e][t]||{vertices:[],edges:[]};r[e][t][n]=r[e][t][n]||[];r[e][t][n].push(i)}n(e,(function(e,t){"level"in e&&i(e.c,e.level,"vertices",t)}));for(var o=0;o<t.length;o++)"level"in t[o]&&i(t[o].c,t[o].level,"edges",t[o]);return r}function vh(e){var t=0,r=0;n(e,(function(e){if("level"in e&&!Xl(e)){t+=e.size;r+=1}}));return t/r}function gh(e,t,r){var i=Ed(r);n(t,(function(t){for(var n=0;n<t.length;n++)for(var r=t[n].vertices,o=0;o<r.length;o++)i(e[r[o]])}))}function ph(e,t,r,i,o,a){var u=a.pack(r),s=F(r,{top:[],orientation:"down",stable:!0,flatten:!1}),f=e.v,l=e.e,c=s.level,d=i?1:Nl(s.tightness),h=c?[]:Y(s.top,f),v=!i&&s.flatten,g=ql(f,l);rh(f,l,t,g,!1,h,c);var p=hh(f,l),m=vh(f),y=Ad(p,f);function b(){n(p,(function(e){for(var t=e.length-1;t>=0;t--)for(var n=e[t].vertices,r=[],i=0;i<n.length;i++){var o=n[i],a=Id(e,o,t);f[o].children=[];f[o].subChildrenCount=0;if(0!==a.length){for(var u=[],s=0;s<a.length;s++)r.indexOf(a[s])<0&&u.push(a[s]);if(u.length>0){f[o].children=u;f[o].subChildrenCount=x(u);for(s=0;s<u.length;s++){r.push(u[s]);f[u[s]].parent=o}}}}}))}function x(e){for(var t=0,n=0;n<e.length;n++){var r=f[e[n]].subChildrenCount;t+=0===r?1:r}return t}b();var w={},A={};n(p,(function(e,t){var n=+t;w[n]=Hl(g[n].verts);A[n]={children:p[t][0].vertices,subChildrenCount:x(p[t][0].vertices)}}));n(p,(function(e,t){uh(t,p,y,A[t],f,w[t],v,w[t].x,!0,m,d)}));i?dh(f,p,g,w,m,s.tightness):gh(f,p,s.orientation);if(s.tidy)if(s.expanding&&s.spiralOverride)wd(f,g,[],o);else{var M=0===u.fixConfig.nodeIds.length;u((function(){return o(f,{},M)}))}else o(f,{},!0)}function mh(){var e,t,r,i,o,a,u,s,f,l,c,d,h,v,g,p,m,y=3,b=.5,x=Da,w=[],A=[];function M(e){f+=l;e.trigger("progress","layout",f)}function I(e,t){function n(e,t,n,r,i){return{isLeaf:!0,children:[],points:[],x1:e,y1:t,x2:n,y2:r,depth:i,m:0}}function r(e){return e.depth>=t}function i(e,t){var r,i,o,a,u=.5*(e.x1+e.x2),s=.5*(e.y1+e.y2);if(0===t||1===t){o=e.y1;a=s}else{o=s;a=e.y2}if(0===t||2===t){r=e.x1;i=u}else{r=u;i=e.x2}e.isLeaf=!1;e.children[t]=n(r,o,i,a,e.depth+1)}function o(e,t){t(e);for(var n=0;n<4;n++)e.children[n]&&o(e.children[n],t)}function a(e,t){if(t.x<e.x1||t.y<e.y1||t.x>e.x2||t.y>e.y2)throw Error("[Layout] Error: the point is out of range.");if(r(e)){e.points.push(t);e.m+=t.m}else{e.points.push(t);var n=.5*(e.x1+e.x2),o=.5*(e.y1+e.y2),u=0;t.x>=n&&t.y<o&&(u=1);t.x<n&&t.y>=o&&(u=2);t.x>=n&&t.y>=o&&(u=3);e.children[u]||i(e,u);a(e.children[u],t)}}for(var u=e.length,s=new Float64Array(u),f=new Float64Array(u),l=0;l<u;l++){s[l]=e[l].x;f[l]=e[l].y}var c=Math.min.apply(0,s),d=Math.max.apply(0,s),h=Math.min.apply(0,f),v=Math.max.apply(0,f),g=d-c,p=v-h;g>p?v=h+g:d=c+p;var m=qn(qn({},n(c,h,d,v,0)),{addPoint:function(e){a(m,e)},visit:function(e){o(m,e)}});for(l=0;l<e.length;l++)m.addPoint(e[l]);return m}function E(){var e=[];n(c,(function(t,n){var i=r[n];e.push({id:n,x:g[i],y:p[i],m:m[i]})}));var t=I(e,y);w.length=0;A.length=0;function i(e){function n(t){if(t.isLeaf){var n=e.x-.5*(t.x1+t.x2),o=e.y-.5*(t.y1+t.y2),a=oe(n,o);if((t.x2-t.x1)/a>b){for(var u=t.points,s=u.length,f=0;f<s;f++)if(e.id!==u[f].id){a=oe(n=e.x-u[f].x,o=e.y-u[f].y);var l=u[f].m;r+=n/a*l;i+=o/a*l}}else{r+=n/a*t.m;i+=o/a*t.m}}}var r=0,i=0;t.visit(n);w.push(r);A.push(i)}for(var o=0;o<e.length;o++)i(e[o]);B(w,A)}function k(e,t,n){for(var r=t,i=R(e,T(L(t,n),-1)),a=new Float64Array(i.buffer.slice(0)),u=S(i,i),s=0;s<20&&u/o>.01;s++){var f=L(a,n),l=u/S(f,a);r=R(r,T(a,l));var c=R(i,T(f,-l));i=c;var d=S(c,c),h=d/u;u=d;a=R(c,T(a,h))}return r}function C(){v=new Array(o);h=new Array(o);for(var e=0;e<o;e++){v[e]=new Int32Array(o);h[e]={};h[e][e]=!0;for(var t=0;t<o;t++)v[e][t]=0}for(e=0;e<i.length;e++){var n=i[e],a=r[n.id1],u=r[n.id2];h[a][u]=!0;h[u][a]=!0;v[a][u]-=1;v[u][a]-=1;v[a][a]+=1;v[u][u]+=1}}function S(e,t){for(var n=0,r=0;r<e.length;r++)n+=e[r]*t[r];return n}function T(e,t){for(var n=new Float64Array(e.length),r=0;r<e.length;r++)n[r]=e[r]*t;return n}function R(e,t){for(var n=new Float64Array(e.length),r=0;r<e.length;r++)n[r]=e[r]+t[r];return n}function L(e,t){for(var r=new Float64Array(o),i=0,a=function(t){i=0;n(h[t],(function(n,r){i+=v[t][r]*e[r]}));r[t]=i},u=0;u<o;u++)a(u);r=T(r,t);i=0;for(u=0;u<o;u++)i+=e[u];var s=new Float64Array(o);for(u=0;u<o;u++)s[u]=o*e[u]-i;return R(r,s)}function B(e,t){for(var n=0,r=0,i=0;i<e.length;i++){n+=e[i];r+=t[i]}n/=e.length;r/=e.length;for(i=0;i<e.length;i++){e[i]-=n;t[i]-=r}}function G(e,t,n){for(var r=0;r<t;r++){M(e);E();g=k(w,g,n);p=k(A,p,n);B(g,p)}}function O(n,f){d=Object.keys(c);r={};g=new Float64Array(o);p=new Float64Array(o);m=new Float64Array(o);var h,v=0,y=0,b=Ul(n.tightness);b=2-2*b/10+1;for(var w=0;w<d.length;w++){var A=d[w];v+=h=Math.max(1,c[A].size);y+=Math.max(1,c[A].w)*Math.max(1,c[A].h);r[A]=w;m[w]=h}var M=y/o,I=1+.015*(Math.sqrt(M)-2*x);s=42*Math.sqrt(o)*b*I;if(i.length/o<1){var E=.65,k=i.length/o;s*=E+k*(1-E)}var C=v/o;for(w=0;w<d.length;w++){p[w]=s*f.next();g[w]=s*f.next();m[w]/=C}e=10*o;t=o/40;l=1/((a=8)+(u=14-a)+2)}function Z(e){function t(e){var t=g[r[e]],n=p[r[e]];c[e].x=s*t;c[e].y=s*n}e.forEach(t)}function Y(n,r,s,l,h,v,g){f=0;c=r.v;i=r.e;if((o=r.vcount)>1){O(l,h);C();G(n,a,e);G(n,u,t);Z(d);M(n);ud({v:r.v,e:[]},s).reduceOverlaps(l,g)((function(){return v(c,{},!1)}))}else v(c,{},!0)}return{lens:Y}}function yh(e,t,r,i,o){var a=Eh(e,t,r);n(r,(function(e){if(void 0!==e.orderPos){e.children.sort((function(e,t){return r[e].orderPos-r[t].orderPos}));e.parents.sort((function(e,t){return r[e].orderPos-r[t].orderPos}))}}));var u=Ih(a,r,"ul",i,o),s=Ih(a,r,"ur",i,o),f=Ih(a,r,"dl",i,o),l=Ih(a,r,"dr",i,o),c=[u.extents,s.extents,f.extents,l.extents].sort((function(e,t){return e.max-e.min-(t.max-t.min)}))[0];function d(e,t){return e-t}for(var h=0;h<a.length;h++)for(var v=a[h].vertices,g=function(e){var t=v[e],n=r[t],o=[u.xs[t]-u.extents.min+c.min,s.xs[t]-s.extents.max+c.max,f.xs[t]-f.extents.min+c.min,l.xs[t]-l.extents.max+c.max].sort(d);n.x=(o[1]+o[2])/2;if(n.group){var a=n.group,h=n.x-n[i]/2;a.ids.forEach((function(e,t){r[e].x=h+a.positions[t]}))}},p=0;p<v.length;p++)g(p)}function bh(e,t,n){var r=t;if(e.root!==e.id)return r;var i=function(e){return n[n[e.root].sink]},o=i(e).shift;if(void 0!==o)return o<1/0?r+o:r;var a=i(e).shiftData;o=1/0;for(var u=0;u<a.length;u++){var s=a[u].dist;n[a[u].vert].shift<1/0&&(s+=n[a[u].vert].shift);o=Math.min(o,s)}i(e).shift=o;return o<1/0?r+o:r}function xh(e,t,n,r){if(e.group){var i=e.group.positions.slice(t)[0];return{before:r?i:e[n]-i,after:r?e[n]-i:i}}return"w"===n?{before:e.w/2,after:e.w/2}:r?{before:e.h/2-e.labeloff,after:e.h/2+e.labeloff}:{before:e.h/2+e.labeloff,after:e.h/2-e.labeloff}}function wh(e,t,n,r,i,o,a){var u=e[t],s=e[t].filter((function(e){return Xl({id:e})}));s.length>0&&(u=s);for(var f=0,l=[],c=0;c<u.length;c++){var d=o[u[c]];l.push(f);f+=d.group?d.group.ids.length:1}if(f>0){for(var h=[Math.floor((f+1)/2)-1,Math.ceil((f+1)/2)-1],v=Math.floor((l.length+1)/2)-1;l[v+1]<=h[0];)v++;for(;l[v-1]>=h[0];)v--;var g=[{id:u[v],groupIdx:h[0]-l[v]}];l[v+1]<=h[1]&&v++;g.push({id:u[v],groupIdx:h[1]-l[v]});for(var p=0;p<2;p++){var m=i?g[p]:g[1-p],y=r[m.id],b=y.pos;if(n<b){y.align=e.id;y.sizeSplit=a(m.id,m.groupIdx);e.root=y.root;e.align=e.root;return b}}}return n}function Ah(e,t,n,r,i){for(var o=[],a={},u=r?0:e.length-1,s=r?1:-1,f=function(t){return r?t<e.length:t>=0},l=function(e){return n?0:e.length-1},c=n?1:-1,d=function(e,t){return n?e<t.length:e>=0},h=function(e,r){return xh(t[e],r,i,n)},v=u;f(v);v+=s)for(var g=e[v].vertices,p=void 0,m=-1,y=0,b=l(g);d(b,g);b+=c){var x=g[b],w=t[x];o.push(x);a[x]={id:g[b],pos:y++,predecessor:p,align:x,root:x,sink:x,shiftData:[],sizeSplit:h(x,n?0:-1),parents:w.parents.filter((function(e){return!Cd(t[e])})),children:w.children.filter((function(e){return!Cd(t[e])}))};var A=r?"parents":"children";m=wh(a[x],A,m,a,n,t,h);p=x}return{order:o,details:a}}function Mh(e,t,n,r){var i,o,a,u;if(void 0===n[e.id]){i=e;n[e.id]=0;do{if(void 0!==i.predecessor){Mh(a=t[(o=t[i.predecessor]).root],t,n,r);e.sink===e.id&&(e.sink=a.sink);u=i.sizeSplit.before+o.sizeSplit.after+r;e.sink!==a.sink?(t[a.sink].shiftData=t[a.sink].shiftData||[]).push({vert:e.sink,dist:n[e.id]-n[a.id]-u}):n[e.id]=Math.max(n[e.id],n[a.id]+u)}i=t[i.align]}while(i.id!==e.id)}}function Ih(e,t,r,i,o){for(var a="l"===r[1],u="u"===r[0],s={},f=1/0,l=-1/0,c=Ah(e,t,a,u,i),d=0;d<c.order.length;d++){(v=c.details[c.order[d]]).root===v.id&&Mh(v,c.details,s,o)}for(d=0;d<c.order.length;d++){var h=c.order[d],v=c.details[h];s[h]=bh(v,s[v.root],c.details)}for(d=0;d<c.order.length;d++){h=c.order[d],v=c.details[h];f=Math.min(f,s[h]-v.sizeSplit.before);l=Math.max(l,s[h]+v.sizeSplit.after);void 0!==t[h].group&&(s[h]+=(v.sizeSplit.after-v.sizeSplit.before)/2)}if(!a){n(s,(function(e,t){s[t]*=-1}));return{xs:s,extents:{max:-f,min:-l}}}return{xs:s,extents:{max:l,min:f}}}function Eh(e,t,n){var r=[],i=[];e.forEach((function(e){for(var o=t[e],a=0;a<o.length;a++){r[a]||(r[a]={vertices:[],edges:[]});r[a].vertices=r[a].vertices.concat(o[a].vertices.filter((function(e){return!Cd(n[e])})));r[a].edges=r[a].edges.concat(o[a].edges.filter((function(e){return!Sd(e,n)})));i[a]=r[a].vertices.length}}));return r}function kh(e,t,r,i,o,a,u){var s="equal"===u?Ch:Sh,f=0;e.forEach((function(e){s(t[e],r,o,a);var u=i[e].verts,l=Ql(u);f-=l.x1;n(u,(function(e){e.x+=f}));f+=l.x2+a}))}function Ch(e,t,n,r){for(var i=function(i){var o=0,a=e[i].vertices;Dh(a,t,(function(e){if(!Xl(e)){var t=e[n]/2,i="h"===n?e.labeloff:0;o+=t-i;e.x=o;o+=t+i+r}}));var u=(o-r)/2;Dh(a,t,(function(e){e.x-=u}))},o=0;o<e.length;o++)i(o)}function Sh(e,t,n,r){for(var i=[],o=[],a=0,u=function(u){var s=e[u].vertices;i[u]=0;o[u]=0;Dh(s,t,(function(e){if(!Xl(e)){i[u]+=e[n];o[u]++}}));var f=i[u]+r*(o[u]-1);a=Math.max(a,f)},s=0;s<e.length;s++)u(s);var f=function(r){var u=e[r].vertices;if(o[r]>1){var s=(a-i[r])/(o[r]-1),f=0;Dh(u,t,(function(e){if(!Xl(e)){var t=e[n]/2,r="h"===n?e.labeloff:0;f+=t-r;e.x=f;f+=t+r+s}}))}else for(var l=0;l<u.length;l++){var c=t[u[l]];Xl(c)||(c.x=a/2)}};for(s=0;s<e.length;s++)f(s)}function Th(e,t,r,i,o,a){var u,s=Rh(e,t,r,i,o,a),f=function(e){e.y=u};n(e,(function(e){u=0;for(var n=0;n<e.length;n++){Dh(e[n].vertices,t,f);u+=s}}));return s}function Rh(e,t,n,r,i,o){for(var a=0,u=Ad(e,t,r),s=[],f=0;f<n.length;f++){var l=n[f].level,c=n[f].arrowSize;s[l]=Math.max(s[l]||0,2*c)}for(var d=0;d<u.length;d++){var h=u[d].max/2,v=0;u[d+1]&&(v=u[d+1].max/2);var g=s[d]||0;a=Math.max(a,h+v+i+Math.max(i,g))}return a*o}function Lh(e,t,n,r,i,o,a,u,s,f){"auto"===a?yh(e,t,n,r,i):kh(e,t,n,o,r,i,a);return Th(t,n,u,s,i,f)}function Bh(e,t){var r={};function i(e,t,n,i){r[e]=r[e]||[];r[e][t]=r[e][t]||{vertices:[],edges:[]};for(var o=0;o<t;o++)r[e][o]=r[e][o]||{vertices:[],edges:[]};r[e][t][n]=r[e][t][n]||[];r[e][t][n].push(i)}n(e,(function(e,t){"level"in e&&i(e.c,e.level,"vertices",t)}));for(var o=0;o<t.length;o++){var a=t[o];if("level"in a)if(e[a.id2].level-e[a.id1].level==1)i(a.c,a.level,"edges",a);else if(e[a.id1].level-e[a.id2].level==1){var u={id:a.id,id1:a.id2,id2:a.id1,numLinks:a.numLinks,level:a.level};i(a.c,a.level,"edges",u)}}return r}function Gh(e,t){for(var n=0;n<e.length;n++){for(var r=e[n].vertices,i=0;i<r.length;i++){var o=r[i],a=t[o];a.childEdges=[];a.parentEdges=[];a.children=[];a.parents=[];a.barycenter=1/0;a.orderPos=i}e[n].edges.forEach((function(e){t[e.id1].childEdges.push(e);t[e.id1].children.push(e.id2);t[e.id2].parentEdges.push(e);t[e.id2].parents.push(e.id1)}))}}function Oh(e,t,n){var r=[],i=0,o=0,a=0,u=0;e.forEach((function(e){var s=t[e];r.push(i+s.w/2);i+=s.w+n;o=Math.max(o,s.h-2*s.labeloff);a=Math.max(a,s.h+2*s.labeloff);u+=s.lc||0}));return{w:i-=n,h:o+a,labeloff:(a-o)/2,lc:u,positions:r}}function Zh(e,t,n){var r=[],i=0,o=0,a=0;e.forEach((function(e){var u=t[e];r.push(o+(u.h/2-u.labeloff));o+=u.h+n;i=Math.max(i,u.w);a+=u.lc||0}));return{w:i,h:o-=n,labeloff:0,lc:a,positions:r}}function Yh(e,t,n,r,i){var o=("w"===r?Oh:Zh)(t,n,i);return{id:e,w:o.w,h:o.h,x:n[t[0]].x,y:n[t[0]].y,fixed:!1,labeloff:o.labeloff,lc:o.lc,level:n[t[0]].level,group:{ids:t,positions:o.positions}}}function Fh(e,t,n,r){for(var i=e.sort((function(e,t){return e[n]<t[n]?-1:e[n]>t[n]?1:0})),o=0;o<i.length;o++){var a=i[o][t];r[a]=r[a]||{str:"",list:[]};r[a].str=r[a].str+" _"+i[o][n];r[a].list.push(i[o][n])}}function zh(e,t,n,r,i){var o={},a=e.filter((function(e){var a;if(-1===r.indexOf(e[t]))return!0;if(o[e[n]]){o[e[n]].numLinks+=e.numLinks||0;o[e[n]].arrowSize=Math.max(o[e[n]].arrowSize,e.arrowSize||0);(a=o[e[n]].links).push.apply(a,e.links||[])}else{var u="id1"===n?{id1:e[n],id2:i}:{id1:i,id2:e[n]};u.id=e.id;u.c=e.c;u.level=e.level;u.numLinks=e.numLinks||0;u.links=e.links||[];o[e[n]]=u}return!1}));a.push.apply(a,K(o));return a}function Ph(e,t,r,i){var o,a=0,u=0;function s(n){var s=n.filter((function(e){return!Xl({id:e})}));if(s.length>1){for(var f=o[s[0]].list,l=1;l<s.length;l++){if(o[s[l]].list.length!==f.length)return;if(!o[s[l]].list.every((function(e,t){return e===f[t]})))return}var c="_group"+a+++"c"+t[s[0]].c;t[c]=Yh(c,s,t,r,i);e[u].vertices=e[u].vertices.filter((function(e){return-1===s.indexOf(e)}));e[u].vertices.push(c);u>0&&(e[u].edges=zh(e[u].edges,"id2","id1",s,c));u<e.length-1&&(e[u+1].edges=zh(e[u+1].edges,"id1","id2",s,c))}}for(var f=function(){o={};u>0&&Fh(e[u].edges,"id2","id1",o);u<e.length-1&&Fh(e[u+1].edges,"id1","id2",o);var t={};n(o,(function(e,n){(t[e.str]=t[e.str]||[]).push(n)}));n(t,s)};u<e.length;u++)f()}function Dh(e,t,n){for(var r=0;r<e.length;r++){var i=t[e[r]];i.group?i.group.ids.forEach((function(e){n(t[e])})):n(i)}}function Vh(e,t){for(var n=0;n<e.length;n++){var r=t[e[n]];if(r.barycenter===1/0)break;r.orderPos=n}}function Wh(e,t,n,r){for(var i=!0,o=-1,a={},u=0;u<e.length;u++){var s=e[u];a[s]=u;if(!n&&t[s].barycenter===1/0){i=!1;break}for(var f=0,l=0,c=t[s][r],d=0;d<c.length;d++)if(t[c[d]].barycenter===1/0)i=!1;else{l++;var h=t[c[d]].orderPos;-1!==h&&(f+=h)}var v=!0;l>0?t[s].barycenter=f/l:t[s].barycenter===1/0?i=!1:0===u?t[s].barycenter=0:v=!1;if(v){if(o+1<u)for(var g=t[e[o]].barycenter,p=Math.min(g,t[s].barycenter),m=Math.abs(g-t[s].barycenter),y=u-o,b=1;b<y;b++)t[e[o+b]].barycenter=p+m*(b/y);o=u}}e.sort((function(e,n){return t[e].barycenter===t[n].barycenter?a[e]-a[n]:t[e].barycenter-t[n].barycenter}));Vh(e,t);return i}function Xh(e,t,n,r){e.sort((function(e,i){var o=t[e[n]].orderPos,a=t[e[r]].orderPos,u=t[i[n]].orderPos,s=t[i[r]].orderPos;return o<u||o===u&&a<s?-1:1}))}function Uh(e,t,n){if(t<1||e.length<=t)return 0;var r=e[t].edges,i=e[t-1].vertices,o=e[t].vertices;return i.length>o.length?Nh(r,n,"id1","id2"):Nh(r,n,"id2","id1")}function Nh(e,t,n,r){if(e.length<2)return 0;Xh(e,t,n,r);var i=e.map((function(e){return t[e[r]].orderPos}));i.sort((function(e,t){return e-t}));var o={};i.forEach((function(e,t){o[e]=t}));for(var a=e.map((function(e){var n=o[t[e[r]].orderPos];return{index:n,multiplier:void 0===n?0:e.numLinks}})),u=1;u<a.length;)u*=2;var s=new Int32Array(2*u-1);u-=1;for(var f=0,l=0;l<a.length;l++){var c=a[l].index+u;s[c]+=a[l].multiplier;for(;c>0;){c%2&&(f+=s[c+1]*a[l].multiplier);s[c=Math.floor((c-1)/2)]+=a[l].multiplier}}return f}function jh(e,t,n){var r=e.concat(t),i={};r.forEach((function(e){i[e[n]]=!0}));var o=Object.keys(i),a=o.length;return{verts:o,edges:r,common:e.length===a&&t.length===a}}function Kh(e,t){return jh(e.childEdges||[],t.childEdges||[],"id2")}function Hh(e,t){return jh(e.parentEdges||[],t.parentEdges||[],"id1")}function _h(e,t,n){for(var r=1,i=e[t].vertices,o=0,a=0,u=0;u<i.length-1;u+=r){var s=i[u],f=i[u+1],l=!1,c=t>0?Hh(n[s],n[f]):{common:!0,edges:[]},d=t<e.length-1?Kh(n[s],n[f]):{common:!0,edges:[]},h=c.common?[]:c.edges,v=d.common?[]:d.edges,g=Nh(h,n,"id1","id2")+Nh(v,n,"id2","id1"),p=n[f].orderPos;n[f].orderPos=n[s].orderPos;n[s].orderPos=p;var m=Nh(h,n,"id1","id2")+Nh(v,n,"id2","id1");if(g<=m){n[s].orderPos=n[f].orderPos;n[f].orderPos=p}else{l=!0;o+=g-m;i[u]=f;i[u+1]=s;if(1===r){a=Math.max(a,u);r=-1}if(0===u){u=a;r=1}}if(!l&&-1===r){u=a;r=1}}return o}function Jh(e,t){var n;do{n=0;for(var r=0;r<e.length;r++)n+=_h(e,r,t)}while(n>0)}function Qh(e,t,n){for(var r,i,o=e,u=!1,s=!1,f=!0,l=0,c=o.length,d=0;d<o.length;d++)if(o[d].vertices.length>0){c=d;break}if(c===o.length-1)return o;o[c].vertices.sort((function(e,n){return t[n].childEdges.length-t[e].childEdges.length}));t[o[c].vertices[0]].barycenter=0;t[o[c].vertices[0]].orderPos=0;var h=1/0;do{r=h;if(s){h=0;i=a(o)}else h=1/0;for(d=c;d<o.length-1;d++){u=Wh(o[d+1].vertices,t,!0,"parents");if(f){Wh(o[d].vertices,t,!1,"children");u=Wh(o[d+1].vertices,t,!1,"parents")}}s=u;for(d=o.length-1;d>c;d--){u=Wh(o[d-1].vertices,t,d<l+2,"children");if(f){Wh(o[d].vertices,t,!1,"parents");u=Wh(o[d-1].vertices,t,!1,"children")}else h+=Uh(o,d,t);u||(s=!1)}f=!s}while(l++<100&&(h===1/0||h<r));i&&(o=i).forEach((function(e){Vh(e.vertices,t)}));h>0&&n<1e4&&Jh(o,t);return o}function qh(e,t,n){var r=[],i={},o=[];if(n.length>0){var a={};n.forEach((function(n){var o=t[n].c;if(!a[o]){r.push(o);a[o]=!0;i=ne(i,e[o].verts)}}));if(r.length<e.length){o.push({verts:i,edges:[]});e.forEach((function(e){if(!a[e.c]){o.push(e);a[e.c]=!0}}))}}else r=e.map((function(e){return e.c}));return{orderedComponents:r,packingComponents:o}}function $h(e,t,n,r,i,o,a){void 0===r&&(r="down");for(var u={},s=0;s<e.length;s++){var f=e[s];f.links.sort((function(e,t){return(z(e.off)?e.off*e.sign:1/0)-(z(t.off)?t.off*t.sign:1/0)}));var l=0,c=0,d=0,h=!0,v=t[f.c][f.level].vertices,g=n[f.id1].orderPos,p=n[f.id2].orderPos,m=g<p?[g,p]:[p,g],y=g<p?1:-1;r.match(/right|up/)&&(y*=-1);for(var b=m[0]+1;b<m[1];b++){var x=n[v[b]];Xl(x)||(h=!1);for(var w=0;w<x.parentEdges.length;w++)l+=x.parentEdges[w].numLinks;for(w=0;w<x.childEdges.length;w++)c+=x.childEdges[w].numLinks;var A=(x[i]||x.size)/2;d=Math.max(d,A)}if(!h){if(c===l){l=n[v[m[0]]].parentEdges.length+n[v[m[1]]].parentEdges.length;c=n[v[m[0]]].childEdges.length+n[v[m[1]]].childEdges.length}var M=c<l?-y:y,I=d+20,E=40,k=a/2;I+=Math.abs(n[f.id1].x-n[f.id2].x)/o;(I=Math.min(I,k))+(f.links.length-1)*E>k&&(E=Math.max(10,(k-I)/(f.links.length-1)));for(b=0;b<f.links.length;b++){var C=f.links[b],S=I+b*E;u[C.id]={off:M*C.sign*S}}}}return u}function ev(e,t,r){var i=Ed(r);n(t,(function(t){for(var n=0;n<t.length;n++)Dh(t[n].vertices,e,i)}))}function tv(e,t){return null!==e&&"boolean"!=typeof e&&""!==e&&b(+e)&&+e>=0?+e:t}function nv(e,t,r,i,o){var a={top:[],orientation:"down",spacing:"auto",stretch:1},u=F(r,a),s=e.v,f=e.e,l=u.level,c=l?[]:Y(u.top,s),d=50+Nl(u.tightness),h=u.orientation.match(/right|left/)?"h":"w",v=u.orientation.match(/right|left/)?"w":"h",g=tv(r.stretch,a.stretch),p=ql(s,f),m=[];rh(s,f,t,p,!0,c,l,m);var y=Bh(s,f);n(y,(function(e,t){Ph(e,s,h,d);Gh(e,s);y[t]=Qh(e,s,f.length)}));var b=qh(p,s,c),x=b.orderedComponents,w=b.packingComponents,A=Zl(o.state,w,(function(e){return Object.keys(e.verts)})),M=o.pack(u,A),I=Lh(x,y,s,h,d,p,u.spacing,f,v,g),E=$h(m,y,s,u.orientation,v,d,I);u.orientation.match(/up|right|left/)&&ev(s,y,u.orientation);n(s,(function(e){e.group&&delete s[e.id]}));var k=function(e,t,n){void 0===n&&(n=!0);return i(s,E,n)};if(u.tidy&&!l&&w.length>0)M(k);else{for(var C=function(e){var t=w[e],r=Ql(t.verts),i=(r.x1+r.x2)/2,o=(r.y1+r.y2)/2;n(t.verts,(function(e){e.x-=i;e.y-=o}))},S=1;S<w.length;S++)C(S);k()}}var rv=Math.pow(10,-3.8),iv=1.35,ov=Math.pow(Da,iv);function av(e,t,n,r){return{leaf:!0,nodes:{},point:null,x1:e,y1:t,x2:n,y2:r}}function uv(e,t){var n=e.x1,r=e.y1,i=e.x2,o=e.y2,a=.5*(n+i),u=.5*(r+o),s=t.x>=a,f=t.y>=u,l=(f?2:0)+(s?1:0);e.leaf=!1;s?n=a:i=a;f?r=u:o=u;e.nodes[l]||(e.nodes[l]=av(n,r,i,o));sv(e.nodes[l],t)}function sv(e,t){if(e.leaf){var n=e.point;if(n){if(Math.abs(n.x-t.x)+Math.abs(n.y-t.y)<.01){uv(e,t);return}e.point=null;uv(e,n);uv(e,t);return}e.point=t}else uv(e,t)}function fv(e,t){if(!e(t))for(var n=t.nodes,r=0;r<4;r++)n[r]&&fv(e,n[r])}function lv(e){var t=0,n=0;e.charge=0;e.size=0;if(!e.leaf)for(var r=e.nodes,i=0;i<4;i++){var o=r[i];if(o){lv(o);e.charge+=o.charge;e.size+=o.size;t+=o.charge*o.cx;n+=o.charge*o.cy}}if(e.point){var a=cv(e.point);e.pointCharge=a;e.charge+=a;e.size+=e.point.size;t+=a*e.point.x;n+=a*e.point.y}e.cx=e.charge?t/e.charge:0;e.cy=e.charge?n/e.charge:0}function cv(e){return Da*Math.pow(e.size,iv)/ov*(1+(e.lc?e.lc:1)/3)}function dv(e,t){var r=Hl(e),i=r.minx,o=r.miny,a=r.maxx,u=r.maxy,s=a-i,f=u-o;s>f?u=o+s:a=i+f;var l,c=.5;function d(e){if(e.point!==l){var t=e.cx-l.x,n=e.cy-l.y,r=1/oe(t,n);if((e.x2-e.x1)*r<c){v(l,e.charge,r,t,n);return!0}e.point&&v(l,e.pointCharge,r,t,n)}return!e.charge}var h=1e5;function v(e,t,n,r,i){g(e,t,r,i,Math.min(n,h))}function g(e,n,r,i,o){if(!(o<rv)){var a=t*cv(e)*n*o*o*o;e.dx-=r*a;e.dy-=i*a}}var p=av(i,o,a,u);n(e,(function(e){sv(p,e)}));function m(){n(e,(function(e){l=e;fv(d,p)}))}lv(p);m()}function hv(e){var t=Ul(e.tightness);return Math.pow(2,.4*(t-5))}function vv(e,t,n,r){yv(e[t.id1],e[t.id2],n,r)}function gv(e,t,n){return e.size+t.size+n*(1+((e.lc?e.lc:1)+(t.lc?t.lc:1))/6)}function pv(e,t,n,r){var i=t[e.id1],o=t[e.id2],a=i.x-o.x,u=i.y-o.y,s=gv(i,o,n),f=oe(a,u);if(f>.02){var l=r*((f-s)/f),c=a*l,d=u*l;i.dx-=c;i.dy-=d;o.dx+=c;o.dy+=d}}function mv(e,t){if(!e.fixed){var n=oe(e.dx,e.dy),r=e.dx/n*Math.min(n,t),i=e.dy/n*Math.min(n,t);e.x+=r;e.y+=i}}function yv(e,t,n,r){var i,o,a;if(!e.fixed||!t.fixed){var u=2*r.next()*Math.PI;a=1.3*gv(e,t,n)/2;if(e.fixed||t.fixed){i=e.fixed?e.x:t.x;o=e.fixed?e.y:t.y;a*=2}else{i=(e.x+t.x)/2;o=(e.y+t.y)/2}if(!e.fixed){e.x=i+a*Math.cos(u);e.y=o+a*Math.sin(u);u+=Math.PI}if(!t.fixed){t.x=i+a*Math.cos(u);t.y=o+a*Math.sin(u)}}}function bv(e,t){var n=e.extents,r=n.c,i=Math.max(n.x2-n.x1,n.y2-n.y1),o=120*Math.sqrt(r),a=Math.max(i,o)/2,u=0;r>1&&(u=Math.min(Math.pow(r,2.5),100));var s=u*r*Math.log(r),f=1/hv(t);return{repulsionFactor:40*(f>1?Math.pow(f,2):f),coeff:1,naturalDistance:20*f,iterations:u,chunk:20,temperature:a,estTime:s}}function xv(e,t,n,r){var i={temperature:10,i:0},o={verts:e.v,edges:e.e},a=bv(e,t);a.chunk=5;a.iterations=5;i.temperature=Math.pow(a.temperature,.72);wv(i,o,a,n);r(e.v,{},!1)}function wv(e,t,r,i){var o,a,u=Math.min(e.i+r.chunk,r.iterations);function s(e){e.dx=0;e.dy=0;o++}function f(e){mv(e,a)}for(;e.i<u;){var l=t.verts,c=t.edges;o=0;n(l,s);Kl(l,i,2);if(1===o){e.i=u;return}if(2===o){if(c[0])vv(l,c[0],r.naturalDistance,i);else{var d=K(l);yv(d[0],d[1],r.naturalDistance,i)}e.i=u;return}dv(l,r.repulsionFactor);for(var h=0;h<c.length;h++)pv(c[h],l,r.naturalDistance,r.coeff);a=e.temperature*(1-e.i/r.iterations);n(l,f);e.i++}}function Av(e,t,n,r,i,o,a){var u={i:0,temperature:n.temperature};function s(){return r+(i-r)*(u.i/n.iterations)}function f(){return u.i>=n.iterations}function l(){wv(u,t,n,o)}function c(){l();if(f())a();else{e.trigger("progress","layout",s());v(c,0)}}c()}function Mv(e){var t=0,r=0,i=0,o=!1,a=0,u=0;n(e,(function(e){t+=e.x;r+=e.y;i+=1;o=o||e.fixed}));if(!(i<3||o)){t/=i;r/=i;n(e,(function(e){var n=Math.sqrt((e.x-t)*(e.x-t)+(e.y-r)*(e.y-r));if(n>u){u=n;a=Math.atan2(e.y-r,e.x-t)}}));a=-a;var s=Math.sin(a),f=Math.cos(a);n(e,(function(e){var n=t+(e.x-t)*f-(e.y-r)*s,i=r+(e.x-t)*s+(e.y-r)*f;e.x=n;e.y=i}))}}function Iv(e,t){var r=Z(e.fixed||[]),i=Q(r),o=0,a=0;if(r.length){n(i,(function(e,n){if(n in t.v){o+=t.v[n].x;a+=t.v[n].y}}));o/=r.length;a/=r.length}n(t.v,(function(e,n){if(!i[t.v[n].id]){t.v[n].x=o;t.v[n].y=a}}))}function Ev(e,t,n,r,i,o){var a=o.pack(n);Iv(n,t);for(var u=t.v,s=t.vcount,f=t.e,l=ql(u,f),c=n.fixed||[],d=s/(s+l.length),h=0,g=n.tidy?d:1,p=0===c.length,m=[],y=0,b=Date.now(),x=0;x<l.length;x++){var w=bv(l[x],n);y+=w.estTime;m.push(w)}for(var A=0,M=0;M<l.length;M++){m[M].start=A;var I=A+(g-h)*(m[M].estTime/y);m[M].stop=I;A=I}var E=0;function k(t){var n=t,i=l[n],o=m[n];Av(e,i,o,o.start,o.stop,r,(function(){Mv(i.verts);n++;E++;if(n<l.length){var e=Date.now();if(e-b>16||E>1e3){b=e;E=0;v((function(){k(n)}),0)}else k(n)}else C()}))}function C(){n.tidy?n.expanding&&n.spiralOverride?wd(u,l,c,i):a((function(){return i(u,{},p)})):i(u,{},p)}l.length>0?k(0):i(u,{},p)}function kv(e,t,n,r,i,o){e[t]=r?n[t]:re(n[t],{x:i,y:o})}function Cv(e,t,r){var i={},o=[],a=0,u={include:!0,maxLength:r.privateGetMaxLabelLength()};n(e.rev,(function(s,f){for(var l={x:0,y:0,size:0},c=s.length,d=0;d<c;d++){var h=t[s[d]];l.x+=h.x;l.y+=h.y;l.size+=h.size}l.x/=c;l.y/=c;var v=document.createElement("canvas").getContext("2d"),g=Nc(),p=K(t).filter((function(t){return e.rev[f].indexOf(t.id)>-1})).map((function(e){var t=r.privateGetItem(e.id);e.r=ac(t,v,{include:!1}).radius;e.radiusWithText=ac(t,v,u).radius;e.labelOffset=0;return e})),m=0,y=0;p.forEach((function(e){m+=e.r;y+=e.radiusWithText}));var b=(y-m)/p.length,x=.5,w=g.concentricLayout(p,{padding:Math.max(8,b*x)}),A={positions:$(w)},M=fc(w,{x:0,y:0},v,0);i[f]={id:f,x:l.x,y:l.y,size:M,r:void 0,fixed:!1,lc:0,w:void 0,h:void 0,labeloff:0,labelOffset:0,radiusWithText:M,jit:A};a++;for(var I=s[0],E={},k=e.index[I],C=0;C<k.length;C++){var S=k[C];E[e.ids[S]]=!0}n(E,(function(e,t){f<t&&o.push({id1:f,id2:t})}))}));for(var s=0;s<o.length;s++){var f=o[s].id1,l=o[s].id2;i[f].lc++;i[l].lc++}n(t,(function(t,n){if(!e.ids[n]){i[n]={id:n,x:t.x,y:t.y,size:t.size,lc:0,fixed:t.fixed,labeloff:0,labelOffset:0,radiusWithText:t.size,r:t.size,w:t.w,h:t.h,jit:{radius:t.size,position:{x:0,y:0}}};a++}}));return{v:i,e:o,vcount:a,extents:Ql(i)}}function Sv(e,t,n){e[n]||(e[n]=[]);e[n].push(t)}function Tv(e,t){Sv(e,t.id1,t.id2);Sv(e,t.id2,t.id1)}function Rv(e){for(var t={},n=0;n<e.length;n++)Tv(t,e[n]);return t}function Lv(e){var t={},r={};n(e,(function(e,n){e.sort();for(var i="",o=0;o<e.length;o++)i+=e[o];t[i]||(t[i]=[]);t[i].push(n);r[n]=i}));return{rev:t,ids:r,index:e}}function Bv(e){return Lv(Rv(e))}function Gv(e,t,r,i,o,a,u){var s=a.pack(r),f=Bv(t.e),l=Cv(f,t.v,i),c=function(i){var o={};n(i,(function(e,n){if(f.rev[n])for(var r=f.rev[n],i=e.fixed,a=0;a<r.length;a++){var u=r[a],s=e.x,l=e.y;if(e.jit.positions){s+=e.jit.positions[u].x;l+=e.jit.positions[u].y}kv(o,u,t.v,i,s,l)}else kv(o,n,t.v,t.v[n].fixed,e.x,e.y)}));var a=Qc(e,r,t.extents,u),l=0===s.fixConfig.nodeIds.length;if(r.tidy)if(r.expanding&&r.spiralOverride){var c=ql(o,t.e);wd(o,c,r.fixed||[],a)}else s((function(){return a(o,{},l)}));else a(o,{},l)},d=function(e,t){c(e);return{vertices:e,updatedEdges:t,extents:null}};Ev(e,l,re({},r,{tidy:!1}),o,d,a)}var Ov=new RegExp("^(standard|hierarchy|lens|sequential|radial|structural|tweak|"+Object.keys($c).join("|")+")$"),Zv=new RegExp("^(standard|lens|structural|"+$c.organic+")$"),Yv=new RegExp("^(standard|tweak|"+$c.organic+")$"),Fv=new RegExp("^(standard|structural|"+$c.organic+"|radial|hierarchy|sequential)$");function zv(e){var t=ce();function n(n,r,i,o,a,u,s,f){r.trigger("prechange","layout");if(!Ov.test(n))throw new Error("The layout name is not valid.");Zv.test(n)||delete u.consistent;Yv.test(n)||delete u.fixed;Fv.test(n)&&(D(u.packing)?u.packing=u.tidy?"rectangle":"none":u.expanding?u.tidy?"none"===u.packing&&(u.packing="rectangle"):u.packing="none":u.tidy="none"!==u.packing);var l=ud(i,a),c=f?Jc(r,u,i.extents,s):Qc(r,u,i.extents,s);r.trigger("progress","layout",0);t.setSeed(u.consistent?900736044081:null);switch(n){case"standard":Ev(r,i,u,t,c,l);break;case"hierarchy":ph(i,o,u,!1,c,l);break;case"lens":mh().lens(r,i,a,u,t,c,f);break;case"sequential":nv(i,o,u,c,l);break;case"structural":Gv(r,i,u,e,t,l,s);break;case"radial":ph(i,o,u,!0,c,l);break;case"tweak":xv(i,u,t,c);break;case $c.organic:var d=l.organic(u,f),h=0===d.fixConfig.nodeIds.length;d((function(){return c(i.v,{},h)}))}}return{arrange:gd,extractStructure:pd(e),layout:n}}function Pv(e,t,n,r){var i=Nc(),o=Vv(t),u={},s={list:[],index:{},nulls:0,comboLinkAdj:{}},f={},l=null,c=[],d={},h=F(e,{arrange:"concentric",resize:!0,updateGlyph:!0});function v(){s={list:[],index:{},nulls:0,comboLinkAdj:{}};u={};f={};l=null;c=[]}function g(){return{itemsToMergeList:s.list,propertiesToSetMap:u,idsToRemoveMap:f,
idsToSelectMap:l}}function p(){var e={nodes:{},links:{}};t.privateGetRawItems().concat(s.list).forEach((function(t){if(null!==t){var n=fe(t.id),r=A(t.id);n||r||("node"===t.type?e.nodes[t.id]=w(t.id):e.links[t.id]=t)}}));return e}function m(e,n){var r,i=u[e];if(void 0!==i&&void 0!==(r=i[n]))return r;var o=z(e);if(null!==o&&void 0!==(r=o[n]))return r;var s=t.privateGetItem(e);return s?a(s[n]):void 0}function y(e,t){return m(e,t)}function x(e,t){return m(e,t)}function w(e){if(f[e])return null;var n=a(t.privateGetItem(e))||{},r=z(e);null!==r&&ne(n,r);u[e]&&ne(n,u[e]);return n}function A(e){return m(e,"parentId")}function M(e){return m(e,"_combo")}function I(e){return M(e)}function E(e,t){var n=m(e,"_combo");if(n){n.nodeIds&&n.nodeIds.forEach(t);n.linkIds&&n.linkIds.forEach(t)}}function k(e){var t=u[e];if(!t){t={id:e};u[e]=t}return t}function C(e,t,n){k(e)[t]=n}function S(e,t,n){C(e,t,n)}function R(e){var t=k(e.id);re(t,e)}function L(e,t){S(e,"_offset",t)}function B(e,t,n){var r=I(e);r[t]=n;C(e,"_combo",r)}function G(e,t){if(n&&n.api.isShown()){var r=w(e),i=n.internalUse.preMerge([r]);C(e,"hi",i[0].hi);ge(e,i[0].x-r.x,i[0].y-r.y)}else if(h.reposition&&t){var o=x(e,"_offset"),a=x(t,"x"),u=x(t,"y"),s=x(e,"x"),f=x(e,"y");ge(e,a-o.x-s,u-o.y-f)}}function O(e,t){var n=A(e)||null;if(t!==n){oe(e);C(e,"parentId",t);if("node"===m(e,"type"))if(t)x(e,"_offset")||L(e,{x:x(t,"x")-x(e,"x"),y:x(t,"y")-x(e,"y")});else{G(e,n);L(e,void 0)}}}function Z(e,t){e.forEach((function(e){O(e,t);f[e]&&oe(e)}))}function Y(e){var t=s.index[e];if(void 0!==t){var n=s.list[t];s.list[t]=null;delete s.index[e];s.nulls++;var r=s.list.length;if(r>0&&s.nulls/r>.5){s.index={};for(var i=0,o=0;o<r;){if(null!==s.list[o]){s.list[i]=s.list[o];s.index[s.list[i].id]=i;i++}o++}s.list.length=i;s.nulls=0}if(null!==n&&"link"===n.type&&n._combo){var a=s.comboLinkAdj;delete a[n.id1][n.id2];delete a[n.id2][n.id1]}}}function z(e){var t=s.index[e];return void 0===t?null:s.list[t]}function P(e){if(void 0===s.index[e.id]){s.index[e.id]=s.list.push(e)-1;if("link"===e.type&&void 0!==e._combo){var t=s.comboLinkAdj,n=e.id1,r=e.id2;void 0===t[n]&&(t[n]={});void 0===t[r]&&(t[r]={});t[n][r]=e;t[r][n]=e}}else s.list[s.index[e.id]]=e}function V(e,t,n){if(n){var r=M(n);if(r){if(e&&r.nodeIds&&e.length>0){Dv(r.nodeIds,e);e.forEach((function(e){d[e]=!0}))}if(t&&t.length>0){Dv(r.linkIds,t);t.forEach((function(e){d[e]=!0}))}C(n,"_combo",r)}}n&&N(n)&&t.length&&J(n)}function W(e,t){V(e,[],t);Z(e,t)}function X(e,t){V([],e,t);Z(e,t)}function U(e){var t=e,n=[];do{n.unshift(t);t=A(t)}while(t);return n}function N(e){return!!M(e)&&"link"===m(e,"type")}function j(e){return!!M(e)&&"node"===m(e,"type")}function H(){var e=[];K(u).forEach((function(t){t._combo&&j(t.id)&&e.push(t.id)}));return e}function _(e){for(var t,n,r,i=U(y(e,"id1")),o=U(y(e,"id2")),a=0,u=Math.min(i.length,o.length);a<u&&i[a]===o[a];)a++;if(a===i.length){t=o[a-1];n=o[a];r=t}else if(a===o.length){t=i[a-1];n=i[a];r=t}else{t=i[a];n=o[a];r=0===a?null:i[a-1]}return{id1:t,id2:n,parentId:r}}function J(e){if(!f[e]){for(var t=y(e,"id1"),n=M(e).linkIds,r=n.length,i=!1,o=!1,a=!0,u=0;u<r;u++){var s=!!y(n[u],"a1"),l=!!y(n[u],"a2"),c=t===_(n[u]).id1;o=o||(c?l:s);if((i=i||(c?s:l))&&o)break}for(u=0;u<r;u++)if(!m(n[u],"hi")){a=!1;break}R({id:e,a1:i,a2:o,hi:a})}}function Q(t,n,i){var o=r(),u=a(i,!0);u.id=o;u.id1=t;u.id2=n;if(e&&e.comboLinkStyle){var s=e.comboLinkStyle;b(s.b1)&&(u.b1=s.b1);b(s.b2)&&(u.b2=s.b2);s.c&&(u.c=s.c);s.ls&&(u.ls=s.ls);b(s.w)&&(u.w=s.w)}u.off=0;u.parentId=void 0;u._combo={linkIds:[]};return u}function q(e){var t=_(e.id),n=ve(t.id1,t.id2);if(!n){var r=Q(t.id1,t.id2,e);n=r.id;P(r);null!==t.parentId&&X([n],t.parentId)}return n}function ee(e){var t={},n=[];e.forEach((function(e){if(!f[e.id]){var r=A(e.id1),i=A(e.id2);if(r||i){var o=null;o=r===i||r===e.id2?r:i===e.id1?i:q(e);e.parentId!==o&&(t[o]||(t[o]=[])).push(e.id)}else null!==e.parentId&&n.push(e.id)}}));var r=Object.keys(t);r.forEach((function(e){V([],t[e],e)}));V([],n,null);r.forEach((function(e){Z(t[e],e)}));Z(n,null)}function te(e){if(!f[e.id]){var t=A(e.id1),n=A(e.id2),r=n===e.id1?n:t;X([e.id],r||null)}}function ie(e,t){if(e){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}}function oe(e){var t=A(e);if(t&&!f[t]){var n=M(t),r=n.nodeIds,i=n.linkIds;ie(r,e);ie(i,e);if(r&&r.length||i.length){C(t,"_combo",n);N(t)&&J(t)}else ce(t)}}function fe(e){return!!f[e]}function le(){return Object.keys(f)}function ce(e){if(!f[e]){f[e]=!0;de(t.privateNeighbourLinkIds([e]));oe(e);delete u[e];Y(e)}}function de(e){e.forEach(ce)}function he(e){l=l||{};e.forEach((function(e){l[e]=!0}))}function ve(e,n){var r=null,i=s.comboLinkAdj[e];void 0!==i&&void 0!==i[n]&&(r=i[n].id);if(null===r)for(var o=t.privateGetLinksBetween(e,n),a=o.length,u=0;u<a;u++){var l=o[u];l._combo&&!f[l.id]&&(r=l.id)}return r}function ge(e,t,n){var r=x(e,"x"),i=x(e,"y");S(e,"x",r+t);S(e,"y",i+n);var o=I(e);o&&o.nodeIds.forEach((function(e){ge(e,t,n)}))}function pe(){for(var e={},t=0,n=c.length;t<n;t++){void 0===e[(r=c[t]).id]&&(e[r.id]={id:r.id,dx:0,dy:0,sumX:0,sumY:0});r.norm=ue(x(r.id,"x")-x(r.to,"x"),x(r.id,"y")-x(r.to,"y"));e[r.id].sumX+=r.norm[0]*r.distance;e[r.id].sumY+=r.norm[1]*r.distance}for(t=0,n=c.length;t<n;t++){var r,i=(r=c[t]).norm,o=se(i[0],i[1],e[r.id].sumX,e[r.id].sumY),a=Math.abs(o)*r.distance;e[r.id].dx+=i[0]*a;e[r.id].dy+=i[1]*a}return K(e)}function me(e,r){var i=A(e),o=[];i?o=t.privateGetItem(M(i).nodeIds):n.api.isShown()||(o=t.privateGetRawItems().filter((function(t){var n=fe(t.id),r=A(t.id);return!n&&!r&&e!==t.parentId})));o.filter((function(t){return"node"===t.type&&!t.hi&&t.id!==e})).forEach((function(t){c.push({id:t.id,to:e,distance:r})}))}function ye(e){c.forEach((function(t){e[t.id]&&(t.distance=0)}))}function be(e,t,n){if(0!==t&&!m(e,"hi")){n&&me(e,t);var r=A(e);if(r){var i=ke(r),o=x(r,"oc")||{},a=2*i;if(a!==o.w){var u=(a-o.w)/2;o.w=a;S(r,"oc",o);var s=M(r);s&&s.open&&be(r,u,n)}}}}function xe(e,n,r,i){var a=p();o.layout(e.name,a.nodes,a.links,cc(a.nodes,t.privateGetCanvas(),t.privateGetMaxLabelLength()),e,"toplevel",(function(e){ye(e.vertices);Object.keys(e.vertices).forEach((function(t){var n=e.vertices[t],r=x(t,"x"),i=x(t,"y");ge(t,n.x-r,n.y-i)}));n(e.updatedEdges);i(e.extents)}),r)}function we(e,t,n,r,i){for(var o=[],a=M(e).nodeIds,u=a.length,s={include:!0,partial:i,maxLength:r,padExtents:!0},f=0;f<u;f++){var l=w(a[f]);if(!l.hi){var c=n&&n[l.id],d=ac(l,t,s);o.push({id:l.id,x:c?l.x+c.dx:l.x,y:c?l.y+c.dy:l.y,t:l.t,labelOffset:sc(l,r),r:d.radius,w:d.width,h:d.height})}}return o}function Ae(e,t,n,r){var o=we(e,t,null,r,!0);return $(i.concentricLayout(o,{includeLabels:!0,padding:n}))}function Me(e,t,n,r){var i,a=I(e),u=$(a.nodeIds.map(w)),s=$(a.linkIds.map(w).filter((function(t){return t.id1!==e&&t.id2!==e})));o.layout("lens",u,s,cc(u,t,r),{consistent:!0},"all",(function(e){i=e}),void 0,!0);var f=we(e,t,null,r);f.forEach((function(e){e.x=i.vertices[e.id].x;e.y=i.vertices[e.id].y}));var l=lc(f,t,n,!0,r);null!==l&&f.forEach((function(e){e.x-=l.x;e.y-=l.y}));return $(f)}function Ie(e,t,n,r,i){var o=x(e,"oc")||{},a=2*t;if(n||o.w<a){o.w=a;S(e,"oc",o);var u=I(e);if(u&&!u.open){var s={include:!0,maxLength:i},f=w(e),l=ac(f,r,s,!0),c=ac(f,r,s,!1);u.e=c.radius/l.radius;C(e,"_combo",u)}}}function Ee(e,t,n){for(var r=I(e).nodeIds,i=r.length,o=x(e,"x"),a=x(e,"y"),u=0;u<i;u++){var s=r[u];if(!m(s,"hi")){var f={id:s},l=x(s,"x"),c=x(s,"y");if(n){f._offset={x:o-l-n.dx,y:a-c-n.dy};R(f)}ge(s,o+t[s].x-l,a+t[s].y-c)}}}function ke(e,n,r){void 0===n&&(n=!1);var i=t.privateGetCanvas(),o=$(pe());return fc($(we(e,i,o,r)),{x:x(e,"x"),y:x(e,"y")},i,Di,n,r)}function Ce(e,n){var r,i=t.privateGetCanvas(),o=t.privateGetMaxLabelLength();if("none"===h.arrange)Ie(e,r=ke(e,!0,o),!!h.resize,i,o);else{var a=void 0;r=fc(a="concentric"===h.arrange?Ae(e,i,Di,o):Me(e,i,Di,o),{x:0,y:0},i,Di,!0,o);ye(a);Ie(e,r,!!h.resize,i,o);Ee(e,a,n)}return r}function Se(e){return Ce(e)}function Te(e){var n=t.privateGetCanvas(),r=t.privateGetMaxLabelLength();Ie(e,ke(e,!0,r),!1,n,r)}function Re(e){var t=I(e);return t?t.nodeIds.reduce((function(e,t){return e+Re(t)}),0):m(e,"hi")?0:1}function Le(e){var t=I(e);if(t&&void 0!==t.g){var n=!1,r=(m(e,"g")||[]).map((function(r){if(r.p===t.g){n=!0;return re(r,{t:Re(e)})}return r}));if(n)C(e,"g",r);else{t.g=void 0;C(e,"_combo",t)}}}function Be(){if(h.updateGlyph){var e={};[K(u),s.list].forEach((function(t){t.forEach((function(t){if(t){var n=t.id;if(t._combo&&"node"===m(n,"type")){U(n).forEach((function(t){if(!e[t]){Le(t);e[t]=!0}}))}}}))}))}}function Ge(e){if(l){t.selection(Object.keys(l));t.trigger("selectionchange")}else{var n=e.filter(t.privateItemIsShown);if(e.length!==n.length){t.selection(n);t.trigger("selectionchange")}}}function Oe(e){for(var n=U(e),r=0;r<n.length;r++){var i=n[r],o=M(i),a=t.privateGetItem(i),u=a&&a._combo;if(!(u&&u.open||o&&o.open))return i}return e}function Ze(e){for(var n=t.privateGetAncestryIds(e),r=0;r<n.length;r++){var i=t.privateGetItem(n[r])._combo;if(!i||!i.open)return n[r]}return e}function Ye(e,n){Object.keys(e).forEach((function(r){var i=e[r],o=a(t.privateGetItem(r)._combo);D(i.open)||(o.open=i.open);o.nodeIds=Fe(o.nodeIds,i.removeNodeIds);o.nodeIds=ze(o.nodeIds,i.addNodeIds);o.linkIds=Fe(o.linkIds,i.removeLinkIds);o.linkIds=ze(o.linkIds,i.addLinkIds);n.push({id:r,_combo:o})}))}function Fe(e,t){var n=e;t.length&&(n=n.filter((function(e){return-1===t.indexOf(e)})));return n}function ze(e,t){var n=e;t.length&&(n=n.concat(t));return n}function Pe(){var e=[],n={},r=[],i={},o={};function a(e){o[e]||(o[e]={addNodeIds:[],removeNodeIds:[],addLinkIds:[],removeLinkIds:[]})}function s(e,t,n){a(t);var r=(n?"add":"remove")+("node"===e.type?"NodeIds":"LinkIds");o[t][r].push(e.id)}function l(e){if(!0!==f[e])return!1;i[e]=!0;var n=t.privateGetItem(e);if(n)if("link"===n.type){l(n.id1);l(n.id2)}else n.parentId&&l(n.parentId);return!0}K(u).forEach((function(i){var s=i.id,c=t.privateGetItem(s);if("x"in i&&c){var d=Oe(s);r.push({id:s,x:x(d,"x"),y:x(d,"y")})}if("parentId"in i&&c&&c.parentId!==i.parentId){var h={id:s},v="node"===c.type;h.parentId=null;if(v){var g=Ze(s),p=t.privateGetItem(g);h.x=p.x;h.y=p.y;"x"in i||r.push({id:s,x:c.x,y:c.y})}else if(i.parentId)if(j(i.parentId)){var y=t.privateGetItem(i.parentId);if(y&&(!y._combo.open||!t.privateAllParentsOpen(i.parentId))&&c.parentId){delete h.parentId;l(c.parentId)}}else if(N(i.parentId)){var b=z(i.parentId),w=t.privateGetItem(i.parentId),A=b||w;if(A)if(t.privateGetItem(A.id1)&&t.privateGetItem(A.id2)){var M=u[A.id1]&&"parentId"in u[A.id1],I=u[A.id2]&&"parentId"in u[A.id2],E=M||t.privateAllParentsOpen(A.id1),k=I||t.privateAllParentsOpen(A.id2);if(E&&k){h.parentId=i.parentId;b&&(n[i.parentId]=!0)}else if(c.parentId&&f[c.parentId]){if(!m(s,"hi")){h.hi=!0;C(s,"hi",!1)}}else delete h.parentId}else l(c.parentId)&&delete h.parentId;else f[c.parentId]&&(h.parentId=i.parentId)}e.push(h)}if("_combo"in i&&j(s)&&c&&c._combo.open!==i._combo.open){r.push({id:s,_combo:{e:i._combo.e}});a(s);o[s].open=!0}if(j(s)&&c&&"oc"in i){var S=c;S.oc&&S.oc.w!==i.oc.w&&r.push({id:s,oc:{w:i.oc.w}})}}));e.forEach((function(e){var n=t.privateGetItem(e.id);if("parentId"in e){var r=n.parentId,o=e.parentId,a=r&&f[r]&&!i[r];r&&!a&&s(n,r,!1);o&&(z(o)||s(n,o,!0))}}));Object.keys(f).forEach((function(e){if(!i[e]){var n=t.privateGetItem(e);n&&n.parentId&&s(n,n.parentId,!1)}}));Ye(o,e);return{propertiesToSetBeforeAnimation:e,itemsToMergeBeforeAnimationMap:n,propertiesToAnimate:r,idsToRemoveAfterAnimationMap:i}}function De(e,n){var r=!!h.animate&&Pe();r&&Object.keys(r.idsToRemoveAfterAnimationMap).forEach((function(e){delete f[e]}));t.privateRemoveItem(Object.keys(f));if(r){var i=[];Object.keys(r.itemsToMergeBeforeAnimationMap).forEach((function(e){i.push(z(e));Y(e)}));t.privateMerge(i);t.privateSetNonImageProperties(r.propertiesToSetBeforeAnimation);t.privateSetAllDirty();T(n);t.privateAnimateProperties(r.propertiesToAnimate,h,(function(){t.privateRemoveItem(Object.keys(r.idsToRemoveAfterAnimationMap));T(e)}),!1)}else T(e)}function Ve(e,n){h.updateGlyph&&Be();var r=t.selection(),i=Object.keys(d);pe().forEach((function(e){ge(e.id,e.dx,e.dy)}));t.privateAddItemsToTransfer(i);De((function(){t.privateMerge(s.list.filter((function(e){return null!==e})));h.animate||T(n);t.privateSetNonImageProperties(K(u),!0);t.privateRemoveItemsFromTransfer(i);d={};Ge(r);v();T(e)}),n)}function We(){return{itemsToMerge:s.list.filter((function(e){return null!==e})),propertiesToSet:K(u)}}return{adjustForNewComboSize:be,adjustTopLevelLayout:xe,applyUpdates:Ve,forEachChild:E,getChangingComboNodeIds:H,getComboProperty:M,getExtentsOfChildren:ke,getIdsToRemove:le,getItem:w,getNodeComboProperty:I,getNodeProperty:x,getParentId:A,getProperty:m,layoutCombo:Se,layoutComboWithOffset:Ce,mergeItem:P,preMergeDetails:We,privateState:g,removeItems:de,removingItem:fe,selectItems:he,setComboMinimumSize:Te,setNodeComboSubProperty:B,setNodeProperty:S,setProperty:C,transferComboLinkToCorrectParent:te,transferNodesToCombo:W,transferRawLinksToCorrectParents:ee,updateComboLinkProperties:J,updateComboNodeGlyphs:Be}}function Dv(e,t){if(1===t.length)-1===e.indexOf(t[0])&&e.push(t[0]);else{for(var n={},r=0;r<e.length;r++)n[e[r]]=!0;for(var i=0;i<t.length;i++)n[t[i]]||e.push(t[i])}}function Vv(e){var t=zv(e),n={bind:function(){},trigger:function(){return!1},atanEasing:function(){return 0},cubicEasing:function(){return 0},getErrors:function(){return[]},linearEasing:function(){return 0},privateBind:function(){},privateTrigger:function(){},privateUnbind:function(){},unbind:function(){}};function r(n,r,i,o,a){var u=null;function s(){null===u&&(u=Wc()).privateSetProperties(r,i);return u}var f=e.privateGetCanvas(),l=e.privateGetGenerator();return{getGraph:s,struct:t.extractStructure(l,f,r,i,s,o,n,a)}}function i(e,i,o,a,u,s,f,l,c){void 0===l&&(l=n);var d=r(e,i,o,u.fixed||[],s);t.layout(e,l,d.struct,d.getGraph,a,u,f,c)}return{layout:i}}function Wv(e,t,n,r){var i=0;function o(t){var n=ac(t,e.privateGetCanvas(),{include:!1}).radius;t._combo&&t._combo.open&&(t.oc&&b(t.oc.bw)?n-=t.oc.bw:n-=ma.bw);return Math.max(n,0)}function u(){var t=0,r=V({animate:!1});n.privateBind("dragstart",(function(n,r){if("resize"===n&&r){var i=e.privateGetItem(r);"node"===i.type&&i._combo&&i._combo.open&&(t=o(i))}}));n.privateBind("dragcomplete",(function(n,i){if("resize"===n&&i){var a=e.privateGetItem(i);if("node"===a.type&&a._combo&&a._combo.open){var u=r.getExtentsOfChildren(i,!0,void 0),s=o(a);if(s<u){var f=r.getNodeProperty(i,"oc")||{};s=u;f.w=2*u;r.setNodeProperty(i,"oc",f)}var l=s-t;r.adjustForNewComboSize(i,l,!0);r.applyUpdates()}}}))}u();function s(t){var n;do{n=t+ ++i}while(e.privateGetItem(n));return n}function f(){return s(Wi)}function l(e){var t=e;["id","id1","id2","parentId"].forEach((function(e){e in t&&null!==t[e]&&void 0!==t[e]&&(t[e]+="")}))}function c(e){var t={};e.forEach((function(e){t[e]=!0}));return t}function d(e,t){return D(t.label)?e.map((function(e){return e.t})).filter((function(e){return!D(e)&&""!==e})).join("\n"):t.label}function h(e){var t=0,n=0;e.forEach((function(e){t+=e.x||0;n+=e.y||0}));return{x:t/e.length,y:n/e.length}}function v(e){return!(!e||"number"!=typeof e.lat||"number"!=typeof e.lng)}function g(e,t){if("first"!==e.position){var n=0,r=0,i=0;t.forEach((function(e){if(v(e.pos)){r+=e.pos.lat;i+=e.pos.lng;n++}}));if(n>0)return{lat:r/n,lng:i/n}}else for(var o=0,a=t.length;o<a;o++){var u=t[o];if(v(u.pos))return u.pos}}function p(){return{nodeIds:[],linkIds:[],open:!1,e:1,g:void 0}}function m(){return{linkIds:[]}}function y(){return{p:"ne",c:"rgb(255, 0, 0)",t:"0"}}function x(e,t,n){e._combo=p();n?e.oc=n:e.oc||(e.oc={});e.oc=F(e.oc,r().openCombos);b(e.oc.w)||(e.oc.w=0);void 0===e.x&&(e.x=0);void 0===e.y&&(e.y=0);e.g=e.g||[];if(null!==t){var i=qn(qn({},y()),t||{});e.g.unshift(i);e._combo.g=i.p}}function A(n,i){var o=n.style,u=o||a(i[0],"d"),f="node",l=s(Vi),c=d(i,n);void 0===n.glyph&&r&&(n.glyph=r().comboGlyph);if(void 0!==n.glyph&&null!==n.glyph&&!I(n.glyph))throw new Error("[combo().combine] glyph must be an object");var p,m=o&&!D(o.hi)?o.hi:i.every((function(e){return!!e.hi})),y=o&&!D(o.bg)?o.bg:i.every((function(e){return!!e.bg})),b=o&&v(o.pos)?o.pos:g(n,i);if(t&&t.api.isShown()&&v(b)){var w=t.api.viewCoordinates(b.lat,b.lng);p=e.worldCoordinates(w.x,w.y)}else p="first"===n.position?i[0]:h(i);var A=qn(qn({},u),{type:f,id:l,t:c,hi:m,bg:y,pos:b,x:p.x,y:p.y});x(A,n.glyph,n.openStyle);n.open&&(A._combo.open=!0);I(n.d)&&(A.d=n.d);return A}var M=Ma({strings:{label:!0}});function E(r,i,o){var u=Z(r),s=t&&t.api.isShown(),f=F(i,{animate:!0,select:!0,time:250,arrange:"lens",resize:!0,easing:"cubic"}),l=V(f),c=[],d=[],h={};u.forEach((function(t){var n,r={},i=[],o=a(t,"d");if(o&&o.ids){M.ensureObject(o,!1);n=e.privateGetItem(o.ids)}s&&o.open&&delete o.open;if(!n)throw new Error("[combo().combine] function must be passed valid combo definitions");n.forEach((function(e){if(!e)throw new Error("[combo().combine] function must be passed valid ids");if("node"===e.type){if(e.parentId)throw new Error("[combo().combine] nodes cannot be combined if they are already in a combo");if(h[e.id])throw new Error("[combo().combine] nodes should only be in one combo");h[e.id]=!0;r[e.id]=!0;i.push(e)}}));if(!Object.keys(h).length)throw new Error("[combo().combine] function must be passed at least one node id");var u=A(o,i);l.mergeItem(u);X(l,$(i),u.id,[],[]);var f={dx:0|(o.dx||0),dy:0|(o.dy||0)};l.layoutComboWithOffset(u.id,f);c.push(u);d.push(u.id)}));f.select&&l.selectItems(d);n.trigger("prechange","combine");l.applyUpdates((function(){e.applyRevealedLinkOffsets(c);e.privateSetAllItemsInComboDirty(d);T(o,d)}))}function k(t,n,r){var i=F(n,{animate:!0,time:250,full:!1,select:!0,reposition:!0}),o=Z(t).filter((function(e){return B(e,"node")}));if(0!==o.length){var a=[];o.forEach((function(t){var n=e.privateGetItem(t),r=i.full?te(C(n).nodes):n._combo.nodeIds;a=a.concat(r)}));N(a,null,i,"uncombine",r)}else T(r)}function C(t,n,r){void 0===n&&(n=null);void 0===r&&(r=!1);var i=t._combo,o=n||{nodes:[],links:[]},a=i.nodeIds,u=a?e.privateGetItem(a):[];function s(e){if(e._combo){C(e,o,r);r&&("node"===e.type?o.nodes.push(e):o.links.push(e))}else"node"===e.type?o.nodes.push(e):o.links.push(e)}e.privateGetItem(i.linkIds).forEach(s);u.forEach(s);return o}function S(t){var n=null,r=e.privateGetItem(t);r&&r._combo&&(n=C(r,n,!1));return a(n,!0)}function R(e,t){var n=Z(e),r=F(t,{type:"all"});if(!r.type.match(/^(node|link|all)$/))throw new TypeError("[combo().isCombo] opts type property should be either 'node', 'link' or 'all'");return n.some((function(e){return L(e,r.type)}))}function L(t,n){var r=e.privateGetItem(t);return!(!r||"all"!==n&&n!==r.type)&&!!r._combo}function B(t,n){var r=e.privateGetItem(t);return L(t,n)&&!r.parentId}function G(t,n){var r=F(n,{parent:"top"});if(!Array.isArray(t)&&!b(t)&&"string"!=typeof t)throw new Error("[combo().find] Incorrect argument passed");var i={top:function(t){var n=e.privateTopParentId(t);return{parentComboId:n,isCombo:B(n,"all")}},first:function(t){var n=e.privateGetItem(t),r=n?n.parentId:null;return{parentComboId:r,isCombo:!!r&&L(r,"all")}}},o=i[r.parent]?i[r.parent]:i.top,a=!Array.isArray(t),u=Z(t).map((function(e){var t=o(e);return D(t.parentComboId)||!t.isCombo||t.parentComboId===e?null:t.parentComboId}));return a?u[0]:u}function O(t){return e.privateGetAncestryIds(t).length}function Y(e,t,n){(t||e.getChangingComboNodeIds()).sort((function(e,t){return O(t)-O(e)})).forEach((function(t){var r=e.getNodeComboProperty(t),i=(e.getNodeProperty(t,"oc")||{}).w,o=e.layoutCombo(t),a=r.open?o-i/2:0;(!n||n.resize||a>0)&&e.adjustForNewComboSize(t,a,!!n.adapt)}))}function z(t,n){var r={};if(void 0===t)throw new Error("[combo().transfer] function must be passed a valid transfer destination");var i=t?c(e.privateGetAncestryIds(t)):{};e.privateGetItem(n).forEach((function(e){if(!e)throw new Error("[combo().transfer] function must be passed valid ids");if(i[e.id])throw new Error("[combo().transfer] cannot transfer a combo inside itself");"node"===e.type&&(r[e.id]=e)}));return r}function V(n){return Pv(F(n,{comboLinkStyle:r().comboLinks}),e,t,f)}function W(t,n){var r={},i={};e.privateGetItem(e.privateNeighbourLinkIds(n)).forEach((function(t){var n=t;if(n._combo){i[n.id]=n;e.privateGetItem(n._combo.linkIds).forEach((function(e){r[e.id]=e}))}else r[n.id]=n}));K(i).forEach(t.transferComboLinkToCorrectParent);t.transferRawLinksToCorrectParents(K(r))}function X(e,t,n,r,i){var o=Object.keys(t),a={};e.transferNodesToCombo(o,n);var u={};K(t).forEach((function(e){u[e.id]=e;e._combo&&C(e,null,!0).nodes.forEach((function(e){u[e.id]=e}));e.hi||r.push(e.id);e.parentId&&(a[e.parentId]=!1)}));e.getIdsToRemove().forEach((function(t){var n=e.getProperty(t,"parentId");n&&(a[n]=!1)}));W(e,Object.keys(u));r.length>0&&!e.getProperty(n,"hi")&&(r.length=0);Object.keys(a).sort((function(e,t){return O(e)-O(t)})).forEach((function(t){if(!e.removingItem(t)){var n=!1;e.forEachChild(t,(function(t){e.getProperty(t,"hi")||a[t]&&!1!==a[t]||(n=!0)}));if(!n){a[t]=!0;i.push(t)}}}))}function U(e,t,n,r){N(e,t,n,"transfer",r)}function N(t,r,i,o,a){var u=F(i,{animate:!0,time:250,select:!1,arrange:"lens",resize:!0,easing:"cubic",reposition:!1,adapt:!0}),s=null;if(r&&(!(s=e.privateGetItem(r))||"node"!==s.type||!s._combo))throw new Error("[combo().transfer] comboId must be the id of a combo node or null");var f=V(u),l=z(r,Z(t)),c=Object.keys(l),d=[],h=[];u.select&&f.selectItems(c);X(f,l,r,d,h);Y(f,null,u);var v=[];if(s){var g=f.getNodeComboProperty(s.id);g&&!g.open&&v.push(s)}n.trigger("prechange",o);f.applyUpdates((function(){d.length>0&&e.show(d,!0);h.length>0&&e.hide(h);e.applyRevealedLinkOffsets(v);T(a)}),(function(){u.animate&&e.applyRevealedLinkOffsets(v)}))}function j(t){var n=Z(t),r=e.privateGetItem(n).filter((function(e){return null!==e})),i=V({animate:!1});function o(t){var n=t._combo;e.privateGetItem(n.linkIds).forEach((function(t){var n=t;r.push(n);n._combo&&e.privateGetItem(n._combo.linkIds).forEach((function(e){r.push(e)}))}));n.nodeIds&&e.privateGetItem(n.nodeIds).forEach((function(e){var t=e;r.push(t);t._combo&&o(t)}))}r.forEach((function(e){e._combo&&o(e)}));var a=$(r);e.privateNeighbourLinkIds(Object.keys(a)).forEach((function(t){r.push(e.privateGetItem(t))}));i.removeItems(r.map((function(e){return e.id})));i.applyUpdates()}function H(t,n){var i=Z(n);(i=i.filter((function(t){l(t);var n=e.privateGetItem(t.id);if(n&&t.type&&t.type!==n.type)return!1;var r=n,i=t;r&&r.oc&&(i.oc=re(r.oc,i.oc));if("node"===t.type)return!0;if("link"===t.type){if(!t.id1||!t.id2){if(n)throw new Error("You must specify both id1 and id2 for a link");return!1}if(n&&"link"===n.type&&(n.id1!==t.id1||n.id2!==t.id2))throw new Error("You cannot change the ends of an existing link. Remove the existing item first");return t.id1!==t.id2||e.options().selfLinks}throw new Error("The type of the item should be specified")}))).forEach(t.mergeItem);var o,a=r?r().comboGlyph:null,u=0,s=[],f={};try{o=ge(t.preMergeDetails().itemsToMerge,(function(e){return[t.getParentId(e.id)]}),(function(e){return e.id}))}catch(e){throw new Error("A node's parentId can't refer to a child")}o.forEach((function(n){var r=e.privateGetItem(n.id);if(r&&P(n,"parentId")&&r.parentId!==n.parentId)throw new Error("You can't change the parentId of an existing item");if("link"!==n.type&&!(void 0===n.parentId||r&&n.parentId===r.parentId)){if(n.id===n.parentId)throw new Error("A node can't be the parent of itself");if(null!==n.parentId){var i=t.getItem(n.parentId);if(!i||!i.id){t.setProperty(n.id,"parentId",null);return}if("link"===i.type)throw new Error("The parentId of a node can't be a link");if(!i._combo){x(i,a,void 0);t.mergeItem(i);s.push(i.id)}void 0===n.x&&t.setNodeProperty(n.id,"x",i.x);void 0===n.y&&t.setNodeProperty(n.id,"y",i.y);n.parentId=i.id;t.setNodeProperty(n.id,"_offset",{x:0,y:0});(f[n.parentId]||(f[n.parentId]=[])).push(n.id);u++}}}));Object.keys(f).forEach((function(e){t.transferNodesToCombo(f[e],e)}));t.transferRawLinksToCorrectParents(o.filter((function(n){if("link"===n.type){e.privateGetItem(n.id)||void 0===n.parentId||(n.parentId=null);var r=e.privateGetItem(n.id);if(r){var i=r.parentId;i&&"link"===t.getProperty(i,"type")&&t.updateComboLinkProperties(i)}else if(0!==n.id2.indexOf("dummyEnd"))return!0}return!1})));s.forEach(t.layoutCombo);u>0&&t.updateComboNodeGlyphs()}function _(e,t){var n=V(F(t,{arrange:"none",resize:!0}));H(n,e);return n.preMergeDetails()}function J(t){var n=[];t.forEach((function(t){var r=e.privateGetItem(t.id),i=t.count;if(r.g){var o=!1,a=r.g.map((function(e){if(e.p===r._combo.g){o=!0;return re({},e,{t:i})}return e}));o&&n.push({id:r.id,g:a})}}));n.length&&e.privateSetNonImageProperties(n)}function q(e,t,n,r){return e.filter((function(e){return n[e.id]||!r[e.id]&&!e[t]}))}function ee(t,n,r,i,o){Object.keys(r).forEach((function(r){var a,u,s,f=e.privateGetItem(r),l=C(f),c=q(l.links,n,i,o);if(f._combo.nodeIds){s="nodes";a=(u=q(l.nodes,n,i,o)).length>0}else{s="links";a=c.length>0}if(s){if(a&&"hi"===n){var d={id:r,links:c};u&&(d.nodes=u);t.combos[s].push(d)}a!==!f[n]&&(a?i[r]=!0:o[r]=!0)}}));return t}function ie(t,n,r,i,o){e.privateGetItem(t).forEach((function(t){if(t){var a=t[i]===o;if(t._combo){var u=C(t,null,!0);u.nodes.forEach((function(e){if(!!e[i]===o){a=!0;n[e.id]=!0}}));u.links.forEach((function(e){if(!!e[i]===o){a=!0;n[e.id]=!0}}));a&&(r[t.id]=!0)}for(var s=e.privateGetParentItems(t.id),f=s.length-1;f>=0;f--){var l=s[f];if("node"===t.type&&a&&"hi"===i||!!l[i]===o){r[l.id]=!0;a=!0}}}}))}function oe(t,n,r){e.privateGetRawItems().forEach((function(e){if(be(e.id)&&(!e.bg||t[e.id])){delete t[e.id];delete n[e.id];e.bg||(r[e.id]=!0)}}))}function ue(e){return"node"===e.type?"nodes":"links"}function se(t,n,r){var i={toShow:[],toHide:[],shown:{nodes:[],links:[]},hidden:{nodes:[],links:[]},combos:{nodes:[],links:[]}},o={},a=Q(t),u=Q(n),s=t,f=n;if(r&&r.all){s=r.all.shown.nodes.concat(r.all.shown.links);f=r.all.hidden.nodes.concat(r.all.hidden.links)}ie(s,a,o,"hi",!0);ie(f,u,o,"hi",!1);i=ee(i,"hi",o,a,u);e.privateGetItem(Object.keys(a)).forEach((function(e){if(null!==e){i.toShow.push(e.id);i.shown[ue(e)].push(e.id)}}));e.privateGetItem(Object.keys(u)).forEach((function(e){if(null!==e){i.toHide.push(e.id);i.hidden[ue(e)].push(e.id)}}));return i}function fe(t,n,r,i){var o={toShow:[],toHide:[],foreground:{nodes:[],links:[]},background:{nodes:[],links:[]}},a={},u=Q(t),s=Q(n),f=t,l=n;if(r&&r.all){f=r.all.foreground.nodes.concat(r.all.foreground.links);l=r.all.background.nodes.concat(r.all.background.links)}ie(f,u,a,"bg",!0);ie(l,s,a,"bg",!1);i||oe(a,u,s);o=ee(o,"bg",a,u,s);e.privateGetItem(Object.keys(u)).forEach((function(e){if(null!==e){o.toShow.push(e.id);o.foreground[ue(e)].push(e.id)}}));e.privateGetItem(Object.keys(s)).forEach((function(e){if(null!==e){o.toHide.push(e.id);o.background[ue(e)].push(e.id)}}));return o}function le(){var t=e.privateGetRawItems(),n={};t.filter((function(e){return e._combo})).forEach((function(t){var r=t._combo;n[t.id]=a(t,"d");n[t.id]._combo=a(r);"node"===t.type&&(n[t.id]._offsets=a(r.nodeIds.map((function(t){return e.privateGetItem(t)._offset})),!0))}));n.nodes=[];n.links=[];return n}function ce(e,t){var n=e.combos||{},r=e.items||[],i={},o=[],a={};r.forEach((function(e){var t=e.id;if(n[t])throw new Error('Item "'+t+'" specified twice');if(void 0!==e.parentId&&null!==e.parentId){var r=n[e.parentId];if(r){var i=r._combo.nodeIds||[],o=r._combo.linkIds;i.indexOf(t)<0&&o.indexOf(t)<0&&(a[t]=e)}else a[t]=e}}));Object.keys(n).forEach((function(e){var t=n[e];if(t._combo&&("node"===t.type||"link"===t.type)){var a=t._offsets;delete t._offsets;if("node"===t.type){t._combo.nodeIds.forEach((function(e,n){i[e]={parentId:t.id,_offset:a[n]}}));if(!("g"in t._combo)){t._combo.g=void 0;if(t.g&&t.g.length){var u=t.g[0];u.t&&w(u.t)&&(t._combo.g=u.p)}}if(!(t.oc&&"w"in t.oc)){o.push(e);t.oc=t.oc||{};t.oc.w=0}}t._combo.linkIds.forEach((function(e){i[e]={parentId:t.id}}));var s="node"===t.type?p():m();ne(s,t._combo);t._combo=s;r.push(t)}}));e.items=r.filter((function(e){if(a[e.id]||"link"===e.type&&(a[e.id1]||a[e.id2])){a[e.id]=e;return!1}i[e.id]&&ne(e,i[e.id]);return!0}));T(t,{comboIdsToLayout:o,itemsToMerge:a})}function de(e,t){function n(e){return 0===e.indexOf(Wi)}var r={},i=[];e.combos.nodes.forEach((function(t){var n=t.nodes.map((function(n){var r=ne({parentId:t.id,_offset:{x:n.x||0,y:n.y||0}},n);e.items.push(r);return n.id})),o=p();o.nodeIds=n;r[t.id]={type:"node",_combo:o,oc:{w:0}};i.push(t.id)}));e.items.forEach((function(e){if("node"===e.type&&r[e.id]){ne(e,r[e.id]);e._combo.g=void 0;if(e.g&&e.g.length>0){var t=e.g[0];t.t&&w(t.t)&&(e._combo.g=t.p)}}"link"===e.type&&n(e.id)&&ne(e,{_combo:{linkIds:[]}})}));T(t,{comboIdsToLayout:i,itemsToMerge:{}})}function he(e,t,n){var r=V({animate:!1});t&&t.comboIdsToLayout.forEach((function(e){r.layoutCombo(e)}));var i=e.combos;i&&i.links&&i.links.length?H(r,i.links):t&&H(r,K(t.itemsToMerge));r.applyUpdates(n)}function ve(e,t){i=0;if(e){var n=e.combos;n&&(n.links&&n.links.length||n.nodes&&n.nodes.length)?de(e,t):ce(e,t)}else T(t)}function pe(e){var t=V({animate:!1});e.forEach((function(e){t.setComboMinimumSize(e)}));t.applyUpdates()}function me(e,t,n){Ae(e,!0,t,n)}function ye(e,t,n){Ae(e,!1,t,n)}function be(t){var n=e.privateGetItem(t);return!!(n&&n._combo&&"node"===n.type&&n._combo.open)}function xe(e,t,r){var i=F(t,{animate:!0,time:300,name:"lens",resize:!0,easing:"cubic",adapt:!0});i.arrange=i.name;if(i.resize||"none"!==i.name){var o=Z(e).filter((function(e){return L(e,"node")})),a=V(i);Y(a,o,i);n.trigger("prechange","arrange combo");a.applyUpdates(r)}else T(r)}function we(e,t,r,i,o){var a=F(t.arrange,{animate:!0,time:300,name:"lens",resize:!0,easing:"cubic",adapt:!0});a.arrange=a.name;var u=V(a);if(a.resize||"none"!==a.name){var s=Z(e).filter((function(e){return L(e,"node")}));Y(u,s,a)}n.trigger("prechange","arrange combo");u.adjustTopLevelLayout(t.layout,r,n,(function(e){i(e);u.applyUpdates(o)}))}function Ae(r,i,o,a){if(!t||!t.api.isShown()){var u=Z(r),s=F(o,{animate:!0,time:300,
easing:"cubic",adapt:!0,updateGlyph:!1}),f=e.privateGetMaxLabelLength(),l=i?"open":"close",c=V(s),d=Ie(u,i);if(d.length){d.sort((function(e,t){return O(e.id)-O(t.id)})).forEach((function(e){var t=Ee(e,i,f);c.setNodeComboSubProperty(e.id,"open",i);c.setNodeComboSubProperty(e.id,"e",i?1:t.sizeRatio);c.adjustForNewComboSize(e.id,t.sizeDiff,s.adapt)}));n.trigger("prechange",l);c.applyUpdates((function(){s.animate&&i||e.applyRevealedLinkOffsets(d);e.privateSetAllItemsInComboDirty(u);T(a)}),(function(){s.animate&&i&&e.applyRevealedLinkOffsets(d)}))}else T(a)}}function Me(t){var n=e.privateGetItem(t);if(n)if("node"===n.type&&n._combo)Ae(t,!n._combo.open);else if(n.parentId){var r=e.privateGetItem(n.parentId);r&&"node"===r.type&&r._combo&&Ae(r.id,!1)}}function Ie(t,n){return e.privateGetItem(t).filter((function(e){return e&&"node"===e.type&&e._combo&&e._combo.open===!n}))}function Ee(t,n,r){var i=e.privateGetCanvas(),o={include:!1,maxLength:r},a=ac(t,i,o,!0).radius,u=ac(t,i,o,!1).radius;return{sizeDiff:n?a-u:u-a,sizeRatio:0===a?1:u/a}}function ke(e,t){e.combos=t.combos;e.shown={nodes:t.shown.nodes,links:t.shown.links};e.hidden={nodes:t.hidden.nodes,links:t.hidden.links}}function Ce(e,t){e.foreground={nodes:t.foreground.nodes,links:t.foreground.links};e.background={nodes:t.background.nodes,links:t.background.links}}var Se={api:{combine:E,combineNodes:E,uncombine:k,info:S,isCombo:R,find:G,transfer:U,open:me,close:ye,isOpen:be,arrange:xe,reveal:function(t){return e.privateReveal(t)}},internalUse:{hide:function(e,t){return Se.internalUse.filter([],e,null,t).toHide},show:function(e){return Se.internalUse.filter(e,[],null,{updateGlyph:!0}).toShow},filter:function(e,t,n,r){var i=se(e,t,n);r.updateGlyph&&J(i.combos.nodes.map((function(e){return{id:e.id,count:e.nodes.length}})));n&&ke(n,i);return i},foreground:function(e,t,n,r){var i=fe(e,t,n,!!r.foregroundOpenCombos);Ce(n,i);return i},preMerge:_,preDelete:j,serialize:le,preLoadUp:ve,postLoadUp:he,dblclick:Me,ensureMinimumOpenComboSize:pe,arrangeAndLayout:we}};return Se}var Xv={"Arrow-ne.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAMAAABF0y+mAAAARVBMVEUAAAAAruoAruoAruoArukArOsAre8AruoArusAr+0Ap+IArusAruoAruoAr+oAruoAr+oArusArusAreoAruoAruoArurGDVJ2AAAAFnRSTlMA7PlILTQSzUApCPry5LWHbmZYV56dONEurAAAAHFJREFUKM+90DkOgDAMRFGzZQOyQu5/VCRiVwzp4LdPsqyhj3MpG6vedBprreOu/RFiNg6pZKijhToaqaOBgK6MJ8BlY/TAhsppbNt9eYc2zG0NbPyzwtbUQmM1yEQLMtGETHIPA81sMKXFsLJhtfRjF/wgC8yO94CNAAAAAElFTkSuQmCC","Arrow-nw.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAMAAABF0y+mAAAAPFBMVEUAAAAAruoAresArusAruoAqvEArusAresArusAp+IArekAruoAr+oAruoAr+oAruoAruoAr+oAresArurF+043AAAAE3RSTlMA7jL5SBJYQSwI8+TOzLWeh29nYHqaQgAAAHNJREFUKM+9z8kKwDAIRdHXIVOnDP7/v7Yk2QRU6KK9Sw+I4peMd7aEYRSczSle574Q0bJiyFGPMVjFkBVDUgxRMVwdt5nBk3oTo3vdufHafp8nTk2/hVXfjFdXTVBbTdDymKgBUBRv1St6GIgqG+ANPuwGG+MKJZ7NkmMAAAAASUVORK5CYII=","Arrow-se.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAMAAABF0y+mAAAAP1BMVEUAAAAAr+oAruoAruoAruoAruoAsOkAr+sAreoAr+sAruoAp+IAr+sAruoAruoAruoAruoAruoAreoA//8Arur2XPH+AAAAFHRSTlMAL/nsSOsSaldAKgjx48/MtJ2GARaOxv8AAAB2SURBVCjPvcs5EoQwEENRYYxXGDbd/6yzdYCrmiaCH+qVcGehGPYaunMjT7UMNLS71r7RaqiPx2/fqHcJiooxQ1ExFmj6Nwao+jO3Q9Pxa5wARaUZio6Ci4LeCa6GcTOM0TAmw5gVc9O8rFtMuTZWP0sJOx7oDS3DCuS8EfUUAAAAAElFTkSuQmCC","Arrow-sw.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAMAAABF0y+mAAAAQlBMVEUAAAAArusAruoArukAruoAruoArusAsvEAruoArusArusAr+0AruoAruoAr+oAruoAruoAr+oArusAn98As+YAruriSELzAAAAFXRSTlMA+Ugt7usyEc1XQCny5LWeh25mCArMFThRAAAAc0lEQVQoz73JSQ6EMAwEQAdmyMYO/f+vIpClFiLxDepa8qXW16/7BV8/gPs8/LNxrajNOFmb+kl0ujxK0OVRhi6PPM7l3blreTcDzu2LJwGKR6Nez6NJ0zWFnGHsAmMjjE0wdk9xmacxDI5b4HOK6ybvOgBebguIlLvi1QAAAABJRU5ErkJggg==","Arrow.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAABACAMAAAB4KUSAAAAAflBMVEUAAACVlZWRkpWSkpaQkpWRk5WQkpWSkpWQkpaPj4////9wcHCRkpX9/f3S09TU1NWztLaSkpKGhoaPj492dnb39/empqahoaGJiYmDg4NycnLt7e3j4+Pc3NzExMS6urqysrOXl5eLi4t8fHz7+/vx8fHg4OCrq6vo6OjGxsZuZdNVAAAACnRSTlMAGLS4bEXLqI8QHTDIvAAAAPxJREFUSMft1rlSw0AQhGEZMMe21rJ1opV1IWzD+78gVaNIimaagnKgP9vgizqYjbb+ptdHbfuF28X61vCQaCrj5zX0TtMhfrgv6Fl49CSsBxaiY2FIKJgC+ZmEmBoSIi1IiNOnGb5DqjwJMbAQHQtDwkGZ0wI/MCdzUlDmpKDMSUGZUw0zLBpYiI6FIaGgzKmDJ8zlwFRVVVneem+AUri4OT0Ms+ytcGozgam3wbRxHaTWBMfCuSIXWBrgeJNXKTAv9PDqpBbSt/nM+VpgZoauh/Rlhhdx49kM3Yi6b5hTfm39nX8e/gcOR03xCr7F6l6iRfsnbbtoa+u3/QB6AlluQsKWJgAAAABJRU5ErkJggg==","Hand.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAABACAMAAAB4KUSAAAAArlBMVEUAAACVlZWRkpWSkpaQkpWRk5WQkpWSkpWQkpaPj4////+RkpVwcHD9/f3S09TU1NWztLbKysqzs7Px8fHv7+/u7u7p6emWlpZzc3PS0tKDg4P5+fnCwsKioqJ3d3f19fXm5ubc3NzY2Ni5ubm2trapqambm5uRkZGLi4v8/Pzz8/Pr6+vi4uLGxsa8vLyvr6+Ojo6AgIB4eHh0dHTo6Oiurq6lpqd9fX2Hh4d7e3sYjczTAAAACnRSTlMAGLS4bEXLqI8QHTDIvAAAAWNJREFUSMft1dduwjAYhmE66HA+QzMgk+zF3tDe/43VQqlQzIGdVEgc5JV+Owd5pESy5F7Xffp4ka1fc0+KfDwcDGU6KW88pESmgfLcQdbhmB8PLaBtAbDshtDwEh+lVsJPPKMBtHcAHJe4DoCdLQ3HezimNWFPE8t0sB/LwgzKlAwvcEimCjJZaGLJ1nU1SxSBJFSgslWrRgVQhC0h/HELWC7CDcwWMCJkAYs2h+wrR8DdYLhKhkVzSBMLrOZQBUqzgn8TGxJwi5SS+AJriWAAuGxLG0Md0NlGi6aQOjhd3rM5OBdAYle/Rzm4gC84chn8OblNxUYA3W9sprdwjUwASbiHdgtNeCJIPCDmHf1BJIQ0x3nGQR0IhJDMtshpHcZwiBiSCPDqcIVcBpIU1nJkXIvOWElBOgHXNhDBSqa7mjPn0rcVnenX3Ee/kR8Xal8yKRz8VKR779Xqv8r21Ovq+m+/Ii1ihjYVGpMAAAAASUVORK5CYII=","Nav-Control-Head.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGgAAABoCAMAAAAqwkWTAAABDlBMVEUAAACRkpWWlpqRk5WRkpWRkpWRkpWRkpWRkpWOjpSRkpWRkpWRkZORkpWRkpWRkpWRk5WRkZeRkpWRkpWSkpWRkpWRkZaRkZaRkpWRkpWRkpWQkZWRkpWRkpSRkpX///8ArurQ0dORkpX8/v8Jsev7+/y/6/rY2NqfoKLq6usiue3f4OHg9f1TyfH4/f7Hx8nT1NWurrHp+f2UlZfw8fFNxvHz8/T29vfm5ufi4+S8vb6qq62Wl5qW3vfu7u+3t7nl9/2s5fiT3faJ2vVizfIpu+2am57y+/4RtOzE7fpr0fPc3N2xsbSnqKqD2PUZt+y36fmN2/bCwsSkpad+1vRGxfCk4/hy0/Q8we/Kysxfm/hGAAAAH3RSTlMA+QdRsCLmzbkMj+wZ8dWdeBRpWklCNCzcwXI8h35gX/9DngAABnpJREFUaN61mmlD2kAQhjfcyOl91oE3pAnFChTKXdFK8a7Wq/r//0g1tZiwTDZYeb7y4WF2J7Ozk4gpCC9tZGLr0bVEKrIWXQ/NbW/Oi/cmsLwV1SCTCC2svp9lfiFmS6xqJ3/WLu41mvViq2Q+9i96eCKSWQq8RyzBkAbUuuW2QTINs2M9u+ZW/jeYDwmg1y8ZxFPPdwFEg/+j2dKAqmmQir2yBaQX37iC8WdNv0i+0M0bYO1NUQUjqHXq5J9SFwiFp9WEQ0Cf0fAqC9qH6dZvUYNVoqkxyjVEpwgqkAHKbArsnpzs8mnRRSroe9miGLaJ4+Ayl7u84rOiDMz5W77NFKpN4viVs/nssVNDxOJCzZKGa93TY/ONNzUuEFWX220NeVJ4bL4Ti1HFmiolFlAzlR61qY+ItymIWkntUZv0DtaSgmdZwxmxHL461KY+onxGrKRQ8e1R71MswBXrCMpKj3/TBeYYUQh9X55CwZepMcTkGrEBy/Dj+bS/88mXqYRUeNIGaTX+7Ll3eoicpgPeVEZU3qZA2uNB/XLs8rhMx0d86nWRlURZVInlwO1xm66IZa+mjS9e2Gvh6N7tcZsOiKeMkJRx18SzU3B63KbCPvEY1ljmLdsZx3M78kimQ+/THWuufIih4t3kfH9Kh8HRWIp8fkqFb+RNF4vO1JYCklU7E7LraEdXNixIu3YoT7PiwrFLqxgaNCvOEB2J5lCmmaFbWPlXFBKo0+woj6p4EF2aIXUkAlIqzITuSzrEtVqTZkn+pQ4tTSqn+v4uvYGjLyTTQILLOf3Xca7we5LKqBdbreKeMbkk3j2VqY8kYcG+UUfRGvd8zj1zJ/n3zvIvmEWDO7XkotTBxnNLgp4ueSYeAA0z76BSHC8/A65bNhGyk7vKeHKn5KSYH6M0ZvrE9eVNpOyj9ZrxuEWlvMTYNfpHjjMNkRQigwrjyTn3tZWfwJkrpt85ztTFshDraDOegWuYMJGWK7c/caYOFoRIoDHZ83XXebvPT6bpSm/O9Ig5EUeP88iJIFMiP6YzhEQYltpDZp7D8GNqY12swlJ7mnmWIvkwFREVm7gYPXCMx145fu140/2okcSaWB49rwesh1q8yCTG5Gz5GoiIIM7pL19ZD5V4UYU8TN9HpUFzHBIPTDftWyRvwc+RKCE2R+f46WvI46W+PcXS0c+c9I/riIgV3IyqvGxS79GZh+fuNevSzufoY4Ez1XlRi/f8+DL6o4iKJIakNOm8qOHDQyXEhNBgqE0lNhd0Hx6qICNEGkVSmppsYfDjoWtkhQjBpMmmE3VIpiugQ8ZD5wgKsYUyTTZdOi4qhqneoROnR26DttEnxnToXLyKcuHuOI8BBIRdvhnTwNUDVRQeumQ81P57c0mgzphuyYZZvUqD3Dy4PPJ9IoQKTTQVdsb7R9OhaenSNILxUBVL9tBRnjWdXD57DuSOvN42bUtp1BRLbdCD5DFqmj26C2OoS8364eB2h5sdGDoxnJye3ss/lv5dLtNo0yzpIPtvftahGWL0kBQ2SfQMmh0mYq9zE5Nmx/nr7GRxlrflOlKjcXEgMsN06GDLOb+v0oxo1LR5IRwhFWk2XGPOPSE+J092bgeH0njr6vT0QBVQT0s6RfEISuTBQeH5fDohJ7sDu9PxHhP0x6fsQc+J3U5BPt13Xzrb316eNiJx4SaGsmLSaZskT66w6zlSXRTymHiPOAavHYvLY7PvNdiKCYksbgz+hYHT5PYc66ynBS0sZGJ8bT26dJlsj/rlRNPCtphAMsKXvBNnv+fyfGYD0s+RYd6HoVckCbnfu5I8zAaluXdiWQzrapON2lNBalVwZGA1edNUnjNoy4InhAuDN03hadcQFB4E1nGhjkntKfWwIDyJr8NS7ZPaYwIbQkEghKEi95SePLRFoSaDnsmb1B6jA21J+OED0DFYk8pTvEFkRfhjOYGbPc5k390HrKdSQ2xe+CW5jhr3LciX04ev7Lm6VwWyYho+MF+3KL9tWdsU0xGOAedTdSy6yX2to/4CCect39HkLSAWFm8hvhEBuqZBahqPQ2B9SbyVwEIE6HXauncwlSqAmGJzVKrFGACrY9aZjWk9VmtAKrMi/ptkNo1nWb/sfvPRbFeuqz0AWigYEO9DeCGUgM3Quqie96vdG6sHm/RcMC7eldXtrVBawyupaCYbTIrZEEiGV5aDi0ubq+F5MRV/AMrHP3wtA6vJAAAAAElFTkSuQmCC","Nav-Control-Short-Zoom.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAACACAMAAACMX59YAAABU1BMVEUAAACOjpiRkpWRkpWSkpWRkpWRkpWQkJWRkpWRkpWRkpWRkpWRkpWRkpWQkpWRk5SRkZWQkZWRk5WTk5WOjo6RkpWRkpWRkpWRkpWRkpWRkpWQkJWRkpaRkZaRkpWRkpWRkpWRkpWRkpWRk5WRkpWRkpWRkpWRkZWOjpSSk5aRkpWRkpWRk5WRkpWRk5WRkpWRkZWRkZWQkpT///+RkpUAruoiue2Q3Pas5fjFxceVlpj6+vqkpacRs+yhoqT9/v78/Pzx8fLk5OWur7Gen6H8/f7q6+u+v8D39/je3+DW19jOzs+7vL6nqKqcnaCXmJvR0dLIycq4ubu2triwsbOrq66am51+1vVo0PPo6OnCw8Wys7XS8fux5/nt7e4qvO4LsuvLzM3w+/7o+P3Y8/zH7vu56fma3/f09PROx/Ezv+4Zt+wEsOvg4OHa29yX3vY9we9ZHrf1AAAAM3RSTlMABfp2HfA8IWdV6+Cij09JQjArGArm2dLFYFo0JRP057CpmG7Xy5WADvb2vLZ8cKeJgoGIgHZSAAADoElEQVRo3u2Y2VfaQBSHQyCCCIgiitRq1bZ23+anLSFlF1BZBBG3Vu2+L///U0NJThNT7kx8as/J9wTk3C+ZO3NnbpD+aXyBYDDou2xwLHpjETry3Ep6xnX41bUl6LRyuQp0lGjA3d39i4DWKWWZTvZoZx+QH7l4ikAKKB8xC6ddYHZaNH5qCZUtdoEjDbcnBeMV9OrMQbYBWcgQDGNvk/2NDG6PCeTvBk6MeAc1TFzlCh4jl7XEvH5t+ZIvI8KdgDsoWUIOvq4fWr4WVVzhCKLYswS8WNd5b0vDNTp+RkGV/eHZQPDU8kNdRZAUpLHPKAHr4j4piGCXFmwhRQomUKUFWVWmauIW1DwtYBqmCME0NDbk6dmGzpeB4Png09mBYT5BjBCMYd+8tQPjQRqYFxEcOgWfRARTaLLffHAKDoZX9jBOCBLoG6v+4MtznfNB5Png08ahUWFNkBWp4CM9C/k2yIK8h21acIRZicKPLi3IYIWuZqh1SrBZQVwiuYcOJdg2RkCthPbHC/vBS0sl5DAvcbhm21EO9QVk2SGPMcc9KYOKraLfvrXVsnxF4jIOYyodlFT4JQH8MJ/BzpaKm5IkaGhk2QUKGZjxfNKLaG3bT5fvOch+SZjpFJDrnDKD4o4GzI5JbpifA9DqHWcyxycVABMPXHc68UgSBuFrMSKcIBDz64wvSP8zMwtXpgKXbRSvhpYnMGwUb066l0wvywDUSlNrQSe8dstVeCIC4GS7mGc6hepgISmrLp5iMgz1uGirxB6QEu5WQ0Cv6CjGCpKCreYq8Io5qZcRpk5m/o5S2MOSwCiCinl/p6GMu3zBXXTZKOoVhPgD6NfZSL5D4fWqc9hlBGWs8Q6WVoESlLBEr6cVZBhJDnFun0fSQZQ+nft5WlDCDbIIUGY0Wdyhq6DGhrz7uWHjs3lI95GgDiUzh2/O1y/ywszigojg/bqDHyKCVXMIb746BO+GV1rkEGLosSEvP2/YOPtgJlH2kd12hdFUcZ186VNQpAU7iHBapF1asI80p5qbjKKIxRlS4EviGyVoYEWieQBtk0ihKgc5At8sOmwUhSai/MYCKLHRb98CJ9wTtKujptBsNGkeov23ROYzwLgkgi8CZAqOCSxDTkuC3Jehbdn3kZ02ki4avbHrgPbq1Ex+qdYGlhOSC3yrSQD9cqNW6zZVAKm4+7/ClsMwuB4lsk+xMBkKhebjCcnDw8PDw8PDw8PDw+My/AIFurvICRtjawAAAABJRU5ErkJggg==","Nav-Control-Zoom.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAEgCAMAAAAzNIUCAAABQVBMVEUAAACQkpWRkZaTk5aRkpWRkpWSkpWRkpWQkJWRkpWRkpWTk5WRkpWRkpWIiJmQkJaSkpaRkpWQkpSRkpWRkpWRkpWSkpSRkpWRkpWRkpWRkpWSkpaRk5WRkZGRkpWRkpWRk5WQkZWRk5WRk5aRk5SRkZX///+RkpWxsrTHx8kArurQ0dP9/f4iue36+vr29/fY2drd3t/4+Pjx8fLo6OmUlZj8/PyQ3Pbl5ues5fj09PSrrK7r6+zi4+Tb3N3U1NbNzc+cnZ8Rs+y3t7mgoaTu7u/k5OXa29zW1tjCw8S7vL6lpajf4OHS09WZmpyXmJvv7/Ds7e3KyszExcawsLOjpKaB1/WoqKuen6EqvO6/wMLX8vxoz/NPyPEKsuvw+/626Pl31PRq0PMZt+zO7/uj4veb3/eX3vaP2/aO2/ZkzvKuoX/yAAAAJnRSTlMAmGYM/fBd+iHZdRX26QUvt6KIgFVMHODIj0M8KgfFr2w00Kc6nNlHBgsAAAT9SURBVHja7ZxpV9pAFIbTyiII7mvVql3mRTMGAsRSwYWCoqC4r612X///D+hwIKfR6A04nlNp5/kky33IZO5cvORMtAdNd6eg+67BQ2OjEQiCzx4FOloO7xqIQpAvFk8h8I91tvbp4QhQ2c8YTGCkV7NAsL+Foxh+ChymmYO1AhDqaTa+J4pTk10jU0HkSXPxM34cxpkLo4zgUDPxnVEUOLuJA0ReeMdPjiLG2c2cY6TLUzCAI8MR8/694wE/RJ/nBESw7gg5vpz75Hi4a/lmPARjKDgC3s4JPjiemMUUHd/hR4794XVN8MrxRNzy0SkZQJZRAlbAACnog04LtvCUFIwgRwsMKzhJnQKfxWkBOwK1JCZwxOq8OpsXfK4J3swLzo4b5hiofH6BrP3RLhoHUkaAEIzbgnduwYUteEwtZFTqb/vmFhzb8zhIFTJUG1n/8fMbwWUt8rL21/y7hforJxjXCPxYpGeB74BckL1I0II0QhpFGAVaMItHdDnyWXFKwE/hURh7sU8JEvYIiEzYcZzGL9fqgVEUaeTBlH0W7IS6cKyOTTzr9izKfujOmvTW8cBEcEbzZNCHBLuRjIWw1gRhQL8p3rQcU0gbfCgnr4cvHMAZTxOIIL/CmZPlIoJhrWkmRoHi/p4dnVqtAKFxrRUCfgD5w82Dg83YKQTPJ7XWeIRKHg2qsRNRRloWzLKUuSoo7YpKeDeBjRLICbghJ0it6ImkhICv6Lq+JSEwdEFCZggJIcjICIyl5TRv8zxQAiV4EAJ7McktZ+mCIl3SpIuqZFlv9zxQAiW4H0EqF5cSrIvlnJIQLOiCZVlB6S8OQbCWXmz3PFACJVA90wPpmZJmYl31TEqgBKpnEgK+LQSmzBDWtvUNuZ5pIc7bPA+UQAnuqWfak+uZMu3fMy0JwZqMgKueSQn+EYFsyyO+nUuG7HJelxDEZQsK3xCCtMw5iJuJjGp5lEAJ7qXlMXMyAl5refZkC4op2zMtyZyDnOi5DNXyKIES3INgcc1gkv3CdlxCkNQFW7ICU2YIpuxlIr6Xjrd7HiiBEtyPgMsJdld0c0GmZ6r9pppp856ptKEuEymBEtyHwFg39/73nimty14mSi6qnkkJlOCf6JmkKxJbFoJdGQHPravLRH9fwJN3T+WD5c1sHoBVjO1nWxf0YQeCnWrVQo2+yZbCO/p9wMnsUrw2ilTpPA+MDLYQ3xMCCs4ts7x0BDzvaDZ+KIJKhl2F6zt4Ntxc/GAQZYO52K1gpCnDk2B9Bl0kswg1MYrhKDbZzSQrmPIW9CLGbmOxioDnABx7NN1sIOo1iKdYZQQnmKbjZ1A1KIGJEVowhnNGwU8xTgpCSDOSTfRT8V3Y4bTAY9f4E2QZTRx+SvAY5cZYj8/mr3D2s2GokvuVw3YW/phz8bX+ShGdpOCg/rYLt+CXvW99ghBM27N47BZ8r7+SxzC1ku2FwD/NX+NjfXoWLN8kVYpQZDQ5esdztx+LtEBHn8diXqEFh3jseQMEihSCXV63YMjQS+G5RjNAHkLK8vV4CDqi2HbFue9jQaaClbtNsI9ol+bJS+R3b6uIviHNm+5e5HM3pwDCzX2z9sJyZ0OyDN+A1hzdL4Hs1dLGN/KIBLSmCUSBWMn4s+n7CBid0Fqga8wPWCfl/dXV2UIRQKjlf1E6pkeDaOCfIs4+5Xgx3d/fPxCY0BQ0vwHPu0gIqkZhFgAAAABJRU5ErkJggg==","Slider.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAYBAMAAAB+X3LOAAAAIVBMVEUAAACRk5aRkZSSk5OWlpaSkpL5+v+RkpW7vMC1tbmhoqXGrO6IAAAABnRSTlMAaFgoEQ5LYgUfAAAANElEQVQoz2PADpgFMYADAwNjOQYwAIl2oAGwaEUaGlg+3EXLZ6KBcgNcYcashAECGAYDAADj/n4pps+kzwAAAABJRU5ErkJggg==","TBFit.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAAWlBMVEUAAAB4eHh4eHh4eHh2dnZ9fX14eHh4eHh4eHh4eHh4eHh4eHhwcHB4eHhwcHB4eHh4eHhycnJ4eHh3d3dxcXF4eHh3d3d3d3d3d3dubm5xcXF5eXl4eHhxcXE+JRc1AAAAHHRSTlMA9qd7GAewklkjEvLn28fArJqNbWZkUi9QOjlR6dZl8gAAAVBJREFUSMfFVtuWgyAMXC4V1LZar90t/P9vbozIulVq56l58sBMyCSQ+PURO422Vaq14+kddGFr4YKJ2hYH8FwGdOTI/JV3M6MulWwaWV1mikmeMpTTftbrZUH32XRgOezjFbsL6MgxE0XtpUbSRpbvyMpoQ24TNuFV+mi5syjuKXF3sXE2kBPCp+xB2/+UF2V0kYyqXGfXkN7XFSXlZpUIEpAsaIS4P4ic6AdmVpkqhBM6VOP2DLyFCmgCLSpsVKCv/pngrzqqsGGtdq7nj5+z3xL8+Zs/eufqEAaVhb103u8QyDo+nTIzhzfSfebwfYrgWQjd9nGRUHH4aQILqRYRLSWMw08bC6Hkt0vZm84fWtc4p2ACHBIsGk4rXDj0asCXD77e6ANCnihD0CYAtxm0kQGt8hFbJd6M8XZ/PFAcmUJHFjoUwbELDnbw1+ET9gtaEjv2MjNk4gAAAABJRU5ErkJggg==","TBNext.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAAWlBMVEUAAAB4eHh4eHh1dXV4eHh5eXl3d3d4eHh0dHR4eHh7e3t0dHR4eHh4eHhxcXF4eHhxcXF4eHhycnJvb294eHh3d3dwcHB3d3d1dXV4eHh3d3d5eXl4eHhxcXGK2btVAAAAHHRSTlMA9pEkpgZ7sGxZGBOq8u/b2sC8lWRSRC8PfFBRuUo9rwAAAWBJREFUSMfFVll2gzAMxAvGZklKA4Ek9v2vWVEQslna6vUj8zXBM44lC4nsLcgHZ42xbsj/oh5dLfwCUbvxF7lCNXnUD/JKzqprq6XU7XW2yOpM3zfTetGV+KDsiukPm/5Y//jeDtXokZPFHKVGw0KhDsIqYEHvE6Zpoy3M5Dh4KJ7ZCZ5it1kPm5B+hxcsJ5FXzbqFzRA2TUgTZ1dCvAsN94wYASKXUSIgAIWyS8pI4ulnHdlD+KhihpBRpkbhRUmG8JkToxsEEVaiowhABrgRS6JwdKIuMQQbMUTnfT2zXHhfpoZwJ7aeCTIzn3CAes42houK2AKo9gFDaLcGSFDEZrQYhKWEkQESRGwtT4t1J/eGcCO23oRhG9hHYgfNTiv74rilwS4+dnlzXyDmKyoUtwmw2wy3kTFa5YtaZdqMH+dzQPPb/R7meKB4gOGOrH8PRYLS27GrFXOwMz8d3oEvPJs941PvdQ4AAAAASUVORK5CYII=","TBPause.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAAS1BMVEUAAAB4eHh4eHh4eHh4eHh4eHh4eHh3d3d4eHh7e3t5eXmBgYF4eHh4eHh4eHh3d3d4eHh3d3d5eXl1dXV4eHh4eHh4eHhxcXF4eHj1iuhDAAAAF3RSTlMA+ad78rBZUSMYkgjArI1tZC8UD9valLlU9lYAAAEtSURBVEjHxJXbkoQgDERJuCiOd9fd/v8v3R01W9SMgnmaPFnQB+gQovlIPKYwWDuE6XFHvYSOcITrwlKQ10xAGsR1Rj43u3xtue+5XXekma/0lXvO+zHKQBw9AXDVud5uy4lamG1Te5YaBuDrE1seAL8n7Km311vzyaCrcubsyxCAF312ev5f4mcLk37LAdLsNoA3OcB4oEkSQaA6B4hEggW/Bsx3kqnlj44lIBJIKjGIgytAXITjswPGMjAC3VEUBMQyEAG3F8gErKYMmC9gEgvtHaAVEwPAdwAGBrn2/g7QA1YNqI+kNq1Oq/ritKWhLj51eWsfkPqJapuAus3oG5m+Veqbsb7dl38ovxODVyiUV1mISlEEUimKwCpFCqtdzIqdBbliJ7npQH8AADUuN1z9SxsaAAAAAElFTkSuQmCC","TBPlay.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAAYFBMVEUAAAB4eHh4eHh4eHh6enp4eHh4eHh4eHiBgYF4eHh0dHR4eHh4eHh4eHh3d3d4eHh3d3d4eHh3d3dxcXFxcXFxcXFxcXFxcXFwcHBwcHBwcHBycnJzc3N0dHRxcXF4eHhzyzi7AAAAHnRSTlMA9ad7F69ZIwiPEJPbwG1kUlAv7+HQu6OMdFxGMR+YuEezAAABRUlEQVRIx8VW2baDIAyUXaQu9e6b/v9f3rGWggJtc/rQPHlgBpghJFZPiXrUnRCdHut70I1WbD4HU7q5ATfcoz2Hmytw6VbUoeXW8vawUqws4Qd2OkZ/AchenYaGPF4sc07uN10oImcNx4QyGVkKEzw1bMGL8tY8M8iOJXFHliw2YBHgiwxMb5TLsMT7b+FULLbDQe/5c5o+/jIMKLeREeAbT0B8pgkByGxih1wVEaaXr8RGFznVsOiA0xqv3/u0AchvrIMCEHy8/SQqdPjsEwJia1h/WbaGpzJH2Bom4cyqbEQ+VznCzjBk++gltCVCbFjrRXQwrEwIhsH8zl+7LROCYRbpQyaQj0QWTbaVfHHU1CAnHzm9qQ+I9kQBoRYBepmhFzJ6qaQXY3q5v91QZoR4uGV5gCU1RXrbTRs71w3x1+EZ8Q9bFUNUrCre7AAAAABJRU5ErkJggg==","TBPlayExtend.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAAYFBMVEUAAAB4eHh4eHh4eHh6enp4eHh4eHh3d3d4eHh8fHx1dXVycnJ4eHh5eXl4eHh4eHh4eHh4eHh4eHh4eHh4eHhxcXFxcXFycnJvb292dnZ4eHhvb29vb29ycnJxcXF4eHh7Kc98AAAAHnRSTlMA9qd7F7CSUSMHbRD1WPLbwKyNZFrv2ryVMC8nRUR/XsosAAABT0lEQVRIx8VWV3bEIAxcinsvKXayzP1vGROw2WQBW1+rLz+YwdJISNxeYsXSlEKUzVJcQVfzwGCtHubqBJ5zhj/GeB6By9Sgup6PI+87Q0llCJ+1ej+ZDoCcEgagzfx44TtOppoifNJwAEnuCSsBwJ8F03gR/jX3LNZZMLj66bAMgAcf3JZtwJ/SOdA+ypECifdo9W0/EiB9EAJgud7e7B/h7euAwEnINd1PUO/V7oRTqmJgMkRQH4UJcwPtlTjrCIIE9XlEMdvVAZgiBGWkmoDBFgUDZIxgpJJAbbxbgO4WI1ipOmD9XWyAPkqwUvVAY7J5CKb8ZqXiQLmnfYwSrFQjIMgEskvkoMmyXkzc3SWOXhr04qOXN/0CnV9RBzlvAndPEyC0GXIjo7dKejOmt/vzgYLNBHVkUYciceyeD/baDfamuvR0WM3TYS1ur7AfgEVDcxHQFLwAAAAASUVORK5CYII=","TBPrev.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAAXVBMVEUAAAB4eHh4eHh4eHiBgYF3d3d4eHh4eHh3d3d4eHh6enpvb294eHhxcXF4eHhxcXF4eHh4eHhvb293d3dxcXF4eHhycnJ3d3dzc3N6enp4eHhycnJxcXF4eHhxcXFnXdd7AAAAHXRSTlMA9qeRCHuwWVEjFhDy79vZwKyVbWtkRC8mGXy8u51RKiIAAAFZSURBVEjHxVbbVoQwDLQt5S6CiMjq9P8/07JQkh6KGl92nmbptKczGxKeHoJsLkZrx2LO/qJuikFhhxqK5hd5pRUiKF39IK/Npup6bYzuu22Lqa/0Zbuu59MSHixTrgC0ZVp/Sx1Xm3WLTUWj/UJeJWzlfkGfA9P8oBh23ZF4qMpLc+p0WAkgrU8v1218xBuxI5CWx2G8X/bz3Z2Yd25YEN4Ay+fj2REjCUiio+3Ni3PE2CX0oVBQdMHs0zlH7LDpRaESi8jBq/PgjFwUOx2AiWJxKxgLmIBhv4MCForlDsYCFkBtBTIDHQvoDsYOdMAcLPQU0AbGDvTBxAhoCmgDsag8x1B3JgQUQCwqB/uvDfxKX0FGLL6S3LQ8VvkfJy8NefFReVNUxKLylr5AgleUJOImIG8z8kYmb5XUjG/Xc0DL2/0ZNj1Q4GGlI0s6FIVjVzjYhZ8Oj8A3c5hAJhDkPcoAAAAASUVORK5CYII=","TBZoomIn.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAQAAAD9CzEMAAACWUlEQVRYw+VYwU7CQBAtN2960BA8gnf8FMSDiEfxiDEx7CyLB3+ARMBfgJoICX4Bfod8BSZyKAccZltoS9ttS0tM7CZNWbpvdmffvJ2ppv2T6/mgcQ4Vdg8CBN4rjfPng4SgH47YDYxgDktX+4EhVOFwJ3B+xt7A2IK2N4O98bNY4M0T6MLCBvUFEzaANrTxPsFfNiO80zyJCM/KMDOHz2HMbkXO/YbI8RqM166bsXJ49Aw8WXODrsgGvSqyvGc5kbW0TCi+oAsk/JjnQ+1UHlciR/TV3MpY8CHnY41qWSYUo8wXf1gpKilYCYkrJxaw2Etz9qVYpL4wR5f9ifkdPIeHpWx+/5vkmPmQFnlPW+vvRZUB5B9tN+94Ri2FlRHEHKUBrVEglIVHdKMorGz3AnVJaQD98Ep+0LckjcJlHhxWYQyILEW34ZJBVEzpf21XA+jsD8KqOhc2Iv7cJmKgRgaGDnmQorUtaXEMiJwMVpts4GlFgqw8fEIZQH9MCa+46ahQxyQpA/yTGHm12eJ72oGBF1jY5liBThOubzoEdbQTM9AmPLE/A+m7KO1NTp2myQYaO90KtNSlYg9il7pcp37gJHxkGo3C/g99SltmqaYtlFOnmXjtljoivDp1JC/2zTT2KUryu074+8pRKBv9aOk7MidC+u5Mxg3eUxUgyHur0BIR1mwvofgHr3mVUHCHohCrhDJJyzuOInCKKq+vikDQ8WlqLwLh5fE4ZhmLkIoyFnTPqA1/wSGW20NJQVch/s6vdyzEHdwq8iuorz4lQB2fiol9Svjz1y+we1CD3hl6FwAAAABJRU5ErkJggg==","TBZoomOut.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAQAAAD9CzEMAAACSklEQVRYw+VYwU7CQBCFGzc9SAgehTt+CuJB1CN4hJgYdpaFgz9AIuIv1JoICXwBfod8BSZwKAccpi20FGi33RITt0nTbrpvdmffvJ1pIvFP2nOqcQllVgcBAu/lxuVzShH04ym7hwHMYbl1zaAPd3ASCZzn2QcYHmjnZbAPng8F3kzDKywcUN8wZu/QgQ7ex/jmMMK7zbQkPCvB1Bo+hyGriOz2FyLLqzBcu27KSsHRk9C25wavInPoU5HhPduJrJVIBuILusCEH/KLQDt1gSsxR2j+3Era8AHnY49q2SZ8RlkfzlhRlhSsiMQ1J3ZgsdfW7IuhSH1ljS7tJ+aP7xwONosc0z2kRd7T1kr43ss/2m7e3Rm1FFZGMObsa40coSx2RDeKwsp2L6p2wRv5QfdIGoXL/HBYBWkiQ9FtbMkgKqbpfwWNjwjrzr2wAfGnosRAlQz0XfJgipZX0kI5KWsGq0M28LQiQVZ1/sGE8AqbjjJ1jFUZ4F/EyJvNFtdpB95dvFrKXa4V6DTh2qZDUEdHmYEO4YnjGYjfRXFvcuw0VRto7NwTaLFLxRHELna5jv3AUXxkGo3c8Q99SlumsaYtlFPHmXhFSx0RfhZk/UnQrDS2LZP8rhN+zXcUyoYml74jcyTSd3cybvCeXwGCvLcLLSGxZmcJxUe8uquEggcUhVAllEVa3nUVgRNUeX1VBIKOTxNnEQgvT2chy1iE9CljQd8ZtRLBc4Lldt+k4FYh/slvIxbiLm4V+A3UVr8SoIZPBWW/Ev58+wWZNt3EgwcumAAAAABJRU5ErkJggg==","openhand.png":"data:image/png;base64,AAACAAEAICACAAgACAAwAQAAFgAAACgAAAAgAAAAQAAAAAEAAQAAAAAAAAEAAAAAAAAAAAAAAgAAAAAAAAAAAAAA////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD8AAAA/AAAAfwAAAP+AAAH/gAAB/8AAA//AAAd/wAAGf+AAAH9gAADbYAAA2yAAAZsAAAGbAAAAGAAAAAAAAA//////////////////////////////////////////////////////////////////////////////////////gH///4B///8Af//+AD///AA///wAH//4AB//8AAf//AAD//5AA///gAP//4AD//8AF///AB///5A////5///8="},Uv={w:!0,x:!0,y:!0,bw:!0,b1:!0,b2:!0},Nv={b1:!0,b2:!0,bw:!0,e:!0,fs:!0,h:!0,off:!0,w:!0,x:!0,y:!0},jv={bs:!0,ff:!0,id1:!0,id2:!0,id:!0,ls:!0,sh:!0,t:!0,u:!0},Kv={b:!0,c2:!0,c:!0,fbc:!0,fc:!0},Hv={p:!0};function _v(e,t,r,i,o){var u,s,f,l=new Set,c=new Set,d=new Set,h=new Set,v={hi:!0,bg:!0,ci:!0,du:!0,fb:!0,a1:!0,a2:!0,re:!0,tc:!0,a:!0},g={gh:!0},p={pos:!0},m={x:!0,y:!0,off:!0,lat:!0,lng:!0},y={ls:{solid:!0,dashed:!0,dotted:!0},bs:{solid:!0,dashed:!0}},x=["ha0","ha1","ha2","ha3","ha4","ha5","ha6","ha7","ha8","ha9"],w={},A={},M=[];function I(){return{allDirty:!1,allLinksMoved:!1,allLinksDirty:!1,anyLinkDirty:!1,dirty:new Map}}var E,k,C,S=I(),T=1,R=W(),L=null,B=zv(e);function G(){ot();S.dirty.clear();L=null;w={};A={};S=I();B=null}function O(e){var t=S.dirty;t.delete(e);t.set(e,2);A[e]&&(S.anyLinkDirty=!0)}function Y(){j();u=null;f=null}function P(e){n(A,(function(t){me(t,e)}));n(w,(function(t){me(t,e)}))}var D,V=Ma({numbers:Nv,numOrString:Hv,negatives:m,strings:jv,stringValues:y,colours:Kv,booleans:v,reserved:g,mapPos:p,halos:x},O,Y,P);function X(){L||(L=Wc(t)).privateSetProperties(w,A);return L}function N(e,t){var n=1===e?t.id1:t.id2,r=l.has(t.id)?Ne(n):w[n];return{x:r.x,y:r.y}}function j(){S.allDirty=!0;t.privateTrigger("redraw",{all:!0})}function H(e,t){O(t)}function _(e){S.allDirty=!1;S.allLinksMoved=!1;S.allLinksDirty=!1;S.anyLinkDirty=!1;S.dirty.clear();e.forEach(H)}function Q(e,t){void 0===t&&(t=!1);var n=S.dirty,r=n.get(e);if(!r||t&&1===r){t&&n.delete(e);n.set(e,1)}}function ee(){return!!(S.allDirty||S.allLinksMoved||S.allLinksDirty)||!!S.dirty.size}function te(e,t,n){oe(e,(function(e){e.x+=t;e.y+=n;Q(e.id)}))}function ie(e,t,n){var r=w[e];if(r){var i=t-r.x,o=n-r.y;if(r._combo)oe([e],(function(e){e.x+=i;e.y+=o;Q(e.id)}));else{r.x+=i;r.y+=o;Q(r.id)}}}function oe(e,t){for(var n={},r=e.slice(0);r.length>0;){var i=r.shift(),o=w[i];if(o&&!n[i]){n[i]=!0;t(o);if(o._combo)for(var a=o._combo.nodeIds,u=0,s=a.length;u<s;u++)n[a[u]]||r.push(a[u])}}}function ue(e,t){var n=A[e];if(n){n.off=t;O(e)}}function se(e){if(e){w={};A={};wt(!0);Ln();V.typeCheck(e,A);var t=V.filterNodesAndLinks(e.items,w,A,{selfLinks:E});A=t.links;w=t.nodes;kn(Z(e.reveal).map((function(e){return""+e})),!1);V.ensureHiddenItemConsistency(w,A);L=null;fe();qt();j()}tt()}function fe(){M=null}function le(e){Object.keys(e).forEach((function(t){M.push(e[t])}))}function ce(){if(!M){M=[];le(A);le(w)}return M}function de(e,t){switch(e){case"e":return 1;case"fs":return i.fontSize;case"off":case"b1":case"b2":return 0;case"x":case"y":return 0;case"w":case"h":return 1;case"bw":return 4;case"donut":var n=ne({v:[]},V.donutDefaults);if(t){t.b&&(n.b=an(t.b,0));t.c&&Array.isArray(t.c)&&t.c.forEach((function(e,t){n.c[t]=an(e,0)}))}return n;case"ha0":case"ha1":case"ha2":case"ha3":case"ha4":case"ha5":case"ha6":case"ha7":case"ha8":case"ha9":return{c:t&&t.c?an(t.c,0):"rgba(0, 0, 0, 0)",r:0,w:0};case"fi":return{c:"black",t:""};case"oc":return ma;case"c":case"b":return Dt.midgrey;case"fc":return Dt.black;case"fbc":return Dt.textback;default:return}}function he(e){return!e.hi&&!(w[e.id1].hi||w[e.id2].hi)}function ve(e){return X().privateNeighbourLinks(e)}function ge(e,t){for(var n=X().privateGetLinkIdsBetween(e,t),r=[],i=n.length,o=0;o<i;o++)r.push(A[n[o]]);return r}function pe(e){return!(w[e.id1].bg||w[e.id2].bg)}function me(e,t){e[t]&&yt(e.id)}function ye(e){return e&&!!e.parentId}function be(e,t,n){for(var r="x"===t||"y"===t?Q:O,i=0;i<e.length;i++){var o=e[i],a=w[o],u=A[o];if(a){a[t]=n;r(o)}else if(u){u[t]=n;O(o)}}}function xe(e,t){var n=!1;w[e]&&(n=Ae(w[e],t));A[e]&&(n=Ae(A[e],t));return n}function we(e){return Rt(e)&&!xe(e,"gh")}function Ae(e,t){return!!e[t]}function Me(e){Se(e,"gh",!0)}function Ie(e){Re(e,"gh")}function Ee(e,t){Se(e,"hi",t);ot()}function ke(){return Te("hi")}function Ce(e){Re(e,"hi");ot()}function Se(e,t,r){var i,o=Z(e);be(o,t,!1);V.ensureConsistency(t,w,A);if(r){var a={},u={};for(i=0;i<o.length;i++)a[o[i]]=!0;n(A,(function(e){if(Ae(e,t)&&!Ae(w[e.id1],t)&&!Ae(w[e.id2],t)&&(a[e.id1]||a[e.id2])){e[t]=!1;var n=e.parentId;n&&A[n]&&(u[n]=!0)}}));V.applyPropertyRuleToComboLinks(u,t,A)}}function Te(e){var t=[];n(w,(function(n,r){n[e]&&t.push(r)}));n(A,(function(n,r){n[e]&&t.push(r)}));return t}function Re(e,t){be(Z(e),t,!0);V.ensureConsistency(t,w,A)}function Le(e,t){e.type.match(/^(node|all)$/)&&n(w,t);e.type.match(/^(link|all)$/)&&n(A,t)}function Be(e){var t=a(e);V.ensureObject(t,!1,A);var n=null;"node"===t.type&&(n=w);if("link"===t.type){n=A;if(!V.hasValidEnds(t,{},w,E))return;(w[t.id1].hi||w[t.id2].hi)&&(t.hi=!0)}V.setZeroXY(t);if(t.id&&null!==n){var r=n[t.id];n[t.id]=t;if(r){r._combo&&(n[t.id]._combo=r._combo);r.parentId&&(n[t.id].parentId=r.parentId);r._offset&&(n[t.id]._offset=r._offset)}t.hi?V.ensureHiddenItemConsistency(w,A):Y();ot();fe();O(t.id)}tt()}function Ge(){return"LinkChart"}function Oe(e){E=!!e.selfLinks;k=e.marqueeLinkSelection;C=e.drag.links||e._linkSelection;i.setOptions(e)}function Ze(e){D=e}function Ye(e){D&&O(D);if(e){O(e);i.setSpecialOptions("showFullLabel",e)}else i.setSpecialOptions("showFullLabel",null)}function Fe(){var e=[];ce().forEach((function(t){t._combo||e.push(a(t,"d"))}));return e}function ze(){return{type:Ge(),items:Fe()}}function Pe(e,t,r,i,o){var u,s,f,l,c,d=function(){s=U(e[u].id);l=[];if(s)if(t){c=new RegExp(s,"im");n(w,(function(e,t){c.test(t)&&l.push(e)}));n(A,(function(e,t){c.test(t)&&l.push(e)}))}else{w[s]&&l.push(w[s]);A[s]&&l.push(A[s])}var d=a(e[u]),h=function(){var e=!0,t=l[f],a=d;if(!i&&"node"===t.type&&(void 0!==a.x||void 0!==a.y)){var u=void 0===a.x?t.x:a.x,s=void 0===a.y?t.y:a.y;ie(t.id,u,s)}n(d,(function(n,i){if("id"!==i&&"type"!==i){e&&"x"!==i&&"y"!==i&&(e=!1);switch(i){case"id1":case"id2":if(n!==t[i])throw Error("You cannot change the ends of an existing link");break;case"parentId":case"hi":if("parentId"===i&&o&&n!=t[i])throw Error("You cannot manually change the parentId of an item");r.all=!0;r.hi=!0;t[i]=n;break;case"oc":var a=t;if(a.oc){r.all=!0;a.oc=re(a.oc,d.oc)}break;default:xa[i]&&(t._noHalos=!1);Uv[i]?r.positions=!0:r.all=!0;t[i]=n}}}));e?Q(t.id):O(t.id)};for(f=0;f<l.length;f++)h()};for(u=0;u<e.length;u++)d()}function De(){var e={};function t(t){var n=t.parentId;if(n){var r=w[n]||A[n];if(!r)throw new Error("The "+t.type+" '"+t.id+"' has parentId = '"+n+"' but the parent item is not present in the model.");if(!r._combo)throw new Error("The "+t.type+" '"+t.id+"' has parentId = '"+n+"' but the parent item has no _combo property.");e[n]=e[n]||{};e[n][t.id]=!0}}function r(t){if(t._combo){var r={};(t._combo.nodeIds||[]).concat(t._combo.linkIds).forEach((function(n){r[n]=!0;var i=w[n]||A[n];if(!i)throw new Error("The combo "+t.type+" '"+t.id+"' has a child item '"+n+"' in its _combo property, but this item is not present in the model.");if(!e[t.id][n])throw new Error("The combo "+t.type+" '"+t.id+"' has a child item '"+n+"' in its _combo property, but this item's parentId property is "+(i.parentId?"set to '"+i.parentId+"'":"undefined."))}));n(e[t.id],(function(e,n){if(!r[n]){var i=w[n]||A[n];throw new Error("The "+i.type+" '"+i.id+"' has parentId set to '"+t.id+"' but is not included in the parent's _combo property.")}}))}}n(w,t);n(A,t);n(w,r);n(A,r)}function Ve(e,t,n){var r,i,o;for(r=0;r<e.length;r++){i=(o=e[r]).id;var a=void 0!==o.x,u=void 0!==o.y;if(!a&&!u||n)o._combo&&b(o._combo.e)&&te([i],0,0);else{ie(i,a?o.x:w[i].x,u?o.y:w[i].y)}ne(w[i]||A[i],e[r]);t?O(i):Q(i)}}function We(e,t,n,r,i){void 0===i&&(i=!1);var o=Z(a(e));V.ensureTypesInArray(o,!1,A);Pe(o,t,n,r,i);n.hi&&V.ensureHiddenItemConsistency(w,A);(n.graphCache||n.hi)&&ot();tt()}function Xe(e){var t={};n(e,(function(e,n){var r=A[n];r&&void 0===r.off&&(t[n]=r)}));return t}function Ue(e){var t=a(e);V.ensureTypesInArray(t,!1,A);var r={carefulWithXandY:!0,selfLinks:E},i=V.filterNodesAndLinks(t,w,A,r);n(i.nodes,(function(e,t){w[t]=ne(w[t],e);w[t]._noHalos=!1;O(t)}));n(i.links,(function(e,t){A[t]=ne(A[t],e);A[t]._noHalos=!1;O(t)}));V.ensureHiddenItemConsistency(w,A);ot();fe();Vt(Xe(i.links));tt()}function Ne(e){var t=w[e]||A[e];if(t&&!t.hi){if("link"===t.type&&Cn(e)&&qe(e))return t;var n=_e(e);n.push(t);var r=null;n.every((function(n){if(null===n)return!1;if(n.hi){r=null;return!1}if(n.id===e){r=t;return!1}if(n._combo){r=n;return n._combo.open}return!1}));return r}return null}function je(e){return a(Je(e),"d")}function Ke(e){for(var t=Z(e),n=[],r=0;r<t.length;r++){var i=Je(t[r]);i=i||null;n.push(i)}return n}function He(e,t){var n=e,r=[],i=0;do{t&&1===i&&n.indexOf("_combolink")>-1||r.unshift(n);var o=Je(n);n=o&&o.parentId;i++}while(n);return r}function _e(e){var t=He(e,!1);t.pop();return Ke(t)}function Je(e){var t=U(e);return w[t]||A[t]||null}function Qe(e,t){return!Je(e).parentId||_e(e).every((function(e){return e._combo.open&&(!t||!e.hi)}))}function qe(e){var t=A[e];if(t&&!t.hi){if(t.parentId){if($e(t.parentId)){var n=Ne(t.id1);if(t.id1===t.id2&&n)return!0;var r=Ne(t.id2);return!(!n||!r||n.id===r.id)}return!1}return!0}return!1}function $e(e){return!Je(e).parentId||_e(e).every((function(e){return!e.hi}))}function et(e){for(var t=e,n=Je(t),r=n&&n.parentId;r;)(t=r)===(r=(n=Je(t))?n.parentId:null)&&(r=null);return t}function tt(){var e=new Set;rt(w,e);rt(A,e);o.forEach((function(t){t.isAsset||e.has(t.src)||o.delete(t.src)}))}function nt(e,t){e.forEach((function(e){e&&"string"!=typeof e&&e.g&&e.g.forEach((function(e){it(e,t)}))}))}function rt(e,t){n(e,(function(e){it(e,t);nt([e,e.t1,e.t2],t);e.bu&&it(e.bu.g,t)}))}function it(e,t){if(e){var n=e.u;if(n){t.add(n);o.has(n)||o.get(n)}}}function ot(){L&&L.clearCache()}function at(){u={};s=0;for(var e=Object.keys(w),t=0,n=e.length;t<n;t++){var r=e[t],i=w[r];if(!i.hi&&Qe(r,!0)){u[r]=i;s++}}}function ut(){f={};for(var e=Object.keys(A),t=0,n=e.length;t<n;t++){var r=e[t],i=A[r],o=!i.hi;o&&(o=Cn(r)?qe(r):Qe(r,!0))&&(f[r]=i)}}function st(){if(!u){at();ut()}}function ft(){if(!S.allDirty){var e=S.dirty.size;if(e>100)if(e>=s){S.allLinksMoved=!S.anyLinkDirty;S.allLinksDirty=S.anyLinkDirty}else lt();else X().internalMarkLinks(S.dirty)}}function lt(){null!==f&&n(f,(function(e,t){S.dirty.has(t)||(S.dirty.has(e.id1)||S.dirty.has(e.id2))&&S.dirty.set(t,1)}))}function ct(e,t,n,r,o){void 0===r&&(r=!1);void 0===o&&(o=!1);var a,s=n.getUnzoom(),c=s!==T;c&&j();if(ee()){st();ft();_((a=i.generate(u,f,S,e,t,n,xt,l,Tt,Et,r,o)).stillDirty);T=s}i.generateHandles(e,t,n,d);return i.animated()||a&&a.rebuildAll||c}function dt(e){return i.contains(e,w).filter((function(e){return!ye(w[e])}))}function ht(){return i.animated()}function vt(){return i.getAlwaysRedraw()}function gt(t){var n=e.privateGetItem(t);n&&(n._combo||n.parentId)&&e.privateSetAllItemsInComboDirty([e.privateGetTopItemId(n.id)])}
function pt(e,n,r){var i=U(e),o=!e&&0===d.size,a=1===d.size&&d.has(e);if(!o){if(!n&&!r){if(a)return;wt(!!i)}d.has(i)?n&&yt(i):mt(i);t.privateTrigger("redraw",{all:!0})}}function mt(e,n){void 0===n&&(n=!1);var r=U(e);if(r&&!d.has(r)&&we(r)){gt(r);d.add(r);O(r);n||t.trigger("selectionchange")}}function yt(e,n){var r=U(e);if(d.delete(r)){gt(r);O(r);n||t.trigger("selectionchange")}}function bt(){return 0!==d.size}function xt(e){return!!d.size&&d.has(e)}function wt(e){void 0===e&&(e=!1);d.forEach((function(e){O(e);gt(e)}));d.clear();e||t.trigger("selectionchange")}function At(e){n(e,(function(e,t){mt(t,!0)}))}function Mt(e){e.forEach((function(e){c.add(e)}))}function It(e){e.forEach((function(e){c.delete(e)}))}function Et(e){return!!c.size&&c.has(e)}function kt(){h.forEach((function(e){O(e);gt(e)}));h.clear()}function Ct(e){if(e&&e.length>0){e.forEach((function(e){h.has(e)||O(e)}));var t=q(e);h.forEach((function(e){t.has(e)||O(e)}));h=t}}function St(e){e.forEach((function(e){h.delete(e)&&O(e)}))}function Tt(e){return h.has(e)}function Rt(e){st();return!(!u[e]&&!f[e])}function Lt(){At(w);At(A);t.privateTrigger("redraw",{all:!0});t.trigger("selectionchange")}function Bt(e){if(e){wt(!0);for(var n=0;n<e.length;n++)mt(e[n],!0);t.privateTrigger("redraw",{all:!0})}var r=[];d.forEach((function(e){r.push(e)}));return r}function Gt(){return d}function Ot(e,t){var r=[];if(d.size){n(w,(function(e,t){xt(t)&&!ye(e)&&r.push(t)}));n(A,(function(e,t){if(xt(t)){w[e.id1].du&&r.push(e.id1);w[e.id2].du&&r.push(e.id2)}}))}for(var i=0;i<r.length;i++){var o=w[r[i]];ie(r[i],o.x+e,o.y+t)}}function Zt(e){var t,r=Z(e);if(r.length>0){for(var i={},o={},a=0;a<r.length;a++){t=r[a];A[t]&&(i[t]=A[t]);w[t]&&(o[t]=!0)}n(A,(function(e,t){(o[e.id1]||o[e.id2])&&(i[t]=e)}));n(i,(function(e,t){yt(t,!0);Rn(t);O(t);delete A[t]}));n(o,(function(e,t){yt(t,!0);O(t);delete w[t]}));ot();fe();Vt(i);Y()}}function Yt(){for(var e=Bt(),t=0;t<e.length;t++){var n=A[e[t]];if(n){w[n.id1].du&&e.push(n.id1);w[n.id2].du&&e.push(n.id2)}}return e}function Ft(e){var n=Wc(t);n.privateSetProperties(w,e);return n}function zt(e){var t=F(e,{all:!1,self:!0,combos:"all"});return X().connections(t)}function Pt(e,t){var n=[],r={};if(J(e)){var i=Ft(e).findAdjacency;n=zt();for(var o=0;o<n.length;o++){var a=A[n[o][0]];i({all:!0,combos:"all"},a.id1,a.id2)&&(r[o]=!0)}}t(n,r)}function Vt(e){t.privateTrigger("redraw",{all:!0});Pt(e,Jt);Gn(K(e),!1,void 0,!1)}function Wt(e,t){var n;Pt(e,(function(e,r){n=Qt(e,r,t)}));return n}function Xt(e,t){var n=[];function r(e,t){n.push({id:e.id,off:t})}Gn(K(e),t,r,!1);return n}function Ut(e){for(var t={},n=0;n<e.length;n++){var r=e[n],i=A[r];i&&(t[r]=i)}return t}function Nt(e){Vt(Ut(e))}function jt(e,t){var n=Ut(e),r=Wt(n,t),i=Xt(n,t);if(i.length>0){var o=$(i);r=r.filter((function(e){return void 0===o[e.id]})).concat(i)}for(var a=[],u=0;u<r.length;u++){var s=r[u];A[s.id].off!==s.off&&a.push(s)}return a}function Kt(e){Jt(zt(e))}function Ht(e,t,r,i,o){var a=i||function(e){return e};function u(e){var t=1e6,n=z(e.off)?e.off:t,r=a(e);r.id1>r.id2&&(n=f(-n));return n}function s(e,t){return u(A[e])-u(A[t])}function f(e){return 0===e?0:e}n(t||e,(function(t,n){var i=e[+n];r||(i=i.filter((function(e){return!A[e].gh})));if(i.length>0){i.sort(s);for(var u=a(A[i[0]]),l=u.id1===u.id2,c=i.length,d=l?20:40,h=l?0:-.5*d*(c-1),v=0;v<c;v++){var g=A[i[v]],p=a(g),m=h+v*d;m=p.id1<=p.id2?m:-m;o(g,f(m))}}}))}function _t(e,t){e.off=t;O(e.id)}function Jt(e,t){Ht(e,t,!0,null,_t)}function Qt(e,t,n){var r=[];function i(e,t){r.push({id:e.id,off:t})}Ht(e,t,n,null,i);return r}function qt(){for(var e=zt(),t={},n=0;n<e.length;n++){var r=!1,i=e[n];if(i.length>1){for(var o=0;o<i.length;o++){var a=A[i[o]];a&&(r=r||z(a.off))}r||(t[n]=!0)}}Jt(e,t)}function $t(e){var t=un(e);return t||(e?'url("'+Xv["openhand.png"]+'"), pointer':"auto")}function en(){return i.getResizePrimitive()}var tn=new RegExp(R+"((\\S+)(?:\\-resize))$"),nn={nw:["x1","y1"],n:["y1"],ne:["x2","y1"],e:["x2"],se:["x2","y2"],s:["y2"],sw:["x1","y2"],w:["x1"]};function rn(e){return(""+e).match(tn)}function on(e){var t=rn(e);return nn[t[2]]}function un(e){var t=rn(e);return t?t[1]:null}var fn=new RegExp(R+"(id[1|2])$");function ln(e,t,n,i,o,a){var u=(""+a).match(fn),s=U(n);return r.createLinkEndDragger(e,On,t,w,A[s],u[1],i,o,s)}function cn(e,n,i,o,a,s,l,c,d){var h=l.handMode,v=U(o);if(d&&h)return r.createMapDragger(i,o,a,s,wt);if(rn(o)){var g=on(o),p=c,m=w[v]._combo&&w[v]._combo.open;return r.primitiveMover(n,i,v,p,!0,g,a,s,m,(function(e){t.trigger("prechange","resize");var n=w[U(o)],r=En(e),i=r?r.x:0,a=r?r.y:0;if(m)n.oc.w=2*e.r;else if("C"===e.p){n.x=i+e.x;n.y=a+e.y;n.w=2*e.r;n.h=n.w}else{var u=i+e.x1,s=a+e.y1,f=i+e.x2,l=a+e.y2;n.x=u+Math.floor((f-u)/2);n.y=s+Math.floor((l-s)/2);n.w=f-u;n.h=l-s}O(n.id)}))}if(null!==v&&A[v]){if(A[v].id1===A[v].id2)return null;var y=(""+o).match(fn);return y?r.createLinkEndDragger(e,On,i,w,A[v],y[1],a,s,v):r.createLinkDragger(N,n,i,On,A[v],a,s,v)}On.clearExtraItemsInTransientLayer();if(h&&null===o)return r.createHandDragger(i,a,s,wt);if(null!==v){st();return r.createDefaultDragger(On,u,f,xt,hn,i,o,a,s)}return vn(i,a,s)}function hn(){var e=[];d.forEach((function(t){var n=w[t];n&&n.parentId&&e.push(et(n.parentId))}));return e}function vn(e,r,i){if(t.trigger("dragstart","area",null,r,i,null))return null;var o=!1,a={};d.forEach((function(e){a[e]=!0}));var s={id:null,p:dn.rect,x1:r,y1:i,x2:r,y2:i,bc:Dt.midgrey,bw:1,fc:Dt.blue,fi:!1},l=e.viewToWorldX(r),c=e.viewToWorldY(i),h={x1:l,y1:c,x2:l,y2:c};s.wbc=sn(s.bc);s.wfc=sn(s.fc);function v(t,n){s.x1=Math.min(e.worldToViewX(l),t);s.y1=Math.min(e.worldToViewY(c),n);s.x2=Math.max(e.worldToViewX(l),t);s.y2=Math.max(e.worldToViewY(c),n);h.x1=e.viewToWorldX(s.x1);h.y1=e.viewToWorldY(s.y1);h.x2=e.viewToWorldX(s.x2);h.y2=e.viewToWorldY(s.y2)}function g(e,n){var r=!1;function i(t){if(!n&&!e.has(t)){yt(t,!0);r=!0}}function o(e){if(!d.has(e)){mt(e,!0);r=!0}}d.forEach(i);e.forEach(o);r&&t.privateTrigger("redraw",{all:!0})}function p(e,t,r,i){st();v(e,t);var o=new Set;n(u,(function(e,t){Sn(h,e.x,e.y)&&o.add(t)}));"off"!==k&&C&&n(f,(function(e,t){if("centre"===k)Sn(h,e._x,e._y)&&o.add(t);else if("ends"===k){var n=u[e.id1],r=u[e.id2];Sn(h,n.x,n.y)&&Sn(h,r.x,r.y)&&o.add(t)}}));g(o,r||i)}return{rebuild:{drawOnly:!0},scrollable:!0,getCursor:function(){return"crosshair"},generate:function(e){var t=e.getLayer(),n=e.getLayerPath();e.setLayerPath(null);e.setLayer(Oi.HANDLES);e.copyPrimitive(s);e.setLayerPath(n);e.setLayer(t)},dragMove:function(e,t,n,r){o||p(e,t,n,r)},endDrag:function(n,r,i){e.cancelScroll();o=!0;var u=t.trigger("dragend","area",null,r,i);if(n&&!u)t.trigger("selectionchange");else{wt(!0);Object.keys(a).forEach((function(e){mt(e,!0)}))}t.trigger("dragcomplete","area",null,r,i)}}}function gn(r,i,o){var a,u,s,f,l=r.zoom(),c=r.viewToWorldX(i),d=r.viewToWorldY(o),h={};n(w,(function(e,t){h[t]={x:e.x,y:e.y}}));function v(t,n,i){var o=-t*(2*Math.PI/360);o*=2;var a=Math.sin(o),u=Math.cos(o);e.privateEach({type:"node",items:"toplevel"},(function(e){var t=e.id;ie(t,(h[t].x-c)*u+(h[t].y-d)*a+c,-(h[t].x-c)*a+(h[t].y-d)*u+d)}));var s=r.viewToWorldX(n),f=r.viewToWorldY(i);e.privateEach({type:"node",items:"toplevel"},(function(e){ie(e.id,e.x+(s-c),e.y+(f-d))}))}function g(e){var t=e*e;r.zoomToPosition(t*l,i,o)}function p(e,t,n,r){a=e;u=t;s=n;f=r}p(1,0,c,d);var m=!1,y=60,b=!1;function x(){g(a);m=m||Math.abs(u)>12;b=b||Math.abs(s-c)>y||Math.abs(f-d)>y;v(m?u:0,b?s:c,b?f:d)}function A(){e.privateEach({type:"node",items:"toplevel"},(function(e){var t=e.id;ie(t,h[t].x,h[t].y)}))}return{animate:function(){x()},getCursor:function(){return"move"},dragMove:function(e,t,n,r){p(e,t,n,r)},endDrag:function(e,n,r,i,o){p(n,r,i,o);if(e){A();t.trigger("prechange","move");x()}else A()}}}function pn(e,t,n){var r=Je(e);if(!r||r.hi)return null;var i=r._edit,o=n.getAnchorPosition(e,0);if(!i||i.hib)return null;var a=i.x1+o.x,u=i.y1+o.y,s=i.x2+o.x,f=i.y2+o.y;return{x1:t.x(a),y1:t.y(u),x2:t.x(s),y2:t.y(f),fs:t.worldToViewDistance(i.fs)}}function mn(e,t,n){return B.extractStructure(i,e,w,A,X,t.fixed,n)}function yn(e){if(e.straighten){t.privateTrigger("redraw",{all:!0});Kt({self:!1,combos:"toplevel"})}}function bn(t,n,r,i,o,a){var u=cc(w,i,e.privateGetMaxLabelLength());B.layout(t,n,r,X,u,o,a)}function xn(t,n,r,i,o,a,u){var s=cc(w,o,e.privateGetMaxLabelLength());B.arrange(t,n,r,i,a,s,u)}function wn(e){n(w,(function(t,n){e[n]&&ie(n,e[n].x,e[n].y)}))}function An(e){n(A,(function(t,n){e[n]&&On.setLinkOffset(n,e[n].off)}))}function Mn(e,t,r){var i=t,o=[];n(w,(function(t,n){e[n]&&o.push({id:n,from:{x:t.x,y:t.y},to:{x:e[n].x,y:e[n].y}})}));var a=o.length;return ur((function(e){i-=e;for(var n=r(Math.max(0,(t-i)/t)),u=0;u<a;u++){var s=o[u],f=s.from,l=s.to,c=f.x+n*(l.x-f.x),d=f.y+n*(l.y-f.y);ie(s.id,c,d)}return i>0}),{positions:!0})}function In(e){var t=A[e];return t&&!t._combo}function kn(e,t){var n={};e.forEach((function(e){In(e)&&(n[e]=!l.has(e))}));l.forEach((function(e){void 0===n[e]&&Rn(e)}));var r=[];e.forEach((function(e){if(n[e]){var t=Je(e);if(null!==t){l.add(e);r.push(t);O(e)}}}));t&&Gn(r,void 0,void 0,!0);Y()}function Cn(e){return!!l.size&&l.has(e)}function Tn(){var e=[];l.forEach((function(t){e.push(t)}));return e}function Rn(e){O(e);l.delete(e);xt(e)&&!Qe(e,!1)&&yt(e,!0)}function Ln(){l.forEach((function(e){O(e);xt(e)&&!Qe(e,!1)&&yt(e,!0)}));l.clear()}function Bn(e,t,n){e.forEach((function(e){var r=Ne(e.id1),i=Ne(e.id2);if(null!==r&&null!==i&&r!==i){var o=r.id>i.id?r.id+i.id:i.id+r.id;void 0===t[o]&&(t[o]=[]);t[o].push(e.id);n[e.id]={id1:r.id,id2:i.id}}}))}function Gn(e,t,n,r){var i,o=void 0===n?_t:n,a={},u={};Bn(On.getRevealedLinks().map(Je).filter((function(e){return!e.hi})),a,u);function s(e){return void 0!==u[e.id]?u[e.id]:e}function f(e,t){if(u[e]){var n=void 0,r=u[e],i=He(r.id1,!1);for(n=0;n<i.length;n++)if(t[i[n]])return!0;i=He(r.id2,!1);for(n=0;n<i.length;n++)if(t[i[n]])return!0}return!1}if(e){var l=[],c={};e.forEach((function(e){if("node"===e.type){var t=Ne(e.id);t&&(c[t.id]=!0)}else l.push(e)}));var d={};Bn(l,d,{});i={};var h=!1;Object.keys(a).forEach((function(e,t){if(void 0!==d[e]||f(a[e][0],c)){i[t]=!0;h=!0}}));if(!h)return}if(r){var v=o;o=function(e,t){Je(e.id1).parentId!==Je(e.id2).parentId&&v(e,t)}}Ht(K(a),i,!!t,s,o)}var On={addItemsToTransfer:Mt,allParentsOpen:Qe,allParentsVisible:$e,animated:ht,applyRevealedLinkOffsets:Gn,applyUpdatedOffsets:An,applyVertices:wn,arrange:xn,bothEndsForeground:pe,bothEndsShown:he,clearExtraItemsInTransientLayer:kt,contains:dt,createDragger:cn,createGestureDragger:gn,defaultValueFor:de,destroy:G,doSelection:Bt,drawInTransientLayer:Ct,each:Le,ensureObject:V.ensureObject,ensureTypesInArray:V.ensureTypesInArray,extractStructure:mn,firstVisibleItemInAncestry:Ne,generate:ct,getAlwaysRedraw:vt,getAncestryIds:He,getByID:Je,getCursor:$t,getItem:je,getParentItems:_e,getRawItems:ce,getResizePrimitive:en,getRevealedLinks:Tn,ghost:Ie,graph:X,hasSelection:bt,hidden:ke,hide:Ce,isItemShown:Rt,isRevealedLink:Cn,isSelected:xt,isTransferring:Et,labelPosition:pn,layout:bn,load:se,makeNodePositionAnimator:Mn,merge:Ue,moveAllNodesBy:te,moveNode:ie,moveSelection:Ot,neighbourLinkIds:ve,privateGetLinksBetween:ge,privateSelection:Gt,removeFromTransientLayer:St,removeItem:Zt,removeItemsFromTransfer:It,resetConnectionOffsets:Vt,resurrect:Me,reveal:kn,selectAll:Lt,selectionPlusDummyNodes:Yt,serialize:ze,setAllDirty:j,setDirty:O,setItem:Be,setLastHoverId:Ze,setLinkOffset:ue,setOptions:Oe,setProperties:We,setSelection:pt,show:Ee,showFullLabelOnHover:Ye,showHideBendLinks:Nt,showHideGetLinksToBend:jt,startDragger:ln,topParentId:et,type:Ge,unsafeApplyChanges:Ve,updateLinkStyles:yn,validateCombos:De};return On}var Jv={backColour:!0,selectionColour:!0,selectionFontColour:!0,controlColour:!0};function Qv(e,r,i,o,u,s){var f,l,c=null,d=null,h=null,g=null,p=null,m=null,y=!1,x={arrows:"normal",backColour:void 0,backgroundAlpha:.2,bands:H(),controlColour:Dt.midgrey,defaultStyles:void 0,drag:j(),dragPan:!0,fontFamily:"sans-serif",gradient:void 0,handMode:!1,hover:150,iconFontFamily:"sans-serif",imageAlignment:{},labelOffset:0,linkEnds:{spacing:"tight",avoidLabels:!0},_linkSelection:!0,linkStyle:$(),logo:void 0,marqueeLinkSelection:"centre",maxItemZoom:void 0,minZoom:.05,navigation:X(),overview:K(),_rendering:ee(),selectedLink:void 0,selectedNode:void 0,selectionColour:void 0,selectionFontColour:void 0,selfLinks:!1,_showShadowCanvas:!1,zoom:{adaptiveStyling:!1},truncateLabels:void 0,watermark:{fb:!0},gestures:!0};f=u.resetControlColour(x.controlColour);var w={arrows:!0,fontFamily:!0,iconFontFamily:!0,imageAlignment:!0,labelOffset:!0,linkStyle:!0,linkEnds:!0,maxItemZoom:!0,selectedLink:!0,selectedNode:!0,selectionColour:!0,selectionFontColour:!0,truncateLabels:!0,_rendering:!0},A={controlColour:!0,navigation:!0,logo:!0,overview:!0,watermark:!0,fontFamily:!0},M=Pi();e.__w=M;var E=1,k=Wv(e,o,r,(function(){var e,t={},n={};if(x.defaultStyles){x.defaultStyles.comboLinks&&(t=x.defaultStyles.comboLinks);x.defaultStyles.openCombos&&(n=x.defaultStyles.openCombos);e=x.defaultStyles.comboGlyph}return{comboLinks:t,openCombos:n,comboGlyph:e}}));function S(e){l=e}function R(e){if(void 0!==e&&e!==ot){ot=e;e&&Ue(ut())}return ot}function L(){return h}function B(e){h=e}function G(e){c=e}function O(e){d=e}function Y(e){p=vi(e,h,c,s);M.setShadowColourMap(p.getShadowColourMap());g.setAllDirty()}function z(e){g=e;h&&h.webgl&&s.shutdownAndReset();g.setOptions(x)}function P(){i.setup(f);var e=x.watermark;e&&i.addTextWatermark(e.u?e.u:void 0,e.t,e.fs||80,e.fc||Dt.lightgrey,e.fb,e.fbc,e.a,e.ff?e.ff:x.fontFamily);x.navigation&&x.navigation.shown&&i.addNavigation(Un,c,x.navigation);x.overview&&i.addOverview(Un,g,c,Be,x.overview);x.logo&&x.logo.u&&i.addLogo(x.logo);i.addBanding(x);De({drawOnly:!0})}function W(){return{p:"ne",u:void 0,x:0,y:0}}function X(){return{shown:!0,p:"nw",x:0,y:0}}function j(){return{links:!0,panAtBoundary:!0}}function K(){return{icon:!0,p:"se",shown:!1,size:100}}function H(){return{bands:[],bottom:!1,top:!0}}function _(){return{fb:!1,fc:"lightgrey",x:0,w:100}}function q(){return{maxLength:30,showOnHover:!0}}function $(){return{glyphs:"horizontal",transition:.75,inline:!1}}function ee(){return{showTextAtlas:!1,showFontIconAtlas:!1,showImageAtlas:!1,canvasSkipItemsOutOfView:!0,disableFloatTexture:!1}}function te(e){function t(e,t){if(b(e[t])){e[t]=Math.min(50,e[t]);e[t]=Math.max(-50,e[t])}else e[t]=0}var n=e;Object.keys(n).forEach((function(e){var r=n[e];t(r=F({dx:r.dx,dy:r.dy,e:r.e},{dx:0,dy:0,e:1}),"dx");t(r,"dy");(!b(r.e)||r.e<=0)&&(r.e=1);var i=e;b(parseInt(e,10))&&(i=String.fromCharCode(parseInt(e,10)));n[i]=r}));return n}function re(t,r){if(t){var i=!1,s=!1,l=a(t),d=I;n(l,(function(e,t){if(!C(x[t],e)){if(Jv[t]&&!D(e)&&!Kt(e))return;x[t]=e;/fontfamily/i.test(t)&&(x[t]=Dn(e));if("logo"===t){if("string"==typeof e){x[t]=W();x[t].u=e}e||(x[t]=W())}if("navigation"===t)if(e)d(e)?x[t]=F(e,X()):x[t]=X();else{x[t]=X();x[t].shown=!1}if("overview"===t)if(e)if(d(e)){var r=e;x[t].backColour=Kt(r.backColour)?r.backColour:void 0;x[t].borderColour=Kt(r.borderColour)?r.borderColour:void 0;x[t]=F(e,K())}else x[t]=K();else{x[t]=K();x[t].icon=!1}if("watermark"===t&&d(e)){(r=e).fc&&(x[t].fc=r.fc&&Kt(r.fc)?r.fc:void 0);r.fbc&&(x[t].fbc=r.fbc&&Kt(r.fbc)?r.fbc:void 0)}if("bands"===t)if(e)if(I(e)){x[t]=F(e,H());if(x[t].bands){x[t].bands=Z(x[t].bands);for(var a=x[t].bands.length,l=0;l<a;l++)x[t].bands[l]=F(x[t].bands[l],_())}}else x[t]=H();else x[t]=H();"truncateLabels"===t&&(e?I(e)?x[t]=F(e,q()):x[t]=q():x[t]=void 0);"selectedNode"!==t&&"selectedLink"!==t||!d(x[t])||g.ensureObject(x[t]);if("_showShadowCanvas"===t&&y!==x._showShadowCanvas){y=x._showShadowCanvas;p.debugCanvas(y?h:null)}"imageAlignment"===t&&(e?I(e)&&(x[t]=te(e)):x[t]={});"controlColour"===t&&(f=e?u.resetControlColour(e):u.resetControlColour(null));if("linkStyle"===t)if(e&&I(e)){x[t]=F(e,$());var c=x[t].transition;(!b(c)||c<0||c>1)&&(x[t].transition=$().transition)}else x[t]=$();"defaultStyles"===t&&n(e,(function(e,n){if(-1!==["openCombos","comboLinks","comboGlyph"].indexOf(n)){if("comboGlyph"!==n||null!==x[t][n]){x[t][n]=d(e)?e:void 0;x[t][n]&&g.ensureObject(x[t][n])}}else x[t][n]=void 0}));"handMode"===t&&ie()&&o.internalUse.setHandMode(x.handMode);"drag"===t&&(e?I(e)&&(x[t]=F(e,j())):x[t]=j());"_rendering"===t&&e&&I(e)&&(x[t]=F(e,ee()));w[t]&&(s=!0);A[t]&&(i=!0)}}));g.setOptions(x);c.setMaxItemZoom(x.maxItemZoom);c.setMinZoom(x.minZoom);if(s){g.setAllDirty();De({all:!0})}i&&Un.initOverlays();ie()&&!e.lock()&&o.internalUse.enableDragging(x.handMode);De({drawOnly:!0});u.invokeWhenImagesHaveLoaded(r)}return a(x,!0)}function ie(){return null!==o&&o.api.isShown()}function oe(){return i.getWatermarkSize(h)}function ue(e,t){var n=a(e);Un.combo.internalUse.preLoadUp(n,(function(e){g.load(n);Un.combo.internalUse.postLoadUp(n,e,(function(){n.viewSettings&&Un.setViewSettings(n.viewSettings,!1);!o||n.map&&n.map.keepSameMode?T(t):o.internalUse.loadUp(n.map,t)}))}))}function se(t,n){r.trigger("prechange","merge");var i=a(t),u=Un.combo.internalUse.preMerge(i,n),s=u.itemsToMerge;ie()&&(s=o.internalUse.preMerge(s));g.merge(s);e.privateSetNonImageProperties(u.propertiesToSet)}function fe(e){e.combos=Un.combo.internalUse.serialize();e.reveal=Un.combo.api.reveal()}function le(e){t(Un.isMapMode()?o.api.leafletMap().getContainer():h.webglCanvas||h.canvas,e,ze)}function ce(){Un.setContainer(null);M.destroy();u.destroy();M=null;Tt&&clearTimeout(Tt);h.webgl&&s.destroy();h=null}function de(t){var n=e.privateGetItem(t.id);if(!n||n.type===t.type){var r=Un.combo.internalUse.preMerge([t]),i=r.itemsToMerge,a=i.shift();a&&ie()&&o.internalUse.preSetItem(a);g.merge(i);a&&g.setItem(a);e.privateSetNonImageProperties(r.propertiesToSet)}}function he(e){Un.combo.internalUse.preDelete(e)}function ve(e,t,n,i){n||r.trigger("prechange","properties");ie()&&o.internalUse.convertPos(e);g.setProperties(e,t,i,!1,!0)}function ge(e,t,n,r){Ue(c.fromSettingsDirect(e,t,n,r))}function pe(e){return!(!Kv[e]||!Me[e])}function me(e,t){n(t,(function(n,r){var i=e[r];if(I(i)&&I(n))me(i,n);else if(pe(r))if(Array.isArray(i))for(var o=Math.max(n.length,i.length),a=0;a<o;a++){var u=n[a],s=i[a];if(Kt(u)||!u){t[r][a]=Jt(u||s);e[r][a]=Jt(s||u)}}else if(Kt(n)){i=Kt(i)?i:n;e[r]=Jt(i);t[r]=Jt(n)}}))}function ye(e,t){for(var n=0;n<t.length;n++)me(e[n],t[n])}function be(e,t,n){if("number"==typeof e)return e+n*(t-e);if(Array.isArray(e)){var r=void 0,i=t;if(Math.abs(e[0]-i[0])>.5){r=e[0]<i[0]?be(1+e[0],i[0],n):be(e[0],1+i[0],n);r-=Math.floor(r)}else r=be(e[0],i[0],n);return Qt([r,be(e[1],i[1],n),be(e[2],i[2],n),be(e[3],i[3],n)])}return t}function xe(e,t,r){var i,o,a={};n(e,(function(n,u){if(u in t)switch(u){case"c":var s=n,f=t.c;a[u]=f.map((function(e,t){return be(s[t],e,r)}));break;case"v":a.v=[];if(e.v){var l=Math.max(e.v.length,t.v.length);for(i=0,o=l;i<o;i++)a.v[i]=be(e.v[i]||0,t.v[i]||0,r)}else for(i=0,o=t.v.length;i<o;i++)a.v[i]=0;break;default:a[u]=be(e[u],t[u],r)}else a[u]=n}));return a}function we(e,t,r){var i={};n(e,(function(n,o){i[o]=o in t?Me[o]?be(e[o],t[o],r):t[o]:n}));return i}function Ae(e,t,n){if(!I(t))return!1;var r=g.getByID(n);return null!==r&&I(r[e])}var Me=Q(ba.concat(["b","b1","b2","bw","c","c2","donut","e","fbc","fc","fi","fs","h","n","oc","off","r","w","x","y","_combo","t1","t2","v"])),Ie={t1:!0,t2:!0},Ee={};ba.concat(["fi","oc","_combo","t1","t2"]).forEach((function(e){Ee[e]=we}));Ee.donut=xe;var ke=Uv;function Ce(e,t,i,u,s){u||r.trigger("prechange","properties");var f=a(e);ie()&&o.internalUse.convertPos(f);for(var l=[],c=[],d={},h=[],v=!1,p={},m=function(e){var t=f[e],r=null,i=null;n(t,(function(e,n){if(!Me[n]||Ie[n]&&!Ae(n,e,t.id))"id"!==n&&((r=r||{id:t.id})[n]=e);else if(V(e))(r=r||{id:t.id})[n]=e;else{d[n]=!0;(i=i||{id:t.id})[n]=e}ke[n]?p.positions=!0:"id"!==n&&(p.all=!0)}));r&&c.push(r);i&&l.push(i)},y=0;y<f.length;y++)m(y);Object.keys(d).forEach((function(e){var t={fn:Ee[e]||be,prop:e};h.push(t);"x"!==e&&"y"!==e&&(v=!0)}));function b(e){n(e,(function(t,n){void 0===t&&(e[n]=g.defaultValueFor(n))}))}function x(e){e.forEach((function(e){var t=g.getByID(e.id);if(t){b(e);k.push(e);var n=w(e,t);E.push(n)}}))}function w(e,t){var r={};n(e,(function(e,n){"id"!==n&&("oc"===n&&t.oc?r[n]=ne(a(g.defaultValueFor(n,e)),a(t[n])):r[n]=a(t[n]||g.defaultValueFor(n,e)))}));return r}var A=t.time,M=r.linearEasing;"cubic"===t.easing&&(M=r.cubicEasing);var I=A,E=[],k=[];g.setProperties(c,!1,p,!1,!0);var C=ur((function(e,t){if(t){g.ensureTypesInArray(l,!0);x(l);ye(E,k)}else I-=e;for(var n=0!==A?M(Math.max(0,Math.min(1,(A-I)/A))):1,r=I>0,o=[],a=0,u=k.length;a<u;a++){var f=k[a],c=E[a],d={id:f.id};t&&(d._noHalos=!1);for(var p=0,m=h.length;p<m;p++){var y=h[p],b=y.prop;void 0!==f[b]&&(d[b]=y.fn(c[b],f[b],n))}o.push(d)}g.unsafeApplyChanges(o,v,s);r||T(i);return r}),p);Ue(C,t.queue)}function Se(e,t,n,r,i,o){Un.setProperties(e,!1,!0,{});Un.animateProperties(t,{time:r,queue:!1,easing:"linear"},(function(){if(i>1)Se(e,t,n,r,i-1,o);else{Un.setProperties(n,!1,!0,{});T(o)}}),!0)}function Te(e,t,n){function r(e,t,n,r){var i={id:t};i[n]=r;e.push(i)}for(var i=Z(e),o=[],a=[],u=[],s={},f=0;f<i.length;f++){var l=i[f],c=g.firstVisibleItemInAncestry(l);if(c&&!s[c.id]){s[l=c.id]=!0;var d="link"===c.type,h=-1,v=void 0;do{v="_ha"+ ++h}while(h<5&&c[v]);if(h<5){var p=Jt(t.c),m=Qt([p[0],p[1],p[2],.001]);r(o,l,v,{r:d?void 0:Math.max(28-t.w/2,0),w:0,c:t.c});r(a,l,v,{r:d?void 0:t.r,w:d?t.lw:t.w,c:m});r(u,l,v,null)}}}o.length>0?Se(o,a,u,t.time,t.repeat,n):T(n)}var Re=null;function Le(t){Re=t;e.lock()&&Wt()}var Be,Ge,Oe=function(e){};function Ze(e){Oe=e}function Ye(e){Be=e}function Fe(e){e&&(Ge=e);return Ge}var ze=function(){};function Pe(e){ze=e}function De(e){r.privateTrigger("redraw",e||{all:!0})}var Ve=sr(De),We=sr(De);function Xe(e){var t=In||Re,n=Ve.animate(e,t||void 0,g);t&&t.rebuild&&r.privateTrigger("redraw",t.rebuild);var i=We.animate(e);return n||i}var Ue=Ve.push,Ne=We.push;function je(e){if("number"==typeof e){E=e;De()}return E}var Ke=fr(Ve,je),He=null;function _e(e,t){return He=Be(e,t,!0)}var Je=.5;function Qe(e){return 1-e}function qe(e){return e}function $e(e,t,n,r){var i=n;return ur((function(o){i-=o;var a=Math.max(0,Math.min(1,(n-i)/n));Je=t(a);var u=i>0;if(!u){g.resurrect(e);Je=.5;T(r)}return u}),{all:!0})}function et(e,t,n){var r=t.time;if(0===e.length)T(n);else{Je=1;g.ghost(e);var i,o=g.showHideGetLinksToBend(e,!1);if(o.length>0){r*=2/3;i=function(){Un.animateProperties(o,{time:r/2,queue:!1,easing:"linear"},n,!0)}}else i=n;var a=$e(e,Qe,r,(function(){g.hide(e);T(i)}));Ue(a,!0)}}function tt(e,t,n){var r=t.time;function i(){var t=$e(e,qe,r,n);Ue(t,!0)}if(0===e.length)T(n);else{Je=0;g.ghost(e);var o=g.showHideGetLinksToBend(e,!0);if(o.length>0){r*=2/3;Un.animateProperties(o,{time:r/2,queue:!1,easing:"linear"},i,!0)}else i()}}function nt(e,t,n){De({all:!0});if(t.animate)et(e,t,n);else{g.hide(e);g.showHideBendLinks(e);De({all:!0});T(n)}}function rt(e,t,n,r){De({all:!0});g.show(e,t);if(n.animate)tt(e,n,r);else{g.showHideBendLinks(e);De({all:!0});T(r)}}var it,ot=!1,at=3;function ut(){var e=1200,t=0;return ur((function(n){t+=n;at=Math.floor(8*(1-t%e/e));return ot}))}function st(){if(ot&&c){M.setLayer(Oi.WAIT);var e=c.scale(c.width()/2),t=c.scale(c.height()/2),n=c.scale(30);M.rect(0,0,c.width(),c.height(),void 0,0,"rgba(255, 255, 255, 0.5)",!0,null,-1,void 0);for(var r=0;r<8;r++){var i=r*(Math.PI/4),o=e+n*Math.cos(i),a=t+n*Math.sin(i),u=.2+(r+at)%8/8*.8;M.circle(o,a,c.scale(10),Dt.white,-1,"rgba(145, 146, 149, "+u+")",!0,null,-1,void 0,!1)}}}function ft(e,t){var n,r,i=E,a=x.backColour,u=x.gradient,s="white";if(t){var f=c;n=f.scale(f.width());r=f.scale(f.height());if(ie()){i=1;s=o.internalUse.getDefaultBackgroundColour()}}a?Fn(e,a,i,n,r,t):u?zn(e,u.stops,i,n,r,t):Fn(e,s,i,n,r,t);Un.isMapMode()&&!t&&o.internalUse.setBackgroundColour(a,u)}function lt(e,t,n){M.resetExtras();var r=g.generate(M,h,c,t,!n.all&&!!n.positions);M.startGeneratingForExtras();it=g.getResizePrimitive();ct(e);i.generate(M,h,c,Re,e);st();return r}function ct(e){if(!e&&Re&&Re.generate){var t=M.getLayerPath();M.setLayerPath(null);M.setLayer(Oi.DRAGGERS);Re.generate(M);M.setLayerPath(t)}}function dt(e,t){g.setDirty(e);lt(!1,!0,{});return g.labelPosition(e,t,M)}function ht(e,t){ft(h,!1);if(s){s.setAlpha(Je,x.backgroundAlpha);if(u.hasUpdatedImages()){e.all=!0;s.updateTextures(x._rendering.showImageAtlas)}s.build(M,e,x);if(t&&t.getPixels)return s.getPixels(c,d,x,!!l,M.getAnchorBuffer());s.draw(c,d,x,!!l,M.getAnchorBuffer(),e)}}function vt(e){ci(h);ft(h,e);var t=!!l||void 0;hi(M,h,c,u,x,!1,He,!1,i.drawOverviewContent,e,x.backgroundAlpha,Je,t);u.hasUpdatedImages()&&u.imagesUpdated()}function gt(e,t){if(u.isReady()){lt(e,!1,t)&&(t.all=!0);g.getAlwaysRedraw()&&De({drawOnly:!0});if(l){ci(l);hi(M,l,c,u,x,!1,He,!1,i.drawOverviewContent,!1,x.backgroundAlpha,Je,!1)}h.webgl?ht(t):vt(e)}}function pt(){return!!l}function mt(){if(null!==h&&h.webgl)return ht({all:!0},{getPixels:!0});throw new Error("Not in WebGL mode")}function yt(){p.dirty()}function bt(e,t){return p.test(e,t,M)}function xt(){Re&&Re.mouseMoved&&Re.afterDraw&&Re.mouseMoved()&&Re.afterDraw(bt(Et,kt),Et,kt);u.hasPendingImages()&&De()}function wt(e){if(x.truncateLabels&&x.truncateLabels.showOnHover){g.showFullLabelOnHover(e);De()}}var At,Mt,It,Et,kt,Ct,St,Tt=null;function Rt(e,t){return function(){var n=bt(e,t);if((null===n||g.getByID(n))&&n!==At){At=n;var i=U(n);wt(i);g.setLastHoverId(i);r.trigger("hover",i,e,t,N(n))}}}function Lt(e,t){Tt&&clearTimeout(Tt);Tt=v(Rt(e,t),x.hover)}function Bt(e,t){Rt(e,t)()}function Gt(){Re=null}function Ot(e,t,n,r){if(g){var i=c.worldToViewX(n),o=c.worldToViewY(r);Le(g.startDragger(Un,c,e,i,o,t));if(Re&&e){var a=Re.getCursor(i,o);Oe(a)}}}function Zt(e){var t=x.drag&&!x.drag.links;return!(!e||!t||"link"!==e.type)}function Yt(e,t,n,r,i){if(x._linkSelection&&!x.handMode&&!It&&g){if(!(x.drag&&x.drag.links)){var o=bt(t,n);if(o&&o===Mt){var a=g.getByID(o);a&&"link"===a.type&&g.setSelection(o,r,i)}}}It=!1}function Ft(e,t,n,o,a){if(!g)return null;It=!1;m=e;var u,s=bt(t,n);if(Re)Ht(!0,t,n,o,a);else{Mt=s;s!==At&&null!==s&&(At=null);var f=r.trigger("mousedown",U(s),t,n,e,N(s)),l=g.getByID(s);if(l||!s){var d=Zt(l);if(!d){var v=!1,p=g.isSelected(U(s));v=0===e?x.handMode?!!s&&(!p||o):!p||o||!s:!s||!p;f&&(v=!1);v&&g.setSelection(s,o,a)}if(0===e){var y=d?null:s;Le(g.createDragger(Un,h,c,y,t,n,x,it,ie()));if(Re&&s){u=Re.getCursor(t,n);Oe(u)}}2===e?r.trigger("contextmenu",U(s),t,n,N(s)):It=r.trigger("click",U(s),t,n,e,N(s))}else{if(0===e){Le(i.createDragger(s,t,n));if(Re&&s){u=Re.getCursor(t,n);Oe(u)}}if(0===e||1===e){var b=U(s),w=N(s);It=r.trigger("click",b,t,n,e,w)}}}return s}function zt(){var e=x.drag&&!x.drag.panAtBoundary,t=!x.dragPan;return!(e||t)}function Pt(e,t,n,r){if(Re.scrollable&&zt()){var i=c.maybeScroll(e,t,Re,n,r);i&&Ue(i)}}function Vt(e,t,n,r,o){Et=e;kt=t;var a="auto";if(Re&&!o){Re.mouseMoved&&Re.mouseMoved(!0);Pt(e,t,n,r);Re.dragMove(e,t,n,r);a=Re.getCursor(e,t)}else if(g){var u=g?bt(e,t):null;Lt(e,t);var s=g.getByID(u);if(s){if(x.drag&&x.drag.links||"node"===s.type)a=g.getCursor(u);else{a=x.drag&&!x.drag.links&&!x.handMode?"pointer":"hand"}}else a=i.getCursor(u)}if(Ct!==a&&!o){Oe(a);Ct=a}}function Wt(){Re&&Ht(!0,Et,kt)}function Xt(e,t,n,r){Re&&Ht(!0,e,t,n,r)}function Ut(e,t,n){if(c){var i=Date.now();if(St&&i-St<100)return!1;St=i;r.trigger("mousewheel",e,t,n)||Ue(c.wheelToPosition(e,t,n))}return!1}function Nt(e,t,n,r){arguments.length&&Re&&(!zt()||ie()&&x.handMode)&&Ht(ie(),e,t,n,r)}function jt(e,t){var n=Mt;Re&&Ht(!1,e,t);if(2!==m){!n&&c&&(r.trigger("dblclick",null,e,t,null)||tn(!0));if(n&&g.getByID(n)){var i=U(n);r.trigger("dblclick",i,e,t,N(n))||Un.combo.internalUse.dblclick(i)}}}function Ht(e,t,n,r,i){void 0===r&&(r=!1);void 0===i&&(i=!1);if(Re){var o=Re;Re=null;o.endDrag(e,t,n,r,i,M);De()}Oe("auto");De({drawOnly:!0})}function _t(e){27===e&&Ht(!1)}function qt(e,t,n){if(g&&!r.trigger("keydown",e,t,n)){if(65===e&&t){g.selectAll();De();return!0}if(g.hasSelection()){var i=0,o=0,a=20;switch(e){case 37:i=-a;break;case 38:o=-a;break;case 39:i=a;break;case 40:o=a}if(0!==i||0!==o){r.trigger("prechange","move");g.moveSelection(i,o);De();return!0}if(46===e){if(!r.trigger("delete")){r.trigger("prechange","delete");he(g.selectionPlusDummyNodes())}De();return!0}113===e&&r.trigger("edit",g.doSelection())}return!1}}function $t(e,t,n,r,i){Ue(c.panBy(e,t,n,!1,r,i));De({drawOnly:!0})}function en(e,t,n,r){if(ie())o.internalUse.pan(e,t,n,r);else{Ue(c.pan(e,t,n,r));De({drawOnly:!0})}}function tn(e,t,n){if(ie())o.internalUse.zoom("in",e,t,void 0,void 0,n);else{Ue(c.zoomIn(e,t,n));De({drawOnly:!0})}}function nn(e,t,n){if(ie())o.internalUse.zoom("out",e,t,void 0,void 0,n);else{Ue(c.zoomOut(e,t,n));De({drawOnly:!0})}}function rn(e,t,n,r){if(ie())o.internalUse.setZoom(e,t,n,r);else{Ue(c.setZoom(e,t,n,r));De({drawOnly:!0})}}function on(){g.generate(M,h,c);return M.itemExtents(null,h)}function an(e){return function(t,n,r,i,a){if(u.isReady()&&g){var s=r;s=D(s)||0===s.length?void 0:Z(s);if(ie())o.internalUse.zoom(e,t,n,s,void 0,i);else{Ue(c[e](g,M,h,t,n,s,i,a)||null);De()}}}}function un(e,t,n,r){if(u.isReady()&&g)if(ie())o.internalUse.zoom("fitToExtents",e,t,[],n,r);else{Ue(c.fitWorldExtents(n,e,!0,!0,!0,t,r));De()}}function sn(e,t){var n=F(t,{fixed:[]});return g.extractStructure(h,n,e)}function fn(e,t){var n=e;return ur((function(e){var r=(n-=e)<0;r&&T(t);return!r}))}function ln(e,t,n){var i,o;if(e&&t){var a=Math.max(0,Math.min(t.time||700,2e3)),u="linear"===t.easing?r.linearEasing:r.cubicEasing,s=e.extents;g.updateLinkStyles(t);e.updatedEdges&&g.applyUpdatedOffsets(e.updatedEdges);var f=e.extents;if(Array.isArray(t.fit)){var l={};t.fit.forEach((function(t){var n=t;if(!e.vertices[n]){var r=g.firstVisibleItemInAncestry(n);r&&e.vertices&&(n=r.id)}e.vertices[n]&&(l[n]=e.vertices[n])}));J(l)&&(f=Ql(l))}i=g.makeNodePositionAnimator(e.vertices,a,u);o=c.fitWorldExtents(f,!0,!0,!0,!0,a,n);if(t.animate){Ne(i);t.fit?Ne(o):s&&Ne(fn(a,n))}else{g.applyVertices(e.vertices);De()
;s&&(t.fit?c.fitWorldExtents(f,!1,!0,!0,!0,0,n):T(n))}}else T(n)}var cn,dn,hn,vn,gn,pn,mn,yn,bn,xn,wn,An,Mn,In,En=!1;function kn(e){return function(t,n){En=!1;ln(t,n,e)}}function Cn(e,t,n){if(g){En=!0;var i=t||{},o=sn(e,i);g.layout(e,r,o,h,i,kn(n))}}function Sn(){return En}function Tn(e,t,n,i){if(g){var o=sn(e);g.arrange(e,r,t,o,h,n,kn(i))}}function Rn(e,t,n){function r(e){g.updateLinkStyles(t.layout);e&&g.applyUpdatedOffsets(e)}function i(e){if(t.layout.fit){var n=c.fitWorldExtents(e,t.animate,!0,!0,!0,t.time);Ue(n)}}Un.combo.internalUse.arrangeAndLayout(e,t,r,i,n)}function Ln(){if(cn){clearTimeout(cn);cn=null}}function Bn(e){if(g){if(2===e.length){An=(e[0].x+e[1].x)/2;Mn=(e[0].y+e[1].y)/2;xn=An;wn=Mn}if(1===e.length){vn=e[0].x;gn=e[0].y;mn=e[0].id;var t=bt(vn,gn);if(cn)t!==pn?Ln():dn=!0;else{dn=!1;cn=v(Ln,600)}pn=t;hn=v((function(){Gn();Re&&Ht(!1);r.trigger("contextmenu",U(pn),vn,gn,N(pn))}),600);if(!pn||g.getByID(pn)){if(!r.trigger("touchdown",U(pn),vn,gn,N(pn))){var n=Zt(g.getByID(pn));n||(pn?g.isSelected(U(pn))||g.setSelection(pn,!1,!1):x.handMode||g.setSelection(null,!1,!1));var o=n?null:pn;Et=vn;kt=gn;Le(g.createDragger(Un,h,c,o,vn,gn,x,it))}De()}else{Et=vn;kt=gn;Le(i.createDragger(pn,vn,gn))}}}}function Gn(){if(hn){clearTimeout(hn);hn=null}}function On(e){if(e.length>=2){xn=(e[0].x+e[1].x)/2;wn=(e[0].y+e[1].y)/2}for(var t=0;t<e.length;t++)if(mn===e[t].id){yn=e[t].x;bn=e[t].y}if(hn){var n=yn-vn,r=bn-gn;n*n+r*r>100&&Gn()}if(!In&&Re&&mn===e[0].id&&1===e.length){Et=e[0].x;kt=e[0].y;Re.mouseMoved&&Re.mouseMoved(!0);Pt(e[0].x,e[0].y);Re.dragMove(e[0].x,e[0].y,!1,!1)}}function Zn(e,t){De();var n=U(pn);if(hn){Gn();if(!ie()){var i=N(pn);It=r.trigger("click",n,vn,gn,0,i)}}if(cn&&dn&&2!==m){Ln();Mt=pn;Un.dblclick(vn,gn)}if(Re){for(var o=-1,a=0;a<t.length;a++)t[a].id===mn&&(o=a);if(o>-1&&0===e.length){Ht(!0,t[o].x,t[o].y,!1,!1);if(Zt(g.getByID(n))){Mt=pn;Yt(0,vn,gn,!1,!1)}}else if(e.length>0){vn=e[0].x;gn=e[0].y;mn=e[0].id;if(!(pn=bt(vn,gn))||g.getByID(pn)){g.setSelection(pn,!1,!1);Ht(!0,Et,kt);Le(g.createDragger(Un,h,c,pn,vn,gn,x,it))}}}}function Yn(){Gn();Re&&Ht(!1)}function Pn(){}function Vn(e,t){Gn();if(x.gestures&&b(An)&&b(Mn)){In||(In=g.createGestureDragger(c,An,Mn));In.dragMove(e,t,xn,wn);De({all:!0})}}function Wn(e,t){In&&In.endDrag(!0,e,t,xn,wn);In=null}function Xn(e){return M.itemExtents(e,h)}var Un={afterDraw:xt,animate:Xe,animateBackgroundOpacity:Ke,animateProperties:Ce,appendCombos:fe,arrange:Tn,arrangeAndLayout:Rn,backgroundOpacity:je,cancelAnimation:Ve.cancel,cancelLayoutAnimation:We.cancel,click:Yt,combo:k,dblclick:jt,destroy:ce,dragover:Bt,draw:gt,drawBackground:ft,drawoffscreen:yt,fitToModel:an("fitToModel"),fitToSelection:an("fitToSelection"),fitExtents:un,fitModelHeight:an("fitModelHeight"),gesturechange:Vn,gestureend:Wn,gesturestart:Pn,getCanvasContext:L,getWebGLPixels:mt,hide:nt,hittest:bt,imageGenFn:Fe,inMapMode:ie,initOverlays:P,itemExtents:Xn,isLayingOut:Sn,isMapMode:pt,keydown:qt,keyup:_t,labelPosition:dt,layout:Cn,load:ue,makeGhostCanvas:_e,merge:se,modelExtents:on,mousedown:Ft,mouseleave:Nt,mousemove:Vt,mouseup:Xt,mousewheel:Ut,options:re,pan:en,panBy:$t,ping:Te,removeDragger:Wt,removeItem:he,render:De,resetState:Gt,setCanvasContext:B,setContainer:le,setCreateCanvasFn:Ye,setCursorFn:Ze,setItem:de,setModel:z,setOverlayContext:S,setOverviewView:O,setProperties:ve,setShadowCanvas:Y,setStartGameLoopFn:Pe,setView:G,setViewSettings:ge,setZoom:rn,show:rt,startDragger:Ot,touchcancel:Yn,touchend:Zn,touchmove:On,touchstart:Bn,wait:R,watermarkSize:oe,zoomIn:tn,zoomOut:nn};return Un}function qv(e){function t(t,n,r,i,o,a,u,s,f,l){if(e.trigger("dragstart","resize",r,u,s,null))return null;var c=kn(t,i),d=i.r,h={},v=qn({},i);m();on(v,.5);function g(e,t){return{dx:n.viewToWorldDistance(e-u),dy:n.viewToWorldDistance(t-s)}}function p(e,t,n,r){var i,o,u=e,s=t;if(a.length>0||f){i={x1:0,x2:0,y1:0,y2:0};for(var l=0;l<a.length;l++){var d="x"===(o=a[l]).charAt(0)?u:s;i[o]=d}if(n||f){0!==i.x1&&(i.x2=-i.x1);0!==i.x2&&(i.x1=-i.x2);0!==i.y1&&(i.y2=-i.y1);0!==i.y2&&(i.y1=-i.y2)}}else{r&&(s=0!==(u=Math.abs(u)>Math.abs(s)?u:0)?0:s);i={x1:u,x2:u,y1:s,y2:s}}for(var h={},v=["x1","y1","x2","y2"],g=0;g<v.length;g++)h[o=v[g]]=c[o]+i[o];if(r){var p=c.x2-c.x1,m=c.y2-c.y1;if(Math.abs(p)>0&&Math.abs(m)>0){var y=m/p,b=h.x2-h.x1,x=h.y2-h.y1,w=void 0;if(Math.abs(u)>Math.abs(s)){var A=Math.floor(y*(p+b)-m)-x;if(f||n||!j(a,"y1")&&!j(a,"y2")){w=Math.floor(A/2);h.y1-=w;h.y2+=w}else{j(a,"y1")&&(h.y1-=A);j(a,"y2")&&(h.y2+=A)}}else{var M=Math.floor((m+x)/y-p)-b;if(f||n||!j(a,"x1")&&!j(a,"x2")){w=Math.floor(M/2);h.x1-=w;h.x2+=w}else{j(a,"x1")&&(h.x1-=M);j(a,"x2")&&(h.x2+=M)}}}}return h}function m(){v.wc&&(h.c=v.wc[3]);v.wfc&&(h.fc=v.wfc[3]);v.wbc&&(h.bc=v.wbc[3])}function y(){v.wc&&(v.wc[3]=h.c);v.wfc&&(v.wfc[3]=h.fc);v.wbc&&(v.wbc[3]=h.bc)}function b(e,t,n){return"1"===n.charAt(1)?d-("x"===n.charAt(0)?e:t):d+("y"===n.charAt(0)?t:e)}function x(e,t,n,r,o){var u,s=g(t,n);if("C"===i.p)if(a.length>1){var f=b(s.dx,s.dy,a[0]),l=b(s.dx,s.dy,a[1]);u=Math.abs(Math.min(f,l))}else u=Math.abs(b(s.dx,s.dy,a[0]));var c=p(s.dx,s.dy,r,o);In(e,c.x1,c.y1,c.x2,c.y2,u)}return{rebuild:{all:!0},animate:void 0,scrollable:!0,getCursor:function(){return o?"crosshair":"move"},generate:function(e){e.copyPrimitive(v)},dragMove:function(e,t,n,r){x(v,e,t,n,r)},endDrag:function(t,o,a,u,s){n.cancelScroll();var f=e.trigger("dragend","resize",r,o,a);y();if(!f&&t){x(i,o,a,u,s);l(i)}e.trigger("dragcomplete","resize",r,o,a)}}}function r(t,n,r,i){var o={x:!0,y:!0},a=t.offsetX(),u=t.offsetY(),s=0,f=0,l=!1,c="hand",d=e.trigger("dragstart",c,null,n,r,null);if(d){if(!I(d)){i();return null}ne(o,d)}function h(e,t){l=l||Math.abs(n-e)>10||Math.abs(r-t)>10;s=e-n;f=t-r;if(o){o.x||(s=0);o.y||(f=0)}}function v(){if(l){t.offsetX(a+s);t.offsetY(u+f);e.trigger("viewchange")}}return{rebuild:{drawOnly:!0},animate:v,direction:o,dragMove:h,getCursor:function(){return"move"},endDrag:function(t,n,r){var o=e.trigger("dragend",c,null,n,r);if(l){if(!o&&t)h(n,r);else{s=0;f=0}v()}else i();e.trigger("dragcomplete",c,null,n,r)}}}function i(t,n,r,i,o){var a="hand",u=U(n),s=!1;e.trigger("dragstart",a,u,r,i,N(n));return{rebuild:void 0,animate:void 0,direction:{},dragMove:function(e,t){s=s||Math.abs(r-e)>10||Math.abs(i-t)>10},getCursor:function(){return"move"},endDrag:function(t,r,i){null!==n||s||o();e.trigger("dragend",a,u,r,i);e.trigger("dragcomplete",a,u,r,i)}}}function o(t,n,r,i,o,a,u,s,f){var l={x:!0,y:!0,add:null,combos:!0},c=U(u),d=n[c],h="move",v=e.trigger("dragstart",h,c,s,f,N(u));if(v)if(Array.isArray(v))l.add=Q(v);else{if(!I(v))return null;ne(l,v);Array.isArray(l.add)&&(l.add=Q(l.add))}if(l.combos){var g=o();if(g.length){l.add=l.add||{};g.forEach((function(e){l.add[e]=!0}))}}function p(e){return!!l.add&&l.add[e]}var m=a?a.viewToWorldX(s):s,y=a?a.viewToWorldY(f):f,b=Object.keys(n),x=T(s,f),w={x:0,y:0},A=!0,M=!1;d&&(M=!(!d.w||!d.h));function E(){var e=x.dx-w.x,n=x.dy-w.y;w.x=x.dx;w.y=x.dy;var r=b.filter((function(e){return e!==c&&(i(e)||p(e))}));i(c)&&(M?r.unshift(c):r.push(c));t.moveAllNodesBy(r,e,n);if(A){A=!1;t.setDirty(c)}t.drawInTransientLayer(r)}function k(){var e=b.filter((function(e){return i(e)||p(e)}));t.moveAllNodesBy(e,-w.x,-w.y)}var C=!1,S=!1;function T(e,t){C=C||Math.abs(s-e)>10||Math.abs(f-t)>10;var n=a?a.viewToWorldX(e):e,r=a?a.viewToWorldY(t):t;if(l){l.x||(n=m);l.y||(r=y)}return{dx:C?n-m:0,dy:C?r-y:0}}var R=!1,L=null;return{rebuild:{positions:!0},scrollable:!0,direction:l,animate:E,generate:function(t){C&&t.setHitTesting(c,!1);if(C&&!S){S=!0;e.privateTrigger("redraw",{all:!0})}},getCursor:function(){return"move"},dragMove:function(e,t){x=T(e,t)},mouseMoved:function(e){e&&(R=!0);return R},afterDraw:function(t,n,r){R=!1;var i=U(t);if(c!==i){i!==L&&e.trigger("dragover",i,n,r,N(t));L=i}},endDrag:function(n,r,i,o,s,f){a.cancelScroll();if(e.trigger("dragend",h,U(u),r,i))k();else if(n&&C){k();x=T(r,i);w={x:0,y:0};e.trigger("prechange","move");E()}else k();f.setHitTesting(c,!0);t.setDirty(c);l.add&&Object.keys(l.add).forEach(t.setDirty);e.trigger("dragcomplete",h,U(u),r,i)}}}function u(t,n,r,i,o,u,s,f,l){if(e.trigger("dragstart","dummy",l,s,f,null))return null;var c=r?r.viewToWorldX(s):s,d=r?r.viewToWorldY(f):f,h=i[o[u]].x,v=i[o[u]].y;function g(e,t){n.moveNode(o[u],e,t)}var p,m=x(s,f),y=null,b=!1;function x(e,t){var n=r?r.viewToWorldX(e):e,i=r?r.viewToWorldY(t):t;return{dx:n-c,dy:i-d}}function w(){return o["id1"===u?"id2":"id1"]}return{rebuild:{all:!0},scrollable:!0,animate:function(){g(h+m.dx,v+m.dy)},getCursor:function(){return"move"},dragMove:function(e,n){m=x(e,n);y=t.hittest(e,n)},mouseMoved:function(e){e&&(b=!0);return b},afterDraw:function(t,n,r){b=!1;var i=U(t),o=N(t);if(l===i){i=null;o=null}if(void 0===p)p=i;else if(i!==p){e.trigger("dragover",i,n,r,o);p=i}},endDrag:function(s,f,l){r.cancelScroll();if(!e.trigger("dragend","dummy",y,f,l))if(s){g(h,v);e.trigger("prechange","move");y=U(y);if(i[y]&&y!==w()){var c=a(o);c[u]=y;delete c.off;n.removeItem([o[u],o.id]);t.merge([c])}else{m=x(f,l);g(h+m.dx,v+m.dy);y=null}}else g(h,v);e.trigger("dragcomplete","dummy",y,f,l)}}}function s(t,r,i,o,a,u,s,f){var l=!1;if(e.trigger("dragstart","offset",f,u,s,N(f)))return null;function c(e,t,n,r,i,o){return((n-e)*(t-o)-(e-i)*(r-t))/Math.sqrt((n-e)*(n-e)+(r-t)*(r-t))}var d={},h={},v={};o.privateSelection().forEach((function(e){if(e){var t=o.getByID(e);if(t&&"link"===t.type){d[e]=t.off||0;h[e]=t.off||0;v[e]=!0}}}));var g=!1;function p(e,n,r){var o=e===a,u=o?i.viewToWorldX(n):n,s=o?i.viewToWorldY(r):r,f=t(1,e),l=t(2,e),g=c(f.x,f.y,l.x,l.y,u,s);v[e.id]&&Math.abs(g-d[e.id])>8&&(v[e.id]=!1);if(!v[e.id]){Math.abs(o?g:g+d[e.id])<12&&(g=o?0:-d[e.id]);h[e.id]=o?g:g+d[e.id]}}function m(e){o.setLinkOffset(e,h[e])}return{rebuild:{all:!0},scrollable:!0,animate:function(){n(h,(function(e,t){m(t)}))},getCursor:function(){return"move"},dragMove:function(e,r){if(!l){var f=i.viewToWorldX(e)-i.viewToWorldX(u),c=i.viewToWorldY(r)-i.viewToWorldY(s);n(h,(function(n,i){var u=o.getByID(i);if(u)if(u===a){p(u,e,r);g=!0}else{var s=t(1,u),l=t(2,u),d=(s.x+l.x)/2,h=(s.y+l.y)/2;p(u,d+f,h+c)}}))}},endDrag:function(t,r,a){i.cancelScroll();l=!0;var u=e.trigger("dragend","offset",f,r,a);if(o.getByID(f))if(!u&&t&&g){n(d,(function(e,t){o.getByID(t).off=e}));e.trigger("prechange","offset");n(h,(function(e,t){o.getByID(t).off=e}))}else{n(h,(function(e,t){h[t]=d[t]}));this.animate()}e.trigger("dragcomplete","offset",f,r,a)}}}return{createDefaultDragger:o,createHandDragger:r,createLinkDragger:s,createLinkEndDragger:u,createMapDragger:i,primitiveMover:t}}function $v(e,t,n){var r=null,i=null,o=null,u=null;t.privateBind("redraw",(function(){r=null;i=null}));function s(e,t,s){if(!e.type||!e.type.match(/^(node|link|all)$/))throw new TypeError("options type property should be either 'node', 'link' or 'all'");if(!e.items||!e.items.match(/^(underlying|toplevel|all)$/))throw new TypeError("options items property should be either 'underlying', 'toplevel' or 'all'");if(!r){i=n.privateGetRawItems();o=i;if(t)u=i;else{r=a(i,"d");u=r}}if(A(s))for(var f=0;f<o.length;f++){var l=o[f];h(e.type,l)&&v(e.items,l)&&s(u[f])}}function f(t,r,i){var o="underlying"===r.items,u=g(t,"hi","shown","hidden",r.type,r.hideSingletons,o),s=u.shown.nodes.concat(u.shown.links),f=u.hidden.nodes.concat(u.hidden.links),l=e.combo.internalUse.filter(s,f,u,r);s=l.toShow;function c(){T(i,a({shown:u.shown,hidden:u.hidden,combos:u.combos},!0))}if((f=l.toHide).length>0)if(s.length>0){r.time/=2;n.privateHideWithoutCombos(f,r,(function(){n.privateShowWithoutCombos(s,!1,r,c)}))}else n.privateHideWithoutCombos(f,r,c);else s.length>0?n.privateShowWithoutCombos(s,!1,r,c):c()}function l(t,r,i){var o="link"===r.type,u="underlying"===r.items,s=g(t,"bg","foreground","background",r.type,o,u),f=s.foreground.nodes.concat(s.foreground.links),l=s.background.nodes.concat(s.background.links),c=e.combo.internalUse.foreground(f,l,s,r),d=c.toHide.map((function(e){return{id:e,bg:!0}})),h=c.toShow.map((function(e){return{id:e,bg:!1}}));n.setProperties(d.concat(h),!1,(function(){T(i,a({foreground:s.foreground,background:s.background},!0))}))}function c(e,t){t.forEach((function(t){if(e[t.id]){e[t.id1]=!0;e[t.id2]=!0}}))}function d(e,t){t.forEach((function(t){e[t.id]=!(!e[t.id1]||!e[t.id2])}))}function h(e,t){return"all"===e||e===t.type}function v(e,t){var n;switch(e){case"toplevel":n=!t.parentId;break;case"all":n=!0;break;case"underlying":default:n=!t._combo}return n}function g(e,t,n,r,i,o,a){var u={},f={all:{}};f[n]={nodes:[],links:[]};f[r]={nodes:[],links:[]};f.all[n]={nodes:[],links:[]};f.all[r]={nodes:[],links:[]};var l=h();v(l);g(l);p(l);m(l);y(l);l.all.forEach((function(e){var i="node"===e.type?"nodes":"links",o=u[e.id]?n:r;!u[e.id]==!e[t]&&f[o][i].push(e.id);f.all[o][i].push(e.id)}));return f;function h(){var e={all:[],nodes:[],links:[]};s({type:"all",items:a?"underlying":"toplevel"},!1,(function(t){e.all.push(t);"node"===t.type?e.nodes.push(t):e.links.push(t)}));return e}function v(t){("node"===i?t.nodes:"link"===i?t.links:t.all).forEach((function(t){e(t)&&(u[t.id]=!0)}))}function g(e){"link"===i&&(o?c(u,e.links):e.nodes.forEach((function(e){u[e.id]=!0})))}function p(e){"node"===i&&d(u,e.links)}function m(e){"all"===i&&"bg"!==t&&e.links.forEach((function(e){u[e.id]=!(!u[e.id1]||!u[e.id2]||!u[e.id])}))}function y(e){if("link"!==i&&o){var t={};e.links.forEach((function(e){t[e.id1]=t[e.id1]||u[e.id]&&u[e.id2];t[e.id2]=t[e.id2]||u[e.id]&&u[e.id1]}));e.nodes.forEach((function(e){u[e.id]=u[e.id]&&t[e.id]}))}}}return{each:s,filter:f,foreground:l}}var eg=Dt.ci,tg=Ht(eg),ng=tn(tg[0],tg[1],tg[2]);function rg(){var e=ng;function t(t){var n=Ht(t||eg);return rn((e=tn(n[0],n[1],n[2]))[0],e[1],ng[2])}function n(t){var n=.02,r=document.createElement("canvas");r.width=t.width;r.height=t.height;var i=r.getContext("2d");i.clearRect(0,0,t.width,t.height);i.drawImage(t.im,0,0,t.width,t.height);for(var o=i.getImageData(0,0,t.width,t.height),a=o.data,u=0;u<a.length;u+=4){var s=tn(a[u],a[u+1],a[u+2]);if(Math.abs(s[0]-ng[0])<n){var f=rn(e[0],e[1],s[2]);o.data[u]=f[0];o.data[u+1]=f[1];o.data[u+2]=f[2]}}i.putImageData(o,0,0);return r}return{colouriseImage:n,setColour:t}}function ig(e,t,n,r){var i=document.createElement("canvas"),o=i.getContext("2d");i.id="webglDebug"+r+"Canvas"+t;i.width=e;i.height=e;var a=document.getElementById(i.id);n?a?a.parentNode.replaceChild(i,a):document.getElementsByTagName("body")[0].appendChild(i):a&&document.getElementsByTagName("body")[0].removeChild(a);return o}var og=512,ag=4,ug=264,sg=8,fg="Image";function lg(e){return{alphaChannel:!0,img:e,rebuild:!1,size:0}}function cg(e,t){for(var n=[],r=4,i=4,o=4,a=0,u=e.getMissingImage(),s=vg(e),f=dg(s),l=1/f,c=ig(f,0,t,fg),d=[],h=0,v=s.length;h<v;h++){var g=s[h];if(g.isMissing)d.push(g);else{var p=g.width/g.imageRatio,m=g.height/g.imageRatio;if(r+p+sg>f){r=0;i+=a+sg;a=0}if(i+m>f){o++;i=sg;n.push(lg(c.canvas));c=ig(f,o,t,fg)}g.u1=r*l;g.v1=i*l;g.u2=(r+p)*l;g.v2=(i+m)*l;if(g.isEmoji){g.v2=i*l;g.v1=(i+m)*l}g.maxDimension=g.nonSquare;g.textureBank=o;g.colourComponentTexture=-1;if(g.nonSquare){var y=g.v2-g.v1,b=g.u2-g.u1;if("width"===g.nonSquare){var x=(b-b*(y/b))/2;g.cu1=g.u1+x;g.cv1=g.v1;g.cu2=g.u2-x;g.cv2=g.v2}else{var w=(y-y*(b/y))/2;g.cu1=g.u1;g.cv1=g.v1+w;g.cu2=g.u2;g.cv2=g.v2-w}}else{g.cu1=g.u1;g.cv1=g.v1;g.cu2=g.u2;g.cv2=g.v2}c.drawImage(g.hasControlColour?g.co:g.im,r,i,p,m);m>a&&(a=m);r+=p+sg}}d.forEach((function(e){e.u1=u.u1;e.v1=u.v1;e.u2=u.u2;e.v2=u.v2;e.cu1=u.cu1;e.cv1=u.cv1;e.cu2=u.cu2;e.cv2=u.cv2;e.textureBank=u.textureBank}));n.push(lg(c.canvas));o++;for(;o<7;){var A=ig(1,o++,!1,fg);n.push(lg(A.canvas))}return n}function dg(e){for(var t=1,n=sg,r=sg,i=0,o=1024,a=0,u=e.length;a<u;a++){var s=e[a],f=s.width/s.imageRatio,l=s.height/s.imageRatio;if(n+f+sg>o){n=0;r+=i+sg;i=0}if(r+l>o){t++;r=sg}l>i&&(i=l);n+=f+sg}return t<ag?1024:t<=4*(ag-1)?2048:4096}function hg(e,t){var n=1,r=!1;if(e>ug){t>0?e>og&&(n=e/og):n=e/ug;r=!0}return{imageRatio:n,largeImage:r}}function vg(e){var t=[],n=2;e.forEach((function(e){if(e.isLoaded){var r=e.width>e.height?"width":"height";if(e.src&&e.src.indexOf(".svg")>-1){var i=0|Math.max(e.width,e.height);if(i){var o=256/i;e.width=Math.round(e.width*o);e.height=Math.round(e.height*o)}else{e.width=256;e.height=256}}var a=hg(e.height,n);a.largeImage&&n>0&&n--;e.size=e[r]/a.imageRatio;e.imageRatio=a.imageRatio;e.nonSquare=e.width!==e.height&&r;t.push(e)}}));return t.sort((function(e,t){return e.size-t.size}))}function gg(e){var t=document.createElement("canvas"),n=t.getContext("2d");t.width=128;t.height=128;n.fillStyle="black";n.font="105px sans-serif";var r=n.measureText(e).width,i=r*(128/105);t.width=Math.max(1,i);n.font="105px sans-serif";n.fillText(e,(t.width-r)/2,96);return t}function pg(){var e=0,t=new Map;function n(n){if(n&&A(n)){var r={id:e++,fn:n};t.set(r.id,r)}}function r(){if(t.size>0){var e=[];t.forEach((function(t){e.push(t)}));e.forEach((function(e){t.delete(e.id)}));e.forEach((function(e){e.fn()}))}}function i(){t.clear()}return{destroy:i,push:n,runAll:r}}var mg="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAACwklEQVR4Ae2aA8xkQRCEz7Zt27Zt20ZwZny2bdu2bdu2uVdnb/6ufZqX6eQLd7qmKtvP/nTp0qVLly5d3mvh3dzgI/AIqWmQfnTwRKi9Ffg3MoTBRAB3QHgDtGcJdV+CxEb/C0KAc0QI43zULUhotnfSKHwEOUm9IOC0UG8vCEjpmTgKx0FgQqurUOctSCVQsHQUugh14oGXQo2eTj4rvAQJBBpLhf2PEv8yy0dhtR97lxX2fQ8y8WasHYXqfuh7Wdizj0oXSLdBOC89ewv7nQHBOAP2jcLo//RKDt4KT7G57TPPj8JHkP0fvTYJ+wxX+V7hGAj8S49awvWXQShnBMCPQsdva8OC28K1RZxjnh+FFyAeGC5cN9FNt80HwAfB7296PYuoNgoEZR3mmB8FgtnqP0HiuQci85tSfxRqiPRdNgpL1X+YyvMYxKT0XTIKjXhx9UdhvRveKQQAO8kAurghgE7AQ/IGpFfZfNpvJjw+cBaEUtF8UHDUoNPgVBUD6As8BlJXtfP/B4MDeAaSqGA+NLgIPCZwCAR1egDjBYYYhjnZfCnC0AtiTQEnmo9EPNcbAhoSAVwEIZ0WwAKhicMgyLe169QehYV36xBXeKl/WR8fPCfeLeRygvnY4LHP1/gL77YlrxKD22neP9jAvMY28Kapv23+iQPYB5DNS7/k4DXxajyLHeajgIfEuzz6sxgvHAQBrA5ghnCT10EYP/QNBA4RIbS00nwRYoOVBP0zEPcSD0FkK8wHBxeEm9tA6EwlQp5gun/iC453IBWhE5c4IH4E2cw0nwS8FW5qqA96A4h/wQEQwKwAlhOvs8L5oBcBPCZCaGCG+aLERpoboNuZ0L0BQhhpPhA4QVymBjLooHudCKG7kQG0IjZQxUD9RuQjtKhGiIcHD4Ti+4B/AwMICE4SIYz5b09dunTp0qVL1ydOC8gcEyAGqgAAAABJRU5ErkJggg==";function yg(e,t,n){var r=pg(),i=e||Eg,o=i();o.src=mg;var a=bg("",o);a.isLoaded=!0;var u=new Map,s=new Set,f=!1,l=!1,c=rg(),d=!0;function h(e){var t=e.im;s.add(e.src);e.isLoaded=!0;e.width=t.width;e.height=t.height;if(e.isHiRes){t.width/=2;t.height/=2}e.hasControlColour&&(e.co=c.colouriseImage(e));e.hasCutout&&(e.ci=Ig(e))}function v(e,t){if(e.isCors)F(t,e);else{e.isCors=!0;var n=i();n.crossOrigin="anonymous";n.onload=g(e);n.onerror=p(e);e.im=n;P(e)}}function g(e){return function(){if(C(e.src)){var t=z(e.im);t?v(e,t):h(e)}Y()}}function p(e){return function(t){if(e.isHiRes){e.isHiRes=!1;P(e)}else F(t,e);Y()}}function m(e,n,r){f=!0;var o=i(),a=bg(e,o,n&&(t||xg()),r);u.set(e,a);o.onload=g(a);o.onerror=p(a);P(a);return a}function y(e){var t=k(e);t.isLoaded&&!t.ci&&(t.ci=Ig(t));t.hasCutout=!0;return t}function b(e){var t=u.get(e);if(!t){var n=gg(e);t=bg(e,n,!1,!1);u.set(e,t);t.isLoaded=!0;t.width=n.width;t.height=n.height;t.isEmoji=!0;s.add(e)}return t}function x(e){var t=u.get(e),n=u.delete(e);if(n&&t.isLoaded){l=!0;f=!0}return n}function w(){return!(!s.size&&!l)}function A(){R((function(e){s.add(e.src)}))}function M(e){var t=c.setColour(e);R((function(e){if(e.isLoaded&&e.hasControlColour){e.co=c.colouriseImage(e);s.add(e.src)}}));return t}function I(e,t){var n=k(e,t,!0);if(n.isLoaded&&!n.hasControlColour){n.co=c.colouriseImage(n);s.add(n.src)}n.hasControlColour=!0;return n}function E(){s.clear();l=!1}function k(e,t,n){return u.get(e)||m(e,!!t,!!n)}function C(e){return u.has(e)}function S(){if(f){var e=0;u.forEach((function(t){t.isLoaded&&e++}));f=e!==u.size}return f}function R(e){u.forEach(e);e(a)}function L(){try{}catch(e){}return d}function B(e){S()?setTimeout((function(){B(e)}),100):T(e)}function G(){return a}function O(e){S()?r.push(e):T(e)}function Z(){u.clear();r.destroy()}function Y(){S()||r.runAll()}function F(e,t){s.add(t.src);t.im=o;t.ci=o;t.co=o;t.isMissing=!0;t.isLoaded=!0;t.hasControlColour=!1;t.error=e;f=!0}function z(e){var t=Mg(e);if(t)return t;try{var n=document.createElement("canvas");n.getContext("2d").drawImage(e,0,0,1,1);n.toDataURL()}catch(e){return e}return null}function P(e){var t="",r=e.src;-1===r.indexOf("data:")&&(t+=n||"");t+=e.isHiRes?wg(r):r;e.im.src=t}return{delete:x,destroy:Z,forEach:R,get:k,getControlColourImage:I,getCutoutImage:y,getEmojiImage:b,getMissingImage:G,has:C,hasPendingImages:S,hasUpdatedImages:w,imagesUpdated:E,invokeWhenImagesHaveLoaded:O,isReady:L,resetControlColour:M,resetUpdatedImages:A,waitForImages:B}}function bg(e,t,n,r){return{src:e,im:t,co:null,ci:null,width:64,height:64,imageRatio:1,isLoaded:!1,hasControlColour:!1,hasCutout:!1,isCors:!1,isHiRes:!!n,isMissing:!1,isAsset:!!r,isEmoji:!1}}function xg(){return window.devicePixelRatio>=1.5}function wg(e){var t=e.length-4;return e.substr(0,t)+"@2x.png"}function Ag(e){return"data:image/"===(e||"").slice(0,11)}function Mg(e){var t=void 0!==e.naturalWidth&&0===e.naturalWidth;!Ag(e.src)&&M("svg",e.src)&&(t=t&&0===e.width);return t?new Error("Invalid Image"):null}function Ig(e){var t=e.im,n=Math.min(t.width,t.height),r=n<t.height?Math.floor((t.height-n)/2):0,i=n<t.width?Math.floor((t.width-n)/2):0,o=Math.floor(n/2),a=document.createElement("canvas");a.width=n;a.height=n;var u=a.getContext("2d");u.save();u.beginPath();u.arc(o,o,o,0,2*Math.PI,!1);u.clip();u.drawImage(t,i,r,n,n,0,0,n,n);u.restore();return a}function Eg(){return document.createElement("img")}function kg(e){return"IMG"===e.tagName}function Cg(e){return"CANVAS"===e.tagName}function Sg(e,t,n,r,i,o){var a=new Map,u=t(n.width,n.height),s=u.getContext("2d"),f=yg(),l=e.getPane("mapPane"),c=Lg(l.style.transform,{x:0,y:0,scale:1});Tg(l,c,f,a);Rg(e,c,f,a,r);i(s,!0);f.waitForImages((function(){a.forEach((function(e,t){var i=t;if(kg(t)){var o=f.get(t.src);i=o.isMissing?null:o.im}else i===r&&(i=n);i&&s.drawImage(i,Math.floor(e.x),Math.floor(e.y),i.width*e.scale,i.height*e.scale)}));var e;try{e=u.toDataURL()}catch(e){throw new Error("[toDataURL] Error exporting chart."+e)}finally{T(o,e)}}))}function Tg(e,t,n,r){Bg(e,"leaflet-tile-container",(function(e){var i=Lg(e.style.transform,t);Bg(e,"leaflet-tile",(function(e){var t=e,o=Lg(t.style.transform,i);n.get(t.src);r.set(t,o)}))}))}function Rg(e,t,n,r,i){var o=e.getPane("overlayPane"),a=[];Bg(o,null,(function(e){a.push(e)}));a.sort((function(e,t){return(0|+e.style.zIndex)-(0|+t.style.zIndex)}));a.forEach((function(e){var o=Lg(e.style.transform,t);if(kg(e)){o.scale=e.width/e.naturalWidth;n.get(e.src);r.set(e,o)}else if(Cg(e)){e.style.width&&e!==i&&(o.scale=Gg(e.style.width)[0]/e.width);r.set(e,o)}}))}function Lg(e,t){var n=re({},t),r=e.split(/translate(3d)?\(|\);?/);if(r[2]&&r[2].length){var i=Gg(r[2]);n.x+=i[0]||0;n.y+=i[1]||0}return n}function Bg(e,t,n){for(var r=t?e.getElementsByClassName(t):e.children,i=0;i<r.length;i++)n(r[i],i)}function Gg(e){return e.match(/[-\d]+/g).map(Number)}var Og=!1;try{var Zg=Object.defineProperty({},"passive",{get:function(){Og=!0;return!1}});window.addEventListener("test",Zg,Zg);window.removeEventListener("test",Zg,Zg)}catch(e){Og=!1}function Yg(e,t,n,r){var i=r||!1;Og?e.addEventListener(t,n,{capture:i,passive:!1}):e.addEventListener(t,n,i)}function Fg(e,t){for(var n=0;n<e.length;n++)Yg(document,e[n],t)}function zg(e,t){return Pg(e,t)}function Pg(e,t){var n=Dg(t);return{x:Math.floor(e.pageX-n.left),y:Math.floor(e.pageY-n.top)}}function Dg(e){var t={top:0,left:0};e&&(t=e.getBoundingClientRect());return{top:t.top+window.pageYOffset-document.documentElement.clientTop,left:t.left+window.pageXOffset-document.documentElement.clientLeft}}function Vg(e){e.stopPropagation&&e.stopPropagation();e.preventDefault?e.preventDefault():e.returnValue=!1;e.preventCapture&&e.preventCapture();e.preventBubble&&e.preventBubble()}function Wg(e){return null===e}function Xg(e){return"move"===e}function Ug(e,t,n,r,i,o,a){var u=!1,s=!0,f=!1;"undefined"!=typeof navigator&&(f=!!navigator.userAgent.match(/Edge/)||"undefined"!=typeof MSPointerEvent);if(r){if(!e._leafletEventHandlers){y();m();e._leafletEventHandlers=x();n.on(e._leafletEventHandlers)}}else{n.off(e._leafletEventHandlers);e._leafletEventHandlers=null;y();m()}function l(t){var n=Pg(t,e.privateCanvasApi.privateGetElement());return[{id:t.pointerId,x:n.x,y:n.y}]}function c(e){return!o()&&("touch"===e.pointerType||"pen"===e.pointerType)}function d(e){var n=e;if(s&&c(n)){var r=l(n);t.touchstart(r)}}function h(e){var n=e;if(c(n)){Vg(n);var r=l(n);t.touchmove(r)}}function v(e){var n=e;if(c(n)){Vg(n);var r=l(n);t.touchend([],r)}}function g(n){var r=Pg(n,e.privateCanvasApi.privateGetElement());t.dragover(r.x,r.y)}function p(e){var n=e;(n.keyCode<37||n.keyCode>40)&&t.keydown(n.keyCode,n.ctrlKey,n.shiftKey)}function m(){var e=r?"addEventListener":"removeEventListener",t=n.getContainer();if(window.PointerEvent&&!f){t[e]("touchmove",Vg);t[e]("pointerdown",d);t[e]("pointermove",h);t[e]("pointerup",v)}t[e]("dragover",g);t[e]("keydown",p)}function y(){var t=r?e.privateBind:e.privateUnbind;t("dblclick",Wg);t("dragstart",Xg)}function b(t){return function(n){if(s){var r=n.originalEvent,i=Pg(r,e.privateCanvasApi.privateGetElement());if(r.shiftKey)return!0;t(r,i)}}}function x(){var e=!1,r=b((function(r,i){var o=r,a=t.mousedown(o.button,i.x,i.y,o.ctrlKey,o.shiftKey);if(n&&(n.doubleClickZoom.enabled()||e))if(!s||a&&"_"===a.charAt(0)&&"__dragger"!==a){n.doubleClickZoom.disable();e=!0}else{n.doubleClickZoom.enable();e=!1}})),o=b((function(e,n){var r=e;t.mouseup(n.x,n.y,r.ctrlKey,r.shiftKey)})),f=b((function(e,n){var r=e;t.click(r.button,n.x,n.y,r.ctrlKey,r.shiftKey)}));return{click:function(e){if(s){if(!a()&&!u){r(e);o(e)}a(!1)}f(e)},contextmenu:function(){},dblclick:b((function(e,n){var r=e;t.dblclick(n.x,n.y,r.ctrlKey,r.shiftKey)})),mousedown:function(e){a(!0);s&&!u&&r(e)},mousemove:b((function(e,n){var r=e;t.mousemove(n.x,n.y,r.ctrlKey,r.shiftKey)})),mouseup:o,move:function(){u||i()},zoomstart:function(){s=!1;u=!0},zoomend:function(){s=!0;u=!1}}}}function Ng(e,t,n){function r(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];e.off(t,r);n.apply(void 0,i)}e.on(t,r)}function jg(e,t,r,i,o){var u,s,f,l,c=!1,d=!1,h=!1;function v(e){if("boolean"!=typeof e)return h;h=e}var g,p,m,y,x,w,A,M,I,E,k,C,R=.75,B=1.25,G=4,O=15,Y={},F={watermark:!1,overview:!1,gestures:!1,handMode:!0},z=a(o),D=["doubleClickZoom","dragging","keyboard","scrollWheelZoom","touchZoom"],V=!1;U()&&(L.Map.prototype._panInsideMaxBounds=function(){if(!this._enforcingBounds){var e=void 0;C&&(e={animate:!1});this.panInsideBounds(this.options.maxBounds,e)}});return{changeTilesLayer:ye,convertPos:Pe,enableDragging:Fe,getLeafletMap:function(){return u},getMapContainer:function(){return m},showMap:le,hideMap:we,isLeafletLoaded:U,isMapLoaded:Ye,isShown:function(){return c},isTransitioning:function(){return d},latLngToWorldCoordinates:ze,lockEvents:Q,restoreMapMode:Oe,restoreNetworkMode:Ze,setDependencies:function(e,t){s=e;l=t},setHandMode:j,setSize:Re,setView:function(e){E=e},updateNodePositions:ee};function W(){if(!p){p=e.privateCanvasApi.privateGetElement();I=ie(p)}}function X(){var e="1.3.4",t="1.3.4",n=L.version.split("-")[0].split("+")[0];if(me(n,e)<0)throw new Error("Cannot use an older version of Leaflet than "+e);if(!V&&me(n,t)>0){console.warn("You are using an unsupported version of Leaflet - please use "+t+" instead.");V=!0}}function U(){return"object"==typeof L&&L&&"Map"in L&&"version"in L}function N(){if(u){var t=e.lock()||!k;m.style.touchAction=t?"none":""}}function j(e){if(e!==k){k=e;N()}}function H(){return k}function _(e){u=e;r.setLeafletMap(u)}function J(t){u&&Ug(e,l,u,t,$,H,v)}function Q(e){if(u){var t=e?"disable":"enable",n=e||!H()?"disable":"enable";D.forEach((function(e){"dragging"===e?u.dragging[n]():u[e][t]()}));J(!e);N()}}function q(){var e=u.containerPointToLayerPoint([0,0]),t=new L.Point(Math.round(e.x),Math.round(e.y));L.DomUtil.setPosition(p,t);E.offsetX(-t.x);E.offsetY(-t.y)}function $(){q();Le({drawOnly:!0})}function ee(t){e.setProperties(fe(),!1,t)}function te(){return new(L.Layer.extend({initialize:function(e,t){L.Util.setOptions(this,t)},setOptions:function(e){L.Util.setOptions(this,e);return this.redraw()},redraw:function(){this._forceRedraw();return this},onAdd:function(){this.getPane().appendChild(p);u.on("zoomend",this._onZoomEnd,this);u.on("moveend",this._onMoveEnd,this);u.options.zoomAnimation&&u.on("zoomanim",this._animateZoom,this);u.on("zoom",this._zoom,this);J(!0);var e=u.containerPointToLayerPoint([0,0]);L.DomUtil.setPosition(p,e)},onRemove:function(){u.off("zoomend",this._onZoomEnd,this);u.off("moveend",this._onMoveEnd,this);J(!1);u.options.zoomAnimation&&u.off("zoomanim",this._animateZoom,this);u.on("zoom",this._zoom,this)},addTo:function(){u.addLayer(this);return this},_onZoomEnd:function(){q();this._forceRedraw({all:!0})},_onMoveEnd:function(){this._forceRedraw();t.trigger("viewchange")},_forceRedraw:function(e){u&&ee((function(){Le(e)}))},_animateZoom:function(e){var t=u.getZoomScale(e.zoom),n=u._getCenterOffset(e.center)._multiplyBy(-t).subtract(u._getMapPanePos());L.DomUtil.setTransform(p,n,t)},_zoom:function(e){e.pinch&&ee()}}))}function ie(e){if(!e)return-1;for(var t=0,n=e;n=n.previousSibling;)++t;return t}function oe(){return i.anyOpenCombos()?o.time*(2/3):o.time}function ue(){var e=r.getZoom();e=Math.min(O,Math.max(G,e));return R+(B-R)*(e-G)/(O-G)}function se(t){if(o.animate){var n=oe(),r={time:o.time*(1/3),adapt:!1},a=e.viewOptions();e.combo().close(i.getOpenCombos(),r,(function(){var r=ue();a.zoom===r?e.animateProperties(fe(),{time:n},t):e.viewOptions({zoom:r},{animate:!1},(function(){var i=fe();e.viewOptions(a,{animate:!1},(function(){var o=2;function a(){0==--o&&T(t)}var u={animate:!0,time:n};e.viewOptions({zoom:r},u,a);e.animateProperties(i,u,a)}))}))}))}else e.combo().close(i.getOpenCombos(),{animate:!1},(function(){e.viewOptions({zoom:ue()},{animate:!1},(function(){ee(t)}))}))}
function fe(){var t=[];e.privateEach({type:"node",items:"toplevel"},(function(e){if(pe(e)){var n=qn(qn({},ze(e)),{id:e.id});t.push(n)}}));return t}function le(n){if(e.privateIsLayingOut())T(n);else{if(null===e.privateCanvasApi.privateGetContainer())throw new Error("Cannot enter map mode while the chart is not on the page.");X();W();if(u||d)T(n);else{k=!0;d=!0;var r=e.lock();e.lock(!0);t.trigger("map","showstart");Be();e.options(F);i.recordState();var a=i.getHiddenOnMapIds();e.hide(a,{time:o.time,animate:o.animate},(function(){he(null,(function(){se((function(){ke(o.animate,(function(){ce(r,n)}))}))}))}))}}}function ce(n,r){c=!0;d=!1;t.trigger("map","showend");n||e.lock(!1);if(g){Re(g[0],g[1]);e.zoom("fit");g=null}S(r)}function de(e,t){return L.Browser.ie3d?"translate("+Math.round(e)+"px,"+Math.round(t)+"px)":"translate3d("+Math.round(e)+"px,"+Math.round(t)+"px, 0px)"}function he(e,t){p=ve();function n(e,t){e._leaflet_pos=t;e.style.transform=de(t.x,t.y)}L.Draggable.include({_updatePosition:function(){var e={originalEvent:this._lastEvent};this.fire("predrag",e);n(this._element,this._newPos);this.fire("drag",e)}});var i=re({boxZoom:!1,zoomAnimationThreshold:20,zoomControl:!1,preferCanvas:!0},o.leaflet);_(new L.Map(m,i));be();Q(!0);h=!1;e?r.centerView(e):r.fitMapToBounds(null,!1);ge(t)}function ve(){A=p.style.position;M=p.style.top;p.style.position="absolute";p.style.zIndex="1000";p.classList.add("leaflet-zoom-animated");p.style.transformOrigin="50% 50%";(m=document.createElement("div")).style.width=p.clientWidth+"px";m.style.height=p.clientHeight+"px";m.style.position="relative";m.style.top=p.style.top;m.style.left=p.style.left;(w=p.parentNode).insertBefore(m,p);p.style.pointerEvents="none";return p}function ge(e){var t,n={};function r(){te().addTo(u);T(e)}if("string"==typeof o.tiles)t=o.tiles;else if(o.tiles){t=o.tiles&&o.tiles.url||z.tiles.url;n=L.Util.extend(n,o.tiles)}if(t){Ng(f=new L.TileLayer(t,n),"loading",r);u.addLayer(f)}else r()}function ye(e){if(u){u.removeLayer(f);ge(e)}else T(e)}function be(){y=document.createElement("canvas");s.setOverlayContext(y.getContext("2d"));var e=u.getSize();y.width=e.x;y.height=e.y;y.style.margin="0";y.style.pointerEvents="none";tr(y,y.getContext("2d"),!1,!1);var t=L.Control.extend({options:{position:"topleft"},onAdd:function(){return y}});x=new t;u.addControl(x)}function xe(n,r){i.clearState();d=!1;n.lockChart||e.lock(!1);n.triggerEvent&&t.trigger("map","hideend");S(r)}function we(n){if(u&&!d){if(null===e.privateCanvasApi.privateGetContainer())throw new Error("Cannot exit map mode while the chart is not on the page.");var a=e.lock(),s=oe();d=!0;e.lock(!0);t.trigger("map","hidestart");r.fitMapToBounds(null,o.animate,c)}else T(n);function f(){var t=i.getHiddenOnMapIds();e.show(t,!1,{animate:t.length>0,time:o.time},(function(){xe({lockChart:a,triggerEvent:!0},n)}))}function l(t,n,r,a){e.viewOptions(t,{animate:!1},(function(){e.hide(i.getHiddenOnMapIds(),{animate:!1},(function(){e.setProperties(n,!1,(function(){e.viewOptions(r,{animate:!0,time:s});e.animateProperties(a,{time:s},(function(){e.combo().open(i.getOpenCombos(),{time:o.time*(1/3),adapt:!1},f)}))}))}))}))}function c(){var t,r;Me({restorePositions:!0,animate:o.animate},(function(){if(o.animate){t=e.viewOptions();r=Te()}Ie((function(){var u=Te();Ge();e.show(i.getHiddenOnMapIds(),!1,{animate:!1},(function(){e.zoom("fit",{animate:!1},(function(){if(o.animate){var s=e.viewOptions();e.combo().close(i.getOpenCombos(),{animate:!1,adapt:!1},(function(){l(t,r,s,u)}))}else xe({lockChart:a,triggerEvent:!0},n)}))}))}))}))}}function Ae(e){p.style.top=m.offsetTop+"px";var t=I>0?w.childNodes[I+1]:w.firstChild;w.insertBefore(p,t);p.style.transform="";p.style.transformOrigin="";e&&ee();Le({positions:!0})}function Me(e,t){s.setOverlayContext(null);Ae(e.restorePositions);u.removeControl(x);Ce(e.animate,(function(){m.parentNode&&m.parentNode.removeChild(m);p.style.pointerEvents="auto";p.style.position=A;p.style.top=M;u.remove();_(null);T(t)}))}function Ie(t){c=!1;e.combo().open(i.getOpenCombos(),{animate:!1,adapt:!1},(function(){var n=i.getPositions();if("restore"===o.transition&&n){var r=K(n).filter((function(t){return!e.combo().find(t.id)}));e.setProperties(r,!1,t)}else{var a=e.privateValidateLayoutOptions({animate:!1});e.allowDraw(!1);s.layout("standard",a,(function(){e.allowDraw(!0);T(t)}))}}))}function Ee(t,n,r){if(t)e.privateAnimateBackgroundOpacity(n,{time:o.time},r);else{e.privateSetBackgroundOpacity(n);T(r)}}function ke(e,t){Ee(e,0,t)}function Ce(e,t){Ee(e,1,t)}function Se(t){e.privateEach({type:"node",items:"toplevel"},(function(e){e.hi||t({id:e.id,x:e.x,y:e.y})}))}function Te(){var e=[];Se((function(t){e.push(t)}));return e}function Re(e,t){if(c){m.style.height=t+"px";m.style.width=e+"px";var n=y.getContext("2d");y.width=e;y.height=t;tr(y,n,!1,!1);C=!0;u.invalidateSize(!1);C=!1}else g=[e,t]}function Le(e){var n=null!=e?e:{positions:!0};t.privateTrigger("forceRedraw",n)}function Be(){var t=e.options();Y={};n(F,(function(e,n){Y[n]=t[n]}))}function Ge(){e.options(Y);Y={}}function Oe(t,n){var r=e.lock();W();c=!0;Be();he(t,(function(){e.options(F);q();ee((function(){ke(!1,(function(){r||Q(!1);T(n)}))}))}))}function Ze(t){var n=e.lock();W();c=!1;Me({restorePositions:!1,animate:!1},(function(){Ge();xe({lockChart:n,triggerEvent:!1},t)}))}function Ye(){return!!u}function Fe(e){u.dragging.enabled()!==e&&(e?u.dragging.enable():u.dragging.disable())}function ze(e){var t=u.latLngToContainerPoint([e.pos.lat,e.pos.lng]);return E.worldCoordinates(t.x,t.y)}function Pe(t){var n,r,o,a=Z(t);for(r=0;r<a.length;r++)if(P(n=a[r],"pos"))if(n.pos&&b(n.pos.lat)&&b(n.pos.lng)){i.setHiddenOnMap(n.id,!1);o=ze({pos:ne(e.getItem(n.id).pos,n.pos)});n.x=o.x;n.y=o.y}else{i.setHiddenOnMap(n.id,!0);n.hi=!0}}}function Kg(e){var t,n,r;function i(){u();e.privateEach({type:"node",items:"all"},(function(e){var t=e.id;e._combo&&e._combo.open&&n.push(t);e.parentId||f(e)}));e.privateEach({type:"link",items:"toplevel"},(function(e){e.hi||!t[e.id1]&&!t[e.id2]||(t[e.id]=!0)}))}function o(e){t=a(e.hiddenOnMap)||{};n=a(e.openCombos)||[];r=a(e.positions)||{}}function u(){t={};n=[];r={}}function s(){return{hiddenOnMap:a(t),openCombos:a(n),positions:a(r)}}function f(e){var n=e.id;delete r[n];delete t[n];pe(e)?r[n]={id:n,x:e.x||0,y:e.y||0}:e.hi||(t[n]=!0)}function l(n){if("link"===n.type&&!n.hi){var r=e.getItem(n.id1),i=e.getItem(n.id2);r&&i&&pe(r)&&pe(i)||(t[n.id]=!0)}}u();return{anyOpenCombos:function(){return n&&n.length>0},clearState:u,getPositions:function(){return r},getOpenCombos:function(){return n},getHiddenOnMapIds:function(){return Object.keys(t)},isHiddenOnMap:function(e){return t[e]},setHiddenOnMap:function(e,n){t[e]=n},deserialize:o,serialize:s,recordLinkState:l,recordNodeState:f,recordState:i}}function Hg(e,t){var n=null;function r(e){n=e}function i(e,t,r,i){x(i);n.setZoom(e,{animate:t})}function o(){return n.getZoom()}function a(e){if(e.length){var t=L.latLngBounds(e),n=t.getNorth(),r=t.getSouth(),i=t.getWest(),o=t.getEast();if(n===r&&i===o){var a=.01;t=L.latLngBounds([[n-a,i-a],[n+a,i+a]])}return t}}function u(){var t=[];e.privateEach({type:"node",items:"toplevel"},(function(e){pe(e)&&!e.hi&&t.push(L.latLng(e.pos.lat,e.pos.lng))}));return t}function s(e,t){if(o()!==t)return!0;var r=n._limitCenter(e,t,n.options.maxBounds),i=n._getCenterOffset(r).floor();return!(!i.x&&!i.y)}function f(e){var r=L.point([2*(t.padding||0),2*(t.padding||0)]),i=n.getBoundsZoom(e,!1,r);if(o()!==i)return!0;var a=n.project(e.getSouthWest(),i),u=n.project(e.getNorthEast(),i);return s(n.unproject(a.add(u).divideBy(2),i),i)}function l(e,r,i){var l=a(e||u());if(l)if(void 0===o()||f(l)){x(i);n.fitBounds(l,{animate:!!r,padding:[t.padding||0,t.padding||0]})}else T(i);else{var c=L.latLng(0,0),d=2;if(s(c,d)){x(i);n.setView(c,d,{animate:!!r})}else T(i)}}function c(t,r,i){var o=e.viewCoordinates(t.x1,t.y1),a=e.viewCoordinates(t.x2,t.y2);return l([n.containerPointToLatLng([o.x,o.y]),n.containerPointToLatLng([a.x,a.y])],!!r,i)}function d(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];D(r)||!pe(r)||r.hi||t.push(L.latLng(r.pos.lat,r.pos.lng))}return t}function h(t,n,r){var i=d(e.getItem(t));i.length?l(i,!!n,r):T(r)}function v(){return n.getMaxZoom()}function g(){return n.getMinZoom()}function p(){return Math.min(1,(v()-g())/10)}function m(t,r,i,a,s,f){var d={animate:!!r,duration:b(i)?i/1e3:.25};switch(t){case"in":x(f);n.zoomIn(p(),d);break;case"out":x(f);n.zoomOut(p(),d);break;case"fitToExtents":c(s,r,f);break;case"fit":case"fitToModel":a?h(a,r,f):l(u(),!!r,f);break;case"selection":case"fitToSelection":h(e.selection(),r,f);break;case"height":case"fitModelHeight":var g=-1/0,m=-1/0,y=1/0,w=1/0,M=function(e){var t=e;if(null!==t&&pe(t)&&!t.hi){if(t.pos.lat>g){g=t.pos.lat;m=t.pos.lng}if(t.pos.lat<y){y=t.pos.lat;w=t.pos.lng}}};a?e.privateGetItem(a).forEach(M):e.privateEach({type:"node",items:"toplevel"},M);isFinite(g)&&isFinite(m)&&isFinite(y)&&isFinite(w)?l([[g,m],[y,w]],!!r,f):A(f)&&T(f)}return o()/v()}function y(e,t){n.panBy(e,t)}function x(e){A(e)&&Ng(n,"moveend",(function(t){e()}))}function w(t,r,i,o){var u=null,s=100,f={animate:!!r,duration:b(i)?i/1e3:.25};x(o);if("selection"===t){var l=[],c=e.getItem(e.selection());if(c.length){for(var d=void 0,h=0;h<c.length;h++)if("node"===(d=c[h]).type){var v=d;pe(v)&&!v.hi&&l.push(L.latLng(v.pos.lat,v.pos.lng))}n.panInsideBounds(a(l),f)}}else{switch(t){case"up":u=[0,-s];break;case"down":u=[0,s];break;case"left":u=[-s,0];break;case"right":u=[s,0]}u&&n.panBy(u,f)}}function M(e){n.setView([e.lat,e.lng],e.zoom,{reset:!0})}return{fitMapToBounds:l,getMaxZoom:v,getMinZoom:g,getZoom:o,pan:w,panBy:y,setLeafletMap:r,centerView:M,setZoom:i,zoom:m}}function _g(e,t){var r={animate:!0,time:800,tiles:{url:"https://stamen-tiles-{s}.a.ssl.fastly.net/toner-lite/{z}/{x}/{y}.png",attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, under <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>. Data by <a href="http://openstreetmap.org">OpenStreetMap</a>, under <a href="http://www.openstreetmap.org/copyright">ODbL</a>.',subdomains:"abcd",minZoom:0,maxZoom:20},transition:"restore",padding:5},i="#ddd",o=Hg(e,r),u=Kg(e),s=jg(e,t,o,u,r),f=s.isLeafletLoaded();function l(){throw new Error("Leaflet was not found. Make sure you include leaflet.js and leaflet.css in your web page.")}function c(e){return f?e:l}function d(){return i}function h(e,t){var n=s.getMapContainer();e?n.style.background=e:t?Pn(n,t.stops,1):n.style.background=i}function v(e,t){var n=s.getLeafletMap().latLngToContainerPoint([e,t]);return{x:n.x,y:n.y}}function g(e,t){var n=s.getLeafletMap().containerPointToLatLng([e,t]);return{lat:n.lat,lng:n.lng}}function p(e,t){if(e){n(e,(function(e,t){switch(t){case"padding":case"time":b(e)&&(r[t]=e);break;default:r[t]=e}}));"tiles"in e&&s?s.changeTilesLayer(t):T(t)}return a(r)}function m(){if(!f)return null;var e=s.getLeafletMap(),t={show:s.isShown()};if(t.show){var n=e.getCenter();t.lat=n.lat;t.lng=n.lng;t.zoom=e.getZoom();t.bounds=e.getBounds().toBBoxString();var r=u.serialize();t.hiddenOnMap=r.hiddenOnMap;t.openCombos=r.openCombos;t.restoreXY=r.positions}return t}function y(e,t,n,r,i){return Sg(s.getLeafletMap(),e,t,n,r,i)}function x(e,t){u.deserialize({hiddenOnMap:e.hiddenOnMap,openCombos:e.openCombos,positions:e.restoreXY});if(s.isShown()){o.centerView(e);s.updateNodePositions(t)}else s.restoreMapMode(e,t)}function w(e){s.isShown()?s.restoreNetworkMode(e):T(e)}function A(e,t){if(f){var n=e||{};n.show?x(n,t):w(t)}else T(t)}function M(e){if("node"===e.type){u.recordNodeState(e);if(pe(e)){var t=s.latLngToWorldCoordinates(e);e.x=t.x;e.y=t.y}else e.hi||(e.hi=!0)}}function I(t){for(var n=[],r=0;r<t.length;r++){var i=t[r];if("node"===i.type){var o=e.getItem(i.id);if(o){var a=u.getPositions(),s={};u.isHiddenOnMap(i.id)?s.hi=!1:"hi"in o&&(s.hi=o.hi);if(a[i.id]){s.x=a[i.id].x;s.y=a[i.id].y}o.pos&&(s.pos=o.pos);i=ne(s,i)}M(i)}"link"===i.type&&u.recordLinkState(i);n.push(i)}return n}return{api:{show:c(s.showMap),hide:c(s.hideMap),viewCoordinates:c(v),mapCoordinates:c(g),isShown:function(){return s&&s.isShown()},leafletMap:s.getLeafletMap,options:c(p)},internalUse:{convertPos:s.convertPos,enableDragging:s.enableDragging,getDefaultBackgroundColour:d,getMapContainer:s.getMapContainer,getMaxZoom:o.getMaxZoom,getMinZoom:o.getMinZoom,getZoom:o.getZoom,isMapLoaded:s.isMapLoaded,isTransitioning:s.isTransitioning,loadUp:A,lock:s.lockEvents,pan:o.pan,panBy:o.panBy,preMerge:I,preSetItem:M,serialize:m,setBackgroundColour:h,setDependencies:s.setDependencies,setHandMode:s.setHandMode,setSize:s.setSize,setView:s.setView,setZoom:o.setZoom,toDataURL:y,zoom:o.zoom}}}function Jg(e,t,n,r,i){var o=0,a=0,u=0,s=0,f=0,l=t||0,c=n||0,d=r||1;function h(e){e&&(d=e);return d}function v(e){return d*e}function g(){return{width:l,height:c,zoom:u,offsetX:s,offsetY:f}}function p(e,t,n,r){return we(u,$(e.zoom),e.offsetX-s,e.offsetY-f,t,n,r)}function m(t,n,r){if(n){var i=Jg(e,t.width,t.height);i.setZoom(t.zoom,!1);i.offsetX=t.offsetX;i.offsetY=t.offsetY;return oe({x1:i.viewToWorldX(0),y1:i.viewToWorldY(0),x2:i.viewToWorldX(i.width()),y2:i.viewToWorldY(i.height())},null,!1,!1,!1,!1,0)}ee(t.zoom,!1);s=t.offsetX;f=t.offsetY;if(r){s=l/2-(A(t.width/2)-o)*u;f=c/2-(M(t.height/2)-a)*u}return null}function y(e){e&&(l=e);return l}function b(e){e&&(c=e);return c}function x(e){return((e-o)*u+s)*d}function w(e){return((e-a)*u+f)*d}function A(e){return(e/d-s)/u+o}function M(e){return(e/d-f)/u+a}function I(e){return-1===e?-1:e*u*d}function E(e){return-1===e?-1:I(e)+7}function k(e){return e/(u*d)}function C(e){return e&&e*u*d}var S,R,L,B=1.4,G=4,O=.05,Z=O,Y=.001,F=1,P=200,D=1/0,V=100;function W(){return!(!i||!i.internalUse.isMapLoaded())}function X(){return G}function U(){return Z}function N(e){Z=Math.min(F,Math.max(Y,e||O));u<Z&&we(u,Z,s,f,!1)}function j(e){D=e||1/0}function K(){return D}function H(e,t,n){return ce(J(),d*l/2,d*c/2,e,t,n)}function _(e,t,n){return ce(Q(),d*l/2,d*c/2,e,t,n)}function J(){return $(u*B)}function Q(){return $(u/B)}function $(e){return Math.min(G,Math.max(e,Z))}function ee(e,t,n,r){return ce($(e),d*l/2,d*c/2,t,n,r)}function te(){return u>D?D/u:1}function ne(e,t,n){return ce(e>0?J():Q(),t,n,!0,200)}function re(e){return e?{x1:x(e.x1),y1:w(e.y1),x2:x(e.x2),y2:w(e.y2)}:null}function ie(e,t,n,r,i,o,a){if(!e){T(a);return null}return oe(re(e),null,t,n,r,i,o,!1,a)}function oe(e,t,n,r,i,h,v,g,p,m){var y;if((e.y2-e.y1)/(e.x2-e.x1)>c/l){y=u*(c-(h?c/8:0))/(e.y2-e.y1)}else{y=u*(l-(h?l/8:0))/(e.x2-e.x1)}y*=d;r&&(y=$(y));i&&y>1&&(y=1);m&&(y=u);var b=(e.x1+e.x2)/2,x=(e.y1+e.y2)/2,w=t?(t.x1+t.x2)/2:A(b),I=t?(t.y1+t.y2)/2:M(x);return we(u,y,l/2-(w-o)*y-s,c/2-(I-a)*y-f,n,v,p,g)}function ue(e,t,n,r,i,o,a,u,s){t.generate(n,r,Ce,!0,!1);var f=n.itemExtents(e,r);if(f){var l=re(f);if(s){var c=void 0;c=e?l.x1+(l.x2-l.x1)/2:y()/2;l.x1=c;l.x2=c}return oe(l,f,i,!0,!0,!0,o,!1,a,u)}T(a);return null}function se(e,t,n,r,i,o,a,u){return ue(e.privateSelection(),e,t,n,r,i,a,u)}function fe(e,t,n,r,i,o,a,u){return o?ue(q(o),e,t,n,r,i,a,u):ue(null,e,t,n,r,i,a)}function le(e,t,n,r,i,o,a,u){return o?ue(q(o),e,t,n,r,i,a,u,!0):ue(null,e,t,n,r,i,a,!1,!0)}function ce(e,t,n,r,i,l){var c=$(e),h=A(t),v=M(n);return we(u,c,t/d-(h-o)*c-s,n/d-(v-a)*c-f,r,i,l)}function de(e){o=421;a=298;if(e)we(u,1,421-s,298-f,!0);else{s=421;f=298;u=1}}function he(){return u}function ve(){return W()?i.internalUse.getZoom():u}function ge(){var e=l/2;return-(1-me()/e)+(e-o)/e*u}function pe(){var e=c/2;return 1-ye()/e-(e-a)/e*u}function me(e){z(e)&&(s=e);return s}function ye(e){z(e)&&(f=e);return f}function be(e,t,n,r){var i=0,o=0;switch(e){case"up":o=1;break;case"down":o=-1;break;case"left":i=1;break;case"right":i=-1}return xe(i*=V,o*=V,t,!1,n,r)}function xe(e,t,n,r,i,o){return we(u,u,e,t,n,i,o,r)}function we(t,n,r,i,o,a,l,c){var d=r||0,h=i||0;if(o)return Ae(t,n,d,h,a,l);s+=Math.floor(d);f+=Math.floor(h);u=n;e&&!c&&e.trigger("viewchange");T(l);return null}function Ae(t,n,r,i,o,a){var l=o||P,c=l,d=s,h=f;return ur((function(o){c-=o;var v=e.atanEasing(Math.max(0,Math.min(1,(l-c)/l)));s=d+v*r;f=h+v*i;u=$(t+v*(n-t));var g=c>0;if(!g){e.trigger("viewchange");T(a)}return g}),{drawOnly:!0})}function Me(t,n,r,o,a){var u=W(),l=u?-3:.1;return ur((function(c){var d=0===R&&0===L;if(u)i.internalUse.panBy([R*l,L*l],{animate:!1});else{s+=c*l*R;f+=c*l*L}S=!d;r&&r.dragMove(t,n,o,a);d||e.trigger("viewchange");return!d}),{positions:!0})}function Ie(){R=0;L=0}function Ee(e,t,n,r,i){var o=v(50);R=0;L=0;e<o&&(R=1);e>v(l)-o&&(R=-1);t<o&&(L=1);t>v(c)-o&&(L=-1);if(n.direction){n.direction.x||(R=0);n.direction.y||(L=0)}if((0!==R||0!==L)&&!S){S=!0;return Me(e,t,n,r,i)}return null}function ke(e,t){var n=Ce.scale(e),r=Ce.scale(t);return{x:Ce.viewToWorldX(n),y:Ce.viewToWorldY(r)}}de();var Ce={cancelScroll:Ie,fitExtents:oe,fitModelHeight:le,fitToModel:fe,fitToSelection:se,fitWorldExtents:ie,fromOldSettings:m,fromSettingsDirect:p,getMaxItemZoom:K,getMaxZoom:X,getMinZoom:U,getUnzoom:te,getZoomScale:he,height:b,maybeScroll:Ee,offsetX:me,offsetXtoWebglPanX:ge,offsetY:ye,offsetYtoWebglPanY:pe,pan:be,panBy:xe,reset:de,scale:v,scaleFactor:h,setMaxItemZoom:j,setMinZoom:N,settings:g,setZoom:ee,sw:E,viewToWorldDistance:k,viewToWorldX:A,viewToWorldY:M,w:I,wheelToPosition:ne,width:y,worldToViewDistance:C,worldToViewX:x,worldToViewY:w,x:x,y:w,worldCoordinates:ke,zoom:ve,zoomIn:H,zoomOut:_,zoomToPosition:ce};return Ce}function Qg(e,t,n){var r={},i={},o=[],a={},u=21,s=12;function f(){return null!==t&&t.api.isShown()}function l(){return null!==t&&t.internalUse.isMapLoaded()}var c,d,h,v,p,m,y=Dt.white,b=Dt.lightgrey;function x(t){M();c=Wt(t[0],t[1],t[2],1);e.privateBind("click",w)}function w(e,t,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];e&&a[e]&&a[e].apply(a,$n([e,t,n],r))}function A(e,t,n){return e in r?r[e](t,n):null}function M(){r={};i={};o=[];a={};e.privateUnbind("click",w)}function I(e){return e&&e in i?i[e]:"auto"}function E(e,t,n,r,i){e.setLayerPath(null);for(var a=0;a<o.length;a++)o[a].generate(e,t,n,r,i)}function k(e){for(var t=0;t<o.length;t++){var n=o[t];if(n.watermarkSize)return n.watermarkSize(e)}return null}function C(e){var t=15,r="_logo",i=e.u,a=n.get(i,xg(),!0),u={generate:function(n,o,u){n.setLayer(Oi.OVERLAYS);var s=a.im.width,f=a.im.height,l=e.p||"ne",c=("w"===l.charAt(1)?t:u.width()-(s+t))+(e.x||0),d=("n"===l.charAt(0)?t:u.height()-(f+t))+(e.y||0);n.image(u.scale(c),u.scale(d),u.scale(c+s),u.scale(d+f),i,r,-1,null,0,!0)}};o.push(u)}function S(e,t,r,i,a,u,s,f){var l;e&&(l=n.get(e,!1,!0));var c={watermarkSize:function(e){var n,i;if(l){var o=l.im;n=o.width;i=o.height}else if(t){n=Hn(e,t,r,a,f).width;i=r}return n?{width:n+10,height:i+10}:null},generate:function(n,o,c){var d,h;n.setLayer(Oi.UNDERLAYS);if(l){var v=l.im;d=c.scale((c.width()-v.width)/2);h=c.scale((c.height()-v.height)/2);n.image(d,h,d+c.scale(v.width),h+c.scale(v.height),e,null,-1,null,0,!1)}else if(t){var g=c.scale(r),p=Hn(o,t,r,a,f).width;d=c.scale((c.width()-p)/2);h=c.scale((c.height()+r)/2);var m=-3.5,y=Math.floor(g/8);"top"===s&&(h=g+y);"bottom"===s&&(h=c.scale(c.height())+1);u&&n.rect(d-m,h-g-y,d+p+m+y,h,u,-1,u,!0,null,-1);n.text(d,h,t,i,g,!!a,null,-1,f,!1,p,!1,!1,d+m,h-g,d+p+m,h)}}};o.push(c)}function T(e,t,n,r,i,o,a){e.rect(t.scale(n),t.scale(r),t.scale(i),t.scale(o),Dt.transparent,-1,Dt.transparent,!0,a,-1)}function R(c,d,h){var v=Xv["Nav-Control-Head.png"],g=Xv["Nav-Control-Zoom.png"],p=Xv["Nav-Control-Short-Zoom.png"],m=Xv["Slider.png"],y=Xv["Hand.png"],b=Xv["Arrow.png"];n.getControlColourImage(v,!1);var x=n.getControlColourImage(g,!1),w=n.getControlColourImage(p,!1);n.get(m,!1,!0);n.get(y,!1,!0);n.get(b,!1,!0);var A=7,M=17,I=62,E=F()?145:247,k=h.p||"nw",C=("w"===k.charAt(1)?A:d.width()-(A+I))+(h.x||0),S=("n"===k.charAt(0)?M:d.height()-(M+E))+(h.y||0),R=C+21,L=S+118,B=S+215;a._zoomIn=function(){c.zoomIn(!0)};a._zoomOut=function(){c.zoomOut(!0)};a._panLeft=function(){c.pan("left",!0)};a._panRight=function(){c.pan("right",!0)};a._panUp=function(){c.pan("up",!0)};a._panDown=function(){c.pan("down",!0)};a._fitToWindow=function(){c.fitToModel(!0)};a._toggleMode=function(){var e=c.options();e.handMode=!e.handMode;c.options(e)};function G(){return!!c.options().handMode}a._scale=function(e,t,n){O(n,!0)};function O(e,t){var n=Y(e-s/2);c.setZoom(n,t)}i._zoomIn="pointer";i._zoomOut="pointer";i._panLeft="pointer";i._panRight="pointer";i._panUp="pointer";i._panDown="pointer";i._fitToWindow="pointer";i._toggleMode="pointer";i._scale="pointer";i._slider='url("'+Xv["openhand.png"]+'"), pointer';r._slider=function(){var n=f()?d.zoom():d.settings();if(F())return null;if(e.trigger("dragstart","slider"))return null;f()&&t.internalUse.enableDragging(!1);return{rebuild:{drawOnly:!0},getCursor:function(){return"move"},dragMove:function(e,t){O(t,!1)},endDrag:function(r){var i=e.trigger("dragend","slider");r&&!i||(f()&&"number"==typeof n?c.setZoom(n,!1):"number"!=typeof n&&d.fromSettingsDirect(n,!1));f()&&t.internalUse.enableDragging(!!c.options().handMode);e.trigger("dragcomplete","slider")}}};function Z(e){var n,r,i;if(l()){n=t.internalUse.getMinZoom();r=Math.max(t.internalUse.getMaxZoom(),n+1);i=e}else{n=Math.log(d.getMinZoom());r=Math.log(d.getMaxZoom());i=Math.log(e)}var o=(i-n)/(r-n);return Math.floor(L+(1-o)*(B-L))}function Y(e){var n,r=1-(e-L)/(B-L);if(f()){var i=t.internalUse;n=(i.getMaxZoom()-i.getMinZoom())*r+i.getMinZoom()}else n=Math.exp(r*(Math.log(d.getMaxZoom())-Math.log(d.getMinZoom()))+Math.log(d.getMinZoom()));return n}function F(){return d.height()<300}var z={generate:function(e,t,n,r,i){if(!i){e.setLayer(Oi.OVERLAYS);e.image(n.scale(C+5),n.scale(S+6),n.scale(C+57),n.scale(S+58),v,null,-1,"co",0,!0);var o=16,a=100;F()?e.image(n.scale(C+o),n.scale(S+a),n.scale(C+o+w.im.width/2),n.scale(S+a+w.im.height/2),p,null,-1,"co",0,!0):e.image(n.scale(C+o),n.scale(S+a),n.scale(C+o+x.im.width/2),n.scale(S+a+x.im.height/2),g,null,-1,"co",0,!0);var f=C+19,l=S+64,c=n.scale(f),d=n.scale(l),h=n.scale(f+28),A=n.scale(l+32),M=G()?y:b;e.image(c,d,h,A,M,null,-1,null,0,!0);e.setLayer(Oi.OVERLAYSSHADOW);e.image(c,d,h,A,M,"_toggleMode",-1,null,0,!1);var I=5,E=23,k=39,L=57,B=105,O=F()?124:222,Y=18,z=3,P=68,D=22;T(e,n,C+E,S+B,C+k,S+B+Y,"_zoomIn");T(e,n,C+E,S+O,C+k,S+O+Y,"_zoomOut");T(e,n,C+I,S+E,C+E,S+k,"_panLeft");T(e,n,C+k,S+E,C+L,S+k,"_panRight");T(e,n,C+E,S+I,C+k,S+E,"_panUp");T(e,n,C+E,S+k,C+k,S+L,"_panDown");T(e,n,C+E,S+E,C+k,S+k,"_fitToWindow");F()||T(e,n,C+E,S+B+Y,C+k,S+O,"_scale");T(e,n,C+E-z,S+P,C+k+z,S+P+D,"_toggleMode");if(!F()){var V=Z(n.zoom()),W=n.scale(R),X=n.scale(V),U=n.scale(R+u),N=n.scale(V+s),j=4;e.image(W-j,X-j,U+j,N+j,m,"_slider",-1,null,0,!1);e.setLayer(Oi.OVERLAYS);e.image(W,X,U,N,m,null,-1,null,0,!0)}}}};o.push(z)}var L={ne:"sw",nw:"se",se:"nw",sw:"ne"};function B(t,u,s,f,l){var x=l.p&&L[l.p]?l.p:"se",w=Xv["Arrow-"+L[x]+".png"],A=Xv["Arrow-"+x+".png"];l.size=l.size||100;d=l.size;v=!!l.shown;p="n"===x.charAt(0);m="w"===x.charAt(1);var M=(h=f(d,d)).getContext("2d"),I=!1,E=!1,k=Date.now(),C=Jg(e,d,d);a._overviewIcon=function(){l.shown=!l.shown;v=l.shown;e.trigger("overview",v?"open":"close");e.privateTrigger("redraw",{drawOnly:!0})};i._overviewIcon="pointer";function S(e){var t={x1:s.viewToWorldX(s.scale(-e)),x2:s.viewToWorldX(s.scale(s.width()+e)),y1:s.viewToWorldY(s.scale(-e)),y2:s.viewToWorldY(s.scale(s.height()+e))};return{x1:C.worldToViewX(t.x1),x2:C.worldToViewX(t.x2),y1:C.worldToViewY(t.y1),y2:C.worldToViewY(t.y2)}}var T,R,B=null,G=!1,O=0,Z=0,Y=0,F=0,z=2;i._overviewBox='url("'+Xv["openhand.png"]+'"), pointer';function P(){Y+=T.x;F+=T.y;e.privateTrigger("redraw")}function D(){R=g(P,50)}function V(){if(R){clearInterval(R);R=null}}r._overviewBox=function(n,r){if(e.trigger("dragstart","overview"))return null;G=!0;var i=2;O=0;Z=0;Y=0;F=0;var o=-B.x1+i,a=d-B.x2-i,u=-B.y1+i,f=d-B.y2-i;return{rebuild:{drawOnly:!0},getCursor:function(){return"move"},dragMove:function(e,t){V();Z=t-r;T={x:0,y:0};var i=!1;if((O=e-n)<o){O=o;T.x=z;i=!0}if(O>a){O=a;T.x=-z;i=!0}if(Z<u){Z=u;T.y=z;i=!0}if(Z>f){Z=f;T.y=-z;i=!0}i&&D()},endDrag:function(n){G=!1;V();var r=e.trigger("dragend","overview");if(n&&!r){var i=-(O-Y)*(s.zoom()/C.zoom()),o=-(Z-F)*(s.zoom()/C.zoom());t.panBy(i,o,!0)}e.trigger("dragcomplete","overview")}}};function W(e){var t=Math.max(e.width(),e.height())/2;C.reset(!1);var n=S(t);C.fitExtents(n,null,!1,!1,void 0,void 0,void 0,!0);var r=e.getMaxItemZoom();r!==1/0&&C.setMaxItemZoom(r/8);G&&C.panBy(Y,F,!1,!0)}function X(e,t){return{x1:e.scale(m?-1:e.width()-t),y1:e.scale(p?-1:e.height()-t),x2:e.scale(m?t:e.width()+1),y2:e.scale(p?t:e.height()+1)}}var U={generate:function(r,i,o,a,s){if(!s){var f=Math.max(1,o.scale(1));if(v){var h=X(o,d),g=l.borderColour||b,x=l.backColour||y;r.setLayer(Oi.OVERLAYSSHADOW);r.rect(h.x1,h.y1,h.x2,h.y2,x,-1,x,!0,"_overviewBorder1",-1);r.rect(h.x1,h.y1,h.x2,h.y2,g,f,x,!1,"_overviewBorder2",-1);r.setLayer(Oi.OVERVIEW);r.rect(h.x1,h.y1,h.x2,h.y2,g,f,x,!1,null,-1);if(u){var T=Date.now();if(I&&!G&&T<k+1e3&&E)e.privateTrigger("redraw");else{k=Date.now();I=!0;if(i.webgl){W(o);t.setOverviewView(C)}else{M.clearRect(0,0,d,d);var R=an(x,1/_t(x));M.fillStyle=R;M.fillRect(0,0,d,d);t.drawBackground(M);W(o);hi(r,M,C,n,t.options(),!1,null,!0,null,!1,0,0,void 0)}E=Date.now()-k>30}B||(B=S(0));var L=G?O:0,Y=G?Z:0,F=G?"_overviewBoxDragging":"_overviewBox",z=o.scale(m?B.x1+L:o.width()-d+B.x1+L),P=o.scale(p?B.y1+Y:o.height()-d+B.y1+Y),D=o.scale(m?B.x2+L:o.width()-d+B.x2+L),V=o.scale(p?B.y2+Y:o.height()-d+B.y2+Y),U=Math.max(1,o.scale(2)),N=l.borderColour||c||b,j=an(N,.5);r.setLayer(Oi.OVERVIEWSHADOW);r.rect(z,P,D,V,N,U,j,!G,F,-1);r.setLayer(Oi.OVERVIEW);r.rect(z,P,D,V,N,U,j,!G,F,-1)}}var K=v?A:w,H=n.get(K,!1,!0).im;if(l.icon){var _=H.width/2,J=X(o,_);r.setLayer(Oi.OVERVIEW);r.rect(J.x1,J.y1,J.x2,J.y2,b,f,Dt.white,!0,"_overviewIconRect",-1);r.image(o.scale(m?0:o.width()-_),o.scale(p?0:o.height()-_),o.scale(m?_:o.width()),o.scale(p?_:o.height()),K,"_overviewIcon",-1,"co",0,!0);n.getControlColourImage(K);r.setLayer(Oi.OVERVIEWSHADOW);var Q=2*_;r.rect(o.scale(m?-1:o.width()-Q),o.scale(p?-1:o.height()-Q),o.scale(m?Q:o.width()+1),o.scale(p?Q:o.height()+1),b,-1,y,!0,"_overviewIcon",-1)}}}};o.push(U)}function G(e,t,n){var r=42,i={generate:function(i,o,a){i.setLayer(Oi.OVERLAYS);var u=Hn(o,e,r).width,s=a.scale((a.width()-u)/2),f=a.scale((a.height()+r)/2);i.text(s+2,f+2,e,n,a.scale(r),!0,null,-1,void 0,!1,u,!1,!1,s+2,f+2-a.scale(r),s+2+u,f+2);i.text(s,f,e,t,a.scale(r),!0,null,-1,void 0,!1,u,!1,!1,s,f-a.scale(r),s+u,f)}};o.push(i)}function O(e,t){if(v&&h){var n=t.scale(d);e.drawImage(h,0,0,n,n,t.scale(m?0:t.width()-d),t.scale(p?0:t.height()-d),n,n)}}function Z(e){var t=6,n=3,r=3,i=6,a={generate:function(o,a,u){var s=ne({top:!0},e.bands);if(s&&s.bands){var f=void 0,l=void 0,c=void 0,d=void 0,h=void 0,v=void 0,g=void 0;o.setLayer(Oi.BANDS);var p=1/0;for(f=0;f<s.bands.length;f++)if((h=s.bands[f]).t){l=u.worldToViewDistance(h.w/2);c=h.ff||e.fontFamily;v=.75*(d=h.fs||20);(g=Hn(a,h.t,d,h.fb,c).width/2)+v>l&&(d=Math.floor(d*l/(g+v)));d<p&&(p=d)}p!==1/0&&(v=.75*p);for(f=0;f<s.bands.length;f++){h=s.bands[f];var m=u.x(h.x),y=u.x(h.x-h.w/2),b=u.x(h.x+h.w/2),x=u.scale(-1),w=u.scale(u.height()+1);l=u.worldToViewDistance(h.w/2);var A=h.c||"#f7f7f7";o.rect(y,x,b,w,"white",-1,A,!0,"",-1);if(h.t&&p>3){o.setLayer(Oi.BANDLABELS);c=h.ff||e.fontFamily;g=Hn(a,h.t,p,h.fb,c).width/2;var M=h.fc||Dt.lightgrey,I=u.scale(p),E=(b-y)/2-g;if(s.top){var k=t+I;o.rect(y,x,b,k+n,"white",-1,A,!0,"",-1,void 0);o.text(m-g,k,h.t,M,I,h.fb,"",-1,c,!1,2*g,!1,!1,y+E,x+2*n,b+E,k+2*n,void 0,void 0,void 0)}if(s.bottom){var C=u.height()-r,S=C-(I+i);o.rect(y,S,b,w,"white",-1,A,!0,"",-1,void 0);o.text(m-g,C,h.t,M,I,h.fb,"",-1,c,!1,2*g,!1,!1,y+E,S+2*n,b+E,S+2*n+d,void 0,void 0,void 0)}o.setLayer(Oi.BANDS)}}}}};o.push(a)}return{addBanding:Z,addLogo:C,addNavigation:R,addOverview:B,addTextWatermark:S,createDragger:A,drawOverviewContent:O,generate:E,getCursor:I,getWatermarkSize:k,remove:G,reset:M,setup:x}}function qg(e,t,n){return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(!n||!n()){var o,a=t[e];a&&(o=a.apply(void 0,r));return o}}}function $g(e,t){return{click:qg("click",e,t),dragover:e.dragover,mousemove:e.mousemove,mousedown:qg("mousedown",e,t),mouseup:qg("mouseup",e,t),mouseleave:qg("mouseleave",e,t),mousewheel:qg("mousewheel",e,t),dblclick:qg("dblclick",e,t),touchstart:qg("touchstart",e,t),touchmove:qg("touchmove",e,t),touchend:qg("touchend",e,t),touchcancel:qg("touchcancel",e,t),keyup:qg("keyup",e,t),keydown:qg("keydown",e,t),gesturestart:qg("gesturestart",e,t),gesturechange:qg("gesturechange",e,t),gestureend:qg("gestureend",e,t)}}var ep=null,tp="t",np="bu",rp=/^do([0-9]|[1-9]\d+)$/,ip=/^a(1|2)$/,op=/^(?:n|s|w|e|ne|nw|se|sw|\d|[1-9]\d|[1-2]\d\d|3[0-5]\d|(\d|[1-9]\d|[1-2]\d\d|3[0-5]\d)-(\d+))$/,ap=/^ha([0-9])$/,up=/^([0-9]|[1-9]\d+)-t(1|2)$/,sp=/^t(1|2)$/,fp=/^(n|s|w|e|ne|nw|se|sw)-resize$/;function lp(e){return"node"===e.type&&!(e.u||e.c||e.fi)}function cp(e){return"link"===e.type||lp(e)}function dp(e,t){if(t===tp)return{subId:t,type:"label"};if(t===np)return{subId:t,type:"bubble"};var n="node"===e.type&&e.donut&&rp.exec(t);if(n){return{subId:t,index:l=parseInt(n[1],10),type:"donut"}}if("link"===e.type&&(e.a1||e.a2)&&ip.test(t))return{subId:t,type:"arrowhead"};if(e.g&&(n=op.exec(t))){for(var r=n[1],i=n[2],o=parseInt(t,10),a=null!=r?parseInt(r,10):o,u=null!=i?parseInt(i,10):ep,s=void 0,f=e.g.length,l=0;l<f;l++){var c=e.g&&e.g[l];if(c&&cp(e)&&o===l)return{subId:t,index:f-1-l,type:"glyph"};if(c&&(u===ep||c.r===u)&&(c.p===t||c.p===a))return{subId:t,index:l,type:"glyph"}}return{subId:t,index:s,type:"glyph"}}if("node"===e.type&&ap.exec(t))return{subId:t,type:"halo"};if(n="link"===e.type&&!(!e.t1&&!e.t2)&&up.exec(t)){var d=e,h=n[1],v=n[2],g=parseInt(h,10);if(1===(p=parseInt(v,10))&&d.t1&&"object"==typeof d.t1&&d.t1.g){return{subId:t,linkEnd:"t1",index:l=(f=d.t1.g.length)-1-g,type:"glyph"}}if(2===p&&d.t2&&"object"==typeof d.t2&&d.t2.g){return{subId:t,linkEnd:"t2",index:l=(f=d.t2.g.length)-1-g,type:"glyph"}}}if(n="link"===e.type&&!(!e.a1&&!e.a2)&&sp.exec(t)){
var p;v=n[1];if(1===(p=parseInt(v,10)))return{subId:t,linkEnd:"t1",type:"label"};if(2===p)return{subId:t,linkEnd:"t2",type:"label"}}return"node"===e.type&&fp.test(t)?{subId:t,type:"resize"}:void 0}function hp(){throw new Error("Chart has been destroyed")}function vp(e,t,r,i,o,u){var s=cr(),f=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]};function l(e,t){var n=x.hittest(e,t);if(n){var r=N(n),i=le(n);return{id:U(n),subItemInfo:r?dp(i,r):void 0}}}var c,d=qn(qn({_leafletEventHandlers:null,animateProperties:Ue,applyRevealedLinkOffsets:ye,arrange:Ct,cancelAnimation:At,privateCanvasApi:i,chartType:ee,clear:re,combo:K,contains:lt,createLink:Gt,destroy:De,displayOptions:gt,each:et,expand:Bt,filter:tt,foreground:rt,getExtents:C,getItem:Je,getItemInfoAt:l,getLastError:wt,ggwp:j,graph:z,hidden:at,hide:it,interactionOptions:gt,labelPosition:ft,layout:Mt,load:$,lock:mt,map:P,mousedown:Y,merge:ie,options:gt,pan:xt,ping:_e,privateAddItemsToTransfer:Te,privateAllParentsOpen:ke,privateAnimateBackgroundOpacity:Ke,privateAnimateProperties:Ne,privateBothEndsForeground:Me,privateBothEndsShown:Ae,privateEach:we,privateFirstVisibleItemInAncestry:Ee,privateGetAncestryIds:Ce,privateGetCanvas:ve,privateGetGenerator:ge,privateGetItem:le,privateGetLinksBetween:Ze,privateGetMapContainer:G,privateGetMaxLabelLength:pt,privateGetParentItems:Ie,privateGetRawItems:he,privateGetTopItemId:de,privateGraph:Oe,privateHideWithoutCombos:ot,privateInit:S,privateIsLayingOut:f,privateItemIsShown:ce,privateMapSetSize:B,privateMerge:xe,privateNeighbourLinkIds:Be,privateRedrawItem:pe,privateRemoveItem:Ge,privateRemoveItemsFromTransfer:Re,privateReveal:fe,privateSetAllDirty:Se,privateSetAllItemsInComboDirty:me,privateSetBackgroundOpacity:He,privateSetGlobalEvents:Fe,privateSetNonImageProperties:Le,privateSetRemoveComponentReference:ze,privateSetSize:R,privateShowWithoutCombos:st,privateTopParentId:be,privateUseAutoSizing:L,privateValidateLayoutOptions:kt,removeItem:qe,selection:Tt,serialize:ct,setContainer:Ve,setItem:Qe,setProperties:We,show:ut,toDataURL:Q,validateCombos:Ye,viewCoordinates:ht,viewOptions:vt,worldCoordinates:dt,zoom:bt},s),{allowDraw:f,frameRate:f,redraw:f,update:f}),h=qv(s),g=Va(s,d,u),p=_v(d,s,h,g,t),m=_g(d,s),y=Qg(s,m,t),x=Qv(d,s,y,m,t,o),w=$g(x,d.lock);m.internalUse.setDependencies(x,w);var M,I,E=$v(x,s,d);x.setModel(p);var k=function(){};function C(e){return x.itemExtents(q(e))}function S(e,t,n,r,i,o,a){M=r;x.setCursorFn(i);x.setCreateCanvasFn(r);x.imageGenFn(o);x.setStartGameLoopFn(a);R(e,t,n,!1)}function R(e,t,n,r){var i=M(t,n,!1);x.makeGhostCanvas(t,n);var o=c;c=Jg(s,t,n,1,m);x.setView(c);x.setCanvasContext(e);x.setShadowCanvas(i.getContext("2d"));yn();if(o){c.setMinZoom(o.getMinZoom());c.setMaxItemZoom(o.getMaxItemZoom());c.fromOldSettings(o.settings(),!1,r)}m.internalUse.setView(c);x.initOverlays()}function L(){return!d.map().isShown()}function B(e,t){m.internalUse.setSize(e,t)}function G(){return m.internalUse.getMapContainer()}d.privateIsLayingOut=x.isLayingOut;function Y(e,t,n,r,i){return w.mousedown(e,t,n,r,i)}function z(){return p.graph()}function P(){return m.api}function V(){return m&&m.api.isShown()}function X(){return m&&m.internalUse.isTransitioning()}function j(){return x.getWebGLPixels()}function K(){return x.combo.api}function H(e){return F(!0===e?{animate:!0}:e,{animate:!1,time:1e3})}function Q(e,n,r,i){var o,a,u;if(!i)throw new Error("[toDataURL] callback is required");if(x.isMapMode()){o=c.width();a=c.height()}else{o=Math.floor(e);a=Math.floor(n)}var s=c.settings();o=o>0?o:s.width;a=a>0?a:s.height;var f=F(r,{fit:"exact",watermark:!0,gradient:!0,logo:!0});V()&&(f.fit="exact");if("oneToOne"===f.fit){(u=x.modelExtents())||(u={x1:0,y1:0,x2:100,y2:100});var l=10;u.x1-=l;u.y1-=l;u.x2+=l;u.y2+=l;var h=x.watermarkSize();if(h&&f.watermark){var v=(h.width-(u.x2-u.x1))/2;if(v>0){u.x1-=v;u.x2+=v}var g=(h.height-(u.y2-u.y1))/2;if(g>0){u.y1-=g;u.y2+=g}}o=u.x2-u.x1;a=u.y2-u.y1;f.noScale=!0}function y(e){o=Math.floor(o/e);a=Math.floor(a/e)}var b=o*a/16e6;if(b>1){y(Math.sqrt(b))}var w=8e3,A=o/w;A>1&&y(A);var I=a/w;I>1&&y(I);var E=M(o,a,!0),k=f.noScale?1:o/c.width(),C=cr(),S=Jg(C,Math.floor(o/k),Math.floor(a/k),k,m),R=Qg(C,null,t),L=Qv(d,C,R,null,t,null);L.setCreateCanvasFn(M);L.setModel(p);L.setView(S);L.setCanvasContext(E.getContext("2d"));L.setShadowCanvas(null);L.imageGenFn(x.imageGenFn());B();function B(){var e=x.options();e.overview={shown:!1};f.watermark||(e.watermark=void 0);f.gradient||(e.gradient=void 0);f.logo||(e.logo=void 0);L.options(e);L.backgroundOpacity(x.backgroundOpacity());var n=L.makeGhostCanvas(o,a),r=[];if(!f.selection){r=p.doSelection();p.doSelection([])}switch(f.fit){case"chart":L.fitToModel(!1);break;case"view":S.fromOldSettings(c.settings(),!0,!1);break;case"exact":S.fromOldSettings(c.settings(),!1,!1);break;case"oneToOne":S.fitWorldExtents(u,!1,!1,!1,!1,0)}S.scaleFactor(k);L.initOverlays();L.draw(!0,{all:!0});t.waitForImages((function(){L.draw(!0,{all:!0});var e;try{e=E.toDataURL()}catch(e){throw new Error("[toDataURL] There is a problem exporting the chart."+e)}finally{if("rtl"===E.dir){var t=document.getElementsByTagName("body")[0];t.removeChild(E);t.removeChild(n)}}f.selection||p.doSelection(r);p.setAllDirty();if(V()){var o=void 0,a=x.getCanvasContext();o=a.webglCanvas?a.webglCanvas:a.canvas;m.internalUse.toDataURL(M,E,o,x.drawBackground,i)}else T(i,e)}))}}function $(e,n){switch(e&&e.type){case"LinkChart":if(m&&m.internalUse.isTransitioning())throw new Error("Cannot load chart during map show or hide operation");p=_v(d,s,h,g,t);x.setModel(p);x.load(e,(function(){x.initOverlays();t.invokeWhenImagesHaveLoaded(n)}));break;default:throw new Error("Unknown chart type passed to load")}}function ee(){return p.type()}function re(){s.trigger("prechange","delete");x.load({type:"LinkChart",items:[],map:{keepSameMode:!0}},(function(){x.render()}))}function ie(e,n){oe(e,{updateGlyph:!0});x.render();t.invokeWhenImagesHaveLoaded(n)}function oe(e,t){if(D(e))throw new Error("Null or undefined object passed to merge");var n=O(e);x.merge(n,t)}function ue(e,t){var n=p.getByID(e);return!n||!t&&n.parentId?null:n}function se(e,t){return p?Array.isArray(e)?e.map((function(e){return ue(e,t)})):ue(e,t):null}function fe(e){var t=e;if(t){t=Z(t);var n=d.privateGetItem(t).filter((function(e){return e&&"link"===e.type&&!e._combo}));p.reveal(te(n),!0);d.privateTrigger("redraw",{all:!0})}return p.getRevealedLinks()}function le(e){return se(e,!0)}function ce(e){return!!p&&p.isItemShown(e)}function de(e){return p.topParentId(e)}function he(){return p?p.getRawItems():[]}function ve(){return x.getCanvasContext()}function ge(){return g}function pe(e){p&&p.setDirty(e)}function me(e){d.privateGetItem(e).forEach((function(e){if(e){d.privateRedrawItem(e.id);if(e._combo){d.privateSetAllItemsInComboDirty(e._combo.linkIds);e._combo.nodeIds&&d.privateSetAllItemsInComboDirty(e._combo.nodeIds)}}}))}function ye(e){p&&p.applyRevealedLinkOffsets(e)}function be(e){return p?p.topParentId(e):e}function xe(e){var t=e;m&&m.api.isShown()&&(t=m.internalUse.preMerge(t));p.merge(t);x.render()}function we(e,t){var n=F(e,{type:"all",items:"underlying"});return E.each(n,!0,t)}function Ae(e){return p.bothEndsShown(e)}function Me(e){return p.bothEndsForeground(e)}function Ie(e){return p.getParentItems(e)}function Ee(e){return p?p.firstVisibleItemInAncestry(e):null}function ke(e,t){void 0===t&&(t=!1);return null!==p&&p.allParentsOpen(e,t)}function Ce(e){return p.getAncestryIds(e,!1)}function Se(){x.render();p.setAllDirty()}function Te(e){p.addItemsToTransfer(e)}function Re(e){p.removeItemsFromTransfer(e)}function Le(e,t){void 0===t&&(t=!1);var n={};p.setProperties(e,!1,n,t);x.render(n)}function Be(e){return p.neighbourLinkIds(e)}function Ge(e){p.removeItem(e);x.render()}function Oe(){return p.graph()}function Ze(e,t){return p.privateGetLinksBetween(e,t)}function Ye(){p.validateCombos()}function Fe(e){I=e}function ze(e){k=e}function Pe(e){Object.keys(e).forEach((function(t){e[t]=hp}))}function De(){d.setContainer(null);if(x.isMapMode()){m.api.leafletMap().remove();x.setOverlayContext(null)}_(I).forEach((function(e){document.removeEventListener(e,I[e])}));x.destroy();k();fn();_n();yn();u.destroy();p.destroy();Pe(r.map());Pe(r.combo());Pe(p.graph());Pe(r);p.graph=hp;x=null;c=null;h=null;g=null;p=null;y=null;s=null;x=null;E=null;d=null}function Ve(e){var t=or(e);i.privateSetContainer(t);x.setContainer(t)}function We(e,n,r){void 0===n&&(n=!1);if(e){var i={};x.setProperties(e,n,!1,i);x.render(i)}t.invokeWhenImagesHaveLoaded(r)}function Xe(e,t,n,r,i){var o=F(t,{time:1e3,easing:"linear",queue:!0});(o.time<0||!b(o.time))&&(o.time=0);var a=Z(e);x.animateProperties(a,o,n,r,i)}function Ue(e,t,n){Xe(e,t,n)}function Ne(e,t,n,r){Xe(e,t,n,!0,r)}function je(e){return"number"==typeof e?Math.min(Math.max(0,e),1):e?1:0}function Ke(e,t,n){var r=F(t,{time:500});x.animateBackgroundOpacity(je(e),r.time,n)}function He(e){x.backgroundOpacity(je(e))}function _e(e,t,n){var r=F(t,{c:"#909090",w:20,r:80,time:800,repeat:1,lw:40});x.ping(e,r,n)}function Je(e){return Array.isArray(e)?e.map(p.getItem):p?p.getItem(e):null}function Qe(e,n){if(e){s.trigger("prechange","properties");x.setItem(e);x.render();t.invokeWhenImagesHaveLoaded(n)}}function qe(e){s.trigger("prechange","delete");x.removeItem(e);x.render()}function $e(e){e&&"boolean"==typeof e.combos&&!e.items&&(e.items=e.combos?"underlying":"toplevel")}function et(e,t){var n=F(e,{type:"all",items:"underlying"});return E.each(n,!1,t)}function tt(e,t,n){var r=nt(t);E.filter(e,r,n)}function nt(e){$e(e);var t=F(e,{type:"all",items:"underlying",animate:!0,time:1e3,updateGlyph:!0});return F(t,{hideSingletons:"link"===t.type})}function rt(e,t,n){$e(t);var r=F(t,{type:"node",items:"underlying",foregroundOpenCombos:!0});E.foreground(e,r,n)}function it(e,t,n){if(D(e)||""===e)T(n);else{s.trigger("prechange","hide");var r=Z(e),i=H(t);i=F(i,{updateGlyph:!0});var o=x.combo.internalUse.hide(r,i);x.hide(o,i,n)}}function ot(e,t,n){s.trigger("prechange","hide");var r=Z(e),i=H(t);x.hide(r,i,n)}function at(){return p.hidden()}function ut(e,t,n,r){if(D(e)||""===e)T(r);else{s.trigger("prechange","show");var i=Z(e),o=H(n);o=F(o,{updateGlyph:!0});var a=x.combo.internalUse.show(i);x.show(a,!!t,o,r);var u=[];a.forEach((function(e){var t=d.privateGetItem(e);if("node"===t.type){t._combo&&u.push(t.id);t.parentId&&u.push(t.parentId)}return!1}));x.combo.internalUse.ensureMinimumOpenComboSize(u)}}function st(e,t,n,r){s.trigger("prechange","show");var i=Z(e),o=H(n);x.show(i,t,o,r)}function ft(e){return p?x.labelPosition(e,c):null}function lt(e){return p?p.contains(e):[]}function ct(){var e=p.serialize();x.appendCombos(e);var t=m.internalUse.serialize();t&&(e.map=t);e.viewSettings=c.settings();return e}function dt(e,t){var n=c.worldCoordinates(e,t),r=n.x,i=n.y;return{x:Math.floor(r),y:Math.floor(i)}}function ht(e,t){return{x:c.worldToViewX(e),y:c.worldToViewY(t)}}function vt(e,t,n){if(!e)return c.settings();var r=H(t),i=F(e,{offsetX:0,offsetY:0,zoom:1});x.setViewSettings(i,r.animate,r.time,(function(){x.render({drawOnly:!0});T(n)}))}function gt(e,t){return x.options(e,t)}function pt(){return Aa(gt().truncateLabels)}function mt(e,t){if(void 0!==e&&!!e!==yt){yt=!yt;m&&m.internalUse.lock(yt);if(e){var n=t||{};x.wait(n.wait);x.removeDragger()}else x.wait(!1);x.render()}return yt}var yt=!1;function bt(e,t,n){var r=H(t);switch(e){case"in":x.zoomIn(r.animate,r.time,n);break;case"out":x.zoomOut(r.animate,r.time,n);break;case"one":x.setZoom(1,r.animate,r.time,n);break;case"fit":r.extents?x.fitExtents(r.animate,r.time,r.extents,n):x.fitToModel(r.animate,r.time,r.ids,n);break;case"selection":x.fitToSelection(r.animate,r.time,void 0,n);break;case"height":x.fitModelHeight(r.animate,r.time,r.ids,n)}}function xt(e,t,n){var r=H(t);"selection"!==e||V()?x.pan(e,r.animate,r.time,n):x.fitToSelection(r.animate,r.time,void 0,n,!0)}function wt(){return s.getErrors()}function At(){x.cancelAnimation()}function Mt(e,t,n){if(V()||X())T(n);else{var r=kt(t);x.layout(e||"standard",r,n)}}function It(){var e=d.viewOptions();return e.height>0?e.width/e.height:1}function Et(e){return D(e.tightness)?5:+e.tightness}function kt(e){var t=e||{};t.tightness=Et(t);return F(t,{fit:!0,animate:!0,expanding:!1,spiralOverride:!1,tidy:!0,ratio:It(),tightness:5,straighten:!0})}function Ct(e,t,n,r){var i=St(n);x.arrange(e||"grid",t,i,r)}function St(e){var t=e||{};t.tightness=Et(t);return F(t,{fit:!1,animate:!0,tidy:!1,ratio:It(),tightness:5})}function Tt(e){var t=D(e)?e:Z(e),n=p?p.doSelection(t):[];t&&x.render();return n}function Rt(e){return!0!==e.hi}function Lt(e,t,r,i,o){var u=o.layout.fix,s=!o.filter||o.filter.updateGlyph,f=a(e);function l(e,t){d.privateEach({type:"link",items:"toplevel"},(function(n){if(!e[n.id1]||!e[n.id2]){var r=e[n.id1]||e[n.id2],i=e[n.id1]?n.id2:n.id1;if(r&&i){t[i]||(t[i]={x:0,y:0,_counter:0,id:i});t[i].x+=r.x;t[i].y+=r.y;t[i]._counter++}}}));var r=0;n(t,(function(t){if(!e[t.id]){t.x/=t._counter;t.y/=t._counter;e[t.id]=t;r++}}));return r}function c(e,t,r){if(V())r();else{for(var i,o={},a=[];0!==i;)i=l(t,o);e.forEach((function(e){var t=e;if("node"===t.type&&!o[t.id]){t.x=w[t.id].x;t.y=w[t.id].y}}));n(o,(function(e){a.push(e)}));d.setProperties(a,!1,r)}}function h(){var e=[],t=[],n={};p.each({type:"all"},(function(r){"node"===r.type?e.push(r):"link"===r.type&&t.push(r);n[r.id]=r}));return{nodes:e,links:t,allItems:n}}function v(e){if("adaptive"!==u)return null;var t=Gl(e.nodes.filter(Rt),e.links.filter(Rt));return{parts:nf.connectedComponents(t.staticGraph),labels:t.vertexMap}}function g(e){var t={dict:{},touched:{}},n="adjacent"===u||"nonadjacent"===u||"adaptive"===u;f.forEach((function(r){var i=r;t.dict[i.id]=i;if(n&&"link"===i.type){var o=d.privateTopParentId(i.id);if(!e[o]){var a=d.privateTopParentId(i.id1);a&&e[a]&&(t.touched[a]=!0);var u=d.privateTopParentId(i.id2);u&&e[u]&&(t.touched[u]=!0)}}}));return t}function m(){var e=0;d.privateEach({items:"toplevel"},(function(){e++}));return e}function y(e,t){switch(u){case"all":return e;case"adjacent":return Object.keys(t);case"adaptive":case"nonadjacent":return e.filter((function(e){return!t[e]}));case"none":default:return[]}}function b(){var e={open:[],closed:[]};f.forEach((function(t){var n=t;"node"===n.type&&n.parentId&&(d.combo().isOpen(n.parentId)?e.open.push(n.parentId):e.closed.push(n.parentId))}));return e}function x(e){for(var t=[],n={},r=0;r<e.length;r++){var i=e[r];if(!D(i)&&!n[i.id]){n[i.id]=!0;w[i.id]={x:i.x,y:i.y};delete i.x;delete i.y;t.push(i)}}return t}var w={};f=x(f);var A=b(),M=h(),I=v(M),E=m();oe(f,{updateGlyph:s});var k=v(h()),C=g(M.allItems),S=C.dict;I&&k&&Tl.adaptiveExpand.findAdaptiveGroups(I,k).forEach((function(e){C.touched[e]=!0}));var T=y(M.nodes.map((function(e){return e.id})),C.touched);t(S,(function(){c(f,M.allItems,(function(){r(M.allItems,(function(){i(A,m()!==E,T)}))}))}))}function Bt(e,t,n){var r=t;function i(e){function t(t,n){function r(e){var n=e;return t[n.id]?g.filter.filterFn(n):!n.hi}if(g.filter&&J(t)){var i=a(g.filter);i.animate=e;return d.filter(r,i,n)}return n()}return t}function o(e,t,n){g.arrange.animate=t;d.combo().arrange(e,g.arrange,n)}function u(e){g.layout.fixed=e;d.layout(g.layout.name,g.layout,n)}function f(e,t){g.layout.fixed=t;x.arrangeAndLayout(e,g,n)}function l(e,t,r){var i=!1;if(g.animate)for(var a=0;a<e.open.length;a++)if(d.privateItemIsShown(e.open[a])){i=!0;break}var s=e.open.concat(e.closed);t?i?f(s,r):o(s,!1,(function(){u(r)})):o(s,i,n)}function c(e,t){var n;if(e.filter&&A(e.filter.filterFn)){var r=e.filter.filterFn;(n=nt(e.filter)).time=Math.floor(t.time/5);n.filterFn=r;return n}}function h(e){e.arrange.animate=e.animate;e.arrange.time=e.time;e.arrange.easing=e.layout.easing;e.filter&&(e.arrange.updateGlyph=e.filter.updateGlyph);return F(e.arrange,{name:"lens",resize:!0,updateGlyph:!0})}function v(e,t){t.layout.animate=t.animate;t.layout.time=t.time;var n=t;t.layout=F(t.layout,{fit:n.fit,straighten:n.straighten,tidy:n.tidy,tightness:n.tightness});var r={name:"standard",expanding:!0,easing:"cubic",absoluteFixed:!0,tidy:!1,fit:!1,spiralOverride:!0,packing:"none",pinToFirstFixed:!1,fix:e.layout?"nonadjacent":"all"};if("adaptive"===t.layout.fix){t.layout.fix=void 0;r.fix="adaptive";r.absoluteFixed=!1;r.spiralOverride=!1;r.packing="adaptive"}return kt(F(t.layout,r))}var g=F(r=r||{},{animate:!0,time:1e3,layout:{},arrange:{}});g.filter=c(r,g);g.filter&&(g.time-=g.filter.time);g.layout=v(r,g);g.arrange=h(g);s.trigger("prechange","expand");Lt(Z(O(e)),i(!1),i(g.animate),l,g)}function Gt(e,t,n,r){var i=d.getItem(e);if(d.getItem(t))throw new Error("LinkId ("+t+") already exists and must be unique");if(e&&i&&"node"===i.type&&t){var o=U(t),a=F(n,{style:{}});d.privateBind("dragcomplete",l);var u="dummyEnd"+Math.floor(1e7*Math.random()),s={type:"node",du:!0,id:u,x:i.x,y:i.y},f=ne(a.style,{id:o,id1:e,id2:u,type:"link"});d.merge([s,f],(function(){v((function(){x.startDragger(o,u+W()+"id2",i.x,i.y)}))}))}function l(e,t){if("dummy"===e){d.removeItem(u);d.privateUnbind("dragcomplete",l);var n=U(t)===o?null:t;T(r,n)}}}function Ot(e,t){x.draw(e,t);x.drawoffscreen();Zt(t);x.afterDraw()}function Zt(e){e.all=!1;e.colours=!1;e.textures=!1;e.positions=!1;e.shadow=!1}var Yt=ar(Ot,x.animate,x.getCanvasContext);ne(d,Yt);d.privateBind("redraw",Yt.redraw);return{api:d,actions:w}}
var gp="cHJlY2lzaW9uIGhpZ2hwIGZsb2F0O2F0dHJpYnV0ZSB2ZWMyIGFfcG9zaXRpb247YXR0cmlidXRlIGZsb2F0IGFfcmFkaXVzO2F0dHJpYnV0ZSBmbG9hdCBhX3N0YXJ0QW5nbGU7YXR0cmlidXRlIGZsb2F0IGFfZW5kQW5nbGU7YXR0cmlidXRlIGZsb2F0IGFfd2lkdGg7YXR0cmlidXRlIHZlYzQgYV9jb2xvdXI7YXR0cmlidXRlIHZlYzQgYV9jb2xvdXIyO2F0dHJpYnV0ZSB2ZWMzIGFfaGl0VGVzdENvbG91cjthdHRyaWJ1dGUgZmxvYXQgYV9saW5lVHlwZTthdHRyaWJ1dGUgdmVjMyBhX2NvcmU7dW5pZm9ybSBmbG9hdCB1X2hpdFRlc3Q7dW5pZm9ybSBmbG9hdCB1X3pvb207dW5pZm9ybSB2ZWMzIHVfcmVzb2x1dGlvbjt1bmlmb3JtIG1hdDQgdV90cmFuc2Zvcm07dW5pZm9ybSBmbG9hdCB1X3RpbWU7dW5pZm9ybSBib29sIHVfYWRhcHRpdmVTdHlsaW5nO3ZhcnlpbmcgdmVjNCB2X2NvbG91cjt2YXJ5aW5nIHZlYzQgdl9jb2xvdXIyO3ZhcnlpbmcgdmVjNCB2X2NvcmU7dmFyeWluZyB2ZWM0IHZfbGluZURhdGE7dmFyeWluZyB2ZWMzIHZfaGl0VGVzdENvbG91cjt2YXJ5aW5nIHZlYzQgdl9iYXJ5Y2VudHJpYzt2YXJ5aW5nIHZlYzQgdl9wb3NpdGlvbjt2YXJ5aW5nIHZlYzMgdl9kYXNoaW5nO2Zsb2F0IGE9My4xNDE1OTI2NTM1OTtpbnQgYj0yO2ludCBjPTM7aW50IGQ9NDtpbnQgZT01O2Zsb2F0IGY9MTUuMDtjb25zdCBmbG9hdCBnPTQuMDtjb25zdCBmbG9hdCBoPWctMC41O2Zsb2F0IGk9MC4wMDAxO2ludCBqKGZsb2F0IGEpe3JldHVybiBpbnQoZmxvb3IoYSswLjUpKTt9ZmxvYXQgayhmbG9hdCBsLGZsb2F0IG0sZmxvYXQgbil7ZmxvYXQgbz1tYXgobi1sLDAuMCk7ZmxvYXQgcD1tYXgoaSxtLWwpO3JldHVybiBtaW4oMS4wLG8vcCk7fWZsb2F0IHEoKXtpZih1X3pvb20+MC4xNSl7cmV0dXJuIG1peCgwLjc1LDEuMCxrKDAuMTUsMC4yLHVfem9vbSkpO31pZih1X3pvb20+MC4wOCl7cmV0dXJuIG1peCgwLjQsMC43NSxrKDAuMDgsMC4xNSx1X3pvb20pKTt9cmV0dXJuIG1peCgwLjIsMC40LGsoMC4wMSwwLjA4LHVfem9vbSkpO312ZWMyIHIodmVjMiBzLGZsb2F0IHQsZmxvYXQgdSxmbG9hdCB2LGZsb2F0IHcpe3JldHVybiB2ZWMyKHMueCsodCpjb3ModSt2KncpKSxzLnkrKHQqc2luKHUrdip3KSkpO31mbG9hdCB4KGZsb2F0IHksZmxvYXQgeil7ZmxvYXQgQT15LzIuMDtmbG9hdCBCPWZsb29yKCgoeitBKS8oeStBKSkrMC41KTtpZigoQip5KT56KXtCPTEuMDt9cmV0dXJuIEI7fXZlYzIgQyh2ZWMyIEQsdmVjMiBFLHZlYzIgRixpbnQgRyl7dmVjMiBIO3ZlYzIgSTtpZihHPT0wKXtIPUQ7ST0oRStGKS8yLjA7fWVsc2UgaWYoRz09MSl7SD1FO0k9KEQrRikvMi4wO31lbHNlIGlmKEc9PTIpe0g9RjtJPShFK0QpLzIuMDt9dmVjMiBKPW5vcm1hbGl6ZShILUkpO0grPUovdV96b29tO3JldHVybiBIO312b2lkIG1haW4oKXt2ZWM0IEs9YV9jb2xvdXIvMjU1LjA7dmVjNCBMPWFfY29sb3VyMi8yNTUuMDtmbG9hdCBNPTEuMC91X3pvb207aW50IE49aihhX2xpbmVUeXBlKTtib29sIE89Tj09Yjtib29sIFA9Tj09Yztib29sIFE9Tj09ZDtib29sIFI9Tj49ZTt2ZWMyIEg7aWYoUil7aW50IEc9aihhX2xpbmVUeXBlKS1lO3ZlYzIgRD1hX3Bvc2l0aW9uO3ZlYzIgRT12ZWMyKGFfcmFkaXVzLGFfc3RhcnRBbmdsZSk7dmVjMiBGPXZlYzIoYV9lbmRBbmdsZSxhX3dpZHRoKTtmbG9hdCBTPWRpc3RhbmNlKEUsRik7ZmxvYXQgVD1TL3Vfem9vbTtmbG9hdCBVPTEuMC9UO0g9QyhELEUsRixHKTt2X2JhcnljZW50cmljPXZlYzQoYV9jb3JlLnh5eixVKTt2X2NvcmU9dmVjNCgxLjApO3ZfbGluZURhdGE9dmVjNCgwLjAsMC4wLDAuMCxhX2xpbmVUeXBlKTt9ZWxzZXt2ZWMyIHM9YV9wb3NpdGlvbjtmbG9hdCB0PWFfcmFkaXVzO2Zsb2F0IFY9YV9zdGFydEFuZ2xlO2Zsb2F0IFc9YV9lbmRBbmdsZTtmbG9hdCBYO2Zsb2F0IFk7ZmxvYXQgTT0xLjAvdV96b29tO2lmKHVfaGl0VGVzdD09MS4wKXtNPTcuMC91X3pvb207fWJvb2wgWj1qKHNpZ24oYV9jb3JlLnIpKT09MTtmbG9hdCB3PWFicyhhX2NvcmUuciktMS4wO2Zsb2F0IHY9KGFfZW5kQW5nbGUtYV9zdGFydEFuZ2xlKS9nO2Zsb2F0IGJhPTEuMC91X3Jlc29sdXRpb24uejtpZihQKXtiYT1tYXgoYmEsc3RlcCgyLjUsYV9saW5lVHlwZSkqMi4wKTt9ZmxvYXQgYmI9bWF4KGFfd2lkdGgqdV96b29tLGJhKS91X3pvb207ZmxvYXQgYmM9bWF4KHEoKSxzbW9vdGhzdGVwKDAuMCwxLjAsYV93aWR0aCp1X3pvb20pKTtpZih1X2FkYXB0aXZlU3R5bGluZyl7Sy5hKj1iYztMLmEqPWJjO31mbG9hdCBiZD1iYitNO2Zsb2F0IGJlPWJkLzIuMDtmbG9hdCBiZj1iYi8yLjA7aWYodzxnKXtZPTEuMDt9ZWxzZXtZPS0xLjA7fWZsb2F0IGJnPWFfcmFkaXVzKihXLVYpO3ZlYzIgYmg9cihzLG1heCh0K2JmLDAuMCksYV9zdGFydEFuZ2xlLHYsdysoWS8yLjApKTtmbG9hdCBiaT12LzIuMDtmbG9hdCBiaj1sZW5ndGgoYmgtcyk7ZmxvYXQgYms9YmovY29zKGJpKTtmbG9hdCBibD1zbW9vdGhzdGVwKDQwMDAuMCwyMDAwMC4wLHQpKjMuMDtpZihaKXtYPWJrK00rYmw7fWVsc2V7YmwqPTIuMDtYPXQtYmUtYmw7fXZfbGluZURhdGE9dmVjNCgwLjAsYmIsYmcsLWFfbGluZVR5cGUpO1g9bWF4KFgsMC4wKTtmbG9hdCBibT0oMS4wL2JnKS91X3pvb207ZmxvYXQgYm49YmcqdV96b29tO2Zsb2F0IGJvPShXLVYpL2JuO2Zsb2F0IGJwPVY7ZmxvYXQgYnE9Ym87YnAtPSgxLjAtc3RlcCgwLjUsdykpKmJxO2JwKz1zdGVwKGgsdykqYnE7SD1yKHMsWCxicCx2LHcpO2lmKFApe2Zsb2F0IGJyPWJuLzQuMDtmbG9hdCBicz1iZy8oYmIqMi4wKTtmbG9hdCBidD1taW4oYnIsYnMpO3ZfY29yZT12ZWM0KGJwLGNlaWwoYnQpLGJtLGFfcmFkaXVzKTt2X2Rhc2hpbmc9dmVjMyhiYixiYiwwLjUpO31lbHNlIGlmKE8pe2Zsb2F0IHk9bWF4KDIuMC91X3pvb20sYmIqMi4wKTtmbG9hdCBidT14KHksYmcpO2Zsb2F0IEE9KGJnLXkqYnUpLyhidS0xLjApO2Zsb2F0IGJ2PUEqYnUvKGJnK0EpO3ZfY29yZT12ZWM0KGJwLGJ1LWJ2LGJtLGFfcmFkaXVzKTtmbG9hdCBidz0oeS8oeStBKSkvMi4wO3ZfZGFzaGluZz12ZWMzKHksQSxidyk7fWVsc2UgaWYoUSl7ZmxvYXQgYng9YV9jb3JlLnk7ZmxvYXQgYnk9ZipieDtmbG9hdCBiej1tYXgoMzAuMCxiYiozLjApO2Zsb2F0IGJBPWJ6O2J5PW1pbihiQSoxNi4wLGFicyhieSkpKnNpZ24oYngpO2Zsb2F0IGJCPTEwMDAuMCpiQS9ieTtmbG9hdCBiQz1tb2QodV90aW1lL2JCLDEuMCk7ZmxvYXQgYkQ9YnovYV9yYWRpdXM7ZmxvYXQgYkU9YkQqKDIuMC8zLjApO2Zsb2F0IGJGPWJDKmJEO3ZfY29yZT12ZWM0KGJwLHcvZyxibSxhX3JhZGl1cyk7dl9kYXNoaW5nPXZlYzMoYkQsMC4wLGJGKTt9ZWxzZXt2X2NvcmU9dmVjNChicCx3L2csYm0sYV9yYWRpdXMpO312X3Bvc2l0aW9uPXZlYzQoSCxzKTt9dmVjMiBiRz1IL3VfcmVzb2x1dGlvbi54eTt2ZWMyIGJIPWJHKjIuMDt2ZWMyIGJJPWJILTEuMDt2X2NvbG91cj1LO3ZfY29sb3VyMj1MO3ZfaGl0VGVzdENvbG91cj1hX2hpdFRlc3RDb2xvdXI7Z2xfUG9zaXRpb249dV90cmFuc2Zvcm0qdmVjNChiSSp2ZWMyKDEsLTEpLDAsMSk7fQ==",pp="CiNpZmRlZiBHTF9PRVNfc3RhbmRhcmRfZGVyaXZhdGl2ZXMKCiNleHRlbnNpb24gR0xfT0VTX3N0YW5kYXJkX2Rlcml2YXRpdmVzIDogZW5hYmxlCgojZW5kaWYKcHJlY2lzaW9uIGhpZ2hwIGZsb2F0O3VuaWZvcm0gZmxvYXQgdV9oaXRUZXN0O3VuaWZvcm0gZmxvYXQgdV9zaGFkb3dUeXBlO3VuaWZvcm0gZmxvYXQgdV96b29tO3VuaWZvcm0gZmxvYXQgdV9ncmFkaWVudFN0YXJ0RnJhY3Rpb247dmFyeWluZyB2ZWM0IHZfY29sb3VyO3ZhcnlpbmcgdmVjNCB2X2NvbG91cjI7dmFyeWluZyB2ZWMzIHZfaGl0VGVzdENvbG91cjt2YXJ5aW5nIHZlYzQgdl9jb3JlO3ZhcnlpbmcgdmVjNCB2X2xpbmVEYXRhO3ZhcnlpbmcgdmVjNCB2X2JhcnljZW50cmljO3ZhcnlpbmcgdmVjNCB2X3Bvc2l0aW9uO3ZhcnlpbmcgdmVjMyB2X2Rhc2hpbmc7aW50IGE9MjtpbnQgYj0zO2ludCBjPTQ7aW50IGQ9NTtmbG9hdCBlPTMuMTQxNTkyNjUzNTk7ZmxvYXQgZj0wLjcwNzEwNjc4MTE4NjU0NzU3O2Zsb2F0IGcoZmxvYXQgaCxmbG9hdCBpKXtmbG9hdCBqPWxlbmd0aCh2ZWMyKGRGZHgoaSksZEZkeShpKSkpKmY7cmV0dXJuIHNtb290aHN0ZXAoaC1qLGgraixpKTt9ZmxvYXQgaz0wLjAwMDE7ZmxvYXQgbChmbG9hdCBtLGZsb2F0IG4sZmxvYXQgaSl7ZmxvYXQgbz1tYXgoaS1tLDAuMCk7ZmxvYXQgcD1tYXgoayxuLW0pO3JldHVybiBtaW4oMS4wLG8vcCk7fWZsb2F0IHEodmVjMyByKXt2ZWMzIHM9ZndpZHRoKHIpO3ZlYzMgdD1zbW9vdGhzdGVwKHZlYzMoMC4wKSxzKjIuMCxyKTtyZXR1cm4gbWluKG1pbih0LngsdC55KSx0LnopO31pbnQgdShmbG9hdCBhKXtyZXR1cm4gaW50KGZsb29yKGErMC41KSk7fXZlYzQgdihmbG9hdCB3KXtmbG9hdCB4PWwodV9ncmFkaWVudFN0YXJ0RnJhY3Rpb24sMS4wLXVfZ3JhZGllbnRTdGFydEZyYWN0aW9uLHcpO3ZlYzMgeT1taXgodl9jb2xvdXIucmdiLHZfY29sb3VyMi5yZ2IseCk7ZmxvYXQgej1taXgodl9jb2xvdXIuYSx2X2NvbG91cjIuYSx4KTtyZXR1cm4gdmVjNCh5Knoseik7fXZlYzQgQSh2ZWM0IHksZmxvYXQgQixmbG9hdCBDKXtmbG9hdCBoPShDLzIuMCkqdV96b29tO2Zsb2F0IEQ9YWJzKEIpKnVfem9vbTt5Kj0xLjAtc21vb3Roc3RlcChoLWYsaCtmLEQpO3JldHVybiB5O31mbG9hdCBFKGZsb2F0IEQsZmxvYXQgRixmbG9hdCBHKXtyZXR1cm4gKEQvRikqRzt9dmVjNCBIKGJvb2wgSSxib29sIEosYm9vbCBLLGJvb2wgTCl7ZmxvYXQgQj12X2xpbmVEYXRhLngvMi4wO2Zsb2F0IEM9dl9saW5lRGF0YS55O2Zsb2F0IE09dl9jb3JlLng7dmVjNCBOPXYoTSk7ZmxvYXQgTz12X2NvcmUuejtmbG9hdCBQPXZfbGluZURhdGEuejtpZihMKXtmbG9hdCBRPXZfZGFzaGluZy54O2Zsb2F0IFI9USooMi4wLzMuMCk7ZmxvYXQgUz12X2Rhc2hpbmcuejtmbG9hdCBUPU0qUDtmbG9hdCBVPW1vZChULShQLzIuMCktKFEvMi4wKSxRKTtmbG9hdCBWPW1vZChTLVUsUSk7ZmxvYXQgVz1kaXN0YW5jZShWLFEvMi4wKTtOKj0xLjAtZyhSLzIuMCxXKTtOPUEoTixCLEMpO04qPWcoTyx2X2NvcmUueCk7Tio9MS4wLWcoMS4wLU8sdl9jb3JlLngpO31lbHNlIGlmKEkpe2Zsb2F0IFg9dl9jb3JlLnk7ZmxvYXQgWT1DLzIuMDtmbG9hdCBaPXZfZGFzaGluZy54O2Zsb2F0IGJhPXZfZGFzaGluZy56O2Zsb2F0IGJiPU0qWDt2ZWMyIGJjPXZlYzIoTSpQLEIpO2Zsb2F0IGJkPWZyYWN0KGJiKS1iYTtmbG9hdCBiZT1mbG9vcihiZCswLjUpO2Zsb2F0IGJmPWJiLWJkK2JlO3ZlYzIgYmc9dmVjMigoYmYvWCkqUCwwLjApO2Zsb2F0IGJoPVk7aWYoSil7YmMueT0wLjA7Ymg9Wi8yLjA7Tj1BKE4sQixDKTt9ZmxvYXQgVz1kaXN0YW5jZShiYyxiZyk7Tio9MS4wLWcoYmgsVyk7fWVsc2V7Tj1BKE4sQixDKTtOKj1nKE8sdl9jb3JlLngpO04qPTEuMC1nKDEuMC1PLHZfY29yZS54KTt9cmV0dXJuIE47fXZlYzQgYmkoYm9vbCBJLGJvb2wgSixib29sIEssYm9vbCBMKXtmbG9hdCBDPXZfbGluZURhdGEueTtmbG9hdCBPPXZfY29yZS56O2Zsb2F0IFA9dl9saW5lRGF0YS56O2Zsb2F0IFk9Qy8yLjA7ZmxvYXQgYmo9dl9jb3JlLmE7ZmxvYXQgYms9UC9iajt2ZWMyIEQ9dl9wb3NpdGlvbi54eTt2ZWMyIGJsPXZfcG9zaXRpb24uenc7ZmxvYXQgYm09ZGlzdGFuY2UoRCxibCk7ZmxvYXQgYm49YXRhbihELnktYmwueSxELngtYmwueCk7aWYoYm48dl9jb3JlLngpe2JuKz0yLjAqZTt9ZmxvYXQgYm89dl9jb3JlLng7ZmxvYXQgYnA9KGJuLWJvKS8oYmspO3ZlYzQgTj12KGJwKTtpZihMKXtmbG9hdCBicT12X2Rhc2hpbmcueDtmbG9hdCBicj1icSooMi4wLzMuMCk7ZmxvYXQgUz12X2Rhc2hpbmcuejtmbG9hdCBicz1icCpiaztmbG9hdCBidD1tb2QoYnMtKGJrLzIuMCktKGJxLzIuMCksYnEpO2Zsb2F0IGJ1PW1vZChTLWJ0LGJxKTtmbG9hdCBXPWRpc3RhbmNlKGJ1LGJxLzIuMCk7ZmxvYXQgYnY9dl9jb3JlLnk7Tio9MS4wLWcoYnIvMi4wLFcpO04qPWcoYmosYm0rWSk7Tio9MS4wLWcoYmorWSxibSk7Tio9ZyhPLGJ2KTtOKj0xLjAtZygxLjAtTyxidik7fWVsc2UgaWYoSSl7ZmxvYXQgWj12X2Rhc2hpbmcueDtmbG9hdCBiYT12X2Rhc2hpbmcuejtmbG9hdCBYPXZfY29yZS55O2Zsb2F0IGJ3PWJwKlg7dmVjMiBieD1EO2Zsb2F0IGJkPWZyYWN0KGJ3KS1iYTtmbG9hdCBiZT1mbG9vcihiZCswLjUpO2Zsb2F0IGJnPWJ3LWJkK2JlO2Zsb2F0IGJ5PUUoYmcsWCxiaykrYm87aWYoSyl7dmVjMiBiZz12ZWMyKGJsLngrKGJqKmNvcyhieSkpLGJsLnkrKGJqKnNpbihieSkpKTtmbG9hdCBXPWRpc3RhbmNlKGJ4LGJnKTtmbG9hdCBiej1ZO04qPTEuMC1nKGJ6LFcpO31lbHNle2Zsb2F0IGJBPWRpc3RhbmNlKGJuLGJ5KTtmbG9hdCBiej1FKFovMi4wLFAsYmspO04qPTEuMC1nKGJ6LGJBKTtOKj1nKGJqLGJtK1kpO04qPTEuMC1nKGJqK1ksYm0pO319ZWxzZXtmbG9hdCBidj12X2NvcmUueTtOKj1nKGJqLGJtK1kpO04qPTEuMC1nKGJqK1ksYm0pO04qPWcoTyxidik7Tio9MS4wLWcoMS4wLU8sYnYpO31yZXR1cm4gTjt9dm9pZCBtYWluKCl7aW50IGJCPWludCh1X3NoYWRvd1R5cGUpO2Zsb2F0IGJDPWFicyh2X2xpbmVEYXRhLncpO2ludCBiRD11KGJDKTtib29sIGJFPXNpZ24odl9saW5lRGF0YS53KTwwLjA7Ym9vbCBJPWJDPjEuNTtib29sIEo9YkQ9PWE7Ym9vbCBLPWJEPT1iO2Jvb2wgTD1iRD09Yztib29sIGJGPWJEPj1kO2Jvb2wgYkc9YkI9PS0xO2Jvb2wgYkg9YkI9PTE7aWYodV9oaXRUZXN0PjAuNSl7aWYoYkcpe2Rpc2NhcmQ7fWVsc2V7Z2xfRnJhZ0NvbG9yPXZlYzQodl9oaXRUZXN0Q29sb3VyLzI1NS4wLDEuMCk7fX1lbHNlIGlmKGJIKXtkaXNjYXJkO31lbHNle3ZlYzQgTjtpZihiRil7Tj12ZWM0KHZfY29sb3VyLnJnYip2X2NvbG91ci5hLHZfY29sb3VyLmEpO04qPWcodl9iYXJ5Y2VudHJpYy5hLHEodl9iYXJ5Y2VudHJpYy5yZ2IpKTt9ZWxzZXtpZihiRSl7Tj1iaShJLEosSyxMKTt9ZWxzZXtOPUgoSSxKLEssTCk7fX1nbF9GcmFnQ29sb3I9Tjt9fQ==",mp="cHJlY2lzaW9uIGhpZ2hwIGZsb2F0O2F0dHJpYnV0ZSB2ZWMyIGFfcG9zaXRpb24xO2F0dHJpYnV0ZSB2ZWMyIGFfcG9zaXRpb24yO2F0dHJpYnV0ZSB2ZWMyIGFfcG9zaXRpb24zO2F0dHJpYnV0ZSB2ZWM0IGFfdmVydGV4SW5mbzthdHRyaWJ1dGUgdmVjNCBhX2NvbG91cjthdHRyaWJ1dGUgdmVjNCBhX2NvbG91cjI7YXR0cmlidXRlIHZlYzMgYV9oaXRUZXN0Q29sb3VyO2F0dHJpYnV0ZSBmbG9hdCBhX2luZGV4O3VuaWZvcm0gZmxvYXQgdV9oaXRUZXN0O3VuaWZvcm0gdmVjMyB1X3Jlc29sdXRpb247dW5pZm9ybSBtYXQ0IHVfdHJhbnNmb3JtO3VuaWZvcm0gZmxvYXQgdV96b29tO3VuaWZvcm0gZmxvYXQgdV92aWV3SW5kZXBlbmRlbnQ7dW5pZm9ybSBmbG9hdCB1X3RpbWU7dW5pZm9ybSBib29sIHVfYWRhcHRpdmVTdHlsaW5nO3ZhcnlpbmcgdmVjNCB2X2NvbG91cjt2YXJ5aW5nIHZlYzQgdl9jb2xvdXIyO3ZhcnlpbmcgdmVjNCB2X2NvcmU7dmFyeWluZyB2ZWMzIHZfaGl0VGVzdENvbG91cjt2YXJ5aW5nIHZlYzQgdl9saW5lRGF0YTt2YXJ5aW5nIHZlYzQgdl9iYXJ5Y2VudHJpYzt2YXJ5aW5nIHZlYzQgdl9wb3NpdGlvbjt2YXJ5aW5nIHZlYzMgdl9kYXNoaW5nO2ludCBhPTI7aW50IGI9MztpbnQgYz00O2ludCBkPTU7ZmxvYXQgZT0wLjAwMDE7ZmxvYXQgZj0xNS4wO2ludCBnKGZsb2F0IGEpe3JldHVybiBpbnQoZmxvb3IoYSswLjUpKTt9ZmxvYXQgaChmbG9hdCBpLGZsb2F0IGope2Zsb2F0IGs9aS8yLjA7ZmxvYXQgbD1mbG9vcigoKGoraykvKGkraykpKzAuNSk7aWYoKGwqaSk+ail7bD0xLjA7fXJldHVybiBsO312ZWMyIG0odmVjMiBuLHZlYzIgbyx2ZWMyIHAsaW50IHEpe3ZlYzIgcjt2ZWMyIHM7aWYocT09MCl7cj1uO3M9KG8rcCkvMi4wO31lbHNlIGlmKHE9PTEpe3I9bztzPShuK3ApLzIuMDt9ZWxzZSBpZihxPT0yKXtyPXA7cz0obytuKS8yLjA7fXZlYzIgdD1ub3JtYWxpemUoci1zKTtyKz10L3Vfem9vbTtyZXR1cm4gcjt9ZmxvYXQgdShmbG9hdCB2LGZsb2F0IHcsZmxvYXQgeCl7ZmxvYXQgeT1tYXgoeC12LDAuMCk7ZmxvYXQgej1tYXgoZSx3LXYpO3JldHVybiBtaW4oMS4wLHkveik7fWZsb2F0IEEoKXtpZih1X3pvb20+MC4xNSl7cmV0dXJuIG1peCgwLjc1LDEuMCx1KDAuMTUsMC4yLHVfem9vbSkpO31pZih1X3pvb20+MC4wOCl7cmV0dXJuIG1peCgwLjQsMC43NSx1KDAuMDgsMC4xNSx1X3pvb20pKTt9cmV0dXJuIG1peCgwLjIsMC40LHUoMC4wMSwwLjA4LHVfem9vbSkpO312b2lkIG1haW4oKXtmbG9hdCBCPTEuMC91X3Jlc29sdXRpb24uejt2ZWM0IEM9YV9jb2xvdXIvMjU1LjA7dmVjNCBEPWFfY29sb3VyMi8yNTUuMDtpbnQgRT1nKGFfdmVydGV4SW5mby53KTtib29sIEY9RT09YTtib29sIEc9RT09Yjtib29sIEg9RT09Yztib29sIEk9RT09ZDt2ZWMyIHI7ZmxvYXQgSjtmbG9hdCBLO2lmKEkpe2ludCBxPWludChhX2luZGV4KTt2ZWMyIG49YV9wb3NpdGlvbjE7dmVjMiBvPWFfcG9zaXRpb24yO3ZlYzIgcD1hX3Bvc2l0aW9uMztmbG9hdCBMPWRpc3RhbmNlKG8scCk7ZmxvYXQgTT1ML3Vfem9vbTtmbG9hdCBLPTEuMC9NO3I9bShuLG8scCxxKTt2X2xpbmVEYXRhPXZlYzQoMC4wLDAuMCwwLjAsYV92ZXJ0ZXhJbmZvLncpO3ZfYmFyeWNlbnRyaWM9dmVjNChhX3ZlcnRleEluZm8ueHl6LEspO31lbHNle2Zsb2F0IE49MS4wL3Vfem9vbTtpZih1X2hpdFRlc3Q9PTEuMCl7Tj03LjAvdV96b29tO31mbG9hdCBCPTEuMC91X3Jlc29sdXRpb24uejtpZihHKXtCPW1heChCLHN0ZXAoMi41LGFfdmVydGV4SW5mby53KSoyLjApO312ZWMyIE89bm9ybWFsaXplKGFfcG9zaXRpb24yLWFfcG9zaXRpb24xKTt2ZWMyIFA9Ty91X3pvb207ZmxvYXQgUT1hX3ZlcnRleEluZm8ueS0xLjA7ZmxvYXQgUj1hX3ZlcnRleEluZm8ueCthX3ZlcnRleEluZm8uejt2ZWMyIFM9YV9wb3NpdGlvbjItYV9wb3NpdGlvbjE7dmVjMiBUPW5vcm1hbGl6ZSh2ZWMyKC1TLnksUy54KSk7aWYoaW50KGFfdmVydGV4SW5mby54KT09MCl7cj1hX3Bvc2l0aW9uMS1QO31lbHNle3I9YV9wb3NpdGlvbjIrUDt9ZmxvYXQgVT1hX3Bvc2l0aW9uMy54O2Zsb2F0IFY9bWF4KEEoKSxzbW9vdGhzdGVwKDAuMCwxLjAsVSp1X3pvb20pKTtpZihpbnQodV92aWV3SW5kZXBlbmRlbnQpPT0wKXtVPW1heCgoVSkqdV96b29tLEIpL3Vfem9vbTt9ZmxvYXQgVz1VK047dmVjMiBYPVQqKFcvMi4wKSpRO3I9citYO2Zsb2F0IFk9ZGlzdGFuY2UoYV9wb3NpdGlvbjEsYV9wb3NpdGlvbjIpO2Zsb2F0IFo9WSp1X3pvb207ZmxvYXQgYmE9KDEuMC9ZKS91X3pvb207aWYoRyl7ZmxvYXQgYmI9Wi80LjA7ZmxvYXQgYmM9WS8oVSoyLjApO2Zsb2F0IGJkPW1pbihiYixiYyk7dl9jb3JlPXZlYzQoUixjZWlsKGJkKSxiYSwwLjApO3ZfZGFzaGluZz12ZWMzKFUsVSwwLjUpO31lbHNlIGlmKEYpe2Zsb2F0IGk9bWF4KDIuMC91X3pvb20sVSoyLjApO2Zsb2F0IGJlPWgoaSxZKTtmbG9hdCBrPShZLWkqYmUpLyhiZS0xLjApO2Zsb2F0IGJmPWsqYmUvKFkrayk7dl9jb3JlPXZlYzQoUixiZS1iZixiYSwwLjApO2Zsb2F0IGJnPShpLyhpK2spKS8yLjA7dl9kYXNoaW5nPXZlYzMoaSxrLGJnKTt9ZWxzZSBpZihIKXtmbG9hdCBiaD1hX3Bvc2l0aW9uMy55O2Zsb2F0IGJpPWYqYmg7ZmxvYXQgYmo9bWF4KDMwLjAsVSozLjApO2Zsb2F0IGJrPWJqO2JpPW1pbihiayoxNi4wLGFicyhiaSkpKnNpZ24oYmgpO2Zsb2F0IGJsPTEwMDAuMCpiay9iaTtmbG9hdCBibT1tb2QodV90aW1lL2JsLDEuMCk7ZmxvYXQgYm49Ym0qYmo7dl9kYXNoaW5nPXZlYzMoYmosMC4wLGJuKTt2X2NvcmU9dmVjNChSLDAuMCxiYSwwLjApO31lbHNle3ZfY29yZT12ZWM0KFIsMC4wLGJhLDAuMCk7fWlmKGludChRKT09MSl7dl9saW5lRGF0YT12ZWM0KC1XLFUsWSxhX3ZlcnRleEluZm8udyk7fWVsc2V7dl9saW5lRGF0YT12ZWM0KFcsVSxZLGFfdmVydGV4SW5mby53KTt9aWYodV9hZGFwdGl2ZVN0eWxpbmcpe0MuYSo9VjtELmEqPVY7fX12ZWMyIGJvPXIvdV9yZXNvbHV0aW9uLnh5O3ZlYzIgYnA9Ym8qMi4wO3ZlYzIgYnE9YnAtMS4wO3ZfY29sb3VyPUM7dl9jb2xvdXIyPUQ7dl9oaXRUZXN0Q29sb3VyPWFfaGl0VGVzdENvbG91cjtnbF9Qb3NpdGlvbj11X3RyYW5zZm9ybSp2ZWM0KGJxKnZlYzIoMSwtMSksMCwxKTt9",yp="CiNpZmRlZiBHTF9PRVNfc3RhbmRhcmRfZGVyaXZhdGl2ZXMKCiNleHRlbnNpb24gR0xfT0VTX3N0YW5kYXJkX2Rlcml2YXRpdmVzIDogZW5hYmxlCgojZW5kaWYKcHJlY2lzaW9uIGhpZ2hwIGZsb2F0O3VuaWZvcm0gc2FtcGxlcjJEIHVfaW1hZ2VbN107dW5pZm9ybSBsb3dwIGZsb2F0IHVfaGl0VGVzdDt1bmlmb3JtIHZlYzMgdV9yZXNvbHV0aW9uO3VuaWZvcm0gZmxvYXQgdV9zaGFkb3dUeXBlO3VuaWZvcm0gZmxvYXQgdV96b29tO3ZhcnlpbmcgdmVjNCB2X3RleENvb3JkO3ZhcnlpbmcgdmVjNCB2X2NvbG91cjt2YXJ5aW5nIHZlYzMgdl9oaXRUZXN0Q29sb3VyO3ZhcnlpbmcgdmVjMiB2X3RleHR1cmVCYW5rO3ZhcnlpbmcgZmxvYXQgdl9ib3JkZXJXaWR0aDt2YXJ5aW5nIHZlYzQgdl9zaGFwZVNpemU7dmFyeWluZyBmbG9hdCB2X3BpeGVsO3ZhcnlpbmcgdmVjMiB2X2RvbnV0U2VnbWVudDtjb25zdCBmbG9hdCBhPTMuMTQxNTkyNjUzNTg5NzkzMjM4NDYyNjQzMzgzMjc5NTtmbG9hdCBiKGZsb2F0IGMsZmxvYXQgZCl7ZmxvYXQgZT1sZW5ndGgodmVjMihkRmR4KGQpLGRGZHkoZCkpKSowLjcwNzEwNjc4MTE4NjU0NzU3O3JldHVybiBzbW9vdGhzdGVwKGMtZSxjK2UsZCk7fWludCBmKGZsb2F0IGEpe3JldHVybiBpbnQoZmxvb3IoYSswLjUpKTt9ZmxvYXQgZyhmbG9hdCBoKXtmbG9hdCBpPXVfcmVzb2x1dGlvbi56KnVfem9vbTtmbG9hdCBqPTEuMC1zdGVwKDEuMCxoKmkpO2Zsb2F0IGs9MS4wL2k7cmV0dXJuIG1heChoLGoqayk7fWZsb2F0IGwoZmxvYXQgaCl7ZmxvYXQgbT1iKHZfdGV4Q29vcmQueCxoKTtmbG9hdCBuPWIodl90ZXhDb29yZC55LGgpO2Zsb2F0IG89Yih2X3RleENvb3JkLnotdl90ZXhDb29yZC54LGgpO2Zsb2F0IHA9Yih2X3RleENvb3JkLnctdl90ZXhDb29yZC55LGgpO2Zsb2F0IHE9bWF4KG0sbik7ZmxvYXQgcj1tYXgobyxwKTtyZXR1cm4gbWF4KHEscik7fWZsb2F0IHModmVjMyB0KXt2ZWMzIHU9ZndpZHRoKHQpO3ZlYzMgdj1zbW9vdGhzdGVwKHZlYzMoMC4wKSx1KjMuMCx0KTtyZXR1cm4gbWluKG1pbih2Lngsdi55KSx2LnopO31mbG9hdCB3KGZsb2F0IHgsdmVjNCB5KXtmbG9hdCB6O2ludCBBPWYoeCk7aWYoQT09MCl7ej15LnI7fWVsc2UgaWYoQT09MSl7ej15Lmc7fWVsc2V7ej15LmI7fXJldHVybiB6O312ZWM0IEIoZmxvYXQgQyx2ZWM0IEQsZmxvYXQgRSl7ZmxvYXQgRj0oRC5yK0QuYitELmcpLzMuMDtmbG9hdCBHPXN0ZXAoMS4wLEYpKkU7ZmxvYXQgSD1HKihzdGVwKDAuMjUsQykqbWluKEYsMC4yNSkpO3ZlYzQgST12ZWM0KChELnJnYitIKSpELmEsRC5hKTtyZXR1cm4gQypJO31mbG9hdCBKKHZlYzIgSyxmbG9hdCBMLGZsb2F0IE0sZmxvYXQgaCxmbG9hdCBOKXtOPW1heCgwLjAsTi1oKTtmbG9hdCBPPUwvMi4wO2Zsb2F0IFA9TS8yLjA7ZmxvYXQgYT1PLU4taDtmbG9hdCBiPVAtTi1oO2Zsb2F0IHg9Sy54LU87ZmxvYXQgeT1LLnktUDtmbG9hdCBRPXBvdyhtYXgoYWJzKHgpLWEsMC4wKSwyLjApO2Zsb2F0IFI9cG93KG1heChhYnMoeSktYiwwLjApLDIuMCk7cmV0dXJuIFErUjt9ZmxvYXQgUyhmbG9hdCBUKXtyZXR1cm4gKGRpc3RhbmNlKHZfdGV4Q29vcmQuencsdmVjMigwLjUpKSpUKSp1X3pvb207fXZlYzQgVSh2ZWM0IEksZmxvYXQgVixmbG9hdCBOKXtmbG9hdCBXPXBvdyhOLDIuMCk7ZmxvYXQgWD1KKHZfdGV4Q29vcmQueHksdl90ZXhDb29yZC56LHZfdGV4Q29vcmQudywwLjAsTik7aWYoYWJzKHZfYm9yZGVyV2lkdGgpPjAuMCl7SSo9MS4wLWIoVyxYKTtYPUoodl90ZXhDb29yZC54eSx2X3RleENvb3JkLnosdl90ZXhDb29yZC53LHZfYm9yZGVyV2lkdGgsTik7ZmxvYXQgWT1tYXgoMC4wLE4tdl9ib3JkZXJXaWR0aCk7ZmxvYXQgWj1wb3coWSwyLjApO0kqPWIoWixYKTt9ZWxzZXtJKj0xLjAtYihXLFgpO31yZXR1cm4gSTt9dmVjNCBiYSh2ZWM0IGJiLHZlYzQgYmMsZmxvYXQgRSl7ZmxvYXQgQz13KHZfdGV4dHVyZUJhbmsueSxiYik7cmV0dXJuIEIoQyxiYyxFKTt9ZmxvYXQgYmQoZmxvYXQgYmUpe3JldHVybiBtYXgoMC4yLHNtb290aHN0ZXAoMC4wLDUuMCxiZSkpO312b2lkIG1haW4oKXtmbG9hdCBiZj1hYnModl9zaGFwZVNpemUueik7ZmxvYXQgYmc9dl9zaGFwZVNpemUudztmbG9hdCBiaD1hYnModl9zaGFwZVNpemUueCk7ZmxvYXQgYmk9dl9zaGFwZVNpemUueTtmbG9hdCBiaj1taW4oYmgsYmkpO2Zsb2F0IGJlPSgoYmovMi4wKSp1X3pvb20pLTAuNTtmbG9hdCBoPWFicyh2X2JvcmRlcldpZHRoKTt2ZWM0IEk7aW50IGJrPWYodV9zaGFkb3dUeXBlKTtib29sIGJsPWYodl9zaGFwZVNpemUueCk+MDtib29sIGJtPWYodl9ib3JkZXJXaWR0aCk8MDtib29sIGJuPWJrPT0xO2Jvb2wgYm89Zih1X2hpdFRlc3QpPT0xO3ZlYzIgYnA9dl90ZXhDb29yZC56dztmbG9hdCBicT12X2RvbnV0U2VnbWVudC54O2Zsb2F0IGJyPXZfZG9udXRTZWdtZW50Lnk7ZmxvYXQgTj12X2RvbnV0U2VnbWVudC54O2Zsb2F0IFY7aW50IHg9Zih2X3RleHR1cmVCYW5rLngpO2Jvb2wgYnM9dl9ib3JkZXJXaWR0aD4wLjAmJmYodl9zaGFwZVNpemUueCk8MDtib29sIGJ0PXg9PS0zO2Jvb2wgYnU9YnEhPTAuMHx8YnIhPTAuMDtmbG9hdCBidjtpZihidXx8Ym0pe2lmKGJxPmEpe2JxLT0yLjAqYTt9aWYoYnI+YSl7YnItPTIuMCphO31mbG9hdCB4PWJwLngtMC41O2Zsb2F0IHk9YnAueS0wLjU7YnY9YXRhbih5LHgpO31pZihibyl7aWYoYms9PS0xKXtkaXNjYXJkO31lbHNle0k9dmVjNCh2X2hpdFRlc3RDb2xvdXIvMjU1LjAsMS4wKTtpZihibCl7ZmxvYXQgYnc9UyhiZik7SSo9MS4wLXN0ZXAoYmUsYncpO2lmKGg+MC4wKXtmbG9hdCBieD1oKnVfem9vbTtJKj1zdGVwKGJlLWJ4LGJ3KTt9aWYoYnUpe2lmKGJxPj1icil7SSo9c3RlcChicSxidikrKDEuMC1zdGVwKGJyLGJ2KSk7fWVsc2V7SSo9c3RlcChicSxidik7SSo9MS4wLXN0ZXAoYnIsYnYpO319fWVsc2UgaWYodl9kb251dFNlZ21lbnQueD4wLjApe1Y9ZyhoKTtmbG9hdCBieT1wb3coTiwyLjApO2Zsb2F0IGJ6PUoodl90ZXhDb29yZC54eSx2X3RleENvb3JkLnosdl90ZXhDb29yZC53LDAuMCxOKTtJKj0xLjAtc3RlcChieSxieik7fWVsc2UgaWYoYnMpe0kqPWwoaCk7fX19ZWxzZSBpZihibil7ZGlzY2FyZDt9ZWxzZXtJPXZfY29sb3VyLzI1NS4wO2Zsb2F0IGJBPUkuYTtpZih4Pj0wKXt2ZWM0IHk7ZmxvYXQgYkI9LTIuMC8zLjA7ZmxvYXQgYkM9LTAuODtpZih4PT0wKXt5PXRleHR1cmUyRCh1X2ltYWdlWzBdLHZfdGV4Q29vcmQueHksYkMpO0k9YmEoeSxJLDEuMCk7fWVsc2UgaWYoeD09MSl7eT10ZXh0dXJlMkQodV9pbWFnZVsxXSx2X3RleENvb3JkLnh5LGJDKTtJPWJhKHksSSwxLjApO31lbHNlIGlmKHg9PTIpe3k9dGV4dHVyZTJEKHVfaW1hZ2VbMl0sdl90ZXhDb29yZC54eSxiQyk7ST1iYSh5LEksMS4wKTt9ZWxzZSBpZih4PT0zKXt5PXRleHR1cmUyRCh1X2ltYWdlWzNdLHZfdGV4Q29vcmQueHksYkIpO0k9YmEoeSxJLDAuMCk7fWVsc2UgaWYoeD09NCl7ST10ZXh0dXJlMkQodV9pbWFnZVs0XSx2X3RleENvb3JkLnh5LGJCKSpiQTt9ZWxzZSBpZih4PT01KXtJPXRleHR1cmUyRCh1X2ltYWdlWzVdLHZfdGV4Q29vcmQueHksYkIpKmJBO31lbHNlIGlmKHg9PTYpe0k9dGV4dHVyZTJEKHVfaW1hZ2VbNl0sdl90ZXhDb29yZC54eSxiQikqYkE7fX1lbHNle2Zsb2F0IGJBPUkuYTtJPXZlYzQoSS5yZ2IqYkEsYkEpO31pZihibCl7ZmxvYXQgYnc9UyhiZik7SSo9MS4wLWIoYmUsYncpO2lmKGg+MC4wKXtmbG9hdCBieD1tYXgoMS4wLGgqdV96b29tKTtJKj1iKGJlLWJ4LGJ3KTtJKj1iZChiZSk7fWZsb2F0IGJEPXZfcGl4ZWwqMS41O2Zsb2F0IGJFPWJxLWJEO2Zsb2F0IGJGPWJxK2JEO2Zsb2F0IGJHPWJyLWJEO2Zsb2F0IGJIPWJyK2JEO2lmKGJ1KXtpZihicT49YnIpe0kqPXNtb290aHN0ZXAoYkUsYkYsYnYpKygxLjAtc21vb3Roc3RlcChiRyxiSCxidikpO31lbHNle0kqPXNtb290aHN0ZXAoYkUsYkYsYnYpO0kqPTEuMC1zbW9vdGhzdGVwKGJHLGJILGJ2KTt9fWVsc2UgaWYoYm0pe2Zsb2F0IGJJPWgqMi4wO2Zsb2F0IGJKPWJJLzIuMDtmbG9hdCBiSz0yLjAqKGEqKGJoLzIuMCkpO2Zsb2F0IGJMPWJ2LygyLjAqYSk7ZmxvYXQgYk09Zmxvb3IoKGJLK2JKKS8oYkkrYkopLTEuMCk7ZmxvYXQgYk49c2luKCgoYkwqYk0pKSooMi4wKmEpKTtJKj1iKC0wLjUsYk4pO319ZWxzZSBpZih2X2RvbnV0U2VnbWVudC54PjAuMCl7Vj1nKGgpO0k9VShJLFYsTik7fWVsc2UgaWYoYnMpe1Y9ZyhoKTtJKj1sKFYpO0kqPWJkKGJlKTtpZihidCl7ZmxvYXQgYkk9VioyLjA7ZmxvYXQgYko9VjtmbG9hdCBiTT1mbG9vcigodl90ZXhDb29yZC56K2JKKS8oYkkrYkopKSswLjU7ZmxvYXQgYk49c2luKCgoKHZfdGV4Q29vcmQueC92X3RleENvb3JkLnopKmJNKSkqKDIuMCphKSk7SSo9c3RlcCgtMC40OSxiTik7Yk09Zmxvb3IoKHZfdGV4Q29vcmQudytiSikvKGJJK2JKKSkrMC41O2JOPXNpbigoKCh2X3RleENvb3JkLnkvdl90ZXhDb29yZC53KSpiTSkpKigyLjAqYSkpO0kqPWIoLTAuNDksYk4pO319fWdsX0ZyYWdDb2xvcj1JO30=",bp="cHJlY2lzaW9uIGhpZ2hwIGZsb2F0O2F0dHJpYnV0ZSB2ZWMyIGFfcG9zaXRpb247YXR0cmlidXRlIHZlYzQgYV90ZXhDb29yZDthdHRyaWJ1dGUgdmVjMyBhX2hpdFRlc3RDb2xvdXI7YXR0cmlidXRlIGZsb2F0IGFfdmVydGV4SW5kZXg7YXR0cmlidXRlIHZlYzIgYV90ZXh0dXJlQmFuazthdHRyaWJ1dGUgdmVjNCBhX2NvbG91cjthdHRyaWJ1dGUgZmxvYXQgYV9jaXJjbGVSYWRpdXM7YXR0cmlidXRlIGZsb2F0IGFfd2lkdGg7YXR0cmlidXRlIGZsb2F0IGFfc3RhcnRBbmdsZTthdHRyaWJ1dGUgZmxvYXQgYV9lbmRBbmdsZTthdHRyaWJ1dGUgZmxvYXQgYV9hbmNob3I7dW5pZm9ybSB2ZWMzIHVfcmVzb2x1dGlvbjt1bmlmb3JtIG1hdDQgdV90cmFuc2Zvcm07dW5pZm9ybSBmbG9hdCB1X3pvb207dW5pZm9ybSBsb3dwIGZsb2F0IHVfaGl0VGVzdDt1bmlmb3JtIHNhbXBsZXIyRCB1X2FuY2hvclRleHR1cmU7dW5pZm9ybSBmbG9hdCB1X2FuY2hvclRleHR1cmVTaXplO3VuaWZvcm0gYm9vbCB1X3VzZUFuY2hvcjt1bmlmb3JtIGJvb2wgdV92aWV3SW5kZXBlbmRlbnQ7dW5pZm9ybSBib29sIHVfYWRhcHRpdmVTdHlsaW5nO3ZhcnlpbmcgZmxvYXQgdl9ib3JkZXJXaWR0aDt2YXJ5aW5nIHZlYzQgdl9zaGFwZVNpemU7dmFyeWluZyB2ZWM0IHZfdGV4Q29vcmQ7dmFyeWluZyB2ZWM0IHZfY29sb3VyO3ZhcnlpbmcgdmVjMyB2X2hpdFRlc3RDb2xvdXI7dmFyeWluZyB2ZWMyIHZfdGV4dHVyZUJhbms7dmFyeWluZyBmbG9hdCB2X3BpeGVsO3ZhcnlpbmcgdmVjMiB2X2RvbnV0U2VnbWVudDtpbnQgYShmbG9hdCBhKXtyZXR1cm4gaW50KGZsb29yKGErMC41KSk7fWZsb2F0IGIoZmxvYXQgYyl7dmVjMiBkPXZlYzIobW9kKGMsdV9hbmNob3JUZXh0dXJlU2l6ZSksZmxvb3IoYy91X2FuY2hvclRleHR1cmVTaXplKSk7ZCs9MC41O3ZlYzIgZT12ZWMyKGQvdV9hbmNob3JUZXh0dXJlU2l6ZSk7cmV0dXJuIHRleHR1cmUyRCh1X2FuY2hvclRleHR1cmUsZSkucjt9dmVjMiBmKGZsb2F0IGMpe3JldHVybiB2ZWMyKGIoYyksYihjKzEuMCkpO312ZWMyIGcodmVjMiBhKXtyZXR1cm4gZmxvb3IoYSswLjUpO312ZWMyIGgodmVjMiBpKXt2ZWMyIGo9aS91X3Jlc29sdXRpb24ueHk7dmVjMiBrPWoqMi4wO3JldHVybiBrLTEuMDt9dmVjMiBsKHZlYzIgaSl7aSs9MS4wO2kvPTIuMDtyZXR1cm4gaSp1X3Jlc29sdXRpb24ueHk7fXZlYzIgbSh2ZWMyIG4pe2Zsb2F0IG89bGVuZ3RoKG4qdV96b29tKTt2ZWMyIHA9bm9ybWFsaXplKG4pO3JldHVybiBwKihtYXgoMC4wLDIuMC1vKS91X3pvb20pO31mbG9hdCBtKGZsb2F0IHEpe2Zsb2F0IG89bGVuZ3RoKHEqdV96b29tKTtyZXR1cm4gbWF4KHEsKDIuMC1vKS91X3pvb20pO31mbG9hdCByKGZsb2F0IHEpe2Zsb2F0IG89cSp1X3pvb207cmV0dXJuIHNtb290aHN0ZXAoMi4wLDMuMCxvKTt9dmVjMiBzKGludCB0LGZsb2F0IHEpe3ZlYzIgcDtpZih0PT0wKXtwPW5vcm1hbGl6ZSh2ZWMyKC0xLjAsLTEuMCkpO31lbHNlIGlmKHQ9PTEpe3A9bm9ybWFsaXplKHZlYzIoMS4wLC0xLjApKTt9ZWxzZSBpZih0PT0yKXtwPW5vcm1hbGl6ZSh2ZWMyKC0xLjAsMS4wKSk7fWVsc2UgaWYodD09Myl7cD1ub3JtYWxpemUodmVjMigxLjAsMS4wKSk7fXJldHVybiBwKmxlbmd0aCh2ZWMyKHEpKTt9dm9pZCBtYWluKCl7dmVjNCB1PWFfY29sb3VyO2Jvb2wgdj1hKHVfaGl0VGVzdCk9PTE7Ym9vbCB3PWFfY2lyY2xlUmFkaXVzPjAuMDtmbG9hdCB4PWFfY2lyY2xlUmFkaXVzO2ludCB5PWEoYV90ZXh0dXJlQmFuay54KTtmbG9hdCB6PTAuMDtib29sIEE9ZmFsc2U7dmVjMiBCPWFfcG9zaXRpb24ueHk7dmVjMiBDPWFfcG9zaXRpb247ZmxvYXQgRDtmbG9hdCBFO2Zsb2F0IEY7ZmxvYXQgRzt2ZWMyIHA7aW50IHQ9YShhX3ZlcnRleEluZGV4KTtpZih3KXtpZih1X2FkYXB0aXZlU3R5bGluZyYmIXVfdmlld0luZGVwZW5kZW50KXt4PW0oeCk7fUQ9YWJzKHgpO0U9RDt9ZWxzZXtEPWFfdGV4Q29vcmQuei8yLjA7RT1hX3RleENvb3JkLncvMi4wO31GPUQqMi4wO0c9RyoyLjA7ZmxvYXQgSD0wLjA7aWYoeT4zKXtpZih1X2FkYXB0aXZlU3R5bGluZyYmIXVfdmlld0luZGVwZW5kZW50KXtDKz1tKEIpO31IPWFfd2lkdGg7Qys9cyh0LEgvdV96b29tKTt9ZWxzZSBpZigoeT4tMSYmeTwzKXx8eT09LTQpe3o9YWJzKGFfd2lkdGgpO0E9YSh6KT4wO2lmKHVfYWRhcHRpdmVTdHlsaW5nKXt1LmEqPXIobWluKEQsRSkpO319ZWxzZXtpZih1X2FkYXB0aXZlU3R5bGluZyYmIXVfdmlld0luZGVwZW5kZW50KXtDKz1tKEIpO316PWFicyhhX3dpZHRoKTtBPWEoeik+MDt9ZmxvYXQgST1jZWlsKHovMi4wKTtpZihBKXtpZih2KXtmbG9hdCBKPSg3LjAvdV96b29tKSpzaWduKGFfd2lkdGgpO3orPUo7SSs9Y2VpbChKLzIuMCk7fXZlYzIgSz1zKHQsSSk7Qys9SztGKz1hYnMoSy54KjIuMCk7Rys9YWJzKEsueSoyLjApO31pZih1X3VzZUFuY2hvciYmYV9hbmNob3I+LTAuNSl7ZmxvYXQgTD1iKGFfYW5jaG9yKzIuMCk7dmVjMiBNPXZlYzIoc2luKC1MKSxjb3MoLUwpKTt2ZWMyIE49dmVjMigoQy54Kk0ueSkrQy55Kk0ueCwoQy55Kk0ueSktQy54Kk0ueCk7Qz1OK2YoYV9hbmNob3IpO31pZih2KXtDKj0xLjAtc3RlcChhX2hpdFRlc3RDb2xvdXIueCthX2hpdFRlc3RDb2xvdXIueSthX2hpdFRlc3RDb2xvdXIueiwwLjApO31nbF9Qb3NpdGlvbj11X3RyYW5zZm9ybSp2ZWM0KGgoQykqdmVjMigxLC0xKSwwLDEpO2lmKEEmJiF3KXt2ZWMyIE89Z2xfUG9zaXRpb24ueHk7Tz1sKE8pO089ZyhPKTtnbF9Qb3NpdGlvbi54eT1oKE8pO312X3RleENvb3JkPWFfdGV4Q29vcmQ7dl9jb2xvdXI9dTt2X2hpdFRlc3RDb2xvdXI9YV9oaXRUZXN0Q29sb3VyO3ZfdGV4dHVyZUJhbms9YV90ZXh0dXJlQmFuaztmbG9hdCBQPSh6LzIuMCkqc2lnbihhX2NpcmNsZVJhZGl1cyk7aWYodyl7ZmxvYXQgUT0oeCtQKSoyLjA7dl9zaGFwZVNpemU9dmVjNChRLFEsRixGKTt9ZWxzZXt2X3NoYXBlU2l6ZT12ZWM0KC1hX3RleENvb3JkLnorUCxhX3RleENvb3JkLnctUCwtYV90ZXhDb29yZC56K0kqc2lnbihhX2NpcmNsZVJhZGl1cyksYV90ZXhDb29yZC53LUkqc2lnbihhX2NpcmNsZVJhZGl1cykpO312X2JvcmRlcldpZHRoPXoqc2lnbihhX3dpZHRoKTt2X3BpeGVsPSgxLjAvKGFfY2lyY2xlUmFkaXVzKjIuMCkpL3Vfem9vbTt2X2RvbnV0U2VnbWVudD12ZWMyKGFfc3RhcnRBbmdsZSxhX2VuZEFuZ2xlKTt9",xp="CiNpZmRlZiBHTF9PRVNfc3RhbmRhcmRfZGVyaXZhdGl2ZXMKCiNleHRlbnNpb24gR0xfT0VTX3N0YW5kYXJkX2Rlcml2YXRpdmVzIDogZW5hYmxlCgojZW5kaWYKcHJlY2lzaW9uIGhpZ2hwIGZsb2F0O3VuaWZvcm0gc2FtcGxlcjJEIHVfaW1hZ2U7dW5pZm9ybSBmbG9hdCB1X2dsb2JhbEFscGhhO3VuaWZvcm0gdmVjNCB1X2JhY2tncm91bmRDb2xvdXI7dmFyeWluZyB2ZWMyIHZfdGV4Q29vcmQ7dm9pZCBtYWluKCl7dmVjNCBhPXVfYmFja2dyb3VuZENvbG91ci8yNTUuMDthPXZlYzQoYS5yZ2IqYS5hLGEuYSk7Z2xfRnJhZ0NvbG9yPShhK3RleHR1cmUyRCh1X2ltYWdlLHZfdGV4Q29vcmQpKSp1X2dsb2JhbEFscGhhO30=",wp="cHJlY2lzaW9uIGhpZ2hwIGZsb2F0O2F0dHJpYnV0ZSB2ZWMyIGFfcG9zaXRpb247YXR0cmlidXRlIHZlYzIgYV90ZXhDb29yZDt2YXJ5aW5nIHZlYzIgdl90ZXhDb29yZDt2b2lkIG1haW4oKXtnbF9Qb3NpdGlvbj12ZWM0KGFfcG9zaXRpb24sMC4wLDEuMCk7dl90ZXhDb29yZD1hX3RleENvb3JkO30=",Ap={};Ap["line-arc-vertex"]=gp;Ap["line-fragment"]=pp;Ap["line-vertex"]=mp;Ap["triangle-fragment"]=yp;Ap["triangle-vertex"]=bp;Ap["renderToTexture-fragment"]=xp;Ap["renderToTexture-vertex"]=wp;function Mp(e,t){for(var n=["webgl","experimental-webgl"],r=null,i=0;i<n.length;i++){try{r=e.getContext(n[i],t)}catch(e){}if(r)break}return r}function Ip(e){return Mp(document.createElement("canvas"),e)}function Ep(e,t,n){var r=Tp(e,[t,n]);r.vertexShader=t;r.fragmentShader=n;return r}function kp(e,t){e.useProgram(t);e.bindBuffer(e.ARRAY_BUFFER,null);e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null);e.bindRenderbuffer(e.RENDERBUFFER,null);e.bindFramebuffer(e.FRAMEBUFFER,null)}function Cp(){var e=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),t=1;function n(n){t=n;e[0]*=n;e[4]*=n;e[8]*=1;e[1]*=n;e[5]*=n;e[9]*=1;e[2]*=n;e[6]*=n;e[10]*=1;e[3]*=n;e[7]*=n;e[11]*=1}function r(){return t}function i(t,n){e[12]+=e[0]*t+e[4]*n;e[13]+=e[1]*t+e[5]*n;e[14]+=e[2]*t+e[6]*n;e[15]+=e[3]*t+e[7]*n}function o(){return e}return{get:o,getZoomLevel:r,pan:i,zoom:n}}function Sp(e,t,n){var r=e.createShader(n),i=atob(Ap[t]);e.shaderSource(r,i);e.compileShader(r);if(!e.getShaderParameter(r,e.COMPILE_STATUS)){var o=e.getShaderInfoLog(r);e.deleteShader(r);throw new Error("Error in shader: "+o)}return r}function Tp(e,t){for(var n=e.createProgram(),r=0;r<t.length;++r)e.attachShader(n,t[r]);e.linkProgram(n);if(!e.getProgramParameter(n,e.LINK_STATUS)){var i=e.getProgramInfoLog(n);e.deleteProgram(n);throw new Error("Error in program linking:"+i)}return n}var Rp="undefined"!=typeof window,Lp=!1,Bp=!1;function Gp(){Lp=!0}function Op(e,t){return e.some((function(e){return t.indexOf(e)>-1}))}function Zp(){if(Bp)return!Lp;if(Rp){var e="file:"!==document.location.protocol,t=["Google SwiftShader","Microsoft Basic Render Driver","VirtualBox","Parallels","VMware"],n=["VMware","VirtualBox"],r=["OES_standard_derivatives","OES_element_index_uint","ANGLE_instanced_arrays"],i=Ip({failIfMajorPerformanceCaveat:!0}),o=void 0;if(e=e&&!!i){var a=i.getSupportedExtensions(),u={};for(o=0;o<a.length;o++)u[a[o]]=!0;for(o=0;e&&o<r.length;o++)e=e&&u[r[o]]}if(e){var s=i.getExtension("WEBGL_debug_renderer_info");if(s){var f=i.getParameter(s.UNMASKED_VENDOR_WEBGL),l=i.getParameter(s.UNMASKED_RENDERER_WEBGL);e=!(Op(n,f)||Op(t,l))}s=null}i=null;Lp=Lp||!e;Bp=!0;return e}return!Lp}var Yp={longMonths:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longDays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],ampm:["AM","PM"],quarter:"Q",half:"H"},Fp=[31,28,31,30,31,30,31,31,30,31,30,31],zp={milli:0,sec:1,min:2,hour:3,day:4,week:5,month:6,year:7};function Pp(e,t){return t?e-e%t:0}function Dp(e){if(e<zp.milli||zp.year<e)throw new Error("bad unit range")}function Vp(e,t){return 1===e&&Wp(t)?29:Fp[e]}function Wp(e){return 1===new Date(e,1,29).getMonth()}function Xp(e){return Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}function Up(e){var t=new Date(e);return new Date(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds())}function Np(e,t,n){Dp(t);var r=new Date(e);t>zp.milli&&r.setUTCMilliseconds(0);t>zp.sec&&r.setUTCSeconds(0);t>zp.min&&r.setUTCMinutes(0);t>zp.hour&&r.setUTCHours(0);t>=zp.month&&r.setUTCDate(1);t>=zp.year&&r.setUTCMonth(0);switch(t){case zp.milli:r.setUTCMilliseconds(Pp(r.getUTCMilliseconds(),n));break;case zp.sec:r.setUTCSeconds(Pp(r.getUTCSeconds(),n));break;case zp.min:r.setUTCMinutes(Pp(r.getUTCMinutes(),n));break;case zp.hour:r.setUTCHours(Pp(r.getUTCHours(),n));break;case zp.day:break;case zp.week:var i=r.getUTCDay(),o=i>=1?i-1:6;r.setTime(r.getTime()-24*o*60*60*1e3);break;case zp.month:r.setUTCMonth(Pp(r.getUTCMonth(),n));break;case zp.year:r.setUTCFullYear(Pp(r.getUTCFullYear(),n))}return r.getTime()}function jp(e,t,n){Dp(t);if(t<=zp.week){var r=n;t>zp.milli&&(r*=1e3);t>zp.sec&&(r*=60);t>zp.min&&(r*=60);t>zp.hour&&(r*=24);t>zp.day&&(r*=7);return e+r}var i=new Date(e);switch(t){case zp.month:var o=i.getUTCMonth()+n,a=o%12,u=Math.floor(o/12);a<0&&(a+=12);var s=i.getUTCDate();s=Math.min(s,Vp(a,i.getUTCFullYear()+u));i.setUTCDate(s);i.setUTCMonth(a);0!==u&&i.setTime(jp(i.getTime(),zp.year,u));break;case zp.year:if(1===i.getUTCMonth()&&29===i.getUTCDate()){Wp(i.getUTCFullYear()+n)||i.setTime(jp(i.getTime(),zp.day,-1))}i.setUTCFullYear(i.getUTCFullYear()+n)}return i.getTime()}function Kp(e){for(var t=""+e;t.length<2;)t="0"+t;return t}var Hp=new RegExp("(f?f?f)|(s?s)|(m?m)|(h?h)|(H?H)|(t?t?t)|(d?d?d?d)|(M?M?M?M?M)|(Q?Q)|yyyy|yy","gm"),_p={f:function(e){return Math.floor(e.getUTCMilliseconds()/100)},ff:function(e){return Kp(Math.floor(e.getUTCMilliseconds()/10))},fff:function(e){return Kp(Math.floor(e.getUTCMilliseconds()))},s:function(e){return e.getUTCSeconds()},ss:function(e){return Kp(e.getUTCSeconds())},m:function(e){return e.getUTCMinutes()},mm:function(e){return Kp(e.getUTCMinutes())},h:function(e){return e.getUTCHours()%12||12},hh:function(e){return Kp(e.getUTCHours()%12||12)
},H:function(e){return e.getUTCHours()},HH:function(e){return Kp(e.getUTCHours())},t:function(e,t){return t.ampm[Math.floor(e.getUTCHours()/12)].charAt(0)},tt:function(e,t){return t.ampm[Math.floor(e.getUTCHours()/12)]},ttt:function(e,t){var n=Math.floor(e.getUTCHours()/12);return t.ampm[n+2]||t.ampm[n]},d:function(e){return e.getUTCDate()},dd:function(e){return Kp(e.getUTCDate())},ddd:function(e,t){return t.shortDays[e.getUTCDay()]},dddd:function(e,t){return t.longDays[e.getUTCDay()]},M:function(e){return e.getUTCMonth()+1},MM:function(e){return Kp(e.getUTCMonth()+1)},MMM:function(e,t){return t.shortMonths[e.getUTCMonth()]},MMMM:function(e,t){return t.longMonths[e.getUTCMonth()]},MMMMM:function(e,t){return t.shortMonths[e.getUTCMonth()].substr(0,1)},Q:function(e,t){var n=e.getUTCMonth(),r=Math.floor(n/3)+1;return t.quarter+r},QQ:function(e,t){var n=e.getUTCMonth(),r=Math.floor(n/6)+1;return t.half+r},yyyy:function(e){return e.getUTCFullYear()},yy:function(e){return Kp(e.getUTCFullYear()%100)}};function Jp(e,t,n){var r="number"==typeof e?new Date(e):e;return t.replace(Hp,(function(e){return _p[e](r,n||Yp)}))}var Qp="(?::)?",qp="(?:-|$)";new RegExp("^(\\d{4})"+qp+"(\\d{2})?"+qp+"(\\d{2})?"+"(?:T|$)"+"(\\d{2})?"+Qp+"(\\d{2})?"+Qp+"(\\d{2})?(?:Z)?(\\+|-)?(\\d{2})?"+Qp+"(\\d{2})?");function $p(e){var t;e instanceof Date?t=Xp(e):"number"==typeof e&&(t=Math.round(e));return t}var em=["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],tm="rgba(32, 32, 200, 0.67)";function nm(e){for(var t=[],n=0;n<e.length;n++)t[n]=ln(e[n],.8);return t}function rm(){var e=zp,t={fontFamily:"sans-serif",fontSize:12},r={colours:["backColour","fontColour","sliderColour","sliderLineColour"]};function i(e,t){return Jp(e,t,m.options.locale)}function o(t,n){var r=new Date(jp(t,e.year,n-1));return i(t,"yyyy - ")+i(r,"yyyy")}function u(e){return o(e,10)}function s(e){return o(e,50)}function f(e){return i(e,"yyyy")+"s"}function l(e){return i(e,"dmy"===m.options.locale.order?"d MMM yyyy":"MMM d, yyyy")}function c(e){return i(e,m.options.locale.h12?"h:mm tt":"HH:mm")}function d(e){return i(e,m.options.locale.h12?"h:mm:ss tt":"HH:mm:ss")}function h(e,t){if("histogram"===e){if("object"!=typeof t||!t)return!1;var n=t;if(n.colour&&("string"!=typeof n.colour||!Kt(n.colour)))return!1;if(n.highlightColour&&("string"!=typeof n.highlightColour||!Kt(n.highlightColour)))return!1}if("maxRange"===e&&"string"==typeof t)return"auto"===t;if("maxRange"===e||"minScale"===e){var i=["sec","min","hour","day","week","month","year"],o=t;return!!o.value&&"number"==typeof o.value&&!!o.units&&-1!==i.indexOf(o.units)}return!j(r.colours,e)||"string"==typeof t&&Kt(t)}function v(e){if(I(e)){var t=e;"string"!=typeof t.groupBy&&null!==t.groupBy||(m.options.groups.groupBy=t.groupBy);null===t.categories?m.options.groups.categories=null:Array.isArray(t.categories)&&(t.categories.some((function(e){return!("string"==typeof e||"number"==typeof e)}))||(m.options.groups.categories=t.categories));if(Array.isArray(t.colours)&&t.colours.length){if(!t.colours.some((function(e){return!("string"==typeof e&&Kt(e))}))){m.options.groups.colours=t.colours;m.computedGroupColours=t.colours}}else if(null===t.colours){m.options.groups.colours=null;m.computedGroupColours=em}Array.isArray(t.hiColours)&&t.hiColours.length?t.hiColours.some((function(e){return!("string"==typeof e&&Kt(e))}))||(m.options.groups.hiColours=t.hiColours):null===t.hiColours&&(m.options.groups.hiColours=null);m.computedGroupHiColours=m.options.groups.hiColours||nm(m.computedGroupColours)}}function g(e,n){"fontFamily"===e&&(m.options.fontFamily="string"==typeof n&&Dn(n)||t.fontFamily);if("fontSize"===e){var r=+n;b(r)&&r>0&&(m.options.fontSize=r)}}function p(e){e.showPlay||e.showExtend?m.playingExtend=!1:m.playingExtend=null}var m={displayTime:function(e,t){return A(t)?t(e):i(e,t)},baseRangeLimits:{max:315576e7,min:3e3},options:{_area:{stdDev:7},area:{colour:tm},scale:{highlightColour:"#F2F2F2",showMajor:!0,showMinor:!0},backColour:"#FFFFFF",fontColour:Dt.grey,fontFamily:t.fontFamily,fontSize:t.fontSize,groups:{groupBy:null,categories:null,colours:null,hiColours:null},showControlBar:!0,showPlay:!0,showExtend:!1,showFit:!0,sliderColour:"rgba(255, 255, 255, 0.6)",sliderLineColour:"#bbb",sliders:"fixed",maxRange:"auto",minRange:3e3,minScale:{units:"sec",value:1},_showShadowCanvas:!1,histogram:{colour:"#d0d0d0",highlightColour:"#a9a9a9",markColour:"#ea7378",markHiColour:"#e03038"},heightChange:{animate:!0,time:200},locale:F(Yp,{order:"mdy",h12:!0}),playSpeed:60,type:"histogram"},getOptions:function(){return a(m.options,!0)},setOptions:function(e){if(I(e)){var r=e;p(r);n(r,(function(e,n){if(P(m.options,n)){var r=n;if(r in t)g(r,e);else if("groups"===r)v(e);else{var i=e;I(m.options[r])&&(i=F(e,m.options[r]));h(r,i)&&(m.options[r]=i)}}}))}},hoverTime:50,defaultAnimationTime:200,sliderReleaseTime:200,doubleClickZoomTime:500,doubleClickZoomTimeFree:250,playingExtend:!1,defaultPlaySpeed:60,bars:{defaultFontSize:t.fontSize,major:{height:19,textbase:3,tickHeight:10},minor:{height:17,textbase:0,tickHeight:8}},grip:{lines:2,space:4,length:14,margin:2},controlbar:{height:30,space:4,colour:"#ddd"},fixedSideFactor:.5,freeSideFactor:.2,histogram:{dy:2,topdy:16,bardx:1,minwidth:11},computedGroupColours:em,computedGroupHiColours:nm(em),selection:{maxNumber:3,reducingFactor:.75,dotsize:3.5},rates:[{max:6,major:{units:e.sec,by:2,f:l},minor:{units:e.sec,by:1,f:d}},{max:15,major:{units:e.sec,by:5,f:l},minor:{units:e.sec,by:1,f:d}},{max:24,major:{units:e.sec,by:10,f:l},minor:{units:e.sec,by:2,f:d}},{max:60,major:{units:e.sec,by:15,f:l},minor:{units:e.sec,by:5,f:d}},{max:120,major:{units:e.sec,by:30,f:l},minor:{units:e.sec,by:10,f:d}},{max:360,major:{units:e.min,by:1,f:l},minor:{units:e.sec,by:30,f:d}},{max:1e3,major:{units:e.min,by:5,f:l},minor:{units:e.min,by:1,f:c}},{max:5e3,major:{units:e.min,by:15,f:l},minor:{units:e.min,by:5,f:c}},{max:15e3,major:{units:e.hour,by:1,f:l},minor:{units:e.min,by:15,f:c}},{max:6e4,major:{units:e.hour,by:6,f:l},minor:{units:e.hour,by:1,f:c}},{max:12e4,major:{units:e.day,by:1,f:l},minor:{units:e.hour,by:2,f:c}},{max:18e4,major:{units:e.day,by:1,f:l},minor:{units:e.hour,by:3,f:c}},{max:36e4,major:{units:e.day,by:1,f:l},minor:{units:e.hour,by:6,f:c}},{max:72e4,major:{units:e.day,by:1,f:l},minor:{units:e.hour,by:12,f:"ttt"}},{max:5e6,major:{units:e.week,by:1,f:function(t){var n,r,o=new Date(t),a=new Date(jp(t,e.day,6)),u="dmy"===m.options.locale.order;if(o.getUTCFullYear()===a.getUTCFullYear())if(o.getUTCMonth()===a.getUTCMonth()){n=u?"d - ":"MMM d - ";r=u?"d MMM yyyy":"d, yyyy"}else{n=u?"d MMM - ":"MMM d - ";r=u?"d MMM yyyy":"MMM d, yyyy"}else{n=u?"d MMM yyyy - ":"MMM d, yyyy - ";r=u?"d MMM yyyy":"MMM d, yyyy"}return i(o,n)+i(a,r)}},minor:{units:e.day,by:1,f:"d"}},{max:15e6,major:{units:e.month,by:1,f:"MMMM yyyy"},minor:{units:e.week,by:1,f:function(t){var n=jp(t,e.day,6);return i(t,"d - ")+i(n,"d")}}},{max:3e7,major:{units:e.month,by:3,f:"Q  yyyy"},minor:{units:e.month,by:1,f:"MMMM"}},{max:75e6,major:{units:e.month,by:3,f:"Q  yyyy"},minor:{units:e.month,by:1,f:"MMM"}},{max:1e8,major:{units:e.month,by:3,f:"Q  yyyy"},minor:{units:e.month,by:1,f:"MMMMM"}},{max:2e8,major:{units:e.month,by:6,f:"QQ  yyyy"},minor:{units:e.month,by:1,f:"MMMMM"}},{max:36e7,major:{units:e.year,by:1,f:"yyyy"},minor:{units:e.month,by:3,f:"Q"}},{max:6e8,major:{units:e.year,by:1,f:"yyyy"},minor:{units:e.month,by:6,f:"QQ"}},{max:15e8,major:{units:e.year,by:10,f:u},minor:{units:e.year,by:1,f:"'yy"}},{max:25e8,major:{units:e.year,by:10,f:u},minor:{units:e.year,by:2,f:"'yy"}},{max:35e8,major:{units:e.year,by:10,f:u},minor:{units:e.year,by:5,f:"'yy"}},{max:115e8,major:{units:e.year,by:50,f:s},minor:{units:e.year,by:10,f:"'yy"}},{max:2e10,major:{units:e.year,by:50,f:s},minor:{units:e.year,by:25,f:"'yy"}},{max:35e9,major:{units:e.year,by:100,f:f},minor:{units:e.year,by:25,f:"'yy"}},{max:8e10,major:{units:e.year,by:100,f:f},minor:{units:e.year,by:50,f:"'yy"}},{max:16e10,major:{units:e.year,by:200,f:"yyyy"},minor:{units:e.year,by:100,f:""}},{max:4e11,major:{units:e.year,by:500,f:"yyyy"},minor:{units:e.year,by:100,f:""}},{max:1/0,major:{units:e.year,by:500,f:""},minor:{units:e.year,by:100,f:""}}]};return m}function im(e,t,n){var r=[];e((function(e){if(e.startTotals.length){var i=e.startTotals[n]-e.endTotals[t];r.push(i)}}));return r}function om(e,t,n,r,i,o){e((function(e,a){if(e){var u=e.startTotals[i]-e.endTotals[r];t.selvalues[a][n]=u;u>t.maxselvalue&&!o&&(t.maxselvalue=u)}}))}function am(e,t,n,r,i,o,a,u){var s,f,l=n.histogram,c=Np(t.t1,l.units,l.by),d=r(c),h=0;e.bars=[];e.maxvalue=0;e.maxselvalue=0;a((function(t,n){e.hasSel[n]=!!t;e.selvalues[n]=e.selvalues[n]||[]}));do{f=c>t.t2;var v=i(c),g=c,p=im(o,d,s=r(c=jp(c,l.units,l.by))),m=p.reduce((function(e,t){return e+t}),0);m>e.maxvalue&&!f&&(e.maxvalue=m);var y=um(u,g,c);om(a,e,h,d,s,f);e.bars.push({x:v,mark:y,groupValues:p,value:m});h++;d=s}while(!f);e.count=h-1}function um(e,t,n){return e.some((function(e){if(I(e)){var r=e;if(!D(r.dt1)&&!D(r.dt2)){var i=$p(r.dt1),o=$p(r.dt2);if(i<n&&o>t)return!0}}else{var a=$p(e);if(a>=t&&a<n)return!0}return!1}))}function sm(e,t,n,r,i,o){var a,u,s,f,l,c=[],d=e*t,h=jp(r.t1,zp.milli,-d),v=jp(r.t2,zp.milli,d),g=h,p=i(g);function m(e){s+=e.startTotals[u]-e.endTotals[u];f+=e.startTotals[u]-e.startTotals[p];l+=e.endTotals[u]-e.endTotals[p]}do{a=g>v;g=jp(g,zp.milli,e/n);u=i(g);s=0;f=0;l=0;o(m);c.push({t:g,startValue:f,endValue:l,solidValue:s});p=u}while(!a);return c}var fm=8,lm=null,cm=null,dm=null;function hm(e,t,n){for(var r=[],i=0;i<2*n;i++){var o=(i-n)*e/fm;r.push(Math.exp(-o*o/t))}return r}function vm(e,t,n,r,i,o,a,u){var s,f=1,l=n.timeRate*f,c=t.t1,d=0,h=0,v=e.options._area.stdDev,g=Math.ceil(4*v),p=g*fm,m=sm(l,g,fm,t,r,o);if(v!==cm||l!==lm){var y=n.timeRate*v*2*(n.timeRate*v);dm=hm(l,y,p);lm=l;cm=v}do{s=c>t.t2;var b=i(c);c=jp(c,zp.milli,l);for(var x=0,w=p+d*fm,A=Math.max(0,w-p),M=Math.min(m.length,w+p),I=A;I<M;I++){var E=m[I],k=void 0;k=I<=w?E.endValue:E.startValue;x+=dm[I-w+p]*k}x+=m[w].solidValue;x>h&&!s&&(h=x);a(d,b,x);d++}while(!s);u(d-1,h)}function gm(e,t,n,r,i,o,a,u){function s(t,n,r){e.bars.push({x:n,value:r})}function f(t,n){e.count=t;e.maxvalue=n}u((function(t,n){e.hasSel[n]=!!t;e.selvalues[n]=e.selvalues[n]||[]}));e.bars=[];vm(t,n,r,i,o,a,s,f);function l(t){return function(n,r,i){e.selvalues[t][n]=i}}function c(t){return function(t,n){n>e.maxselvalue&&(e.maxselvalue=n)}}e.maxselvalue=0;u((function(e,a){e&&vm(t,n,r,i,o,(function(t){return t(e)}),l(a),c(a))}))}function pm(e){return e.t<=e.other}function mm(e){return e.t>=e.other}function ym(){return{startTotals:[0],endTotals:[0]}}function bm(e,t){var r,i,o=0,u=0,s=t.rates,f=[],l={named:new Map,other:ym()},c=[],d={t1:0,t2:0},h={t1:0,t2:0},v={},g={t1:0,t2:0},p=[],m=[],y=null,x=[1,1e3,6e4,36e5,864e5,6048e5,2592e6,31536e6];function w(){e.privateTrigger("redraw")}function A(e,t,n,o){d.t1=e;d.t2=t;h.t1=n;h.t2=o;if(r){i=T(h);w()}ue=!0;fe=!0}function M(e,n){return x[e.units]*e.by/n>=t.histogram.minwidth}function E(){return t.options.fontSize/t.bars.defaultFontSize}function k(e){for(var t=E(),n=0;s[n].max<e*t&&n<s.length;)n++;return n}function C(e,t){for(var n=zp[e],r=0;r<s.length;r++){var i=s[r].minor;if(i.units>n||i.units===n&&i.by>=t)return r>0?r-1:r}return s.length-2}function S(){var e=0;if(B()){var n=R(t.options.minScale);e=C(n.units,n.value)}return e}function T(e){for(var t=(e.t2-e.t1)/(r.x2-r.x1),n=k(t),i=S(),o=s[n=n<=i?i+1:n].major,a=s[n].minor;n>0&&M(s[n-1].minor,t)&&n-1>i;)n--;return{histogram:s[n].minor,major:o,minor:a,timeRate:t}}function R(e){return{units:P(zp,e.units)?e.units:zp.sec,value:b(e.value)?Math.round(Math.abs(e.value)):1}}function L(e){return{units:P(zp,e.units)?e.units:zp.sec,value:b(e.value)?Math.round(Math.abs(e.value)):t.baseRangeLimits.max}}function B(){return!!t.options.minScale}function G(){return"auto"!==t.options.maxRange}function O(e){return t.options.sliders===e}function Y(){var e,n=S(),r=s[n].max;if(O("fixed"))e=o/(1+t.freeSideFactor);else if(O("free")){r=1;var i=s[n+1].minor;e=x[i.units]*i.by}else e=o;return Math.round(r*e)}function F(){y=null;for(var e=0;e<p.length;e++){m[e]=null;p[e]=null}m.length=0;p.length=0}function z(e){c=[];for(var t,n=0;n<e.length;n++){var r=e[n];if(I(r)){var i="dt1"in r,o="dt2"in r;if(!i&&!o)throw new Error("mark: TimePeriod object must have a dt1 or dt2 property.");t=r;var u=i?ke(t.dt1):-1/0;if((o?ke(t.dt2):1/0)<u)throw new Error("mark: TimePeriod dt2 time must be after dt1 time.")}else t=r;c.push(a(t))}}function V(e){y=e;var n,r;for(n=0;n<e.length;n++){var i=e[n].index||0;if(i<t.selection.maxNumber&&e[n].id){var o=Z(e[n].id);if(o.length){p[i]=Q(o);m[i]={startTotals:[],endTotals:[]};var a=0,u=0;for(r=0;r<f.length;r++){var s=f[r];m[i].startTotals[r]=a;m[i].endTotals[r]=u;if(s.id in p[i]){pm(s)&&(a+=s.v);mm(s)&&(u+=s.v)}}m[i].startTotals[r]=a;m[i].endTotals[r]=u;W(i,e[n].c)}else if(!o.length&&m[i]){m[i]=null;p[i]=null}}}}function W(e,n){var r={colour0:"rgb(114, 179, 0)",colour1:"rgb(255, 153, 0)",colour2:"rgb(178, 38, 9)"}["colour"+e];n&&Kt(n)&&(r=n);t.selection["colour"+e]=r}function X(e){for(var t=0,n=f.length;t<n;){var r=Math.floor((t+n)/2),i=f[r].t;i!==e||pm(f[r])||i--;i<e?t=r+1:n=r}return t}function U(e){return r.x1+(e-h.t1)/pe()}function N(e){return h.t1+(e-r.x1)*pe()}function j(e){return e>=r.bars.major.y1?"major":e>=r.bars.minor.y1?"minor":"histogram"}function K(e,t,n){var r,i=n||j(t),o=N(e);ie(i,(function(e,t){if(t>o){r={t1:e,t2:t,bar:i};return!0}return!1}));return r}function H(e,t){var r,i,o=X(e),a=X(t),u={},s={};for(r=0;r<o;r++)(i=f[r]).t!==i.other&&(s[i.id]=(s[i.id]||0)+(i.t<i.other?1:-1));n(s,(function(e,t){e>0&&(u[t]=!0)}));for(r=o;r<a;r++)u[f[r].id]=!0;return Object.keys(u)}function _(){var e=t.options.groups;return!(!e.groupBy||!e.categories)}function J(e,t,n,r){for(var i=X(e),o=X(t),a=i;a<o;a++){var u=f[a];if(n?pm(u):mm(u)){var s=u.id;v[s]=(v[s]||0)+r}}}function $(){var e=d.t1,t=d.t2,n=g.t1,r=g.t2;e<n?J(e,n,!1,1):e>n&&J(n,e,!1,-1);t>r?J(r,t,!0,1):t<r&&J(t,r,!0,-1);g.t1=e;g.t2=t}function ee(){var e=re(),n=e?2*(e.t2-e.t1):t.baseRangeLimits.max,r=t.baseRangeLimits.min;B()?r=Y():t.options.minRange&&(r=Math.max(r,t.options.minRange));if(G()){var i=L(t.options.maxRange),o=zp[i.units];n=i.value*x[o]}else n=Math.max(n,Math.floor(4*r));return{max:n,min:r=Math.min(r,Math.floor(n/4))}}function te(){var e=0,n=o,i=t.options.showControlBar?t.controlbar.height:0,a=E(),s=t.options.scale.showMinor?t.bars.minor.height*a:0,f=t.options.scale.showMajor?t.bars.major.height*a:0,l=u-i,c=l-f,d=c-s,h=d-t.histogram.dy,v=h-t.histogram.topdy,g=v*t.selection.reducingFactor;r={bars:{major:{y1:c,y2:l},minor:{y1:d,y2:c}},histogram:{ybase:h,maxbarh:v,maxselh:g},x1:e,y1:d,x2:n,y2:l,width:o,height:u}}function re(){if(f.length>0){for(var e=0;f[e].t===-1/0;)e++;for(var t=f[e].t,n=f.length-1;f[n].t===1/0;)n--;return{t1:t,t2:f[n].t+1}}}function ie(e,t){var n,r=i[e],o=Np(h.t1,r.units,r.by),a=!1;do{a=t(o,n=jp(o,r.units,r.by),U(o),U(n),r.f);o=n}while(!a&&o<=h.t2)}var oe={count:0,bars:[],hasSel:[],selvalues:[],maxvalue:0,maxselvalue:0},ue=!0,se={bars:[],count:0,hasSel:[],maxselvalue:0,maxvalue:0,selvalues:[]},fe=!0;function ce(){if(ue){am(oe,h,i,X,U,et,tt,c);ue=!1}return oe}function de(){if(fe){gm(se,t,h,i,X,U,et,tt);fe=!1}return se}function he(){return r}function ve(){return d}function ge(){return h}function pe(){return i.timeRate}function me(e){var t=d.t1,n=d.t2,r="back"===e?-1:1,i=zp.month;if(t===Np(t,i,1)&&n===Np(n,i,1)){var o=new Date(t),a=new Date(n),u=12*(a.getUTCFullYear()-o.getUTCFullYear())+(a.getUTCMonth()-o.getUTCMonth());t=jp(t,i,r*u);n=jp(n,i,r*u)}else{var s=r*(n-t);t+=s;n+=s}return{t1:t,t2:n}}function ye(){return f}function be(n){var r=re();r&&d.t1>=r.t1&&n<=r.t1&&!t.playingExtend&&e.trigger("start","data")}function xe(t){var n=re();n&&d.t2<=n.t2&&t>=n.t2&&e.trigger("end","data")}function we(e,t){"t1"===e?be(t):xe(t);d[e]=t}function Ae(e){var t,n;if("t1"===e){t=h.t1;n=d.t2}else{t=d.t1;n=h.t2}if(O("fixed")){var r=n-t,i=Math.floor(.1*r);t+=i;n-=i}var o=ee();if("t1"===e){t=Math.max(t,d.t2-o.max);n=Math.min(n,d.t2-o.min)}else{t=Math.max(t,d.t1+o.min);n=Math.min(n,d.t1+o.max)}var a=re();a&&("t1"===e?n=Math.min(n,a.t2):t=Math.max(t,a.t1));return{min:t,max:n}}function Me(){return f.length>0}function Ie(e,t,n){var r,i=e,o=t,a=re(),u=n?(i+o)/2:(d.t1+d.t2)/2,s=ee(),f=o-i;if(f>s.max){i=Math.ceil(u-s.max/2);o=Math.floor(u+s.max/2)}else if(f<s.min){i=Math.floor(u-s.min/2);o=Math.ceil(u+s.min/2)}if(a)if(o<a.t1){i+=r=a.t1-o;o+=r}else if(i>a.t2){i-=r=i-a.t2;o-=r}return{t1:i,t2:o}}function Ee(e,t){return e>=r.x1&&e<=r.x2&&t>=0&&t<=r.y2}function ke(e){var t=$p(e);if(!b(t))throw new Error("load: invalid date in dt property. Value was: "+e);return t}function Ce(e){for(var t=[],n=Z(e),r=0;r<n.length;r++){var i=n[r];if("object"==typeof i&&i){var o=i;if(o.id&&o.dt)for(var a=""+o.id,u=Z(o.dt),s=void 0===o.v?void 0:Z(o.v),f=I(o.d)?{d:o.d}:{},l=0;l<u.length;l++){var c=u[l],d=s&&s[l]||1;if(!b(d))throw new Error("load: invalid value in v property - must be numeric. Value was: "+d);if("object"!=typeof c||c instanceof Date){var h=ke(c);t.push(ne({id:a,t:h,v:d,other:h},f))}else{var v=null!==c&&"dt1"in c,g=null!==c&&"dt2"in c;if(!c||!v&&!g)throw new Error("load: TimePeriod object must have a dt1 or dt2 property. Id was: "+a);var p=c,m=v?ke(p.dt1):-1/0,y=g?ke(p.dt2):1/0;if(y<m)throw new Error("load: TimePeriod dt2 time must be after dt1 time. Id was: "+a);t.push(ne({id:a,t:m,v:d,other:y},f));y!==m&&t.push(ne({id:a,t:y,v:d,other:m},f))}}}}return t.sort(Ge)}function Se(e,t,n,r,i){e.startTotals[t+1]=e.startTotals[t]+(n?i:0);e.endTotals[t+1]=e.endTotals[t]+(r?i:0)}function Te(e,n){var r=t.options.groups.categories,i=!1,o=pm(e),a=mm(e);if(_())for(var u=0;u<r.length;u++){var s=r[u],f=t.options.groups.groupBy,c=!(!e.d||e.d[f]!==s);i=i||c;Se(l.named.get(s),n,o,a,c?e.v:0)}Se(l.other,n,o,a,i?0:e.v)}function Re(e){var t=pm(e),n=mm(e),r=0;t&&e.t<d.t2&&(r=1);n&&e.t<d.t1&&(r-=1);0!==r&&(v[e.id]=(v[e.id]||0)+r)}function Le(){y&&V(y);v={};l.named=new Map;l.other=ym();_()&&t.options.groups.categories.forEach((function(e){l.named.set(e,ym())}));for(var e=0;e<f.length;e++){var n=f[e];Re(n);Te(n,e)}g.t1=d.t1;g.t2=d.t2;var r=Ie(g.t1,g.t2,!0);w();return r}function Be(e,t){return e===t?0:e===1/0||t===-1/0?1:e===-1/0||t===1/0?-1:e-t}function Ge(e,t){var n=e.t===t.t?Be(e.other,t.other):Be(e.t,t.t);0===n&&(n=e.id===t.id?e.v-t.v:e.id>t.id?1:-1);return n}function Oe(e){var t=(e||{}).items;f=Ce(t);F();c=[];return Le()}function Ze(e,t){for(var n=[],r=0,i=0;r<e.length&&i<t.length;){var o=Ge(e[r],t[i]);if(0===o){n.push(e[r]);r++;i++}else if(o<0){n.push(e[r]);r++}else{n.push(t[i]);i++}}for(;r<e.length;){n.push(e[r]);r++}for(;i<t.length;){n.push(t[i]);i++}return n}function Ye(e){var t=Ce(e);if(t.length>0){f=0===f.length?t:t[0].t>f[f.length-1].t?f.concat(t):t[t.length-1].t<f[0].t?t.concat(f):Ze(f,t);Le()}}function Fe(e){var t=q(e);f=f.filter((function(e){return!t.has(e.id)}));Le()}function ze(e,t){var n=d.t1,r=d.t2;Xe(n+(t?0:e),r+e);return n!==d.t1||r!==d.t2}function Pe(e){var t=D(e)?e:Z(e);if(t){t.length?z(t):c=[];ue=!0;w()}return c}function De(e){var t=D(e)?e:Z(e);t&&(t.length?V(t):F());fe=!0;ue=!0;w();for(var n=[],r=0;r<p.length;r++){var i=p[r];n[r]=i?Object.keys(i):null}return n}function Ve(e,t){var n=(e.t2-e.t1)*t;return{t1:e.t1-n,t2:e.t2+n}}function We(e,n){var r;if(O("none"))r=e;else if(O("free")){var i=re();if(i){var o=ee();if(i.t2-i.t1<o.min){i.t1=Math.floor(i.t1-o.min/2);i.t2=Math.ceil(i.t2+o.min/2)}n&&(i=_e(i));r=Ve(i,t.freeSideFactor)}else r=h}else r=Ve(e,t.fixedSideFactor);return r}function Xe(n,r){var i=Ie(n,r);if(re()&&d.t1&&d.t2){var o=Ie(n+1,r+1),a=Ie(n-1,r-1);be(n);i.t1<d.t1&&a.t1===i.t1&&!t.playingExtend&&e.trigger("start","range");xe(r);i.t2>d.t2&&o.t2===i.t2&&!t.playingExtend&&e.trigger("end","range")}var u=We(i,!0);A(i.t1,i.t2,u.t1,u.t2)}function Ue(){var e=d.t1,t=d.t2;Xe(d.t1,d.t2);e===d.t1&&t===d.t2||Je()}function Ne(e,t){A(d.t1,d.t2,e,t)}function je(){Ue();te();Le()}function Ke(e,t){o=e;u=t;te()}function He(e){var t=T(We(e,!1)).histogram,n=Np(e.t1,t.units,t.by),r=Np(e.t2,t.units,t.by);r!==e.t2&&(r=jp(r,t.units,t.by));return{t1:n,t2:r}}function _e(e){var t,n=e;do{var r=He(n);t=r.t1!==n.t1||r.t2!==n.t2;n=r}while(t);return n}var Je=le((function(){e.trigger("change")}),250);function Qe(){g.t1===d.t1&&g.t2===d.t2||$();return v}function qe(e){var t,n,r=Z(e),i=1/0,o=-1/0,a={};for(t=0;t<r.length;t++)a[r[t]]=!0;for(t=0;t<f.length;t++)if(a[(n=f[t]).id]){n.t<i&&(i=n.t);n.t>o&&(o=n.t)}if(i!==1/0)return{t1:i,t2:o}}function $e(e,t){if(D(e)||D(t))throw new Error("getIds error: both dt1 and dt2 dates must be passed.");return H($p(e),$p(t))}function et(e){_()&&l.named.forEach(e);e(l.other)}function tt(e){for(var n=0;n<t.selection.maxNumber;n++){e(m[n],n)}}return{dataRange:re,eachTick:ie,findRange:K,fitHistogramBarsExactly:_e,fontSizeFactor:E,forEachSelection:tt,forEachGroup:et,getBounds:he,getClickedBar:j,getHistogram:ce,getIdcounts:Qe,getIds:$e,getInnerRange:ve,getOuterRange:ge,getRangeForIds:qe,getSideLimits:Ae,getSmoothArea:de,getTimeRate:pe,hasItems:Me,inMainBarOrHistogram:Ee,limitInnerRange:Ie,load:Oe,mark:Pe,merge:Ye,nextPage:me,offsetRanges:ze,privateGetItems:ye,removeItem:Fe,selection:De,setInner:Xe,setInnerRangeSide:we,setOuter:Ne,setSize:Ke,triggerTimeBarChanged:Je,ttox:U,updateOptions:je,xtot:N}}function xm(e,t){function n(n,r,i,o,a,u){var s=t(u,"area");s.bw=o;if(r!==s.bc){s.bc=r;s.wbc=sn(r)}if(i!==s.c){s.c=i;s.wc=sn(i)}var f={closed:a,segments:n};s.custom=f;e(s)}return n}var wm={TIMEBAR:{alwaysUpdate:!0,isContentLayer:!0}},Am={TIMEBAR:"TIMEBAR",OVERLAYS:"OVERLAYS"};function Mm(){var e;function t(t,n){e=xm(t,n)}var n=Li(wm,void 0,t);function r(){n.setup();n.createLayer("TIMEBAR",null);n.createLayer("OVERLAYS",null)}r();return qn(qn({},n),{hasPath:n.hasLayerPathAt,removeAllItems:r,setShadowColourMap:function(e){n.setShadowColourMap(e);r()},smoothArea:e})}function Im(e,t,n,r,i,o){for(var a=n.histogram.bardx,u=o(t.maxvalue)||1,s=r.histogram.ybase,f=r.histogram.maxbarh,l=function(r){var o=t.bars[r],l=o.x+a,c=t.bars[r+1].x-a,d=o.value;if(d>0){var h=o.groupValues.map((function(e){return e/d})),v=Math.max(1,Math.min(f,Math.floor(f*d/u))),g=s-v,p=i.x>=l&&i.x<=c&&i.y>=g&&i.y<=s,m=void 0;if(o.mark){m=p?n.options.histogram.markHiColour:n.options.histogram.markColour;e.rect(l,g,c,s,Dt.white,-1,m,!0,"_tbBar",-1)}else for(var y=void 0,b=s,x=0;x<h.length;x++)if(h[x]>0){m=x===h.length-1?p?n.options.histogram.highlightColour:n.options.histogram.colour:p?n.computedGroupHiColours[x%n.computedGroupHiColours.length]:n.computedGroupColours[x%n.computedGroupColours.length];y=b-v*h[x];e.rect(l,Math.round(y),c,Math.round(b),Dt.white,-1,m,!0,"_tbBar",-1);b=y}}},c=0;c<t.count;c++)l(c)}var Em=W();function km(e,t,n,r,i,o,a){if(t.hasSel[i])for(var u=a(t.maxselvalue)||1,s=t.selvalues[i],f="_tbLine"+i,l=n.selection["colour"+i],c=(t.bars[1].x-t.bars[0].x)/2,d=0;d<t.count;d++){var h=s[d],v=s[d+1],g=t.bars[d].x+c,p=t.bars[d+1].x+c,m=r.histogram.maxselh,y=r.histogram.ybase,b=y-Math.floor(m*h/u),x=y-Math.floor(m*v/u);e.line(g,b,p,x,l,void 0,2,f);var w=f+Em+d,A=o===w?l:n.options.backColour;e.circle(g,b,n.selection.dotsize,l,2,A,!0,w,-1,void 0,!0)}}function Cm(e,t,n,r,i,o,a){for(var u=0;u<n.selection.maxNumber;u++)u!==i&&km(e,t,n,r,u,o,a);null!==i&&km(e,t,n,r,i,o,a)}function Sm(e,t,n,r,i,o){var a=o(t.maxvalue)||1,u=r.histogram.ybase,s=r.histogram.maxbarh,f=[];f.push({type:si.MoveTo,value:[r.x2,u]});f.push({type:si.LineTo,value:[r.x1,u]});for(var l=0;l<t.count;l++){var c=t.bars[l],d=c.value,h=u-Math.max(1,s*d/a);f.push({type:si.LineTo,value:[c.x,h]})}f.push({type:si.LineTo,value:[r.x2,u]});e.smoothArea(f,n.options.area.colour,cn(n.options.area.colour,.3),1.3,!0,"_tbBar")}function Tm(e,t,n,r,i,o,a){if(t.hasSel[i]){var u=a(t.maxselvalue)||1,s=t.selvalues[i],f="_tbLine"+i,l=n.selection["colour"+i],c=r.histogram.ybase,d=r.histogram.maxselh,h=[];h.push({type:si.MoveTo,value:[r.x1,c]});for(var v=0;v<t.count;v++){var g=t.bars[v],p=s[v],m=c-Math.max(1,d*p/u);h.push({type:si.LineTo,value:[g.x,m]})}h.push({type:si.LineTo,value:[r.x2,c]});e.smoothArea(h,l,void 0,2.5,!1,f)}}function Rm(e,t,n,r,i,o,a){for(var u=0;u<n.selection.maxNumber;u++)u!==i&&Tm(e,t,n,r,u,o,a);null!==i&&Tm(e,t,n,r,i,o,a)}function Lm(e){function t(t,n,r,i,o,a,u){var s=n.getBounds();i.setLayer(Am.TIMEBAR);function f(){var e;-1!==a.x&&(e=n.findRange(a.x,a.y));if(e&&"histogram"!==e.bar){var t=Math.max(n.ttox(e.t1),s.x1),r=Math.min(n.ttox(e.t2),s.x2),u="minor"===e.bar?2:1;t<r&&i.rect(t,s.bars[e.bar].y1-u,r,s.bars[e.bar].y2+1,void 0,-1,o.options.scale.highlightColour,!0,null,-1)}}function l(e){var t="minor"===e,a=t&&!o.options.scale.showMinor||!t&&!o.options.scale.showMajor,u=s.bars[e].y2,f=o.options.fontFamily,l=o.options.fontSize,c=n.fontSizeFactor(),d=o.bars[e].tickHeight*c;a&&(d=0);var h=t?s.bars[e].y1:s.bars[e].y2-d;n.eachTick(e,(function(t,n,a,v,g){if(a>=s.x1&&a<=s.x2){var p=Math.floor(1*c)+1;i.line(a,h,a,h+d,"#ddd",void 0,p,null)}var m=o.displayTime(t,g),y=Hn(r,m,l,!1,f).width,b=Math.floor((v+a)/2-y/2);i.text(b,u-o.bars[e].textbase,m,o.options.fontColour,l,!1,null,-1,f,!1,0,!1,!1,0,0,0,0)}));if(!a){var v=Dt.transparent;i.rect(0,s.bars[e].y1,s.width,s.bars[e].y2,v,1,v,!0,t?"_tbMinor":"_tbMajor",-1)}}function c(){if(u){var e=u.match(t.selectionRegExp());if(e)return+e[1]}return null}function d(){var e=n.getInnerRange(),t=n.ttox(e.t1),r=n.ttox(e.t2);i.line(t,0,t,s.y2,o.options.sliderLineColour,void 0,2,"_tbSlider");i.line(r,0,r,s.y2,o.options.sliderLineColour,void 0,2,"_tbSlider");i.rect(s.x1,0,t,s.y2,o.options.sliderLineColour,-1,o.options.sliderColour,!0,"_tbSlider",-1);i.rect(r,0,s.width,s.y2,o.options.sliderLineColour,-1,o.options.sliderColour,!0,"_tbSlider",-1);for(var a=(s.y2-o.grip.length)/2,u=a+o.grip.length,f=t-o.grip.margin,l=r+o.grip.margin,c=4+2*o.grip.lines,d=0;d<o.grip.lines;d++){f-=o.grip.space;l+=o.grip.space;i.line(f,a,f,u,o.options.sliderLineColour,void 0,2,null);i.line(l,a,l,u,o.options.sliderLineColour,void 0,2,null)}i.rect(t-3*c,a-o.grip.length,t,u+o.grip.length,Dt.transparent,-1,Dt.transparent,!0,"_tbLeft",-1);i.rect(r+3*c,a-o.grip.length,r,u+o.grip.length,Dt.transparent,-1,Dt.transparent,!0,"_tbRight",-1)}function h(){var n=o.controlbar.height,r=s.height-n,a="rgba(255,255,255,0.7)";i.rect(0,r,s.width,s.height,o.controlbar.colour,-1,o.controlbar.colour,!0,"_tbcontrolbar",-1);i.line(0,r-.5,s.width,r-.5,"#ccc",void 0,1,"_tbcontrolbar");var f="";o.options.showPlay&&(f=t.isPlayingFixed()?"pause":"play");var l="";o.options.showExtend&&(l=t.isPlayingExtend()?"pause":"playextend");var c,d=[o.options.showFit?"fit":"","zoomout","zoomin",40,"prev",f,l,"next"],h=0,v=t.imageNames();function g(e){for(var t=0;t<d.length;t++){var n=d[t];n&&e(n,"number"==typeof n,t)}}function p(t,n,r){if(n)h+=t;else{var i=v[t],a=Xv[i],u=e.get(a).im;h+=u.width/2;r>0&&(h+=o.controlbar.space)}}function m(t,s){if(s)c+=t;else{var f=v[t],l=Xv[f],d=e.get(l).im,h=d.width/2,g=d.height/2,p=r+(n-g)/2,m="_tb"+t;if(u===m){var y=c+h/2,b=p+g/2;i.circle(y,b,h/2-2,a,0,a,!0,m,-1,void 0,!1)}i.image(c,p,c+h,p+g,l,m,-1,null,0,!0);c+=h+o.controlbar.space}}g(p);c=(s.width-h)/2;g(m)}function v(){i.rect(s.x1,0,s.x2,s.y1,Dt.midgrey,-1,o.options.backColour,!0,"_tbHisto",-1);i.rect(s.x1,s.y1,s.x2,s.y2,Dt.midgrey,-1,o.options.backColour,!0,"_tbMain",-1);(o.options.scale.showMajor||o.options.scale.showMinor)&&f();o.options.scale.showMajor&&l("major");o.options.scale.showMinor&&l("minor");if(n.hasItems()&&s.histogram.maxbarh>0)if("area"===o.options.type){var e=n.getSmoothArea();Sm(i,e,o,s,a,t.animateBarHeight);Rm(i,e,o,s,c(),u,t.animateSelHeight)}else{var r=n.getHistogram();Im(i,r,o,s,a,t.animateBarHeight);Cm(i,r,o,s,c(),u,t.animateSelHeight)}"none"!==o.options.sliders&&d();o.options.showControlBar&&h()}s.x2>s.x1&&v()}return{generate:t}}function Bm(e,t,n,r,i,o,a){var u,s;if(r){u=t.bc&&t.sc;s=n.sw(t.bw)}else{u=t.bc;var f=en(t.a,o,a);f&&(u=an(u,f));s=n.w(t.bw)}var l=t.custom;e.beginPath();l.segments.forEach((function(t){switch(t.type){case si.MoveTo:e.moveTo(t.value[0],t.value[1]);break;case si.LineTo:e.lineTo(t.value[0],t.value[1])}}));l.closed&&e.closePath();if(r){e.strokeStyle=t.bc&&t.sc;t.c&&(e.fillStyle=t.c&&t.sc)}else{e.strokeStyle=t.bc;t.c&&(e.fillStyle=t.c)}e.lineWidth=Math.max(1,s);e.stroke();t.c&&e.fill()}function Gm(e,t,n,r,i,o){for(var a="_tbBar"===n,u=0;e.bars[u+1].x<i&&u<e.count;)u++;var s,f,l=a?e.bars[u].value:e.selvalues[r][u],c=a?e.maxvalue:e.maxselvalue,d=(e.bars[u].x+e.bars[u+1].x)/2,h=t.histogram,v=h.ybase,g=a?h.maxbarh:h.maxselh,p=Math.floor(g*l/c);if(a&&!e.bars[u].mark){f=e.bars[u].groupValues;var m=v-o,y=0;s=-1;do{y+=f[++s]/l*p}while(y<m)}var b=v-p;a||(b-=5);return{x:d,y:b,v:l,groupIndex:s,groupValues:f}}function Om(e,t,n,r,i){for(var o=0;e.bars[o+1].x<r&&o<e.count;)o++;var a=e.bars[o].value,u=t.histogram;return{x:r,y:u.ybase-Math.floor(u.maxbarh*a/e.maxvalue),v:a,groupIndex:0,groupValues:[a]}}function Zm(e,r,i,o,a){var u,s,f,l,c,d,h=sr(B),g=function(){},p=!1;var m,y,b,x={x:-1,y:-1},w=null,A=null,M=null,I={lastId:null,lastRange:null,lastGroupIndex:null},k={_tbfit:1,_tbzoomout:1,_tbzoomin:1,_tbprev:1,_tbpause:1,_tbplay:1,_tbplayextend:1,_tbnext:1},C=ie(),S=ie(),L={area:Bm};function B(){e.privateTrigger("redraw")}function G(e,t,n){u=Mm();c=e;s=t;f=n;r.setSize(t,n);var i=l(s,f,!0);m=vi(i.getContext("2d"),e,null,null);u.setShadowColourMap(m.getShadowColourMap());u.setShadowCustomCanvasPrimitives(L)}function O(){n(oe,(function(e){a.get(Xv[e],!1,!0)}));B()}function Z(){Se._tbLeft='url("'+Xv["openhand.png"]+'"), pointer';Se._tbRight=Se._tbLeft;n(k,(function(e,t){Se[t]="pointer"}))}function Y(){return c}function z(e,t,n,i,o,a,u){l=i;g=o;d=u;Z();G(e,t,n);r.setInner(Xp(new Date(2011,4,6)),Xp(new Date));O()}function P(e,t,n){yn();var r=Q();G(e,t,n);Q(r.dt1,r.dt2,{animate:!1,quiet:!0})}function V(){W(null);u.destroy();a.destroy();u=null;c=null}function W(e){t(c.canvas,e,d)}function X(){return oe}
function U(){return p&&!o.playingExtend}function N(){return p&&!!o.playingExtend}function j(){return ue}function K(){if(a.hasPendingImages())B();else{u.resetExtras();i.generate(ht,r,c,u,o,x,b);ci(c);hi(u,c,null,a,{},!1,null,!1,null,!1,0,0,void 0,L);m.dirty()}}function H(e){var t=r.getInnerRange();ge(t.t1,t.t2,{quiet:!0},e)}function _(e,t){r.load(e);return H(t)}function J(e,t){r.merge(e);return H(t)}function Q(e,t,n,i){function o(e){return E(e)||R(e)}if(0===arguments.length){var a=r.getInnerRange();return{dt1:Up(a.t1),dt2:Up(a.t2)}}if(D(e)||D(t))throw new Error("range error: both dt1 and dt2 dates must be passed.");if(!o(e)||!o(t))throw new Error("range error: both dt1 and dt2 must be dates, timestamps or ranges.");var u=F(n,{animate:!0}),s=$p(e),f=$p(t),l=r.limitInnerRange(s,f,!0);ge(l.t1,l.t2,u,i)}function q(e){r.removeItem(e);H()}function $(t){var n=t||{},r=n.extend?"extend":"normal";e.trigger("play",r);de(n)}function ee(e,t,n){var r=F(t,{animate:!0}),i=e||"forward";if("forward"!==i&&"back"!==i)throw new Error("Timebar.pan: Invalid direction option ("+i+") passed.");Ie(i,r,n)}function te(e,t,n){switch(e){case"in":Pe(t,n);break;case"out":De(t,n);break;case"fit":Ye(t,n)}}function ne(){p=!1;o.playingExtend=!1;e.trigger("pause")}function re(e,t){if(e){o.setOptions(e);r.updateOptions();"object"==typeof e&&e&&"_showShadowCanvas"in e&&m.debugCanvas(e._showShadowCanvas?c:null);B()}T(t);return o.getOptions()}function ie(){var e=null,t=fr(h,(function(t){if(0===arguments.length)return e;e=t}));return function(n){o.options.heightChange.animate&&null!==e?t(n,o.options.heightChange.time):e=n;return e}}var oe={play:"TBPlay.png",pause:"TBPause.png",next:"TBNext.png",prev:"TBPrev.png",fit:"TBFit.png",playextend:"TBPlayExtend.png",zoomin:"TBZoomIn.png",zoomout:"TBZoomOut.png"},ue=/^_tbLine(.)/;function se(e,t){return!e||!t||(e.t1!==t.t1||e.t2!==t.t2)}function fe(t,n,i){b=m.test(t,n,u);if(me(t,n)){M=r.findRange(t,n);if("area"===o.options.type&&"histogram"===M.bar){M.t1=r.xtot(t);M.t2=r.xtot(t+1)}}var a=se(M,I.lastRange);if("hover"!==i||b!==I.lastId||"_tbBar"===b||a){var s=t,f=n,l=void 0,c=void 0,d=void 0,h=void 0,v=null,g=void 0,p=void 0,y=M&&"histogram"===M.bar;if(me(t,n)){l=Up(M.t1);c=Up(M.t2);v=y?null:"scale"}if(ye()){v="area"===o.options.type?"area":"bar";if("_tbBar"!==b){v="selection";d=+b.match(ue)[1];if(!y){l=Up((M=r.findRange(t,n,"histogram")).t1);c=Up(M.t2)}}var x=void 0;s=(x="area"===o.options.type?Om(r.getSmoothArea(),r.getBounds(),b,t,n):Gm(r.getHistogram(),r.getBounds(),b,d,t,n)).x;f=x.y;h=x.v;if("area"===o.options.type){g=void 0;p=void 0}else{g=x.groupIndex;p=x.groupValues}if("hover"===i&&g===I.lastGroupIndex&&!a)return;I.lastGroupIndex=g}else I.lastGroupIndex=null;!v&&b&&(v=We(b));I.lastId=b;I.lastRange=M;return e.trigger(i,v,d,h,s,f,l,c,g,p)}}var ce=le(fe,o.hoverTime);function de(t){o.playingExtend=!!t.extend;if(!p){p=!0;h.push(ur((function(t){var n=r.offsetRanges(Math.floor(r.getTimeRate()*(o.options.playSpeed||o.defaultPlaySpeed)*(t/1e3)),!!o.playingExtend);if(!p||!n){p=!1;o.playingExtend=!1;n||e.trigger("pause");return!1}r.triggerTimeBarChanged();return!0})))}}function he(e,t,n,i,a,u){var s=e.t1,f=e.t2,l=n-s,c=i-f,d=a||{},v=d.time||o.defaultAnimationTime,g=v;h.push(ur((function(e){var n=1-(g=Math.max(0,g-e))/v;t(s+l*n,f+c*n);if(g<=0){d.quiet||r.triggerTimeBarChanged();T(u)}return g>0})))}function ve(e,t,n,i){var o=r.limitInnerRange(e,t);he(r.getInnerRange(),r.setInner,o.t1,o.t2,n,i)}function ge(e,t,n,i){if(n.animate)ve(e,t,n,i);else{r.setInner(e,t);n.quiet||r.triggerTimeBarChanged();T(i)}}function pe(e,t,n,i){he(r.getOuterRange(),r.setOuter,e,t,n,i)}function me(e,t){return r.inMainBarOrHistogram(e,t)||!!b&&ue.test(b)}function ye(){return"_tbBar"===b||!!b&&ue.test(b)}function be(e,t){return Math.min(t.max,Math.max(t.min,e))}function xe(e){return function(t){var n=r.getInnerRange()[e],i=r.getSideLimits(e);return{getCursor:function(){return"ew-resize"},dragMove:function(o){r.setInnerRangeSide(e,be(n+(o-t)*r.getTimeRate(),i));r.triggerTimeBarChanged()},endDrag:function(t){t&&r.setInnerRangeSide(e,n);if("fixed"===o.options.sliders){var i=r.getInnerRange(),a=(i.t2-i.t1)*o.fixedSideFactor;pe(i.t1-a,i.t2+a,{time:o.sliderReleaseTime})}}}}}function we(e,t){if(x.x!==e||x.y!==t){x.x=e;x.y=t;B()}}function Ae(){we(-1,-1)}function Me(){(b&&b in k||I.lastId&&I.lastId in k)&&B()}function Ie(e,t,n){var i=r.nextPage(e);ge(i.t1,i.t2,t,n)}function Ee(e){var t=r.getInnerRange().t1;return{getCursor:function(){return"move"},dragMove:function(n){var i=Math.floor((e-n)*r.getTimeRate());"free"===o.options.sliders&&(i*=-1);r.offsetRanges(i+(t-r.getInnerRange().t1));r.triggerTimeBarChanged()},endDrag:function(e){e&&r.offsetRanges(t-r.getInnerRange().t1)}}}function ke(e){return e[0].x>e[1].x?{xmin:e[1].x,xmax:e[0].x}:{xmin:e[0].x,xmax:e[1].x}}function Ce(e){var t=ke(e),n=r.xtot(t.xmin),i=r.xtot(t.xmax),a=i-n,u=r.getInnerRange(),s=r.ttox(u.t1),f=r.ttox(u.t2);return{pinchMove:function(e){var u=ke(e);if("free"===o.options.sliders){var l=s+(u.xmin-t.xmin),c=f+(u.xmax-t.xmax);r.setInner(r.xtot(l),r.xtot(c))}else if(u.xmax!==u.xmin){var d=a/(u.xmax-u.xmin),h=Math.floor(n-d*(u.xmin-s)),v=Math.floor(i+d*(f-u.xmax));r.setInner(h,v);r.triggerTimeBarChanged()}}}}var Se={},Te={_tbBar:Ee,_tbSlider:Ee,_tbHisto:Ee,_tbLine:Ee,_tbMain:Ee,_tbMajor:Ee,_tbMinor:Ee,_tbLeft:xe("t1"),_tbRight:xe("t2")},Re={_tbBar:Ce,_tbSlider:Ce,_tbHisto:Ce,_tbLine:Ce,_tbMain:Ce,_tbMinor:Ce,_tbMajor:Ce};function Le(e){var t=Ve(m.test(e.x,e.y,u));return t?Re[t]:void 0}function Be(t,n){if(w){w.endDrag(e.trigger("dragend",w.type,t,n));e.trigger("dragcomplete",w.type,t,n);w=null;g("auto")}}function Ge(){A&&(A=null)}function Oe(e,t){Ae();Be(e,t)}function Ze(e,t,n,i,o){var a=F(i,{animate:!0,time:200}),u=n||.5,s=e>0?u:1/u,f=r.getInnerRange(),l=f.t1,c=f.t2,d=c-l,h=d*s,v=(t-f.t1)/(f.t2-f.t1);ge(l=Math.floor(l-(h-d)*v),c=Math.floor(c+(h-d)*(1-v)),a,o)}function Ye(e,t){var n;(n=e&&e.id?r.getRangeForIds(e.id):r.dataRange())?Q((n=r.fitHistogramBarsExactly(n)).t1,n.t2,e,t):T(t)}function Fe(){var e=r.getInnerRange();return(e.t1+e.t2)/2}function ze(e,t,n){Ze(e,Fe(),.5,t,n)}function Pe(e,t){ze(1,e,t)}function De(e,t){ze(-1,e,t)}function Ve(e){return e&&ue.test(e)?"_tbLine":e}function We(e){return(0===e.indexOf("_tb")?e.substr(3):e).toLowerCase()}function Xe(t,n,r){var i=m.test(t,n,u);if(!r)if("_tbplay"===i){o.playingExtend=!1;$()}else if("_tbplayextend"===i){o.playingExtend=!0;$({extend:!0})}else"_tbpause"===i?ne():"_tbnext"===i?ee("forward"):"_tbprev"===i?ee("back"):"_tbfit"===i?Ye():"_tbzoomin"===i?"free"===o.options.sliders?De():Pe():"_tbzoomout"===i&&("free"===o.options.sliders?Pe():De());if((i=Ve(i))&&Te[i]){var a="hand";/left|right/i.test(i)&&(a=We(i));if(!e.trigger("dragstart",a,t,n)){(w=Te[i](t)).type=a;g(w.getCursor(t,n))}}}function Ue(e,t){if(1===e.length){Xe(e[0].x,e[0].y,!t);fe(e[0].x,e[0].y,"touchdown")}else if(2===e.length){var n=Le(e[0]),r=Le(e[1]);n&&n===r&&(A=n(e))}}function Ne(e,t){if(r.inMainBarOrHistogram(e,t)){if(!fe(e,t,"dblclick")){var n=r.findRange(e,t);n=r.limitInnerRange(n.t1,n.t2,!0);var i="free"===o.options.sliders?o.doubleClickZoomTimeFree:o.doubleClickZoomTime;ve(n.t1,n.t2,{time:i})}}else fe(e,t,"dblclick")}var je,Ke,He,_e,Je,Qe=null;function qe(e){var t=!1;if(1===e.length)if(Qe){Ne(e[0].x,e[0].y);t=!0}else Qe=v((function(){Qe=null}),600);return t}function $e(e,t,n){var r;if(2===e)r="contextmenu";else{r="click";Xe(t,n)}fe(t,n,r)}function et(e,t,n){}function tt(t,n,i){var a;if(!e.trigger("mousewheel",t,n,i)){a="free"===o.options.sliders?Fe():r.xtot(n);r.inMainBarOrHistogram(n,i)&&Ze(t,a,.65,{animate:!0})}return!0}function nt(e,t){Ne(e,t)}function rt(e,t,n,i){r.inMainBarOrHistogram(e,t)?we(e,t):Ae();var o;if(w){o=w.getCursor(e,t);w.dragMove(e,t,n,i)}else o=(b=m.test(e,t,u))&&Se[Ve(b)]||"auto";Me();if(y!==o){y=o;g(o)}ce(e,t,"hover")}function it(e,t){Be(e,t)}function ot(e,t){arguments.length&&Oe(e,t);b=null;Me()}function at(){if(ut){clearTimeout(ut);ut=null}}var ut=null;function st(e){qe(e)||Ue(e,!0);_e=e[0].x;Je=e[0].y;je=e[0].id;ut=setTimeout((function(){at();Be();fe(_e,Je,"contextmenu")}),600)}function ft(e){if(A)A.pinchMove(e);else if(w){w.dragMove(e[0].x,e[0].y,!1,!1);we(e[0].x,e[0].y)}for(var t=0;t<e.length;t++)if(je===e[t].id){Ke=e[t].x;He=e[t].y}if(ut){var n=Ke-_e,r=He-Je;n*n+r*r>100&&at()}}function lt(e){ut&&at();Ge();Be();Ue(e,!1)}function ct(){Ge();Be()}function dt(e,t,n){if(!t&&!n&&32===e){if(!D(o.playingExtend)){var r=p?"pause":"play",i={extend:o.options.showExtend&&!o.options.showPlay};ht[r](i)}return!0}}var ht={animate:h.animate,animateBarHeight:C,animateSelHeight:S,click:et,dblclick:nt,destroy:V,dragover:function(e,t){},draw:K,getCanvas:Y,gesturechange:function(e,t){},gestureend:function(e,t){},gesturestart:function(e,t){},imageNames:X,isPlayingExtend:N,isPlayingFixed:U,keydown:dt,keyup:function(e){},load:_,merge:J,mousedown:$e,mouseleave:ot,mousemove:rt,mouseup:it,mousewheel:tt,options:re,pan:ee,pause:ne,play:$,privateInit:z,privateSetSize:P,range:Q,removeItem:q,selectionRegExp:j,setContainer:W,touchcancel:ct,touchend:lt,touchmove:ft,touchstart:st,zoom:te};return ht}function Ym(){throw new Error("Time bar has been destroyed")}function Fm(e,t,n,r){var i,o=cr(),a=rm(),u=bm(o,a),s=Lm(t),f=Zm(o,u,s,a,t);function l(){return f.load({items:[]})}function c(e,t){return u.getIds(e,t)}function d(e,t){if("object"==typeof e&&e&&"items"in e){var n=e;if(n.items)return f.load(n,t)}throw Error("Unknown data format passed")}function h(e,t){return f.options(e,t)}function v(e,t,n){return f.pan(e,t,n)}function g(){return f.pause()}function p(e){return f.play(e)}function m(e,t,n,r){return 0!==arguments.length?f.range(e,t,n,r):f.range()}function y(e,t){var n=Z(O(e));return f.merge(n,t)}function b(e){f.removeItem(e)}function x(e){return u.selection(e)}function w(e){return u.mark(e)}function A(e,t,n){var r=F(t,{animate:!0,time:200});return f.zoom(e||"in",r,n)}function M(e){if(D(e))return!1;var t=""+(I(e)?e.id:e);return!!u.getIdcounts()[t]}function E(e){i=e}function k(e){}function C(){S(null);_(i).forEach((function(e){document.removeEventListener(e,i[e])}));f.destroy();delete KeyLines.components[e];f=null;o=null;_(n).forEach((function(e){n[e]=Ym}))}function S(e){var t=or(e);f.setContainer(t)}var T=ar(f.draw,f.animate,f.getCanvas);o.privateBind("redraw",T.redraw);return{api:qn(qn({_getItems:u.privateGetItems,privateCanvasApi:r,clear:l,destroy:C,getIds:c,inRange:M,load:d,mark:w,merge:y,options:h,pan:v,pause:g,play:p,privateInit:f.privateInit,privateSetGlobalEvents:E,privateSetRemoveComponentReference:k,privateSetSize:f.privateSetSize,privateUseAutoSizing:function(){return!0},range:m,removeItem:b,selection:x,setContainer:S,zoom:A},o),T),actions:f}}var zm,Pm,Dm=128,Vm=4096,Wm=16,Xm=Dm,Um=.25,Nm=["rgba(255,0,0,1)","rgba(0,255,0,1)","rgba(0,0,255,1)","rgba(0,0,0,0)"];function jm(){return Wm+Um*Xm}function Km(e,t,n){var r=e;zm=t;Xm=Dm;Pm=jm();return _m(r,n)}function Hm(e,t,n){var r=ig(e,t,n,"text");r.fillStyle="black";r.fillRect(0,0,e,e);return r}function _m(e,t){var n=Object.keys(e),r=Jm(n),i={};return re(qm(i,n,r,t),{getGlyphInfoForFont:function(e){return i[e]}})}function Jm(e){for(var t=0,n=document.createElement("canvas").getContext("2d"),r=0,i=e.length;r<i;r++){var o=zm.getNonEmojiGlyphs(),a=e[r];t+=Qm(n,o,a,!1);t+=Qm(n,o,a,!0)}for(var u=(Xm+Pm)*t/3,s=256;u/(s*s)>3;)s*=2;return s}function Qm(e,t,n,r){for(var i,o=0,a=r?"bold ":"",u=0,s=t.length;u<s;u++){var f=t[u];i=be(f)?xe(Xm):Xm;e.font=a+i+"px "+n;o+=e.measureText(f).width+Wm}return o}function qm(e,t,r,i){var o,a=r,u=[],s=function(){u=[];o={x:Wm,y:Pm,colourComponent:0,textureBank:0};for(var n=0,r=t.length;n<r;n++){e[t[n]]=e[t[n]]||{};ty(u,a,e,o,t[n],!1,i);ty(u,a,e,o,t[n],!0,i)}};G(s,(function(e){if(e){if((a*=2)>Vm){Xm/=2;Pm=jm()}if(Xm<32){console.log("Number of unique text characters exceeded, try reducing the number of fonts or use canvas mode");return}s()}}));n(e,(function(t,n){ey(u,e,n,!1);ey(u,e,n,!0)}));for(;o.textureBank<2;){o.textureBank++;var f=ig(1,o.textureBank,!1,"text");u[o.textureBank]={alphaChannel:!1,img:f.canvas,texture:void 0,rebuild:!1,size:0}}return{fontSize:Xm,atlases:u,glyphInfo:e}}function $m(e,t,n){var r=e[t].ctx;r.font=n;r.globalCompositeOperation="lighter";return r}function ey(e,t,n,r){for(var i=t[n],o=r?"B":"",a=r?"bold ":"",u=zm.getNonEmojiGlyphs(),s=0;s<u.length;++s){var f=u[s],l=0,c=i[f+o];if(c){var d=void 0;if(be(f)){l=8;d=xe(Xm)}else d=Xm;var h=$m(e,c.textureBank,a+d+"px "+n);h.fillStyle=Nm[c.colourComponent];h.fillText(f,c.x,c.y+.75*Xm-l)}}}function ty(e,t,n,r,i,o,a){var u,s=e[r.textureBank];if(s)u=s.ctx;else{s={alphaChannel:!1,img:(u=Hm(t,r.textureBank,a)).canvas,ctx:u,texture:void 0,rebuild:!1,size:0};e[r.textureBank]=s}var f=o?"B":"",l=o?"bold ":"";u.fillStyle="black";for(var c=zm.getNonEmojiGlyphs(),d=0;d<c.length;++d){var h=c[d],v=void 0;v=be(h)?xe(Xm):Xm;u.font=l+v+"px "+i;var g=u.measureText(h);if(r.x+g.width+Wm>t){var p=r.y+Xm+Pm;if(p+Xm>t){p=Pm;if(r.colourComponent<2)r.colourComponent++;else{if(!(r.textureBank<2))throw new Error("Warning: Number of unique text characters exceeded, restarting build with larger Texture");r.colourComponent=0;r.textureBank++;(u=Hm(t,r.textureBank,a)).font=l+Xm+"px "+i;e.push({alphaChannel:!1,img:u.canvas,ctx:u,texture:void 0,rebuild:!1,size:0})}u.fillStyle=Nm[r.colourComponent]}r.x=Wm;r.y=p}n[i][h+f]={text:h,x:r.x,y:r.y,u1:r.x/t,v1:(r.y+Xm)/t,u2:(r.x+g.width)/t,v2:(r.y-Xm*Um)/t,colourComponent:r.colourComponent,textureBank:r.textureBank,width:g.width};r.x+=g.width+Wm}}var ny=2048,ry=256,iy=ry/2;function oy(e,t,n){var r,i=Object.keys(e);if(i.length){var o=ay(i.length),a=ig(o,0,n,"FontIcon");r=a.canvas;var u=ry-2*4,s=iy,f=0,l=1/o;a.fillStyle="rgb(0,0,0)";a.textAlign="center";var c=0,d=["rgba(255,0,0,1)","rgba(0,255,0,1)","rgba(0,0,255,1)","rgba(0,0,0,0)"];a.fillStyle="black";a.fillRect(0,0,o,o);a.fillStyle=d[0];a.globalCompositeOperation="lighter";for(var h=0,v=i.length;h<v;h++){var g=e[i[h]],p=Hn(a,g.t,u,!1,g.ff||t,!0),m=Math.max(p.width,p.height),y=0;if(m>u){y=(u-(m=u*(u/m)))/2}if(s+ry>o+128){s=iy;f+=ry}if(f>=o){s=iy;f=0;if(++c>2)throw Error("Maximum number of icons exceeded!");a.fillStyle=d[c]}g.textureBank=3;g.colourComponentTexture=c;g.u1=(s-u/2)*l;g.v1=f*l;g.u2=(s+u/2)*l;g.v2=(f+u)*l;a.textBaseline="top";a.font=m+"px "+ve(g.ff||t);a.fillText(g.t,s,f+y);s+=ry}}else{(r=document.createElement("canvas")).id="webglFontIconDebugCanvas";r.width=1;r.height=1}return{alphaChannel:!1,img:r,texture:void 0,rebuild:!1,size:0}}function ay(e){for(var t=512,n=12;t<ny;){if(e<=n)return t;t*=2;n*=4}return ny}var uy=6;function sy(e,t,n){for(var r=e.colourData,i=e.colourIndex,o=0;o<uy;o++){r[i++]=t[0];r[i++]=t[1];r[i++]=t[2];r[i++]=t[3]*n}e.colourIndex=i}function fy(e,t){var n=t||[0,0,0,0],r=e.shadowData,i=e.shadowIndex;r[i++]=n[0];r[i++]=n[1];r[i++]=n[2];r[i++]=0;r[i++]=n[0];r[i++]=n[1];r[i++]=n[2];r[i++]=1;r[i++]=n[0];r[i++]=n[1];r[i++]=n[2];r[i++]=2;r[i++]=n[0];r[i++]=n[1];r[i++]=n[2];r[i++]=2;r[i++]=n[0];r[i++]=n[1];r[i++]=n[2];r[i++]=1;r[i++]=n[0];r[i++]=n[1];r[i++]=n[2];r[i++]=3;e.shadowIndex=i}var ly=new Float32Array(8);function cy(e,t,n,r,i,o,a,u,s){var f,l=e.positionIndex,c=e.positionData;if(s&&a>-1){br(ly,t,n,r,i,u,a);f=-1}else{ly[0]=t;ly[1]=n;ly[2]=r;ly[3]=n;ly[4]=t;ly[5]=i;ly[6]=r;ly[7]=i;f=u.positionIndex[a]}c[l++]=ly[0];c[l++]=ly[1];c[l++]=o;c[l++]=f;c[l++]=ly[2];c[l++]=ly[3];c[l++]=o;c[l++]=f;c[l++]=ly[4];c[l++]=ly[5];c[l++]=o;c[l++]=f;c[l++]=ly[4];c[l++]=ly[5];c[l++]=o;c[l++]=f;c[l++]=ly[2];c[l++]=ly[3];c[l++]=o;c[l++]=f;c[l++]=ly[6];c[l++]=ly[7];c[l++]=o;c[l++]=f;e.positionIndex=l}function dy(e,t,n,r,i,o,a,u,s,f,l,c,d,h){var v=e.textureData,g=e.textureIndex;v[g++]=t;v[g++]=n;v[g++]=o;v[g++]=a;v[g++]=f;v[g++]=l;v[g++]=c;v[g++]=d;v[g++]=h;v[g++]=r;v[g++]=n;v[g++]=u;v[g++]=a;v[g++]=f;v[g++]=l;v[g++]=c;v[g++]=d;v[g++]=h;v[g++]=t;v[g++]=i;v[g++]=o;v[g++]=s;v[g++]=f;v[g++]=l;v[g++]=c;v[g++]=d;v[g++]=h;v[g++]=t;v[g++]=i;v[g++]=o;v[g++]=s;v[g++]=f;v[g++]=l;v[g++]=c;v[g++]=d;v[g++]=h;v[g++]=r;v[g++]=n;v[g++]=u;v[g++]=a;v[g++]=f;v[g++]=l;v[g++]=c;v[g++]=d;v[g++]=h;v[g++]=r;v[g++]=i;v[g++]=u;v[g++]=s;v[g++]=f;v[g++]=l;v[g++]=c;v[g++]=d;v[g++]=h;e.textureIndex=g}var hy=[0,0,0,0],vy=[255,255,255,255];function gy(e,t,n){var r=e.a,i=n.all||t||r.dirty>0;r.dirty--;return i}var py={dashed:2,dotted:3,flow:4};function my(e,t,n,r,i,o,a,u){(a||u.all||u.shadow)&&fy(r.triangleBuffers,e.wsc);(u.colours||a||u.all)&&sy(r.triangleBuffers,n,o);if(a||u.all||r.useAbsolutePosition){var s=e.x1,f=e.y1,l=e.x2,c=e.y2,d=0|e.vx;cy(r.triangleBuffers,s,f,l,c,d,e.anchorIndex,i,r.useAbsolutePosition)}if(u.textures||a||u.all){var h=void 0,v=void 0,g=void 0,p=void 0,m=0,y=t;if("ci"!==e.s||y.isMissing){v=t.u1;h=t.v1;p=t.u2;g=t.v2}else{m="width"===y.maxDimension?(e.y2-e.y1)/2:(e.x2-e.x1)/2;v=y.cu1;h=y.cv1;p=y.cu2;g=y.cv2}dy(r.triangleBuffers,v,h,p,g,0,0,1,1,t.textureBank,t.colourComponentTexture,m,0,0)}}function yy(e,t,n,r,i,o,a){if(e){"_background"===n.id&&(n.wsc=hy);my(n,a.get(n.u),vy,t,n.a,r,i,o)}else t.triangleBuffers.skip()}function by(e,t,n,r,i,o,a){if(e){my(n,a[n.t+(n.ff||"")],n.wc,t,n.a,r,i,o)}else t.triangleBuffers.skip()}var xy=[0,1,0,1],wy=[0,0,2,2];function Ay(e,t,n,r,i,o,a,u,s,f,l,c,d,h){var v=l.elementData,g=l.elementIntegerData,p=l.elementDataIndex;if(d||h.all){var m=l.elementIndex,y=l.elementIndexIndex,b=l.elementMappingIndex;m[y]=b;m[y+1]=b+1;m[y+2]=b+2;m[y+3]=b+2;m[y+4]=b+1;m[y+5]=b+3}l.elementIndexIndex+=6;l.elementMappingIndex+=4;for(var x=0,w=0;w<4;w++){if(d||h.all||h.positions){v[p]=e;v[p+1]=t;v[p+2]=n;v[p+3]=r;v[p+4]=s}if(d||h.all){v[p+5]=f;g[x=(p+6)*Float32Array.BYTES_PER_ELEMENT]=xy[w];g[x+1]=wy[w];g[x+2]=0;g[x+3]=u;g[x+4]=i[0];g[x+5]=i[1];g[x+6]=i[2];g[x+7]=i[3]*c;g[x+8]=o[0];g[x+9]=o[1];g[x+10]=o[2];g[x+11]=o[3]*c;var A=a||[0,0,0];g[x+12]=A[0];g[x+13]=A[1];g[x+14]=A[2]}l.elementDataIndex+=10;p=l.elementDataIndex}}function My(e,t,n,r,i,o){if(e){var a=py[n.ls]||0;Ay(n.x1,n.y1,n.x2,n.y2,n.wc,n.wc2||n.wc,n.wsc,a,n.w,n.flowVelocity,t.lineBuffers,r,i,o)}else t.lineBuffers.skip()}function Iy(e,t,n,r,i,o,a,u,s,f,l,c,d,h,v,g,p){var m=h||0,y=v||0;if(d.all||c){fy(s.triangleBuffers,i||[0,0,0,0]);sy(s.triangleBuffers,r,l)}if(d.all||c||s.useAbsolutePosition){var b=void 0;b=g?-o:o;var x=2*n,w=e-n,A=t-n,M=w+x,I=A+x;cy(s.triangleBuffers,w,A,M,I,b,p,f,s.useAbsolutePosition)}(d.all||d.textures||c)&&dy(s.triangleBuffers,a,u,a,u,0,0,1,1,-1,-1,n,m,y)}function Ey(e,t,n,r,i,o){n.fi&&(e?Iy(n.x,n.y,n.r,n.wfc,n.wsc,0,.5,.5,t,n.a,r,i,o,null,null,!1,n.anchorIndex):t.triangleBuffers.skip());if(n.bw>0)if(e){var a=py[n.bs]||0;Iy(n.x,n.y,n.r,n.wbc,n.wsc,n.bw,.5,.5,t,n.a,r,i,o,null,null,a>1,n.anchorIndex)}else t.triangleBuffers.skip()}var ky=6,Cy=4;function Sy(e,t,n,r,i,o){for(var a=t.shadowIndex,u=0;u<Cy;u++)for(var s=0;s<ky;s++){e[a++]=n;e[a++]=r;e[a++]=i;e[a++]=o}t.shadowIndex=a}function Ty(e,t,n){for(var r=t.coreIndex,i=1;i<=Cy;i++){e[r]=i;e[r+1]=n;e[r+3]=i+1;e[r+4]=n;e[r+6]=-i;e[r+7]=n;e[r+9]=-i;e[r+10]=n;e[r+12]=i+1;e[r+13]=n;e[r+15]=-(i+1);e[r+16]=n;r+=18}t.coreIndex=r}function Ry(e,t,n,r,i,o,a,u){for(var s=n,f=r,l=t.positionIndex,c=0;c<Cy;c++)for(var d=0;d<ky;d++){e[l++]=s;e[l++]=f;e[l++]=i;e[l++]=o;e[l++]=a;e[l++]=u}t.positionIndex=l}function Ly(e,t,n,r,i){for(var o=t.colourIndex,a=0;a<Cy;a++)for(var u=0;u<ky;u++){e[o++]=n[0];e[o++]=n[1];e[o++]=n[2];e[o++]=n[3]*i;e[o++]=r[0];e[o++]=r[1];e[o++]=r[2];e[o++]=r[3]*i}t.colourIndex=o}function By(e,t,n,r,i,o,a,u,s,f,l,c,d,h,v,g){var p=f||[0,0,0,0];if(v||g.all){Sy(e.shadowData,e,p[0],p[1],p[2],d);var m=u,y=s,b=c;if(i<0){m=s;y=u;b=-c}Ly(e.colourData,e,m,y,h);Ty(e.coreData,e,b);Ry(e.positionData,e,t,n,r,o,a,l)}else g.positions&&Ry(e.positionData,e,t,n,r,o,a,l)}function Gy(e,t,n,r,i,o){if(n.isDonut)e?Iy(n.x,n.y,n.r,n.wbc,n.wsc,n.bw,.5,.5,t,n.a,r,i,o,n.sa,n.ea,!1,0):t.triangleBuffers.skip();else if(e){var a=py[n.ls]||1;By(t.arcBuffers,n.x,n.y,n.r,n.off,n.sa,n.ea,n.wbc,n.wbc2||n.wbc,n.wsc,n.bw,n.flowVelocity,a,r,i,o)}else t.arcBuffers.skip()}function Oy(e,t,n,r,i,o,a,u,s,f,l,c,d,h){var v=f||0;(d||h.all)&&fy(a.triangleBuffers,e.wsc);(d||h.all)&&sy(a.triangleBuffers,o,s);(d||h.all||a.useAbsolutePosition)&&cy(a.triangleBuffers,t,n,r,i,v,e.anchorIndex,u,a.useAbsolutePosition);if(h.textures||d||h.all){var g=r-t,p=i-n;dy(a.triangleBuffers,g,p,0,0,g,p,g,p,c,0,-v,l,0)}}function Zy(e,t,n,r,i,o){var a=n.fi,u=n.bw>0;if(e){a&&Oy(n,n.x1,n.y1,n.x2,n.y2,n.wfc,t,n.a,r,0,0,-1,i,o);if(u){var s=(py[n.bs]||0)>1?-3:-1;Oy(n,n.x1,n.y1,n.x2,n.y2,n.wbc,t,n.a,r,n.bw,0,s,i,o)}}else{a&&t.triangleBuffers.skip();u&&t.triangleBuffers.skip()}}function Yy(e,t,n,r,i,o){var a=n.fi,u=n.bw>0;if(e){a&&Oy(n,n.x1,n.y1,n.x2,n.y2,n.wfc,t,n.a,r,0,n.r,-1,i,o);if(u){var s=(py[n.bs]||0)>1?-3:-1;Oy(n,n.x1,n.y1,n.x2,n.y2,n.wbc,t,n.a,r,n.bw,n.r,s,i,o)}}else{a&&t.triangleBuffers.skip();u&&t.triangleBuffers.skip()}}var Fy=.109375;function zy(e,t,n,r,i,o,a,u){dy(e,t,n,r,i,o,o,o,o,u,a,0,0,0)}function Py(e,t,n,r,i,o,a,u,s){if(u.all||a||s){var f=Fy,l=0;t.fs!==hn&&(f=vn/r*(t.fs/vn));for(var c=t.wmargin,d=t.fs*(t.pf/2),h=t.x1,v=t.y1+t.yOffset+d,g=0,p=n.length;g<p;g++){var m=n[g],y=r*f;fy(e,hy);sy(e,t.wc,o);var b=m.width*f,x=0;m.textureBank<3&&(x=y*Um);cy(e,h+l+c,v+y,h+(l+b)+c,v-x,0,t.anchorIndex,i,s);zy(e,m.u1,m.v1,m.u2,m.v2,y,m.colourComponent,m.textureBank);l+=b}}}function Dy(e,t,n,r,i,o,a,u){if(n.back)if(e){var s=n.fs*n.pf;Oy(n,n.x1,n.y1,n.x2,n.y2+s,n.wbc,t,n.a,r,0,0,-4,i,o)}else t.triangleBuffers.skip();e?Py(t.triangleBuffers,n,a,u,n.a,r,i,o,t.useAbsolutePosition):t.triangleBuffers.skipMany(a.length)}var Vy=5,Wy=3;function Xy(e,t,n,r,i){for(var o=t.shadowIndex,a=0;a<Wy;a++){e[o++]=n;e[o++]=r;e[o++]=i;e[o++]=Vy+a}t.shadowIndex=o}function Uy(e,t){var n=t.coreIndex;e[n++]=0;e[n++]=1;e[n++]=0;e[n++]=1;e[n++]=0;e[n++]=0;e[n++]=0;e[n++]=0;e[n++]=1;t.coreIndex=n}function Ny(e,t,n,r,i,o,a,u){var s=t.positionIndex;e[s++]=n;e[s++]=r;e[s++]=i;e[s++]=o;e[s++]=a;e[s++]=u;e[s++]=n;e[s++]=r;e[s++]=i;e[s++]=o;e[s++]=a;e[s++]=u;e[s++]=n;e[s++]=r;e[s++]=i;e[s++]=o;e[s++]=a;e[s++]=u;t.positionIndex=s}function jy(e,t,n,r,i,o,a){for(var u=t.colourIndex,s=0;s<Wy;s++){e[u++]=n;e[u++]=r;e[u++]=i;e[u++]=o*a;e[u++]=n;e[u++]=r;e[u++]=i;e[u++]=o*a}t.colourIndex=u}function Ky(e,t,n,r,i,o,a,u,s,f,l,c){var d=s||[0,0,0];(l||c.all)&&Xy(e.shadowData,e,d[0],d[1],d[2]);(c.colours||l||c.all)&&jy(e.colourData,e,u[0],u[1],u[2],u[3],f);(l||c.all)&&Uy(e.coreData,e);(c.positions||l||c.all)&&Ny(e.positionData,e,t,n,r,i,o,a)}function Hy(e,t,n,r,i,o,a,u,s,f,l,c){var d,h=e.elementData,v=e.elementIntegerData,g=e.elementDataIndex;if(l||c.all){var p=e.elementIndex,m=e.elementIndexIndex,y=e.elementMappingIndex;p[m]=y;p[m+1]=y+1;p[m+2]=y+2;d=s||[0,0,0,0]}e.elementIndexIndex+=3;e.elementMappingIndex+=3;var b=0;h[g]=t;h[g+1]=n;h[g+2]=r;h[g+3]=i;h[g+4]=o;h[g+5]=a;if(l||c.all){v[b=(g+6)*Float32Array.BYTES_PER_ELEMENT]=0;v[b+1]=1;v[b+2]=0;v[b+3]=Vy;v[b+4]=u[0];v[b+5]=u[1];v[b+6]=u[2];v[b+7]=u[3]*f;v[b+8]=u[0];v[b+9]=u[1];v[b+10]=u[2];v[b+11]=u[3]*f;v[b+12]=d[0];v[b+13]=d[1];v[b+14]=d[2];v[b+15]=0}e.elementDataIndex+=10;h[g=e.elementDataIndex]=t;h[g+1]=n;h[g+2]=r;h[g+3]=i;h[g+4]=o;h[g+5]=a;if(l||c.all){v[b=(g+6)*Float32Array.BYTES_PER_ELEMENT]=1;v[b+1]=0;v[b+2]=0;v[b+3]=Vy;v[b+4]=u[0];v[b+5]=u[1];v[b+6]=u[2];v[b+7]=u[3]*f;v[b+8]=u[0];v[b+9]=u[1];v[b+10]=u[2];v[b+11]=u[3]*f;v[b+12]=d[0];v[b+13]=d[1];v[b+14]=d[2];v[b+15]=1}e.elementDataIndex+=10;h[g=e.elementDataIndex]=t;h[g+1]=n;h[g+2]=r;h[g+3]=i;h[g+4]=o;h[g+5]=a;if(l||c.all){v[b=(g+6)*Float32Array.BYTES_PER_ELEMENT]=0;v[b+1]=0;v[b+2]=1;v[b+3]=Vy;v[b+4]=u[0];v[b+5]=u[1];v[b+6]=u[2];v[b+7]=u[3]*f;v[b+8]=u[0];v[b+9]=u[1];v[b+10]=u[2];v[b+11]=u[3]*f;v[b+12]=d[0];v[b+13]=d[1];v[b+14]=d[2];v[b+15]=2}e.elementDataIndex+=10}function _y(e,t,n,r,i,o){var a=n.x1,u=n.y1,s=n.x2,f=n.y2,l=n.x3,c=n.y3;n.arrowhead===ui.Line?Hy(t.lineBuffers,a,u,s,f,l,c,n.wfc,n.wsc,r,i,o):n.arrowhead===ui.Arc&&Ky(t.arcBuffers,a,u,s,f,l,c,n.wfc,n.wsc,r,i,o)}var Jy=3;function Qy(e,t,n,r,i,o,a,u,s,f,l,c,d,h){var v,g,p=t,m=n,y=r,b=i,x=o,w=a,A=l.positionIndex[e.anchorIndex],M=e.wsc||[0,0,0,0];if(h.all||h.shadow||d)for(g=0;g<Jy;g++){var I=f.triangleBuffers.shadowData,E=f.triangleBuffers.shadowIndex;I[E++]=M[0];I[E++]=M[1];I[E++]=M[2];I[E++]=0;f.triangleBuffers.shadowIndex=E}if(h.all||h.colours||d)for(g=0;g<Jy;g++){var k=f.triangleBuffers.colourData,C=f.triangleBuffers.colourIndex;k[C++]=u[0];k[C++]=u[1];k[C++]=u[2];k[C++]=u[3]*c;f.triangleBuffers.colourIndex=C}if(f.useAbsolutePosition&&e.anchorIndex>-1){var S=l.anchorBuffer.getData(),T=S[A],R=S[A+1],L=S[A+2];if(L){var B=Math.sin(-L),G=Math.cos(-L),O=p*G+m*B,Z=m*G-p*B;p=O;m=Z;Z=b*G-y*B;y=O=y*G+b*B;b=Z;Z=w*G-x*B;x=O=x*G+w*B;w=Z}p+=T;m+=R;y+=T;b+=R;x+=T;w+=R;A=-1}if(h.all||d||f.useAbsolutePosition){v=f.triangleBuffers.positionIndex;var Y=f.triangleBuffers.positionData;Y[v++]=p;Y[v++]=m;Y[v++]=0;Y[v++]=A;Y[v++]=y;Y[v++]=b;Y[v++]=0;Y[v++]=A;Y[v++]=x;Y[v++]=w;Y[v++]=0;Y[v++]=A;f.triangleBuffers.positionIndex=v}if(h.all||h.textures||d){v=f.triangleBuffers.textureIndex;var F=f.triangleBuffers.textureData;F[v++]=0;F[v++]=1;F[v++]=0;F[v++]=0;F[v++]=s;F[v++]=0;F[v++]=0;F[v++]=0;F[v++]=0;F[v++]=1;F[v++]=0;F[v++]=0;F[v++]=0;F[v++]=s;F[v++]=0;F[v++]=0;F[v++]=0;F[v++]=0;F[v++]=0;F[v++]=0;F[v++]=1;F[v++]=0;F[v++]=s;F[v++]=0;F[v++]=0;F[v++]=0;F[v++]=0;f.triangleBuffers.textureIndex=v}}function qy(e,t,n,r,i,o){if(n.arrowhead)_y(e,t,n,r,i,o);else{n.fi&&Qy(n,n.x1,n.y1,n.x2,n.y2,n.x3,n.y3,n.wfc,-2,t,n.a,r,i,o);n.bw>0&&Qy(n,n.x1,n.y1,n.x2,n.y2,n.x3,n.y3,n.wbc,-2,t,n.a,r,i,o)}}var $y=4,eb=4,tb=9,nb=4;function rb(e){var t,n=e.gl,r=$y*Float32Array.BYTES_PER_ELEMENT,i=tb*Float32Array.BYTES_PER_ELEMENT,o=nb*Uint8Array.BYTES_PER_ELEMENT,a=eb*Uint8Array.BYTES_PER_ELEMENT;if(!n.triangleShader){var u=Sp(n,"triangle-vertex",n.VERTEX_SHADER),s=Sp(n,"triangle-fragment",n.FRAGMENT_SHADER);t=Ep(n,u,s);n.triangleShader={vertexShader:u,fragmentShader:s,program:t}}t=n.triangleShader.program;var f={transform:n.getUniformLocation(t,"u_transform"),textures:n.getUniformLocation(t,"u_image[0]"),resolution:n.getUniformLocation(t,"u_resolution"),hitTest:n.getUniformLocation(t,"u_hitTest"),shadowType:n.getUniformLocation(t,"u_shadowType"),zoom:n.getUniformLocation(t,"u_zoom"),anchorTexture:n.getUniformLocation(t,"u_anchorTexture"),anchorTextureSize:n.getUniformLocation(t,"u_anchorTextureSize"),useAnchor:n.getUniformLocation(t,"u_useAnchor"),viewIndependent:n.getUniformLocation(t,"u_viewIndependent"),adaptiveStyling:n.getUniformLocation(t,"u_adaptiveStyling")},l={position:n.getAttribLocation(t,"a_position"),anchor:n.getAttribLocation(t,"a_anchor"),startAngle:n.getAttribLocation(t,"a_startAngle"),endAngle:n.getAttribLocation(t,"a_endAngle"),circleRadius:n.getAttribLocation(t,"a_circleRadius"),width:n.getAttribLocation(t,"a_width"),colour:n.getAttribLocation(t,"a_colour"),textCoord:n.getAttribLocation(t,"a_texCoord"),vertexIndex:n.getAttribLocation(t,"a_vertexIndex"),shadowColour:n.getAttribLocation(t,"a_hitTestColour"),textureBank:n.getAttribLocation(t,"a_textureBank")};function c(e,r,i,o,a,u,s,f,l,c,d,y,w){n.useProgram(t);x(r,u,s,f,l,0|e.shadowType,c,d,e.useView,w);b(e);v(e);g(e);p(e);m(e,y);e.triangleBuffers.needsResize=!1;h(i,o,a,c);var A=3*e.triangleBuffers.numOfTriangles;A>0&&n.drawArrays(n.TRIANGLES,0,A)}function d(){kp(n,t)}function h(e,t,n,r){var i,o;for(i=0,o=e.atlases.length;i<o;i++)y(e.atlases[i],i);t&&y(t,3);for(i=0,o=n.length;i<o;i++)y(n[i],i+4);y(r,7)}function v(e){n.bindBuffer(n.ARRAY_BUFFER,e.triangleBuffers.shadowBuffer);(e.alwaysUpdate||e.rebuildOptions.all||e.rebuildOptions.shadow)&&(e.triangleBuffers.needsResize?n.bufferData(n.ARRAY_BUFFER,e.triangleBuffers.shadowData,n.STATIC_DRAW):n.bufferSubData(n.ARRAY_BUFFER,0,e.triangleBuffers.shadowData));n.enableVertexAttribArray(l.shadowColour);n.enableVertexAttribArray(l.vertexIndex);n.vertexAttribPointer(l.shadowColour,3,n.UNSIGNED_BYTE,!1,a,0);n.vertexAttribPointer(l.vertexIndex,1,n.UNSIGNED_BYTE,!1,a,3)}function g(e){n.bindBuffer(n.ARRAY_BUFFER,e.triangleBuffers.textureBuffer);(e.rebuildOptions.textures||e.alwaysUpdate||e.rebuildOptions.all)&&(e.triangleBuffers.needsResize?n.bufferData(n.ARRAY_BUFFER,e.triangleBuffers.textureData,n.STATIC_DRAW):n.bufferSubData(n.ARRAY_BUFFER,0,e.triangleBuffers.textureData));n.enableVertexAttribArray(l.textCoord);n.enableVertexAttribArray(l.textureBank);n.enableVertexAttribArray(l.circleRadius);n.enableVertexAttribArray(l.startAngle);n.enableVertexAttribArray(l.endAngle);n.vertexAttribPointer(l.textCoord,4,n.FLOAT,!1,i,0);n.vertexAttribPointer(l.textureBank,2,n.FLOAT,!1,i,16);n.vertexAttribPointer(l.circleRadius,1,n.FLOAT,!1,i,24);n.vertexAttribPointer(l.startAngle,1,n.FLOAT,!1,i,28);n.vertexAttribPointer(l.endAngle,1,n.FLOAT,!1,i,32)}function p(e){n.bindBuffer(n.ARRAY_BUFFER,e.triangleBuffers.colourBuffer);(e.rebuildOptions.colours||e.alwaysUpdate||e.rebuildOptions.all)&&(e.triangleBuffers.needsResize?n.bufferData(n.ARRAY_BUFFER,e.triangleBuffers.colourData,n.STATIC_DRAW):n.bufferSubData(n.ARRAY_BUFFER,0,e.triangleBuffers.colourData));n.enableVertexAttribArray(l.colour);n.vertexAttribPointer(l.colour,4,n.UNSIGNED_BYTE,!1,o,0)}function m(e,t){n.bindBuffer(n.ARRAY_BUFFER,e.triangleBuffers.positionBuffer);(e.rebuildOptions.all||e.alwaysUpdate||e.rebuildOptions.positions&&t)&&(e.triangleBuffers.needsResize?n.bufferData(n.ARRAY_BUFFER,e.triangleBuffers.positionData,n.STATIC_DRAW):n.bufferSubData(n.ARRAY_BUFFER,0,e.triangleBuffers.positionData));n.enableVertexAttribArray(l.position);n.enableVertexAttribArray(l.width);n.enableVertexAttribArray(l.anchor);n.vertexAttribPointer(l.position,2,n.FLOAT,!1,r,0);n.vertexAttribPointer(l.width,1,n.FLOAT,!1,r,8);n.vertexAttribPointer(l.anchor,1,n.FLOAT,!1,r,12)}function y(e,t){n.activeTexture(n["TEXTURE"+t]);if(!e.texture||e.rebuild){e.texture=n.createTexture();n.bindTexture(n.TEXTURE_2D,e.texture);n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!1);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE);if(e.data){n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1);n.texImage2D(n.TEXTURE_2D,0,n.LUMINANCE,e.size,e.size,0,n.LUMINANCE,n.FLOAT,e.data)
;n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST);e.data=void 0}else{var r=e.alphaChannel?n.RGBA:n.RGB;n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0);n.texImage2D(n.TEXTURE_2D,0,r,r,n.UNSIGNED_BYTE,e.img);n.generateMipmap(n.TEXTURE_2D);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR_MIPMAP_LINEAR);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR);e.img=void 0}e.rebuild=!1}else n.bindTexture(n.TEXTURE_2D,e.texture)}function b(e){e.triangleBuffers.positionBuffer||(e.triangleBuffers.positionBuffer=n.createBuffer());e.triangleBuffers.textureBuffer||(e.triangleBuffers.textureBuffer=n.createBuffer());e.triangleBuffers.colourBuffer||(e.triangleBuffers.colourBuffer=n.createBuffer());e.triangleBuffers.shadowBuffer||(e.triangleBuffers.shadowBuffer=n.createBuffer())}function x(e,t,r,i,o,a,u,s,l,c){n.uniform3f(f.resolution,t,r,i);n.uniform1f(f.hitTest,o?1:0);n.uniform1iv(f.textures,[0,1,2,3,4,5,6]);n.uniformMatrix4fv(f.transform,!1,e.get());n.uniform1f(f.shadowType,a);n.uniform1f(f.zoom,e.getZoomLevel());n.uniform1f(f.viewIndependent,l?0:1);n.uniform1i(f.anchorTexture,7);n.uniform1f(f.anchorTextureSize,u.size);n.uniform1i(f.useAnchor,s?1:0);n.uniform1f(f.adaptiveStyling,c&&c.zoom&&c.zoom.adaptiveStyling?1:0)}return{drawItems:c,finish:d}}var ib=10;function ob(e){var t,n=e,r=ib*Float32Array.BYTES_PER_ELEMENT;if(!n.lineShader){var i=Sp(n,"line-vertex",n.VERTEX_SHADER),o=Sp(n,"line-fragment",n.FRAGMENT_SHADER);t=Ep(n,i,o);n.lineShader={vertexShader:i,fragmentShader:o,program:t}}t=n.lineShader.program;n.getExtension("OES_standard_derivatives");n.getExtension("OES_element_index_uint");var a={position1:n.getAttribLocation(t,"a_position1"),position2:n.getAttribLocation(t,"a_position2"),position3:n.getAttribLocation(t,"a_position3"),colour:n.getAttribLocation(t,"a_colour"),colour2:n.getAttribLocation(t,"a_colour2"),vertexInfo:n.getAttribLocation(t,"a_vertexInfo"),shadowColour:n.getAttribLocation(t,"a_hitTestColour"),index:n.getAttribLocation(t,"a_index")},u={hitTest:n.getUniformLocation(t,"u_hitTest"),zoom:n.getUniformLocation(t,"u_zoom"),transform:n.getUniformLocation(t,"u_transform"),resolution:n.getUniformLocation(t,"u_resolution"),shadowType:n.getUniformLocation(t,"u_shadowType"),viewIndependent:n.getUniformLocation(t,"u_viewIndependent"),gradientStartFraction:n.getUniformLocation(t,"u_gradientStartFraction"),time:n.getUniformLocation(t,"u_time"),adaptiveStyling:n.getUniformLocation(t,"u_adaptiveStyling")};function s(){kp(n,t)}function f(e,r,i,o,a,u,s,f,p){n.useProgram(t);g();l(i,o,a,u,s,0|e.shadowType,e.useView,f,p);c(r);h(e,r);r.needsResize=!1;d(r);v(r);g()}function l(e,t,r,i,o,a,s,f,l){n.uniform3f(u.resolution,t,r,i);n.uniformMatrix4fv(u.transform,!1,e.get());n.uniform1f(u.hitTest,o?1:0);n.uniform1f(u.zoom,e.getZoomLevel());n.uniform1f(u.shadowType,a);n.uniform1f(u.viewIndependent,s?0:1);n.uniform1f(u.adaptiveStyling,f&&f.zoom&&f.zoom.adaptiveStyling?1:0);var c=0;o||(c=(1-f.linkStyle.transition)/2);n.uniform1f(u.gradientStartFraction,c);n.uniform1f(u.time,l)}function c(e){e.elementBuffer||(e.elementBuffer=n.createBuffer());e.indexBuffer||(e.indexBuffer=n.createBuffer())}function d(e){n.bindBuffer(n.ARRAY_BUFFER,e.elementBuffer);n.enableVertexAttribArray(a.position1);n.enableVertexAttribArray(a.position2);n.enableVertexAttribArray(a.position3);n.enableVertexAttribArray(a.vertexInfo);n.enableVertexAttribArray(a.colour);n.enableVertexAttribArray(a.colour2);n.enableVertexAttribArray(a.shadowColour);n.enableVertexAttribArray(a.index);n.vertexAttribPointer(a.position1,2,n.FLOAT,!1,r,0);n.vertexAttribPointer(a.position2,2,n.FLOAT,!1,r,8);n.vertexAttribPointer(a.position3,2,n.FLOAT,!1,r,16);n.vertexAttribPointer(a.vertexInfo,4,n.UNSIGNED_BYTE,!1,r,24);n.vertexAttribPointer(a.colour,4,n.UNSIGNED_BYTE,!1,r,28);n.vertexAttribPointer(a.colour2,4,n.UNSIGNED_BYTE,!1,r,32);n.vertexAttribPointer(a.shadowColour,3,n.UNSIGNED_BYTE,!1,r,36);n.vertexAttribPointer(a.index,1,n.UNSIGNED_BYTE,!1,r,39)}function h(e,t){if(e.alwaysUpdate||e.rebuildOptions.all||e.rebuildOptions.positions||e.rebuildOptions.colours||e.rebuildOptions.textures||e.rebuildOptions.shadow){n.bindBuffer(n.ARRAY_BUFFER,t.elementBuffer);t.needsResize?n.bufferData(n.ARRAY_BUFFER,t.elementData,n.DYNAMIC_DRAW):n.bufferSubData(n.ARRAY_BUFFER,0,t.elementData);n.bindBuffer(n.ARRAY_BUFFER,null);n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t.indexBuffer);if(t.needsResize){n.bufferData(n.ELEMENT_ARRAY_BUFFER,t.elementIndex,n.DYNAMIC_DRAW);t.needsResize=!1}else n.bufferSubData(n.ELEMENT_ARRAY_BUFFER,0,t.elementIndex);n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,null)}}function v(e){n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.indexBuffer);var t=6*e.numOfLines+3*e.numOfArrowheads;t>0&&n.drawElements(n.TRIANGLES,t,n.UNSIGNED_INT,0)}function g(){n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,null);n.bindBuffer(n.ARRAY_BUFFER,null)}return{drawItems:f,finish:s}}var ab=6,ub=3,sb=4,fb=8,lb=ab*Float32Array.BYTES_PER_ELEMENT,cb=ub*Float32Array.BYTES_PER_ELEMENT,db=sb*Uint8Array.BYTES_PER_ELEMENT,hb=fb*Uint8Array.BYTES_PER_ELEMENT;function vb(e){var t,n=e;if(!n.arcShader){var r=Sp(n,"line-arc-vertex",n.VERTEX_SHADER),i=Sp(n,"line-fragment",n.FRAGMENT_SHADER);t=Ep(n,r,i);n.arcShader={vertexShader:r,fragmentShader:i,program:t}}t=n.arcShader.program;var o={position:n.getAttribLocation(t,"a_position"),radius:n.getAttribLocation(t,"a_radius"),startAngle:n.getAttribLocation(t,"a_startAngle"),endAngle:n.getAttribLocation(t,"a_endAngle"),width:n.getAttribLocation(t,"a_width"),colour:n.getAttribLocation(t,"a_colour"),colour2:n.getAttribLocation(t,"a_colour2"),core:n.getAttribLocation(t,"a_core"),type:n.getAttribLocation(t,"a_lineType"),shadowColour:n.getAttribLocation(t,"a_hitTestColour")},a={hitTest:n.getUniformLocation(t,"u_hitTest"),zoom:n.getUniformLocation(t,"u_zoom"),transform:n.getUniformLocation(t,"u_transform"),resolution:n.getUniformLocation(t,"u_resolution"),shadowType:n.getUniformLocation(t,"u_shadowType"),gradientStartFraction:n.getUniformLocation(t,"u_gradientStartFraction"),time:n.getUniformLocation(t,"u_time"),adaptiveStyling:n.getUniformLocation(t,"u_adaptiveStyling")};function u(){kp(n,t)}function s(e,r,i,o,a,u,s,p){n.useProgram(t);f(r,i,o,a,u,0|e.shadowType,s,p);l(e);c(e);d(e);v(e);h(e);e.arcBuffers.needsResize=!1;e.arcBuffers.totalnumOfVertices>0&&n.drawArrays(n.TRIANGLES,0,e.arcBuffers.totalnumOfVertices);g()}function f(e,t,r,i,o,u,s,f){n.uniform3f(a.resolution,t,r,i);n.uniformMatrix4fv(a.transform,!1,e.get());n.uniform1f(a.hitTest,o?1:0);n.uniform1f(a.zoom,e.getZoomLevel());n.uniform1f(a.shadowType,u);n.uniform1f(a.adaptiveStyling,s&&s.zoom&&s.zoom.adaptiveStyling?1:0);var l=0;o||(l=(1-s.linkStyle.transition)/2);n.uniform1f(a.gradientStartFraction,l);n.uniform1f(a.time,f)}function l(e){e.arcBuffers.positionBuffer||(e.arcBuffers.positionBuffer=n.createBuffer());e.arcBuffers.colourBuffer||(e.arcBuffers.colourBuffer=n.createBuffer());e.arcBuffers.shadowBuffer||(e.arcBuffers.shadowBuffer=n.createBuffer());e.arcBuffers.coreBuffer||(e.arcBuffers.coreBuffer=n.createBuffer())}function c(e){var t=e.arcBuffers;n.bindBuffer(n.ARRAY_BUFFER,t.colourBuffer);(e.rebuildOptions.colours||e.alwaysUpdate||e.rebuildOptions.all)&&(t.needsResize?n.bufferData(n.ARRAY_BUFFER,t.colourData,n.STATIC_DRAW):n.bufferSubData(n.ARRAY_BUFFER,0,t.colourData));n.enableVertexAttribArray(o.colour);n.enableVertexAttribArray(o.colour2);n.vertexAttribPointer(o.colour,4,n.UNSIGNED_BYTE,!1,hb,0);n.vertexAttribPointer(o.colour2,4,n.UNSIGNED_BYTE,!1,hb,4)}function d(e){var t=e.arcBuffers;n.bindBuffer(n.ARRAY_BUFFER,t.shadowBuffer);(e.alwaysUpdate||e.rebuildOptions.all||e.rebuildOptions.shadow)&&(t.needsResize?n.bufferData(n.ARRAY_BUFFER,t.shadowData,n.STATIC_DRAW):n.bufferSubData(n.ARRAY_BUFFER,0,t.shadowData));n.enableVertexAttribArray(o.shadowColour);n.enableVertexAttribArray(o.type);n.vertexAttribPointer(o.shadowColour,3,n.UNSIGNED_BYTE,!1,db,0);n.vertexAttribPointer(o.type,1,n.UNSIGNED_BYTE,!1,db,3)}function h(e){var t=e.arcBuffers;n.bindBuffer(n.ARRAY_BUFFER,t.coreBuffer);(e.alwaysUpdate||e.rebuildOptions.all||e.rebuildOptions.shadow)&&(t.needsResize?n.bufferData(n.ARRAY_BUFFER,t.coreData,n.STATIC_DRAW):n.bufferSubData(n.ARRAY_BUFFER,0,t.coreData));n.enableVertexAttribArray(o.core);n.vertexAttribPointer(o.core,3,n.FLOAT,!1,cb,0)}function v(e){var t=e.arcBuffers;n.bindBuffer(n.ARRAY_BUFFER,t.positionBuffer);(e.rebuildOptions.positions||e.alwaysUpdate||e.rebuildOptions.all)&&(t.needsResize?n.bufferData(n.ARRAY_BUFFER,t.positionData,n.STATIC_DRAW):n.bufferSubData(n.ARRAY_BUFFER,0,t.positionData));n.enableVertexAttribArray(o.position);n.enableVertexAttribArray(o.radius);n.enableVertexAttribArray(o.startAngle);n.enableVertexAttribArray(o.endAngle);n.enableVertexAttribArray(o.width);n.vertexAttribPointer(o.position,2,n.FLOAT,!1,lb,0);n.vertexAttribPointer(o.radius,1,n.FLOAT,!1,lb,8);n.vertexAttribPointer(o.startAngle,1,n.FLOAT,!1,lb,12);n.vertexAttribPointer(o.endAngle,1,n.FLOAT,!1,lb,16);n.vertexAttribPointer(o.width,1,n.FLOAT,!1,lb,20)}function g(){n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,null);n.bindBuffer(n.ARRAY_BUFFER,null)}return{drawItems:s,finish:u}}var gb=4;function pb(e,t,n){var r,i,o={},a={},u="",s="",f={},l={textAtlas:!1,fontIcons:!1,imageAtlas:!1};function c(t,r){t.clearTextureAtlas(e.imageAtlases);e.imageAtlases=cg(n,r)}function d(t,n,o,a){i=a.isFloatingPointSupported(o._rendering.disableFloatTexture);if(n.all){e.layersToDraw.length=0;r=Qn(e.canvas);l.textAtlas=!1;l.fontIcons=!1;l.imageAtlas=!1}var u=o.linkStyle,s=!(!u||"along"!==u.glyphs);t.forEach((function(t){var r=L(e.allLayers,t,!!n.all);n.all&&e.layersToDraw.push(r);r.useAbsolutePosition=!i&&(n.all||n.positions||t.alwaysUpdate)||s&&r.id.indexOf("LINK")>-1;g(r,n,t.fbAlpha);if(p(n,t.alwaysUpdate)||r.useAbsolutePosition){var a=t.primitives,u=t.numOfPrimitives;h(o);v(o);if(n.all||t.alwaysUpdate){var f=r.lineBuffers,c=r.arcBuffers,d=r.triangleBuffers;m(f,c,d);for(var y=0;y<u;y++){R(t.primitives[y],f,c,d)}}if(!l.textAtlas&&!l.fontIcons&&!l.imageAtlas){E(r);w(a,u,r)}}}));A(a,o._rendering.showTextAtlas);M(a,o._rendering.showFontIconAtlas);I(a,o._rendering.showImageAtlas);if(l.textAtlas||l.fontIcons||l.imageAtlas){l.fontIcons=!1;l.textAtlas=!1;l.imageAtlas=!1;n.all=!0;d(t,n,o,a)}f={}}function h(e){D(e.fontFamily)&&(e.fontFamily="sans-serif");if(u!==e.fontFamily||null===u){u=e.fontFamily;l.textAtlas=!0}f[u]=!0;a[u]=!0}function v(e){if(e.iconFontFamily&&s!==e.iconFontFamily){s=e.iconFontFamily;l.fontIcons=!0}}function g(e,t,n){e.fbAlpha=n;e.rebuildOptions={all:t.all,colours:t.colours,textures:t.textures,shadow:t.shadow,positions:t.positions}}function p(e,t){return e.all||e.textures||e.positions||e.shadow||e.colours||t}function m(e,t,n){t.numOfTriangles=0;e.numOfLines=0;e.numOfArrowheads=0;n.numOfTriangles=0}var y={A:Gy,L:My,I:b,TR:qy,R:Zy,RR:Yy,C:Ey,T:x};function b(e,t,r,i,o,a){yy(e,t,r,i,o,a,n)}function x(n,i,a,s,f,c){if(c.all||f||i.useAbsolutePosition)if(a.isfi)by(n,i,a,s,f,c,o);else{Dy(n,i,a,s,f,c,t.getGlyphsFromText(a.t,a.ff,u,a.bo,l,r,e.textAtlas),e.textAtlas.fontSize)}}function w(t,n,r){for(var i,o=r.rebuildOptions,a=r.alwaysUpdate,u=0;u<n;u++){var s=1;(i=t[u]).a.bg&&(s*=e.alpha.background);i.a.gh&&(s*=e.alpha.ghost);var f=gy(i,a,o);y[i.p](f,r,i,s,a,o)}}function A(n,r){if(l.textAtlas||r){e.textAtlas&&n.clearTextureAtlas(e.textAtlas.atlases);e.textAtlas=Km(f,t,r);a=f}}function M(t,n){if(l.fontIcons||!e.fontIconAtlas||n){t.clearTextureAtlas(e.fontIconAtlas);e.fontIconAtlas=oy(o,s,n)}}function I(e,t){(l.imageAtlas||t)&&c(e,t)}function E(e){C(e.lineBuffers);S(e.arcBuffers);T(e.triangleBuffers)}function k(e,t,n){e.needsResize=e.needsResize||!t||n>t.length}function C(e){e.elementIndexIndex=0;e.elementMappingIndex=0;e.elementDataIndex=0;e.elementIntegerDataIndex=0;var t=e.numOfLines*ib*4;t+=e.numOfArrowheads*ib*3;var n=6*e.numOfLines+3*e.numOfArrowheads;k(e,e.elementData,t);k(e,e.elementIndex,n);if(e.needsResize){e.elementData=new Float32Array(t);e.elementIntegerData=new Uint8Array(e.elementData.buffer,0,e.elementData.length*Float32Array.BYTES_PER_ELEMENT);e.elementIndex=new Uint32Array(n)}}function S(e){e.positionIndex=0;e.colourIndex=0;e.shadowIndex=0;e.coreIndex=0;e.totalnumOfVertices=3*e.numOfTriangles;k(e,e.positionData,e.totalnumOfVertices*ab);t();n();r();i();function t(){var t=e.totalnumOfVertices*ab;e.needsResize&&(e.positionData=new Float32Array(t))}function n(){var t=e.totalnumOfVertices*fb;e.needsResize&&(e.colourData=new Uint8Array(t))}function r(){var t=e.totalnumOfVertices*sb;e.needsResize&&(e.shadowData=new Uint8Array(t))}function i(){var t=e.totalnumOfVertices*ub;e.needsResize&&(e.coreData=new Float32Array(t))}}function T(e){var t=3;e.positionIndex=0;e.colourIndex=0;e.textureIndex=0;e.shadowIndex=0;e.totalnumOfVertices=e.numOfTriangles*t;var n=e.totalnumOfVertices*$y;k(e,e.positionData,n);r();i();o();a();function r(){e.needsResize&&(e.positionData=new Float32Array(e.totalnumOfVertices*$y))}function i(){e.needsResize&&(e.colourData=new Uint8Array(e.totalnumOfVertices*nb))}function o(){e.needsResize&&(e.textureData=new Float32Array(e.totalnumOfVertices*tb))}function a(){e.needsResize&&(e.shadowData=new Uint8Array(e.totalnumOfVertices*eb))}}function R(t,n,i,u){switch(t.p){case dn.arc:t.isDonut?u.numOfTriangles+=2:i.numOfTriangles+=2*gb;break;case dn.line:n.numOfLines+=1;break;case dn.circle:t.bw>0&&(u.numOfTriangles+=2);t.fi&&(u.numOfTriangles+=2);break;case dn.rect:case dn.roundrect:t.fi&&(u.numOfTriangles+=2);t.bw>0&&(u.numOfTriangles+=2);break;case dn.text:var s=t.t,c=e.stringSplitter.unicodeAwareCharacters(s),d=c.length;if(t.isfi){var h=s+(t.ff||"");u.numOfTriangles+=2;if(!o[h]){l.fontIcons=!0;o[h]={t:s,ff:t.ff}}}else{if(t.ff){f[t.ff]=!0;if(!a[t.ff]){l.textAtlas=!0;a[t.ff]=!0}}t.back&&(u.numOfTriangles+=2);r&&(d=rt(c,s).result.length);u.numOfTriangles+=2*d}break;case dn.triangle:if(t.arrowhead>0)1===t.arrowhead?n.numOfArrowheads++:i.numOfTriangles++;else{t.fi&&u.numOfTriangles++;t.bw>0&&u.numOfTriangles++}break;case"I":u.numOfTriangles+=2}}function L(e,t,n){var r=e.get(t.id);if(r&&n)yb(r,t);else if(!r){r=bb(t);e.set(t.id,r)}return r}return{generate:d,updateImageTextures:c}}function yb(e,t){e.useFramebuffer=t.useFramebuffer;e.drawFramebuffer=t.drawFramebuffer;e.framebuffer=null;e.renderbuffer=null;e.framebufferTexture=null;e.fbAlpha=t.fbAlpha;e.useView=t.useView;e.shadowType=t.shadowType;e.rebuildOptions={};e.alwaysUpdate=t.alwaysUpdate;e.blatOverview=t.blatOverview;e.numOfPrimitives=t.numOfPrimitives;e.primitives=t.primitives;e.overview=t.overview;e.useAbsolutePosition=!1}function bb(e){var t={triangleBuffers:{colourIndex:0,needsResize:!1,numOfTriangles:0,positionIndex:0,shadowIndex:0,textureIndex:0,totalnumOfVertices:0,skip:function(){t.triangleBuffers.positionIndex+=6*$y},skipMany:function(e){t.triangleBuffers.positionIndex+=6*$y*e}},lineBuffers:{numOfLines:0,numOfArrowheads:0,needsResize:!1,elementDataIndex:0,elementDataIndexIndex:0,elementIndexIndex:0,elementIntegerDataIndex:0,elementMappingIndex:0,skip:function(){t.lineBuffers.elementDataIndex+=4*ib}},arcBuffers:{colourIndex:0,coreIndex:0,numOfTriangles:0,needsResize:!1,positionIndex:0,shadowIndex:0,totalnumOfVertices:0,skip:function(){t.arcBuffers.positionIndex+=6*ab*Cy}},id:e.id,useFramebuffer:e.useFramebuffer,drawFramebuffer:e.drawFramebuffer,framebuffer:null,renderbuffer:null,framebufferTexture:null,fbAlpha:e.fbAlpha,useView:e.useView,shadowType:e.shadowType,rebuildOptions:{},alwaysUpdate:e.alwaysUpdate,blatOverview:e.blatOverview,numOfPrimitives:e.numOfPrimitives,primitives:e.primitives,overview:e.overview,useAbsolutePosition:!1};return t}function xb(e){var t,n=e;if(!n.rttShader){var r=Sp(n,"renderToTexture-vertex",n.VERTEX_SHADER),i=Sp(n,"renderToTexture-fragment",n.FRAGMENT_SHADER);t=Ep(n,r,i);n.rttShader={vertexShader:r,fragmentShader:i,program:t}}t=n.rttShader.program;var o=new Float32Array([-1,-1,0,0,1,-1,1,0,-1,1,0,1,-1,1,0,1,1,-1,1,0,1,1,1,1]),a=n.createBuffer(),u={position:n.getAttribLocation(t,"a_position"),textCoord:n.getAttribLocation(t,"a_texCoord")},s={globalAlpha:n.getUniformLocation(t,"u_globalAlpha"),backgroundColour:n.getUniformLocation(t,"u_backgroundColour"),textures:n.getUniformLocation(t,"u_image")};function f(){kp(n,t)}function l(e,r,i,a){n.useProgram(t);h(e,a);c(i||o);d(r,0);n.drawArrays(n.TRIANGLES,0,6)}function c(e){n.bindBuffer(n.ARRAY_BUFFER,a);n.bufferData(n.ARRAY_BUFFER,e,n.STATIC_DRAW);n.enableVertexAttribArray(u.position);n.enableVertexAttribArray(u.textCoord);n.vertexAttribPointer(u.position,2,n.FLOAT,!1,4*Float32Array.BYTES_PER_ELEMENT,0);n.vertexAttribPointer(u.textCoord,2,n.FLOAT,!1,4*Float32Array.BYTES_PER_ELEMENT,8)}function d(e,t){n.activeTexture(n["TEXTURE"+t]);n.bindTexture(n.TEXTURE_2D,e)}function h(e,t){void 0===t&&(t=new Uint8Array([0,0,0,0]));n.uniform1f(s.globalAlpha,e);n.uniform4f(s.backgroundColour,t[0],t[1],t[2],t[3])}return{drawItems:l,finish:f}}function wb(e){var t,n,r,i,o,a,u=e.canvas,s=e.framebuffers,f=R(),l=ob(f),c=vb(f),d=rb(e),h=xb(f),v=null,g=new Uint8Array(4);function p(e){return!0!==e&&!!f.getExtension("OES_texture_float")}function m(t){b();c.finish();l.finish();d.finish();e.imageAtlases.forEach((function(e){W(e)}));e.textAtlas&&x(e.textAtlas.atlases);W(e.fontIconAtlas);e.layersToDraw=[];e.allLayers=new Map;f.flush();f.finish();if(t){f.deleteProgram(f.arcShader.program);f.deleteProgram(f.lineShader.program);f.deleteProgram(f.rttShader.program);f.deleteProgram(f.triangleShader.program);Object.keys(e).forEach((function(t){delete e[t]}))}f=void 0;e.gl=void 0;l=void 0;c=void 0;d=void 0;h=void 0}function y(e){f.deleteFramebuffer(e.framebuffer);f.deleteRenderbuffer(e.renderbuffer);f.deleteTexture(e.texture)}function b(){K(e.framebuffers).forEach(y);e.framebuffers={};s=e.framebuffers}function x(e){e&&(Array.isArray(e)?e.forEach(W):W(e))}var w={data:new Float32Array(4),size:2,rebuild:!1};function A(t,s,l,c,d,h,v,g,p,m){n=u.clientWidth;r=u.clientHeight;a=p;var y=u.width/n;i=f.drawingBufferWidth;o=f.drawingBufferHeight;var b=e.layersToDraw,x=G(t),A=performance.now();e.view=t;if(a&&(m.positions||m.all)){w.rebuild=!0;w.size=g.getTextureSize();w.data=g.getData()}if(0===d.length){d.push(k());d.push(k());d.push(k())}var M=!1,I=h._showShadowCanvas;P();f.viewport(0,0,f.drawingBufferWidth,f.drawingBufferHeight);f.clear(f.COLOR_BUFFER_BIT);for(var C=0,S=b.length;C<S;C++){var R=b[C];if(h.overview&&h.overview.shown&&R.blatOverview&&s)E(s,l,c,d,h,A);else{if(!(v&&!R.useView)){R.drawFramebuffer&&(M=!0);T(R.drawFramebuffer);O(R,x,n,r,y,l,c,d,h._showShadowCanvas,h,A);D(R)}if(R.useFramebuffer&&M){M=!1;P();B(R.useFramebuffer,I?1:R.fbAlpha);T(R.useFramebuffer);f.clearColor(0,0,0,0);f.clear(f.COLOR_BUFFER_BIT)}}}V()}function M(a,s){n=u.clientWidth;r=u.clientHeight;var l=u.width/n;i=f.drawingBufferWidth;o=f.drawingBufferHeight;if(e.layersToDraw.length>0){var c=G(e.view),d=i/u.clientWidth,h=a*d,v=o-s*d;T("shadow");f.viewport(0,0,f.drawingBufferWidth,f.drawingBufferHeight);f.clear(f.COLOR_BUFFER_BIT);for(var g=0,p=e.layersToDraw.length;g<p;g++){O(e.layersToDraw[g],c,n,r,l,e.textAtlas,e.fontIconAtlas,e.imageAtlases,!0,null,0)}h>=0&&v>=0&&h<i&&v<o&&f.readPixels(h,v,1,1,f.RGBA,f.UNSIGNED_BYTE,t);f.clear(f.COLOR_BUFFER_BIT);P()}return t}function I(e,t,n,r,i,o,a,u,s){P();f.clearColor(1,1,1,1);A(e,t,n,r,i,o,a,u,s,{all:!0});var l=new Uint8Array(f.drawingBufferWidth*f.drawingBufferHeight*4);f.readPixels(0,0,f.drawingBufferWidth,f.drawingBufferHeight,f.RGBA,f.UNSIGNED_BYTE,l);return l}function E(t,i,o,a,s,l){n=u.clientWidth;var c=u.width/n,d=t.width(),h=t.height(),v=G(t);T("overview",d*c,h*c);var g=sn(s.overview.backColour)||[255,255,255,255];g[3]=255;var p=new Uint8Array(g);f.clearColor(0,0,0,0);f.clear(f.COLOR_BUFFER_BIT);for(var m=e.layersToDraw,y=0,b=m.length;y<b;y++){var x=m[y];x.overview&&O(x,v,d,h,c,i,o,a,s._showShadowCanvas,s,l)}T(null);var w=L(d,h,n,r,s);B("overview",1,w,p);B("overview",1,w)}function k(){var e={alphaChannel:!1,img:g,rebuild:!1,size:0,texture:C()};f.texImage2D(f.TEXTURE_2D,0,f.RGBA,1,1,0,f.RGBA,f.UNSIGNED_BYTE,g);return e}function C(){var e=f.createTexture();f.bindTexture(f.TEXTURE_2D,e);f.pixelStorei(f.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1);f.pixelStorei(f.UNPACK_FLIP_Y_WEBGL,!1);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.NEAREST);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.NEAREST);return e}function S(e){e?f.bindFramebuffer(f.FRAMEBUFFER,e.framebuffer):P()}function T(e,t,n){void 0===t&&(t=0);void 0===n&&(n=0);var r=s[e]||null,i=f.RGBA,o=t||f.drawingBufferWidth,a=n||f.drawingBufferHeight,u=!1;if(r&&(r.bufferHeight!==n||r.bufferWidth!==t)){y(r);u=!0}if(e&&(!r||u)){r={framebuffer:f.createFramebuffer(),renderbuffer:f.createRenderbuffer(),texture:C(),bufferHeight:n,bufferWidth:t};s[e]=r;"shadow"===e&&(i=f.RGB);f.texImage2D(f.TEXTURE_2D,0,i,o,a,0,i,f.UNSIGNED_BYTE,null);f.bindFramebuffer(f.FRAMEBUFFER,r.framebuffer);f.bindRenderbuffer(f.RENDERBUFFER,r.renderbuffer);f.clearColor(0,0,0,0);f.renderbufferStorage(f.RENDERBUFFER,f.DEPTH_COMPONENT16,o,a);f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,r.texture,0);f.framebufferRenderbuffer(f.FRAMEBUFFER,f.DEPTH_ATTACHMENT,f.RENDERBUFFER,r.renderbuffer);var l=f.checkFramebufferStatus(f.FRAMEBUFFER);if(f.FRAMEBUFFER_COMPLETE!==l)throw new Error(l.toString())}S(r);f.viewport(0,0,o,a)}function R(){f=Mp(u,{antialias:!1,preferLowPowerToHighPerformance:!1,depth:!1,stencil:!1});e.gl=f;n=u.width;r=u.height;i=f.drawingBufferWidth;o=f.drawingBufferHeight;f.getExtension("OES_standard_derivatives");f.getExtension("OES_element_index_uint");f.viewport(0,0,i,o);f.blendFunc(f.ONE,f.ONE_MINUS_SRC_ALPHA);f.enable(f.BLEND);f.clearColor(0,0,0,0);e.framebuffers={};s=e.framebuffers;t=new Uint8Array(4);return f}function L(e,t,n,r,i){var o,a=1-e/n*2,u=1-t/r*2;switch(i.overview.p){case"ne":o=new Float32Array([a,u,0,0,1,u,1,0,a,1,0,1,a,1,0,1,1,u,1,0,1,1,1,1]);break;case"nw":o=new Float32Array([-1,u,0,0,-a,u,1,0,-1,1,0,1,-1,1,0,1,-a,u,1,0,-a,1,1,1]);break;case"sw":o=new Float32Array([-1,-1,0,0,-a,-1,1,0,-1,-u,0,1,-1,-u,0,1,-a,-1,1,0,-a,-u,1,1]);break;case"se":default:o=new Float32Array([a,-1,0,0,1,-1,1,0,a,-u,0,1,a,-u,0,1,1,-1,1,0,1,-u,1,1])}return o}function B(e,t,n,r){var i;s[e]&&(i=s[e].texture);h.drawItems(t,i,n,r)}function G(e){return e?{panX:e.offsetXtoWebglPanX(),panY:e.offsetYtoWebglPanY(),zoom:e.getZoomScale()}:{panX:0,panY:0,zoom:1}}function O(e,t,n,r,i,o,a,u,s,f,l){Z(e.useView,t.panX,t.panY,t.zoom);Y(e,e.lineBuffers,n,r,i,s,f,l);F(e,n,r,i,s,f,l);z(e,o,a,u,n,r,i,s,f)}function Z(e,t,n,r){v=Cp();if(e){v.pan(t,n);v.zoom(r)}else{v.pan(0,0);v.zoom(1)}}function Y(e,t,n,r,i,o,a,u){l.drawItems(e,t,v,n,r,i,o,a,u)}function F(e,t,n,r,i,o,a){c.drawItems(e,v,t,n,r,i,o,a)}function z(e,t,n,r,i,o,u,s,f){d.drawItems(e,v,t,n,r,i,o,u,s,w,a,e.useAbsolutePosition,f)}function P(){f.bindFramebuffer(f.FRAMEBUFFER,null)}function D(e){e.rebuildOptions.colours=!1;e.rebuildOptions.positions=!1;e.rebuildOptions.textures=!1;e.rebuildOptions.shadow=!1;e.rebuildOptions.all=!1}function V(){for(var e=0;e<8;e++){f.activeTexture(f["TEXTURE"+e]);f.bindTexture(f.TEXTURE_2D,null)}}function W(e){if(e&&e.texture){f.deleteTexture(e.texture);e.texture=void 0;e.ctx=void 0;e.img=void 0}}return{finish:m,isFloatingPointSupported:p,clearFramebuffers:b,clearTextureAtlas:x,render:A,drawShadowCanvas:M,getPixels:I}}function Ab(e,t){var n="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ$£1234567890() ",r=new Map;function i(){return Object.keys(o).filter((function(e){return!r.get(e)}))}for(var o={},a=0,u=n.length;a<u;a++)o[n[a]]=!0;function s(e,t){for(var n=!1,i=!1,a=0,u=e.length;a<u;a++){var s=e[a];r.get(s)?n=!0:i=!0;o[s]||(o[s]=!0)}n&&(t.imageAtlas=!0);i&&(t.textAtlas=!0)}function f(n,i,o,a,u,f,l){var c,d,h=e.unicodeAwareCharacters(n);f&&(h=rt(h,n).result);var v,g,p,m,y=!1,b={},x=[],w=l.getGlyphInfoForFont(i||o),A=0;for(v=0,g=h.length;v<g;v++){d=c=h[v].text||h[v];r.has(c)||r.set(c,Me(c));if(r.get(c)){m=t.has(c);p=t.getEmojiImage(c)}else{a&&(d+="B");m=!!(p=w[d])}if(m)x[A++]=p;else{b[c]=!0;y=!0}}y&&s(Object.keys(b),u);return x}return{getNonEmojiGlyphs:i,getGlyphsFromText:f}}function Mb(e,t){return{canvas:e,layersToDraw:[],textAtlas:null,fontIconAtlas:null,imageAtlases:[],allLayers:new Map,framebuffers:{},alpha:{background:1,ghost:1},stringSplitter:t,imageList:null}}function Ib(e,t,n,r){var i,o=n.all;if(n.all){i=[];t.layersToDraw.length=0}else i=t.layersToDraw.slice();var a={alwaysUpdate:!1,bg:!1,blatOverview:!1,drawFramebuffer:"",fbAlpha:0,id:"",numOfPrimitives:0,overview:!1,primitives:[],shadowType:0,useFramebuffer:"",useView:!1},u=null;function s(e,o){if(n.all){if(o.bg&&a&&!e.bg){a.useFramebuffer=u;u=null}a={id:e.path,blatOverview:e.blatOverview,shadowType:e.shadowType,overview:e.overview,useView:e.useView,alwaysUpdate:e.alwaysUpdate,bg:e.bg,fbAlpha:r.backgroundAlpha,primitives:[],numOfPrimitives:0,drawFramebuffer:"",useFramebuffer:""};if(e.bg){o.bg&&(u="bg");a.drawFramebuffer=u}i.push(a)}else(a=t.allLayers.get(e.path)).numOfPrimitives=0}function f(e){a.primitives[a.numOfPrimitives++]=e}e.forEach(f,s,!o,!1);if(u){a.useFramebuffer=u;u=null}return i}function Eb(e,t,n){var r=null,i=null,o=null,a=null;function u(){r=Mb(e,n);i=Ab(n,t);o=pb(r,i,t);a=wb(r);t.resetUpdatedImages()}u();function s(e,t){if(r){r.alpha.ghost=e;r.alpha.background=t}}function f(){a.finish(!0);a=null;o=null;i=null;r=null}function l(){a.finish();u()}function c(e){return a.isFloatingPointSupported(e)}function d(){a.clearFramebuffers()}function h(e){o.updateImageTextures(a,e);t.imagesUpdated()}function v(e,t,n){var i=Ib(e,r,t,n);o.generate(i,t,n,a)}function g(e,t,n,i,o,u){a.render(e,t,r.textAtlas,r.fontIconAtlas,r.imageAtlases,n,i,o,c(n._rendering.disableFloatTexture),u)}function p(e,t,n,i,o){return a.getPixels(e,t,r.textAtlas,r.fontIconAtlas,r.imageAtlases,n,i,o,c(n._rendering.disableFloatTexture))}function m(e,t){return a.drawShadowCanvas(e,t)}return{build:v,clearFramebuffers:d,destroy:f,draw:g,drawShadowCanvas:m,getPixels:p,isFloatingPointSupported:c,setAlpha:s,shutdownAndReset:l,updateTextures:h}}function kb(){var e=new Map;function t(){e=null}function n(t){var n=e.get(t);if(!n){n=Ee(Ie(t));e.set(t,n)}return n}function r(e){return n(e).length}function i(e,t){return n(e).slice(0,Math.max(t,0)).join("")}return{destroy:t,unicodeAwareCharacters:n,unicodeAwareLength:r,unicodeAwareTruncate:i}}var Cb=8888;function Sb(e,t,i,o,a){var u,s,f=yg(Eg,!1,o),l=kb(),c=e.id,v=e.containerElement,g=void 0!==v,p=e.type;g||(u=e.elementToReplace);var m=!1;(v||u)&&(m=r(v||u));function y(e,t,n){var r,i=document.createElement("canvas");if(n&&m){i.dir="rtl";document.body.appendChild(i);i.style.display="none"}r=a?document.createElement("canvas").getContext("2d"):i.getContext("2d");i.context2d=r;i.height=t;i.width=e;return i}function b(){if(!xn.minimumFontChecked){for(var e="Hello",t=y(100,100).context2d,n=!1,r=function(n){Mn(t,n);return t.measureText(e).width},i=r(1),o=2;!n&&o<30;){(n=i!==r(o))&&wn(o-1);o++}An(!0)}}function x(e){var t=w;"map"in k&&k.map().isShown()&&(t=k.privateGetMapContainer());t.style.cursor=e}var w=y(t,i,!0);w.style.display="block";var A=w.context2d;w.setAttribute("id",c);var M=null;if(a&&Zp()&&"chart"===p){M=Eb(w,f,l);w.webgl=!0}if(v)v.appendChild(w);else if(!g){u.style.display="block";u.parentNode.replaceChild(w,u)}w.canvas=!0;var I=w;if(w.webgl){A.webgl=!0;A.webglCanvas=w}else A.webgl=!1;tr(w,A,a,!!v);b();var E,k,C=I.getAttribute("style")||"";C+="touch-action: none; outline: none;";I.setAttribute("style",C);I.setAttribute("tabindex",""+Cb++);var S={},T={id:R,privateGetContainer:B,privateGetElement:Z,privateGetWebGLRenderer:O,privateInternalSetSize:G,privateSetContainer:L};E="chart"===p?vp(c,f,S,T,M,l):Fm(c,f,S,T);function R(){return c}n(k=E.api,(function(e,t){-1===t.indexOf("private")&&(S[t]=e)}));S.id=R;k.privateInit(A,t,i,y,x,Eg,Y);function L(e){(v=e)&&(m=r(v))}function B(){return v}function G(e,t){"privateMapSetSize"in k&&k.privateMapSetSize(e,t);I.width=e;I.height=t;var n=v&&k.privateUseAutoSizing();tr(I,A,a,!!n);k.privateSetSize(A,e,t,!!n)}function O(){return M}function Z(){return w}function Y(){h(s);s=d(F)}function F(){if(!!I.parentElement){if(v&&v.clientWidth>0&&v.clientHeight>0){var e=v.clientWidth*devicePixelRatio,t=v.clientHeight*devicePixelRatio;if(I._currentWidth!==e||I._currentHeight!==t){I._currentWidth=e;I._currentHeight=t;qb(I,v.clientWidth,v.clientHeight)}}try{k.update()}finally{s=d(F)}}}k.privateBind("forceRedraw",(function(e){k.privateTrigger("redraw",e);k.update()}));s=d(F);return{element:w,publicApi:S,privateApi:k,actions:E.actions}}function Tb(e,t,n){var r={},i=0,o={};void 0!==e&&u();function a(t,n){for(var r=[],i=0;i<t[n].length;i++){var o=zg(t[n][i],e);r.push({id:t[n][i].identifier,x:o.x,y:o.y})}return r}function u(){Yg(e,"contextmenu",(function(e){Vg(e);return!1}));Yg(e,"dragover",(function(e){var n=zg(e);t.dragover(n.x,n.y)}));function u(n,r){Yg(e,n,(function(e){t[n](a(e,"targetTouches"),a(e,"changedTouches"));r&&e.preventDefault()}))}function s(t){Yg(e,t,(function(e){e.preventDefault()}))}function f(n){Yg(e,n,(function(e){t[n](e.scale,e.rotation);e.preventDefault()}))}if("onpointerdown"in document.documentElement){s("touchstart");s("touchmove");s("touchend");s("touchcancel")}else if("ontouchstart"in document.documentElement){u("touchstart",!0);u("touchmove");u("touchend");u("touchcancel");f("gesturestart");f("gesturechange");f("gestureend")}var l=null;function c(t,n){var o=t.pointerId||0,a=Pg(t,l||e);switch(n){case"ADD":r[o]||(r[o]={id:o,x:a.x,y:a.y});break;case"DEL":if(r[o]){delete r[o];i--}break;case"MOVE":r[o]&&(r[o]={id:o,x:a.x,y:a.y})}return K(r)}function d(t,n){var i=t.pointerId||0,o=Pg(t,l||e),a=[];switch(n){case"ADD":case"MOVE":a=[{id:i,x:o.x,y:o.y}];break;case"DEL":r[i]&&(a=[r[i]])}return a}function h(e){return e.pointerType===(e.MSPOINTER_TYPE_TOUCH||"touch")}function v(){o[e.id]=new MSGesture;o[e.id].target=e}var g=1,p=0;function m(){g=1;p=0}function y(e,n){
return function(r){if(h(r)){t[e](c(r,n));r.preventDefault()}}}function b(e,n){function r(r){if(h(r)){var i="DEL",o=d(r,i);t[e](c(r,i),o);n||r.preventDefault();l=null}}return r}if(window.PointerEvent){Yg(e,"pointerdown",(function(n){if(h(n)){l=e;if("undefined"!=typeof MSGesture){o[e.id]&&o[e.id].target||v();o[e.id].addPointer(n.pointerId)}i++;t.touchstart(c(n,"ADD"));n.preventDefault()}else{o[e.id]&&(o[e.id]=null);i=0;r={}}}));Yg(e,"pointermove",y("touchmove","MOVE"));Yg(e,"pointerup",b("touchend"));Yg(e,"pointercancel",b("touchcancel"));Yg(e,"MSHoldVisual",(function(e){e.preventDefault()}));Yg(e,"MSGestureStart",(function(e){i>1&&e.preventDefault()}));Yg(e,"MSGestureChange",(function(e){if(i>1&&e.detail!==e.MSGESTURE_FLAG_INERTIA){g*=e.scale;p+=e.rotation*(180/Math.PI);t.gesturechange(g,p);e.preventDefault()}}));Yg(e,"MSGestureEnd",(function(e){t.gestureend(g,p);m();e.preventDefault()}))}Yg(e,"dblclick",(function(n){if(!((navigator.msMaxTouchPoints||navigator.maxTouchPoints)&&("touch"===n.pointerType||"pen"===n.pointerType))){var r=zg(n,e);t.dblclick(r.x,r.y,n.ctrlKey,n.shiftKey);n.preventDefault()}}));var x=null,w=null;Yg(e,"mousedown",(function(n){x=e;if(0===i){var r=zg(n,e);t.mousedown(n.button,r.x,r.y,n.ctrlKey,n.shiftKey)}}));Yg(e,"click",(function(n){if(0===i){var r=zg(n,e);t.click(n.button,r.x,r.y,n.ctrlKey,n.shiftKey)}}));Yg(e,"mouseup",(function(n){x=null;var r=zg(n,e);t.mouseup(r.x,r.y,n.ctrlKey,n.shiftKey);if(w){A("mouseup");w=null}}));n.mouseup=function(e){if(x){var n=zg(w?w.evt:e,x);t.mouseup(n.x,n.y,e.ctrlKey,e.shiftKey);w=null;x=null}};n.pointerup=b("touchend",!0);Yg(document,"mouseup",n.mouseup);Yg(document,"pointerup",n.pointerup);Yg(e,"mouseout",(function(t){w={element:e,evt:t}}));function A(n){var r=w.evt,i=w.element;if(e!==i&&null!==i&&t){var o=Pg(r,i);t[n](o.x,o.y,r.ctrlKey,r.shiftKey)}}Yg(e,"mousemove",(function(n){var r=zg(n,e);t.mousemove(r.x,r.y,n.ctrlKey,n.shiftKey)}));function M(n){var r=zg(n,e);t.mousewheel(-n.deltaY,r.x,r.y);Vg(n)}Yg(e,"wheel",M);Yg(e,"keyup",(function(e){t.keyup(e.keyCode)}));Yg(e,"keydown",(function(e){var n=!1;(n=n||t.keydown(e.keyCode,e.ctrlKey,e.shiftKey))&&e.preventDefault&&e.preventDefault()}))}}var Rb={},Lb={},Bb="";function Gb(e){e in Rb&&delete Rb[e]}var Ob="auto";function Zb(e){e&&(Ob=e);return Ob}function Yb(){for(var e,t,n,r,i,o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];switch(o.length){case 0:throw new Error("createChart called with zero arguments");case 1:case 2:e=o[0];r=o[1];if(!(i=document.getElementById(e))){Pb(e,r);return}t=i.clientWidth;n=i.clientHeight;break;default:e=o[0];t=+o[1];n=+o[2];r=o[3];if(!(i=document.getElementById(e))){Pb(e,r);return}}Kb({id:e,type:"chart",options:void 0,elementToReplace:i,containerElement:void 0},t,n,r)}function Fb(e){throw zb(e)}function zb(e){return new Error('Cannot create KeyLines component. No element with id "'+e+'" exists in the DOM')}function Pb(e,t){T(t,zb(e))}function Db(e){return+e.replace(/px$/,"")}function Vb(e,t){var n,r,i=e.containerElement||e.elementToReplace,o=e.options;function a(e){t&&d((function(){t(null,e)}))}function u(n,r){n?T(t,n):o?r.options(e.options,(function(){a(r)})):a(r)}if(i){n=i.clientWidth||Db(i.style.width);r=i.clientHeight||Db(i.style.height)}Kb(e,n,r,u)}var Wb,Xb={chart:0,timebar:0};function Ub(e,t){function n(e){return D(e)||"chart"===e||"timebar"===e}var r=Z(e),i=r.every((function(e){return n(e.type)}));r.length<1?T(t,Error("No definition passed to KeyLines.create")):i?o(r,0,[]):T(t,Error("The type of component passed to KeyLines.create is not valid"));function o(e,n,r){function i(e){var t,n=e.type?e.type:"chart",r=void 0!==e.container,i="string"==typeof e&&e||e.id||!r&&e.element&&e.element.id||jb(n);if(r){if(Rb[i])throw new Error("Component with id: "+i+" already exists");var o=e.container;if("string"==typeof o){if(!(t=document.getElementById(o)))throw new Error("Container not found, "+e.container)}else{if(null!==o&&!o.parentNode)throw new Error("Container not found, "+e.container);t=o}}if(!r){if(Nb(e.element)&&e.id)throw new Error("Cannot pass a DOM element and an id to create, please pass only one.");if(e.element&&!Nb(e.element))throw new Error("You must pass a DOM element to the components element property.")}var a={id:i,type:n,options:e.options,containerElement:t,elementToReplace:null};if(Nb(e)){n="chart";a.type=n;a.elementToReplace=e;a.elementToReplace.id=i}else if(Nb(e.element)){a.elementToReplace=e.element;a.elementToReplace.id=i}a.elementToReplace&&!a.elementToReplace.parentNode&&Fb();if(!a.elementToReplace&&!r){a.elementToReplace=document.getElementById(i);a.elementToReplace||Fb(i)}return a}var a;try{a=i(e[n])}catch(e){T(t,e);return}Vb(a,(function(i,a){if(i)T(t,i);else{r.push(a);var u=n+1;if(u>=e.length){var s=1===r.length?r[0]:r;t&&t(null,s)}else o(e,u,r)}}))}}function Nb(e){return"object"==typeof e&&null!==e&&("object"==typeof HTMLElement&&e instanceof HTMLElement||1===e.nodeType)}function jb(e){Xb[e]++;var t="KeyLines-"+e+"-"+Xb[e];return Rb[t]||document.getElementById(t)?jb(e):t}function Kb(e,t,n,r){Gb(e.id);var i=t||100,o=n||100;if("canvas"!==Ob&&"chart"===e.type&&Zp())try{Jb(e,i,o,!0,r)}catch(t){Gp();Jb(e,i,o,!1,r)}else if(_b())Jb(e,i,o,!1,r);else{r("Could not create HTML5 canvas.")}}function Hb(e){e&&(Bb=e);return Bb}function _b(){var e=document.createElement("canvas");return!(!e.getContext||!e.getContext("2d"))}function Jb(e,t,n,r,i){var o=e.id;try{var a=Sb(e,t,n,Bb,r);Rb[o]=a.publicApi;Lb[o]=a.privateApi;var u=a.actions;a.privateApi.privateSetRemoveComponentReference((function(){delete Rb[o];delete Lb[o]}));var s={};Lb[o].privateSetGlobalEvents(s);Tb(a.element,u,s)}catch(e){if(i){i(e);return}}Rb[o].webgl=r;Rb[o].canvas=!0;i&&i(null,Rb[o])}function Qb(e,t,n){var r=Nb(e)?e:document.getElementById(e);if(!r)throw new Error("You must pass a valid id or DOM element.");var i=Math.round(t),o=Math.round(n);if(!(i<=0||o<=0)){var a=r.id,u=Lb[a];if(u){if(void 0!==u.privateCanvasApi.privateGetContainer()){var s="KeyLines.setSize cannot be used on components created with the ";s+="container property, ";s+="the component will automatically resize to fill its container.";throw new Error(s)}qb(r,t,n)}else{r.style.width=t+"px";r.style.height=n+"px"}}}function qb(e,t,n){if(!b(t)||!b(n))throw new Error("KeyLines.setSize: Invalid width or height value passed. Both parameters should be numbers.");var r=e.id,i=Lb[r];if(i){i.privateCanvasApi.privateInternalSetSize(t,n);var o=i.privateCanvasApi.privateGetWebGLRenderer();o&&o.clearFramebuffers()}}function $b(e){e&&e.images&&Hb(e.images);return{images:Bb}}function ex(){return tx(["webkitIsFullScreen","mozFullScreen","msFullscreenElement","fullScreenElement"])}function tx(e){for(var t=z,n=0;n<e.length;n++)if(t(document[e[n]]))return!!document[e[n]];return!1}"undefined"!=typeof document&&Fg(["fullscreenchange","mozfullscreenchange","webkitfullscreenchange","MSFullscreenChange"],ax);function nx(e){var t=z;return t(document.webkitCurrentFullScreenElement)?document.webkitCurrentFullScreenElement===e:t(document.mozFullScreenElement)?document.mozFullScreenElement===e:!!t(document.msFullscreenElement)&&document.msFullscreenElement===e}function rx(){var e=z;return!!e(document.webkitCurrentFullScreenElement)||(!!e(document.mozFullScreenElement)||!!e(document.msFullscreenEnabled)&&document.msFullscreenEnabled)}function ix(e,t){for(var n,r=0;!n&&r<t.length;r++)if(e[t[r]]){n=!0;e[t[r]]()}}function ox(e){ix(e,["requestFullScreen","mozRequestFullScreen","webkitRequestFullScreen","msRequestFullscreen"])}function ax(){Wb&&requestAnimationFrame((function(){Wb(ex())}))}function ux(e,t){Wb=t;ex()&&nx(e)?ix(document,["cancelFullScreen","mozCancelFullScreen","webkitCancelFullScreen","msExitFullscreen"]):ox(e)}function sx(){if(_b()){var e=document.createElement("canvas").getContext("2d");return!!e.setLineDash||!!e.mozDash||!!e.webkitLineDash}return!1}function fx(){var e={},t=Ip({failIfMajorPerformanceCaveat:!1});if(t){e.version=t.getParameter(t.VERSION);var n=t.getExtension("WEBGL_debug_renderer_info");if(n){e.vendor=t.getParameter(n.UNMASKED_VENDOR_WEBGL);e.renderer=t.getParameter(n.UNMASKED_RENDERER_WEBGL)}}return e}function lx(){var e={account:"Licensed to Gorilla Technology Inc. for CDR Link Analysis ",eventErrors:{},isUsingWebGL:{},mode:Zb(),options:{},paths:a($b()),version:"KeyLines v5.10.2-53142 sdk"};Object.keys(Rb).forEach((function(t){var n=Rb[t];e.eventErrors[t]=n.getErrors();e.isUsingWebGL[t]=!!n.webgl;e.options[t]=n.options()}));if("undefined"!=typeof navigator){e.platform=navigator.platform;e.userAgent=navigator.userAgent}if("undefined"!=typeof window){e.url=document.location.href;e.webgl=fx()}return e}function cx(e){var t=Wc(cr()),r=F(e,{selfLinks:!1}),i=Ma({numbers:{x:!0,y:!0},strings:{id:!0,id1:!0,id2:!0},booleans:{hi:!0,a1:!0,a2:!0}});function o(e){function t(t){var o=a(t);i.typeCheck(o);var u=i.filterNodesAndLinks(o.items,{},{},{selfLinks:r.selfLinks,filterComboNodes:!0});i.ensureHiddenItemConsistency(u.nodes,u.links);n(u.nodes,(function(e){delete e.parentId}));n(u.links,(function(e){delete e.parentId}));e.privateSetProperties(u.nodes,u.links)}return t}function u(e){function t(){var t={};e.privateSetProperties(t,t)}return t}var s={load:o(t),clear:u(t)};return qn(qn({},t),s)}var dx,hx,vx="undefined"!=typeof window?window:global,gx="",px=!1,mx=["create"],yx=["arrange","createLink","filter","foreground","range","animateProperties","expand","hide","layout","load","merge","options","pan","ping","setItem","setProperties","show","toDataURL","viewOptions","zoom"],bx=["combo","getGraphEngine","graph","map"],xx=["arrange","betweenness","close","closeness","combine","hide","transfer","open","options","show","uncombine"];function wx(e,t,n){if(!px){dx=vx.Promise;hx=dx}n&&(gx=n);if(null==hx&&!dx&&!e)throw Error("[promisify] There's no valid Promise constructor available. It is not possible to promisify.");if(!kx(e))throw Error("[promisify] Promise constructor not valid. Please use a valid Promise implementation.");dx=e||hx;if(!px){Ax(t,mx,bx);K(t.components||{}).forEach((function(e){Ax(e,yx,bx)}))}px=!0}function Ax(e,t,n){t.forEach((function(t){e[t]&&(e[t+gx]=Mx(e[t],t,"create"===t))}));n&&n.forEach((function(t){e[t]&&(e[t+gx]=Ex(e[t],xx))}));return e}function Mx(e,t,n){return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var o=Math.max(0,e.length-1);return Ix(t,r)?e.apply(void 0,r):new dx((function(t,i){if(r.length===e.length&&A(r[o])){r.pop();p("A callback has been passed, but the function will return a Promise instead")}function a(e,n){if(e)return i(e);var r=Array.isArray(n),o=(r?n:[n]).map((function(e){return Ax(e,yx,bx)}));return t(r?o:o[0])}r[o]=n?a:t;e.apply(void 0,r)}))}}function Ix(e,t){return!(!/options$/i.test(e)||!D(t[0]))||"range"===e&&!t.length}function Ex(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(void 0,n),o={},a=Q(t);Object.keys(i).forEach((function(e){e in a?o[e+gx]=Mx(i[e],e):o[e]=i[e]}));return o}}function kx(e){var t=e||dx,n=void 0!==t&&"resolve"in t&&"reject"in t;try{new t((function(e){n=n&&"function"==typeof e}))}catch(e){throw new Error("You must pass a valid promise constructor")}return n}var Cx=function(){return lr.a||lr.b},Sx={charts:Rb,createChart:Yb,imageBasePath:Hb,setCanvasPaths:function(){},promisify:function(e,t){return wx(e,this,t)},components:Rb,coords:function(e){return zg(e,document.getElementById(e.target.id))},create:Ub,dashedLineSupport:sx,fullScreenCapable:rx,getFontIcon:Vn,getGraphEngine:cx,mode:Zb,info:lx,paths:$b,setSize:Qb,toggleFullScreen:ux,webGLSupport:Zp,Rendering:{mainChannel:Cx}};"undefined"!=typeof window&&(window.KeyLines=Sx);"undefined"!=typeof global&&(global.KeyLines=Sx);return Sx}));
